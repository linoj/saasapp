# Logfile created on Tue Sep 01 11:09:21 -0400 2009REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:09:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 78ms (DB: 0) | 302 Found [http://www.example.com/infos/new]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:09:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 23ms (View: 20, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mInfo Create (32.6ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:09:25', 'title 1', 'body 1', '2009-09-01 15:09:25')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:09:25', 'title 2', 'body 2', '2009-09-01 15:09:25')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:09:25', 'title 3', 'body 3', '2009-09-01 15:09:25')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:09:25', 'title 4', 'body 4', '2009-09-01 15:09:25')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:09:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 33) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:09:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:11:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 86ms (DB: 0) | 302 Found [http://www.example.com/infos/new]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:11:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mInfo Create (0.9ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:11:56', 'title 1', 'body 1', '2009-09-01 15:11:56')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:11:56', 'title 2', 'body 2', '2009-09-01 15:11:56')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:11:56', 'title 3', 'body 3', '2009-09-01 15:11:56')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:11:56', 'title 4', 'body 4', '2009-09-01 15:11:56')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:11:56) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:11:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:13:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 4ms (DB: 0) | 302 Found [http://www.example.com/infos/new]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:13:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 15ms (View: 11, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mInfo Create (1.0ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:23', 'title 1', 'body 1', '2009-09-01 15:13:23')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:23', 'title 2', 'body 2', '2009-09-01 15:13:23')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:23', 'title 3', 'body 3', '2009-09-01 15:13:23')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:23', 'title 4', 'body 4', '2009-09-01 15:13:23')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:13:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 4ms (DB: 2) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:13:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (4.1ms)
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:13:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (5.2ms)
Rendered layouts/_user_nav (4.2ms)
Completed in 95ms (View: 16, DB: 0) | 200 OK [http://www.example.com/infos/new]
  [4;36;1mInfo Create (1.0ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:52', 'title 1', 'body 1', '2009-09-01 15:13:52')[0m
  [4;35;1mInfo Create (0.5ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:52', 'title 2', 'body 2', '2009-09-01 15:13:52')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:52', 'title 3', 'body 3', '2009-09-01 15:13:52')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:13:52', 'title 4', 'body 4', '2009-09-01 15:13:52')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:13:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mInfo Load (1.1ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (2.8ms)
Completed in 47ms (View: 24, DB: 3) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 11:13:52) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mInfo Load (0.9ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.2ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 5ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:13:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mInfo Load (0.6ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (2.5ms)
Completed in 23ms (View: 22, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:17:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (5.2ms)
Rendered layouts/_user_nav (3.6ms)
Completed in 96ms (View: 15, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 11:17:35) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mInfo Create (1.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:17:35', 'title 1', 'body 1', '2009-09-01 15:17:35')[0m
Redirected to http://www.example.com/infos/1
Completed in 28ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 11:17:35) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mInfo Load (0.6ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (3.2ms)
Completed in 40ms (View: 38, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mInfo Create (0.6ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:17:35', 'title 1', 'body 1', '2009-09-01 15:17:35')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:17:35', 'title 2', 'body 2', '2009-09-01 15:17:35')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:17:35', 'title 3', 'body 3', '2009-09-01 15:17:35')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:17:35', 'title 4', 'body 4', '2009-09-01 15:17:35')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:17:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mInfo Load (0.8ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (2.0ms)
Completed in 23ms (View: 21, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 11:17:35) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.2ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 4ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:17:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mInfo Load (0.7ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (2.3ms)
Completed in 12ms (View: 10, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:18:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (5.2ms)
Rendered layouts/_user_nav (3.6ms)
Completed in 95ms (View: 15, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 11:18:16) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mInfo Create (1.0ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:18:16', 'title 1', 'body 1', '2009-09-01 15:18:16')[0m
Redirected to http://www.example.com/infos/1
Completed in 38ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 11:18:16) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (8.1ms)
Completed in 33ms (View: 31, DB: 0) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mInfo Create (0.7ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:18:16', 'title 1', 'body 1', '2009-09-01 15:18:16')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:18:16', 'title 2', 'body 2', '2009-09-01 15:18:16')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:18:16', 'title 3', 'body 3', '2009-09-01 15:18:16')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:18:16', 'title 4', 'body 4', '2009-09-01 15:18:16')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:18:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mInfo Load (0.7ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (2.8ms)
Completed in 16ms (View: 13, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 11:18:16) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.3ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 4ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:18:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mInfo Load (0.8ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (2.5ms)
Completed in 11ms (View: 9, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:34:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:43:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 89ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:43:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:43:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:47:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:47:38) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:47:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:50:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:50:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:50:04) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:50:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 11:50:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos/new]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:50:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mInfo Create (56.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:50:05', 'title 1', 'body 1', '2009-09-01 15:50:05')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:50:05', 'title 2', 'body 2', '2009-09-01 15:50:05')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:50:05', 'title 3', 'body 3', '2009-09-01 15:50:05')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 15:50:05', 'title 4', 'body 4', '2009-09-01 15:50:05')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:50:05) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 57) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:50:05) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:57:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:57:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:57:18) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:57:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 11ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:57:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:57:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:57:44) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:57:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:59:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:59:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 7ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:59:17) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:59:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 12ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:59:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 11:59:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 11:59:54) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:59:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.4ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3e02cfd27d7c159d2799fdca6f8436c94d448ebf7b2718fd45bf62357870366c4aaee45abb1c1ce0796714ce599e2dd7ada5a821be2cbe6f21fdc22b3b239892') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 15:59:54', '33ed32914df78d0fc8e5978be180afbea4c7803e6eb04a4be42df6445ca91d6b80e5b7cde1af7e6532a6a1819279bf9bf155d7b0f6b6f31c53c8d36b9693ca9f', '2009-09-01 15:59:54', 'subscriber', 'vagZ7c5fAtIYwam67mjx', '3e02cfd27d7c159d2799fdca6f8436c94d448ebf7b2718fd45bf62357870366c4aaee45abb1c1ce0796714ce599e2dd7ada5a821be2cbe6f21fdc22b3b239892', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:59:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '66f0fa5bc40523b652be4d8ecf8315d9b8018ab36d19bef31138af24d6b9f86eb997d21c7f696ab46b974ec0a64e2259fdfa108bb2c4db621d4eaf362d495776') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 15:59:54', '52f2bea79daa623296c082515b686d4419674d771ee26801d802ddbce0890073e9cbc0db076c32ddfaa1cc4c35914ba09e70b73d1de71e3558ddbc2b0d5041d9', '2009-09-01 15:59:54', 'subscriber', 'qRzUDzpLEn8Arck-7x5Z', '66f0fa5bc40523b652be4d8ecf8315d9b8018ab36d19bef31138af24d6b9f86eb997d21c7f696ab46b974ec0a64e2259fdfa108bb2c4db621d4eaf362d495776', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 11:59:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:16:29) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:16:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 11ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1e26230dbd9635ca1883fc068a7a5b6b0895b536592ba8b92b2743c28ad3b04c8a3f9a78ef188c1526bfcec9913d9e25c7b88cf3e73acf1a93a1008ac5258e03') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:16:29', '6b29fc8ba823352ad5fb43fcb0b00feeb30523e7c2a92798ebf31a0175d8fc9d8e863e9428c323d3e4ad68ace795991d4203142b32f61c4887794bebdbbaf8c5', '2009-09-01 16:16:29', 'subscriber', 'ZA9qxZe6Z5nW9dfbFhBi', '1e26230dbd9635ca1883fc068a7a5b6b0895b536592ba8b92b2743c28ad3b04c8a3f9a78ef188c1526bfcec9913d9e25c7b88cf3e73acf1a93a1008ac5258e03', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:16:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '85c097500dc141ce78e95abe3b10239df474198553413f103657cf00acaf6f84f8b686eb251e3ff20a8e688300501f7b656a8b27bb55ad25e95f8486aa5d1aa4') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:16:29', '01593d8f4fe7ebf351ecdaa84a8a0ddf631866d15771281a66dd92141fa30f5ff68b8bb74ac412491aab3e8ca94bbb12cea5900af9f1c785fffe0755c75c2268', '2009-09-01 16:16:29', 'subscriber', '9okWXS380T1QGWqcG1EN', '85c097500dc141ce78e95abe3b10239df474198553413f103657cf00acaf6f84f8b686eb251e3ff20a8e688300501f7b656a8b27bb55ad25e95f8486aa5d1aa4', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:16:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b0e299bc05cc41e70ce306f3d980eb982048034b84e34c33cfc7c7b54e68f790ddc9d8a8ae304c7dc3707bd6ddb74156d6f319312b405197da68f4b79a51ec9a') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:17:26', '5339d29ebc72ad508cf525e1d1cba6672eef5d9574e7255439905e71bf46ef20222d5981aa1906ebcb6607c8244707b6607a18b0bf387b82cdd409808be2518a', '2009-09-01 16:17:26', 'subscriber', 'QzWWShxfK4qjOiphoMGQ', 'b0e299bc05cc41e70ce306f3d980eb982048034b84e34c33cfc7c7b54e68f790ddc9d8a8ae304c7dc3707bd6ddb74156d6f319312b405197da68f4b79a51ec9a', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:17:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 1) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8d4c12766d94e41028e5466aee1e2da74a0ace5ac5b050399797e2604605db730f69527405a1595ddea3207119eea05f6a0b65cf3db8b1070a25529c82aefeae') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:18:10', '1e153a52432ed92a892a849257fb8e4f85045f9dcef94d9a4904a24a0eeb90e9ed119609d480e497cf9304ca004690a710360db3e11d15f0f4c79869b56227c4', '2009-09-01 16:18:10', 'subscriber', 'MgLE_T8VYD_IeGEa8kFt', '8d4c12766d94e41028e5466aee1e2da74a0ace5ac5b050399797e2604605db730f69527405a1595ddea3207119eea05f6a0b65cf3db8b1070a25529c82aefeae', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:18:10) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 1) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '829de8cc92bb1b65bbebd5bbf1cec5ed588a7230387eeee29360e48c1d472546f3baadb194f2ac389d2586a8ac3951782d691fd3ed794e02a3fe90f3cc1f6bbe') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:19:18', '49bbf74268181c7bd5d6531eb3daddcbad2b247d581b74d3c7bdcc72d8330e887693c69a58062424253818a5120f9a8934307e7ccc0e6b54af271e07b52d90d4', '2009-09-01 16:19:18', 'subscriber', 'Kk8UoxrT5K8-O6ZaRgWU', '829de8cc92bb1b65bbebd5bbf1cec5ed588a7230387eeee29360e48c1d472546f3baadb194f2ac389d2586a8ac3951782d691fd3ed794e02a3fe90f3cc1f6bbe', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:19:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"generic"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 12:19:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 36ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:19:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 215ms (View: 205, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 12:19:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (4.1ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 9, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 12:19:18) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Create (0.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:19:18', 'title 1', 'body 1', '2009-09-01 16:19:18')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 12:19:18) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.4ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b604ef3b47a30d9baad4304a8db85cbe7e1823629b32bcd2d0b2924d6101b5c6c494c7e3e46e260fa32fb56195db7f98f4524c1e9f38c95d37dc5c092ac98a99') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:19:40', '78496ac11335861e9fc38f0d96e6d1a889e266475178aa2ab858f94e188d76dc44a7116db211a59ba227f5ae334a6eceb30fa7370334cf87b54df5b8f91e6572', '2009-09-01 16:19:40', 'subscriber', 'IqQt9y_myhT8mSRas0TP', 'b604ef3b47a30d9baad4304a8db85cbe7e1823629b32bcd2d0b2924d6101b5c6c494c7e3e46e260fa32fb56195db7f98f4524c1e9f38c95d37dc5c092ac98a99', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:19:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 4ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 13ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd7974d803c24771abe73c7eedb78220d25d6a4a29183c07454fb47140a244198c0792793812faff4a936e1dfe9f736046b050b2581e7b52333ad2bb238e5531a') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:21:04', '8fb35e20c282d3b6a2105e5b6c9ef0cbea1216cf8046597062ed355b05133006294270a1db51750ca17b9057096f3321bb8cf663a6f07470d357d2488f1e1707', '2009-09-01 16:21:04', 'subscriber', 'ctr7j2pOZFuSeA8EstQz', 'd7974d803c24771abe73c7eedb78220d25d6a4a29183c07454fb47140a244198c0792793812faff4a936e1dfe9f736046b050b2581e7b52333ad2bb238e5531a', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"generic"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 12:21:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 33ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.8ms)
Completed in 17ms (View: 15, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (5.0ms)
Rendered layouts/_user_nav (0.6ms)
Completed in 25ms (View: 9, DB: 1) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 12:21:04) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Create (0.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:21:04', 'title 1', 'body 1', '2009-09-01 16:21:04')[0m
Redirected to http://www.example.com/infos/1
Completed in 24ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.8ms)
Completed in 14ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'de4e4b4604beb91c28bbc76576b3ffd1c385290a2c7f83d80f5fb173a894e246d3049e7573307cc01c20b8177a4a66020c322634766a255d5648953cec967b08') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:21:04', 'ae358e519897882d5ae37469e9e6ce648b0dfc0c1b456499f37600da082689f2b401af416cf9e512a7c3d2d62975ae7e6100aaf69598430b2f6beb7880f68d3f', '2009-09-01 16:21:04', 'subscriber', 'zbwZhqGYSP5JYEJeE8fm', 'de4e4b4604beb91c28bbc76576b3ffd1c385290a2c7f83d80f5fb173a894e246d3049e7573307cc01c20b8177a4a66020c322634766a255d5648953cec967b08', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:21:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 6, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"generic"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 12:21:05) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 164ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:21:05) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 11, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.3ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:21:05', 'title 1', 'body 1', '2009-09-01 16:21:05')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:21:05', 'title 2', 'body 2', '2009-09-01 16:21:05')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:21:05', 'title 3', 'body 3', '2009-09-01 16:21:05')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:21:05', 'title 4', 'body 4', '2009-09-01 16:21:05')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:21:05) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.7ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.6ms)
Completed in 19ms (View: 11, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 12:21:05) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.4ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:21:05) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.6ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:33:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:33:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:33:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:33:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 11ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f005f7fd68084a42d646b0d3e1eb85a67f9085b07807cf103d94b79d6e29d8924e982bdeccc1785e1eae4026dccc7a1a564a962873d3dc41408efa3f3f885daf') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:33:38', 'bba0070cea38bbf7f476413f7d9d996de8025783780c8322e0bca01ee348b091aa1d65ad5fa4a1706cfb3a5ac5302c21adb7eede232edb23a1b7b2ef6b26f748', '2009-09-01 16:33:38', 'subscriber', '5zRmrs2tNeqB6O7DrK6Y', 'f005f7fd68084a42d646b0d3e1eb85a67f9085b07807cf103d94b79d6e29d8924e982bdeccc1785e1eae4026dccc7a1a564a962873d3dc41408efa3f3f885daf', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"generic"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 12:33:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 10ms (View: 9, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.5ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd118114989a405420326eaa9fcc83e23e55e4f7cef332e123c34215a98193c29ff181f9b1b128ed6b476e056b6ec73207b85b87e32c1bbc4b7fb3b752955d3dd') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (1.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:33:38', 'a0c2a80ef2b7e51b43a807541cfa448e8388764c814da3d3706403d4ec63e7d9aae9e9d7a238754934225fa6fcdb37d418f0181bea39479fce41560ff052a295', '2009-09-01 16:33:38', 'subscriber', 'whQifFftOjM9FosbF6QN', 'd118114989a405420326eaa9fcc83e23e55e4f7cef332e123c34215a98193c29ff181f9b1b128ed6b476e056b6ec73207b85b87e32c1bbc4b7fb3b752955d3dd', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 9ms (View: 7, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"generic"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 12:33:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (4.3ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 8, DB: 1) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 12:33:38) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.3ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:33:38', 'title 1', 'body 1', '2009-09-01 16:33:38')[0m
Redirected to http://www.example.com/infos/1
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.6ms)
Completed in 24ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.5ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '28a40f410ff767d0db40fc525ab6ef3a78fa94ec6462ca2d936f6acb5d3938f0900febb911f3e897bff3e0d557f74f1ebee43a0a27bcf5bb10c3a59b1e812571') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:33:38', '445f7f9a6130e36efbc6c4315cee4ff5d8370bd678e0e13d93e0108ff6bbee657dc6fc6dbea48e880254d9470c5f65794d4dd81acaaea91ce640cb6679282c1c', '2009-09-01 16:33:38', 'subscriber', 'avjfrAwPih2eSt3e6dkW', '28a40f410ff767d0db40fc525ab6ef3a78fa94ec6462ca2d936f6acb5d3938f0900febb911f3e897bff3e0d557f74f1ebee43a0a27bcf5bb10c3a59b1e812571', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 12:33:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 16ms (View: 16, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"generic"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 12:33:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:33:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 12, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mInfo Create (0.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:33:39', 'title 1', 'body 1', '2009-09-01 16:33:39')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:33:39', 'title 2', 'body 2', '2009-09-01 16:33:39')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:33:39', 'title 3', 'body 3', '2009-09-01 16:33:39')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 16:33:39', 'title 4', 'body 4', '2009-09-01 16:33:39')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:33:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (1.0ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.5ms)
Completed in 23ms (View: 14, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 12:33:39) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.2ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 12:33:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:55:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/new with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 12:55:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/users/new]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:58:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 12:58:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:58:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 12:58:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 12:58:56) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '14ad0dc4abdefce3cd62df40286089b99eed7eda32a537acb7d2249f8c25ec850ff697e506b386c2ded9b5b8ede3d520aff5d3695766b79f8ced0ecde7cb9136') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 16:58:56', '70e8fb68c52bab4e58c2c219d1f6ec0e969f561cceafc5c7b0b50c7b8605d4b79138ffe68d833caba8a6ec22f529ed2c09bf573edc02c48a8fc6265b75c2bfcc', '2009-09-01 16:58:56', 'subscriber', 'JVzyh0aLqTdVB4WQ5cDn', '14ad0dc4abdefce3cd62df40286089b99eed7eda32a537acb7d2249f8c25ec850ff697e506b386c2ded9b5b8ede3d520aff5d3695766b79f8ced0ecde7cb9136', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 290ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 12:58:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '14ad0dc4abdefce3cd62df40286089b99eed7eda32a537acb7d2249f8c25ec850ff697e506b386c2ded9b5b8ede3d520aff5d3695766b79f8ced0ecde7cb9136') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:06:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:06:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"", "password"=>""}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:06:30) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/user_sessions]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:07:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:07:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:08:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:08:21) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:08:21) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 16ms (View: 6, DB: 0) | 200 OK [http://www.example.com/user_sessions]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 13:09:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 15ms (View: 12, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 13:09:12) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bf7cad118d903f085cab870b99a3e674edb10b11f8fe166a66999bffbd37e0020f538df9753131e91eaebfa2777425968c9fe15619e75a4d31979356a6dc72d6') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:12', '20cbb02ae62edddea44fbc36b3f746df14dd92d97907588242c65e2c702bce0fec8d7522daacdaa71678ce643435f4a0504b8584facacf3590f2429dca62af54', '2009-09-01 17:09:12', 'subscriber', 'UMN6jpsjYav_p1_dIkxC', 'bf7cad118d903f085cab870b99a3e674edb10b11f8fe166a66999bffbd37e0020f538df9753131e91eaebfa2777425968c9fe15619e75a4d31979356a6dc72d6', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 255ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'bf7cad118d903f085cab870b99a3e674edb10b11f8fe166a66999bffbd37e0020f538df9753131e91eaebfa2777425968c9fe15619e75a4d31979356a6dc72d6') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:09:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a53c5b6153922d03dd39d45522398083fc5c9b1bf453acef4a813ec6cb8c7ecfeb6578e11114fe8039620a94052f479552a1b1bb111cd683ec6fb152e8ea8012') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:13', '9cd584e66543550c23da6d5f2068e41b0497c35a193bc3dc6eaef7187d3eac36575c22ccc061bd2eab016192f10c33667d03906afabc82c8115395c0f389ce40', '2009-09-01 17:09:13', 'subscriber', 'Ataxymqsd7Ci7uxp4z1j', 'a53c5b6153922d03dd39d45522398083fc5c9b1bf453acef4a813ec6cb8c7ecfeb6578e11114fe8039620a94052f479552a1b1bb111cd683ec6fb152e8ea8012', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 14ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 17ms (View: 13, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 13:09:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1ce71ef99720b999c5423589fb5d84f1222520b12aad2e1c7ae7faf1a6e820f44920286b47404ebb8f4c3b4000af4fb7f880a15a96e99b55d1d5f07344ccfc3e') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:36', 'f22199b13bfe1756f908dfc69a6b65bde00ea34a0d421f3dde31fe6c58de2c376ace73e57dbe0f8dfa4282916119630943cc262201274ce47035caa30b57500c', '2009-09-01 17:09:36', 'subscriber', 'z3nV5AlTbQj-TJMSrZyh', '1ce71ef99720b999c5423589fb5d84f1222520b12aad2e1c7ae7faf1a6e820f44920286b47404ebb8f4c3b4000af4fb7f880a15a96e99b55d1d5f07344ccfc3e', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 246ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '1ce71ef99720b999c5423589fb5d84f1222520b12aad2e1c7ae7faf1a6e820f44920286b47404ebb8f4c3b4000af4fb7f880a15a96e99b55d1d5f07344ccfc3e') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:09:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c86dc3e26f360b9a8270a2cef2970a6db2909013a4080d4b254e0e50bc0cbe8dab6028b8f7b02b3fb693c6556ea4653d850d7ee8a61eb6b72bcf733568fd88be') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:36', 'de5be53111a0324f1096343d675c51ab285b515eb5ca53e18e9fcbe7d1728b588da22277d325ce67d489d169bd542bf9e3d3ff189a4a98ea179aeebd6ba3fb81', '2009-09-01 17:09:36', 'subscriber', 'sT_JsD-ZlONzcEl7vEEZ', 'c86dc3e26f360b9a8270a2cef2970a6db2909013a4080d4b254e0e50bc0cbe8dab6028b8f7b02b3fb693c6556ea4653d850d7ee8a61eb6b72bcf733568fd88be', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:09:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 13:09:48) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 3ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '731f717b6dea60101117f8d4618c5b89735223422a4d1f0dd8fca61bfc293d658f453fc983421a862b883ef8487602d22ebd1229bebe2e2948355f8ab15109f5') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:48', 'a1b26644632810041c958b5a837fc0c2a96eb5766e924579f9fa8e3bfcb44434c355bea97c1b444dd614063e45273e0e4970c0abe8fb26cf39a7735fb635c83a', '2009-09-01 17:09:48', 'subscriber', 'F18UQ39q1v7ISVsNWVxY', '731f717b6dea60101117f8d4618c5b89735223422a4d1f0dd8fca61bfc293d658f453fc983421a862b883ef8487602d22ebd1229bebe2e2948355f8ab15109f5', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:09:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 29ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (44.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 54ms (View: 9, DB: 44) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 37ms (View: 36, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (2.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.7ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0aed7ee92956bfaa9a9cc3ca6aa440bfebef071ec5d01c8762ddb9538741f098528256a8759146797873d714fdc56142a4861b875e08609009c2f691ab9c8070') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (1.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:49', '73f555cab2aa5edb17a6029a2485eae99d068dd7436b4037be383c252bcacb791d627b35e0c879bd56170c48635c09f28de0366d0aa3adfc8bb811f31479c743', '2009-09-01 17:09:49', 'subscriber', 'Nl_Tr4WxAeYXvk-_pFZv', '0aed7ee92956bfaa9a9cc3ca6aa440bfebef071ec5d01c8762ddb9538741f098528256a8759146797873d714fdc56142a4861b875e08609009c2f691ab9c8070', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 9ms (View: 8, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:09:49) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.8ms)
Completed in 36ms (View: 33, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 13:09:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (250.1ms)
Rendered layouts/_user_nav (0.6ms)
Completed in 262ms (View: 254, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 13:09:49) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.3ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 17:09:49', 'title 1', 'body 1', '2009-09-01 17:09:49')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 13:09:49) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.3ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f3f678e8ec7aa9e884c95959c383b49febf3858af02ec7858173a638b0a9d899172713cfa36954e02956f3aeb5ae251f3d7ae95b9a7829f1e8f737474adf4bc4') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:09:50', 'ee4a028476320363e7fa99ae6b8b31055edd66dbbfaa1ad15d0601c60f4c5f02345bcfeba66406cfd57f5af20622a0fc436593279361ac2b28eb7ddc64859100', '2009-09-01 17:09:50', 'subscriber', 'fRq4uYkYRMgHYHAUw2-E', 'f3f678e8ec7aa9e884c95959c383b49febf3858af02ec7858173a638b0a9d899172713cfa36954e02956f3aeb5ae251f3d7ae95b9a7829f1e8f737474adf4bc4', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:09:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 31ms (View: 31, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:09:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (11.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 11) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:09:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 12ms (View: 10, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mInfo Create (0.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 17:09:50', 'title 1', 'body 1', '2009-09-01 17:09:50')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 17:09:50', 'title 2', 'body 2', '2009-09-01 17:09:50')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 17:09:50', 'title 3', 'body 3', '2009-09-01 17:09:50')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 17:09:50', 'title 4', 'body 4', '2009-09-01 17:09:50')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 13:09:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (1.3ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 12, DB: 3) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 13:09:50) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.6ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.2ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 11ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 13:09:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (1.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.6ms)
Completed in 16ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f7459816d57ff7a16331335eb9db3d623f9b278a14000966412f3180d8ea8a9fff471d4a5c631cf7d94c428deb02b0bab6ec74d33aaa80330cf4945b6955644a') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 17:18:22', 'c236f32266e8cc58d1b9bde2cadda453018e11618afd363cd1822bbd05eb44b87329421bd0cfa09d80970e6b28057401afc6828874a1d0dd787e83735e1ff974', '2009-09-01 17:18:22', 'subscriber', 'T7ZWG49mSlXbKXQriGCH', 'f7459816d57ff7a16331335eb9db3d623f9b278a14000966412f3180d8ea8a9fff471d4a5c631cf7d94c428deb02b0bab6ec74d33aaa80330cf4945b6955644a', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 13:18:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 13:18:22) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:18:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:18:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-01 13:18:22) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (1.2ms)
Completed in 12ms (View: 4, DB: 0) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-01 13:18:23) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-01 13:18:23) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mUser Update (0.2ms)[0m   [0mUPDATE "users" SET "updated_at" = '2009-09-01 17:18:23', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 13:18:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 14ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 17:16:26) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 13ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9c1ab8414f36b6b44cdeb3e492277c857103386c5acd25d2e282b2bc9568f97c1705b29a5c2ff4a4143f563e3ddf7f82834c9cb71d6a155421a3ab94ab14223f') LIMIT 1[0m
  [4;35;1mUser Create (1.2ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:28', 'd98e8de435459ba0fd9579bd48de3abc12e140669bfacea47acef5a91de8180bb56f4bf4d1b037c05f0177ea98113ca091b16a15e97262fe28c5b1aef6501eb6', '2009-09-01 21:16:28', 'subscriber', 'WUlhkpwt2tPIWKKcRkGe', '9c1ab8414f36b6b44cdeb3e492277c857103386c5acd25d2e282b2bc9568f97c1705b29a5c2ff4a4143f563e3ddf7f82834c9cb71d6a155421a3ab94ab14223f', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4e3c99a77506ec402469bce9903ea243a35ba6d00f958fc94338c02f547461321c078de7910448b7b4ba183ace9dd1713f660a4b8b8cfcf1e9968541a3b54475') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:28', '405d9bb170f0dfffc48b3c484455e8273472f39403c3486aa561ca57a530e8b239ec4a4b185b4560a4e764ca7501e85375348f579ca52f405b498a6254cfc849', '2009-09-01 21:16:28', 'subscriber', 'TJxVxOabAe41mO80ox3O', '4e3c99a77506ec402469bce9903ea243a35ba6d00f958fc94338c02f547461321c078de7910448b7b4ba183ace9dd1713f660a4b8b8cfcf1e9968541a3b54475', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (123.1ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 133ms (View: 126, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 17:16:28) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:28', 'title 1', 'body 1', '2009-09-01 21:16:28')[0m
Redirected to http://www.example.com/infos/1
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.6ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9eadb65b448881a5ec0ae4797f55a82d67f245d04187e21e12d9e01844bb02c5b9ea1f706e757b198f674eacf5d00b8efa28baa3e9d4cb60e900f81be238b0d2') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:28', '2d2aa3303f368922f61a7fb011db18f38e5f0ad2bf2e4c989c47d9d657f334bec85a20b2aa33e7dbbad9b7b9633fdee0f9f3ed78c2fb4242e09a5c410ba51334', '2009-09-01 21:16:28', 'subscriber', 'LQ-wo721iONqb53gowsM', '9eadb65b448881a5ec0ae4797f55a82d67f245d04187e21e12d9e01844bb02c5b9ea1f706e757b198f674eacf5d00b8efa28baa3e9d4cb60e900f81be238b0d2', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:28', 'title 1', 'body 1', '2009-09-01 21:16:28')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:28', 'title 2', 'body 2', '2009-09-01 21:16:28')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:28', 'title 3', 'body 3', '2009-09-01 21:16:28')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:28', 'title 4', 'body 4', '2009-09-01 21:16:28')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.6ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 17:16:28) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.3ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.1ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 17:16:28) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5e48e7400ec301367b39419c5dea4259884102899303ad6bf5cded7a4fed7b2a3a809a8af2f01192a61b8ae493385b83299b9b78a6aa546f5b6adb4cb926eaec') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:28', '55390e7b4109eb77a02179c8d979ecbae4911d9254cae2609af5f6f6e6956648595da2ba92b06f5d0847fd4d5bcd961306c7118b29547577f99b75403f411d69', '2009-09-01 21:16:28', 'subscriber', 'tAcpAb5DmfGIBERo9E4d', '5e48e7400ec301367b39419c5dea4259884102899303ad6bf5cded7a4fed7b2a3a809a8af2f01192a61b8ae493385b83299b9b78a6aa546f5b6adb4cb926eaec', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '5e48e7400ec301367b39419c5dea4259884102899303ad6bf5cded7a4fed7b2a3a809a8af2f01192a61b8ae493385b83299b9b78a6aa546f5b6adb4cb926eaec') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 3ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5aa8beea51633069dc9b8be950945413a68bb1973f2563f2bb84a74330d7a370a6ccf60d9a7d1e8109167e4ae16859b5db1ccd3b79e816e26891afaea53bfd71') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:29', 'ea451f6993ca7fb68d1d62dc13dbff944972ee19227bd08f31ad2df9c4249614caa3a4072840d13cbd0248170f6556986e33f45dc572c1bf69ab62912359867f', '2009-09-01 21:16:29', 'subscriber', 'HZkBVa7T2TmkljpV_1rS', '5aa8beea51633069dc9b8be950945413a68bb1973f2563f2bb84a74330d7a370a6ccf60d9a7d1e8109167e4ae16859b5db1ccd3b79e816e26891afaea53bfd71', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c4a5c3d0adfa59d7a9d313651636bd4c9468e552c7e8845c20be02d50baf89bf9d82271cdb120fc92a999085d1d77b8fc2d5d4f9832cfb5f792dbecd04eedf2f') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:29', '0ad6de96b081128a421fb0a4b89063e50fe21805719a923c436a9be772969b333d3112eea0eaf7a22940685cab67b20e7f29310d3c321e6fa39986d56209c501', '2009-09-01 21:16:29', 'subscriber', 'XnU4d76tDFHD_BpyORA1', 'c4a5c3d0adfa59d7a9d313651636bd4c9468e552c7e8845c20be02d50baf89bf9d82271cdb120fc92a999085d1d77b8fc2d5d4f9832cfb5f792dbecd04eedf2f', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 135ms (View: 134, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 3, DB: 0) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.5ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-01 17:16:29) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mUser Update (0.2ms)[0m   [0mUPDATE "users" SET "updated_at" = '2009-09-01 21:16:29', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 17:16:49) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 3ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c51f0a2ea2c51718b7efc0e8b89fec6a315c4bd0b302052753ead41310941ab71e73c221c540e7c97c167276a57fb9f121f2ce7d029652cef95b4870bcd6dbec') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:50', '6caa6c92e83b4baa72dd524606bc073ab90f2b773911ad446f77e9cd3b779c3f118f7bb541de375d7d3a110da71ade8d9608c8aaec28b64b36821155e04920ae', '2009-09-01 21:16:50', 'subscriber', '53RgbX3KIAdod8kCHFvK', 'c51f0a2ea2c51718b7efc0e8b89fec6a315c4bd0b302052753ead41310941ab71e73c221c540e7c97c167276a57fb9f121f2ce7d029652cef95b4870bcd6dbec', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '06dbb3cf08109cb4ea98caf57a36efe9b81627a9f0e270114146d8cdb6a34db9effd8e03a049607f6422c23453e556ceac2eaf0c01557a82179c518f3f1ace15') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:50', '3c3c84cb2b2bcad42fe4b232d08deb9aa21dba733a92b4a4cb77bc9d0f72081e3dc91a074934268e104533e0e64ee8e6fad39a823d2696ffc62d559cfcddb8f1', '2009-09-01 21:16:50', 'subscriber', 'COqc0r87Qmi33QAVxt5r', '06dbb3cf08109cb4ea98caf57a36efe9b81627a9f0e270114146d8cdb6a34db9effd8e03a049607f6422c23453e556ceac2eaf0c01557a82179c518f3f1ace15', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 8ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (123.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 133ms (View: 127, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-01 17:16:50) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:50', 'title 1', 'body 1', '2009-09-01 21:16:50')[0m
Redirected to http://www.example.com/infos/1
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.3ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2c3566f87539496369ea922940d2404a983f9bd1b83ca7d323f6a61e1d19fcba6d690ddcaaae63018fdb40331bb9619c0c0098c74610591c2dc6708d3ce6cf00') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:50', '31106f42a4e8c52d62822706231b6d24cf5509b08d873366fc47871ceac9b1403ca4c5b0b459cbe6dc1c9ce64c58db8090fab3cb26568393780e5315f09b923c', '2009-09-01 21:16:50', 'subscriber', 'OR6Lx-Z_2OVSqUX0-Ktq', '2c3566f87539496369ea922940d2404a983f9bd1b83ca7d323f6a61e1d19fcba6d690ddcaaae63018fdb40331bb9619c0c0098c74610591c2dc6708d3ce6cf00', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:50', 'title 1', 'body 1', '2009-09-01 21:16:50')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:50', 'title 2', 'body 2', '2009-09-01 21:16:50')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:50', 'title 3', 'body 3', '2009-09-01 21:16:50')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-01 21:16:50', 'title 4', 'body 4', '2009-09-01 21:16:50')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.6ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-01 17:16:50) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.3ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;36;1mInfo Destroy (0.4ms)[0m   [0;1mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 6, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (4.1ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 17:16:50) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6744b1d39cb283ff736aaf91997f981bffe80aea761aed8337613526e8784e451bef7498f89aa8a73c1a906a2a8c95f62fd29199870d3064eaef47852fd46bd9') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:50', 'e6726eb37e5ce721a45fe0b45ab726187d2f011f50dbc249efacae086672c7296b6b0463cc95c19437a82a9107eb5a10ac73604b398aa664ebe810b6cb7c98da', '2009-09-01 21:16:50', 'subscriber', 'YjUdlIimq0tQF6EqxGWF', '6744b1d39cb283ff736aaf91997f981bffe80aea761aed8337613526e8784e451bef7498f89aa8a73c1a906a2a8c95f62fd29199870d3064eaef47852fd46bd9', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '6744b1d39cb283ff736aaf91997f981bffe80aea761aed8337613526e8784e451bef7498f89aa8a73c1a906a2a8c95f62fd29199870d3064eaef47852fd46bd9') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 3ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a84cfebc70d8a9636caf8508fb1a3e312fe4d3e94abf5514b40f0df433bbd198340013a6a9ff6ff58c029246922446e30fcbf9e855207f40afd101326c78d85a') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:50', 'c57c1be4dd6a7cd6b35b7eadb351a3a5cb6ad5a3b9b1e260768904716dece170e89c30f4bca6cfc428de2890c367cba5386c1f987f659279e7a4b0f934a6fbb5', '2009-09-01 21:16:50', 'subscriber', 'qy93ZKQkN9bfgKTYEHch', 'a84cfebc70d8a9636caf8508fb1a3e312fe4d3e94abf5514b40f0df433bbd198340013a6a9ff6ff58c029246922446e30fcbf9e855207f40afd101326c78d85a', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '315b0c99daa24e3253ef2b552c3c630d47d0574a1e07db8770e1d6ca4f56fdf8368e4c9eb20dfd3c1b45f93e2861381e5b6c5cfc2cda5ad1763336d851362c36') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 21:16:51', '23e0254a8cbad9eb3deadff79cdd72594e71622ab080f9a4edcc5bd4c1689f62e87c04e0d43c3307516f575a504b04270d3fdda6f06eb923030c23d9d29d7dd3', '2009-09-01 21:16:51', 'subscriber', 'nlZ5NbuGlq829-IzaAcm', '315b0c99daa24e3253ef2b552c3c630d47d0574a1e07db8770e1d6ca4f56fdf8368e4c9eb20dfd3c1b45f93e2861381e5b6c5cfc2cda5ad1763336d851362c36', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 17:16:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 137ms (View: 136, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 3, DB: 0) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-01 17:16:51) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mUser Update (0.2ms)[0m   [0mUPDATE "users" SET "updated_at" = '2009-09-01 21:16:51', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 10ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 17:16:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:25:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.8ms)
Completed in 15ms (View: 12, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:25:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.3ms)
Completed in 17ms (View: 13, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:25:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:25:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.5ms)
Completed in 17ms (View: 12, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:26:10) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:26:10) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.5ms)
Completed in 16ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:27:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:27:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:32:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 15ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 18:32:27) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.4ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a4f14df03e127bca592130f5cb852149abe9d15721bf7e1086cb8c5582a64b04acf423fd32d9108d3aa112007f8a9c122db082cf03f387bc7598f7071087391c') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 22:32:28', '029a6575dc1df77b38d76b2e23d1a267ed397b1cb6c96da6d517b5f57b1aa9a603d6742f89f03a38bc133bca617ad628d0626a0dd7823a1dd27b5aec76708da9', '2009-09-01 22:32:28', 'subscriber', 'Q9dnFpV3ZuADaflpTgFa', 'a4f14df03e127bca592130f5cb852149abe9d15721bf7e1086cb8c5582a64b04acf423fd32d9108d3aa112007f8a9c122db082cf03f387bc7598f7071087391c', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 259ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'a4f14df03e127bca592130f5cb852149abe9d15721bf7e1086cb8c5582a64b04acf423fd32d9108d3aa112007f8a9c122db082cf03f387bc7598f7071087391c') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 12, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.2ms)
Completed in 11ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 18:32:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '714a7a2683f99681149cd2fbcb9d309335f53d16318f9f4c2815f652309b6175a7d1a846e78b5d910381140351576c200de8171fe6b7d8d5f74f9a184b2ad8e1') LIMIT 1[0m
  [4;36;1mUser Create (115.4ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 22:32:28', '4832df6a12b84e732d8a5459b81f221375946daa2ccf1c243218574e9acad00c2cffa038426000c07e0fc9642009b1573823e39f43328e4e5bd733421a62e421', '2009-09-01 22:32:28', 'subscriber', 'SRrY_0471TlePlGnyw17', '714a7a2683f99681149cd2fbcb9d309335f53d16318f9f4c2815f652309b6175a7d1a846e78b5d910381140351576c200de8171fe6b7d8d5f74f9a184b2ad8e1', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.3ms)
Completed in 4ms (View: 4, DB: 116) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 18:32:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '81347df13ce9a9699844c269e6b459146b9789e3416240ecef39ba87a56f9e53a98a84d3d7bd0f38f84709a88f7fd892d0c45881c2153b90166c0ce11273eccb') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 22:32:28', '65b0466a4ce2e86a08c2a07039ceeba111b07a311306088691cdbf40bf1f869678da59b0a12581734e665d5ad482104aea5da6ec6ac8c67f393dd4ead38a7da5', '2009-09-01 22:32:28', 'subscriber', 'YukEPu__nLUqldkR37hS', '81347df13ce9a9699844c269e6b459146b9789e3416240ecef39ba87a56f9e53a98a84d3d7bd0f38f84709a88f7fd892d0c45881c2153b90166c0ce11273eccb', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-01 18:32:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 3, DB: 0) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-01 18:32:28) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-01 22:32:28', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:32:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:34:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:34:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 14ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 18:54:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 18:54:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 28ms (View: 11, DB: 0) | 200 OK [http://www.example.com/signup]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-01 23:17:30', 0, '2009-09-01 23:17:30', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-01 23:17:30', 1000, '2009-09-01 23:17:30', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-01 23:17:30', 2500, '2009-09-01 23:17:30', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:17:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 24ms (View: 21, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 19:17:31) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.6ms)
Completed in 16ms (View: 11, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 19:17:31) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7bd4a39bd2464eed8ed4c9d9f988434052a9d6636153275972f13d7ab513fa0cbdf59ee0f6baf93d5e9178909555583c5b0c82338b2228321e750e04d1e5c37c') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 23:17:31', '43d8cf128b5721b3002886e81c82e94debc373736fef584b1b4bd648a48a667fa5f97a133be8ace6e7f59247c786e6cd139cb1c391283930ed43ebaa15deaccb', '2009-09-01 23:17:31', 'subscriber', 'PA1QGcfzkSK0f64mf0KH', '7bd4a39bd2464eed8ed4c9d9f988434052a9d6636153275972f13d7ab513fa0cbdf59ee0f6baf93d5e9178909555583c5b0c82338b2228321e750e04d1e5c37c', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 292ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:17:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '7bd4a39bd2464eed8ed4c9d9f988434052a9d6636153275972f13d7ab513fa0cbdf59ee0f6baf93d5e9178909555583c5b0c82338b2228321e750e04d1e5c37c') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-01 23:29:39', 0, '2009-09-01 23:29:39', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-01 23:29:39', 1000, '2009-09-01 23:29:39', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-01 23:29:39', 2500, '2009-09-01 23:29:39', 'monthly', 't')[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-01 23:30:12', 0, '2009-09-01 23:30:12', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-01 23:30:12', 1000, '2009-09-01 23:30:12', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-01 23:30:12', 2500, '2009-09-01 23:30:12', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:30:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 19:30:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 17ms (View: 11, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 19:30:13) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '77ff87bfd5b43680fcdc9302f5b6d8b4be5514d7e82bf8daf8cc474226b40bab5ccbd526301c47f6d0aca792146fe64e4aad6f575357f9e3ffd720f878e22be8') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 23:30:13', 'be65b56afd538f60da5db8ade64b81dadf513bc71ac9b3c7d04b2ac9d09de4e7de9c0ad84e05543baf31b542852eb349048f8fb6236c02b9e638e2fb18d3237e', '2009-09-01 23:30:13', 'subscriber', 'WdOB9nZIkOFW_WQly3Ak', '77ff87bfd5b43680fcdc9302f5b6d8b4be5514d7e82bf8daf8cc474226b40bab5ccbd526301c47f6d0aca792146fe64e4aad6f575357f9e3ffd720f878e22be8', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 234ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:30:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '77ff87bfd5b43680fcdc9302f5b6d8b4be5514d7e82bf8daf8cc474226b40bab5ccbd526301c47f6d0aca792146fe64e4aad6f575357f9e3ffd720f878e22be8') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-01 23:30:40', 0, '2009-09-01 23:30:40', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-01 23:30:40', 1000, '2009-09-01 23:30:40', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-01 23:30:40', 2500, '2009-09-01 23:30:40', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:30:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 14ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 19:30:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.6ms)
Completed in 18ms (View: 11, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 19:30:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c5b3a38b3ed297231926847e7897e2657091fc3a8077c6f37ba5f8fee1a5a8187e96899d27b071258ec50432722b0363ab16721e258b3cd5bd7dcab55f4748bd') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 23:30:40', 'ccdcee42176fd18f91b49fb1a8eb5f3cf16b5ca738e0d387a61e23ea17c7836909c40f112d7422f912a989920afcd61da5134577377e1c82b1be3fae1398d7a3', '2009-09-01 23:30:40', 'subscriber', '9pOjpf2p6zB-vlMCzIlb', 'c5b3a38b3ed297231926847e7897e2657091fc3a8077c6f37ba5f8fee1a5a8187e96899d27b071258ec50432722b0363ab16721e258b3cd5bd7dcab55f4748bd', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 233ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:30:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'c5b3a38b3ed297231926847e7897e2657091fc3a8077c6f37ba5f8fee1a5a8187e96899d27b071258ec50432722b0363ab16721e258b3cd5bd7dcab55f4748bd') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-01 23:31:07', 0, '2009-09-01 23:31:07', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-01 23:31:07', 1000, '2009-09-01 23:31:07', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-01 23:31:07', 2500, '2009-09-01 23:31:07', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:31:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 19:31:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 18ms (View: 11, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 19:31:07) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f20ddcd6d6433358eba69fe99d9bf0b67af0a29c2cb4720b45f1f5998a4aba61bcba76bd925756eabf62988d280e8d6db786630d0b57dadeb17843a87a788b1a') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-01 23:31:08', '240359202aebfbe241183f92d2fef0a74131258fea1ea6dafabfa5935946dae37edbc542505a693849cfff7ae545e6afdfcec5042f29bf2cc6f1f391c3e24e6a', '2009-09-01 23:31:08', 'subscriber', 'NGF50eFtobPpdEyQgenw', 'f20ddcd6d6433358eba69fe99d9bf0b67af0a29c2cb4720b45f1f5998a4aba61bcba76bd925756eabf62988d280e8d6db786630d0b57dadeb17843a87a788b1a', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 232ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 19:31:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'f20ddcd6d6433358eba69fe99d9bf0b67af0a29c2cb4720b45f1f5998a4aba61bcba76bd925756eabf62988d280e8d6db786630d0b57dadeb17843a87a788b1a') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:15:52', 0, '2009-09-02 00:15:52', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:15:52', 1000, '2009-09-02 00:15:52', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:15:52', 2500, '2009-09-02 00:15:52', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:15:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:15:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 19ms (View: 10, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:15:52) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '985d348027b68c653adc78c2501bdd206a65a59dfbc0e197b9a7671c8c3c2a7238af67aa5c7ccf2a21d23a17339f40f179cc0b526df52370c8554439f051ce53') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:15:52', '1bed350788a6f609f93197fd4cc625c9c0f7c7870f6c3317b54da8fd48e234abc6207d3a0edebba70e164d3b67576e33c22c2fdf3b3bb732cadeb5bd33407022', '2009-09-02 00:15:52', 'subscriber', 'cokIqyDd5EEo7rofup8y', '985d348027b68c653adc78c2501bdd206a65a59dfbc0e197b9a7671c8c3c2a7238af67aa5c7ccf2a21d23a17339f40f179cc0b526df52370c8554439f051ce53', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 300ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:15:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '985d348027b68c653adc78c2501bdd206a65a59dfbc0e197b9a7671c8c3c2a7238af67aa5c7ccf2a21d23a17339f40f179cc0b526df52370c8554439f051ce53') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:17:33', 0, '2009-09-02 00:17:33', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:17:33', 1000, '2009-09-02 00:17:33', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:17:33', 2500, '2009-09-02 00:17:33', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:17:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:17:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 19ms (View: 11, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:17:33) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '75e212334ce6342cecd0b354b613d57bca86b20be797907640574a570c83ee7345a5717b485e26b0700c841a98a5cab771e491033550559a51e08bee13c57dc2') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:19:41', '717bd9c467f80ca413a2cc3bfde1a7dde5eff20c27aa66cddcf97547269c660e534cb2dfa858f934006c9ad60ee066df906577d41bd65c2da1a6b9c01bb872c0', '2009-09-02 00:19:41', 'subscriber', 'OTmLvfbSj7PTV8_aIhVg', '75e212334ce6342cecd0b354b613d57bca86b20be797907640574a570c83ee7345a5717b485e26b0700c841a98a5cab771e491033550559a51e08bee13c57dc2', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 128530ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:19:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '75e212334ce6342cecd0b354b613d57bca86b20be797907640574a570c83ee7345a5717b485e26b0700c841a98a5cab771e491033550559a51e08bee13c57dc2') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:22:46', 0, '2009-09-02 00:22:46', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:22:46', 1000, '2009-09-02 00:22:46', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:22:46', 2500, '2009-09-02 00:22:46', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:22:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:22:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 19ms (View: 11, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:22:46) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '17a0bb5a8f9c1f1f49a4842c57eb3744004ec17af8b4b67f032399a21c767d10bd2fcdfee40afcd90d69c659c96cb68803c94c6521f454b14e3cd20f06100c2f') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:22:48', 'c375257f9edeb1e45af25436bd4a5cf7e4eae0b15ca60c0c8289b5e0cbac48d4348ed64dcdc6947a14907302b617c677c393f9358432f3985a5106c22b6eaf61', '2009-09-02 00:22:48', 'subscriber', 'X6s0eHkJFIEztmb7VGq5', '17a0bb5a8f9c1f1f49a4842c57eb3744004ec17af8b4b67f032399a21c767d10bd2fcdfee40afcd90d69c659c96cb68803c94c6521f454b14e3cd20f06100c2f', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 2500ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:22:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '17a0bb5a8f9c1f1f49a4842c57eb3744004ec17af8b4b67f032399a21c767d10bd2fcdfee40afcd90d69c659c96cb68803c94c6521f454b14e3cd20f06100c2f') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:23:21', 0, '2009-09-02 00:23:21', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:23:21', 1000, '2009-09-02 00:23:21', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:23:21', 2500, '2009-09-02 00:23:21', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:23:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:23:21) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 15ms (View: 10, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:23:21) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3b20d5385ab65a43991d209ec4feeb1fb0058bdca745887cad067452c9d40f6ee46c070bd53a1fafdc2ac2d759b24b8a50b252b75a9eeb460d4758930eed9136') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:23:22', 'ca45b7086a566d9694423b074fdabbfb73a8c0ba5ce820c12fdba4f85ed1ead634a874fdf4a13b682249315dd128a3933ba110ca472bfded8d2d95dd9f8758a6', '2009-09-02 00:23:22', 'subscriber', '2z1XCEepk-GKwe2rl2ZX', '3b20d5385ab65a43991d209ec4feeb1fb0058bdca745887cad067452c9d40f6ee46c070bd53a1fafdc2ac2d759b24b8a50b252b75a9eeb460d4758930eed9136', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 1051ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:23:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '3b20d5385ab65a43991d209ec4feeb1fb0058bdca745887cad067452c9d40f6ee46c070bd53a1fafdc2ac2d759b24b8a50b252b75a9eeb460d4758930eed9136') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:23:46', 0, '2009-09-02 00:23:46', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:23:46', 1000, '2009-09-02 00:23:46', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:23:46', 2500, '2009-09-02 00:23:46', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:23:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:23:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.6ms)
Completed in 17ms (View: 11, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:23:46) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd7665f4333c24ce894ffac12879f330a9b4c4b2ceec5dd0c60912501f4eca3b2113bf26ed141fefed307bdd5b950501e951190263f4626a3a6c75c0d2c547b0f') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (30.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:31:52', 0, '2009-09-02 00:31:52', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:31:52', 1000, '2009-09-02 00:31:52', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:31:52', 2500, '2009-09-02 00:31:52', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:31:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 32) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:31:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 15ms (View: 10, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:31:52) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8f816f386bf46846c6538a1f90f84e351cd61ac88538197654444f6d636f90d6e181ce2b90a69c6760f3f584fb7fef9d3ada319be1d11b8861fda141d39dc1e0') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:31:55', 'a08b24ad7e28e175e1188df1592129f4c241b969cad584a2c0dec025eaea45fcf258f2b556122d296f20e30f6a4359567c47ed550d49ef13293e43906a611224', '2009-09-02 00:31:55', 'subscriber', 'fUUb1WgO4luDcdTja3CR', '8f816f386bf46846c6538a1f90f84e351cd61ac88538197654444f6d636f90d6e181ce2b90a69c6760f3f584fb7fef9d3ada319be1d11b8861fda141d39dc1e0', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 2875ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:31:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '8f816f386bf46846c6538a1f90f84e351cd61ac88538197654444f6d636f90d6e181ce2b90a69c6760f3f584fb7fef9d3ada319be1d11b8861fda141d39dc1e0') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:32:10', 0, '2009-09-02 00:32:10', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:32:10', 1000, '2009-09-02 00:32:10', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:32:10', 2500, '2009-09-02 00:32:10', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:32:10) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:32:10) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:32:10) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6b09c54cd6176f867fb3eecbaf2c24578cc64684a713fc37e0a6dc6439e3b50bff148fd03d617d9aceda31fa5570a85b238d923e03b703866cdae3d6c8bc6ec0') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6b09c54cd6176f867fb3eecbaf2c24578cc64684a713fc37e0a6dc6439e3b50bff148fd03d617d9aceda31fa5570a85b238d923e03b703866cdae3d6c8bc6ec0') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:41:15', 'bc59299cd95a94f2087a88ce515e47f4757b26033c86f4f259e3fcb2ea41e3a8634f85a93c76abae2fa4cb69c8a804eae2349ab981d1b0f823f3f7ea8abaf501', '2009-09-02 00:41:15', 'subscriber', '0ieU7B2ckn5DKO82PKbL', '6b09c54cd6176f867fb3eecbaf2c24578cc64684a713fc37e0a6dc6439e3b50bff148fd03d617d9aceda31fa5570a85b238d923e03b703866cdae3d6c8bc6ec0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 00:41:15', '2009-09-02 00:41:15', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, NULL)[0m
Redirected to http://www.example.com/
Completed in 544584ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:41:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '6b09c54cd6176f867fb3eecbaf2c24578cc64684a713fc37e0a6dc6439e3b50bff148fd03d617d9aceda31fa5570a85b238d923e03b703866cdae3d6c8bc6ec0') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 00:41:21', 0, '2009-09-02 00:41:21', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 00:41:21', 1000, '2009-09-02 00:41:21', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 00:41:21', 2500, '2009-09-02 00:41:21', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:41:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 20:41:21) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.5ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.3ms)
Completed in 17ms (View: 11, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 20:41:21) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b3bfb0544a75e7dba1e2dd8e606b2923852913f69928bb3b8364b11fe73556bc44d0d18ea9eba7ecd388c8c5eb43eb884fffd7c01064a14d37d9c19d8e2eee99') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 00:41:26', '01a29bc088d198c136f8f0f26090fc59ef2bef7548a0faa795740b631e01f1fd065c6436c70b38a157f86b75b3378786548b05521e24ac51595c1b47a573a9f7', '2009-09-02 00:41:26', 'subscriber', 'NQ8N6ENr1nBfBVO2n2uW', 'b3bfb0544a75e7dba1e2dd8e606b2923852913f69928bb3b8364b11fe73556bc44d0d18ea9eba7ecd388c8c5eb43eb884fffd7c01064a14d37d9c19d8e2eee99', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 4593ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 20:41:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b3bfb0544a75e7dba1e2dd8e606b2923852913f69928bb3b8364b11fe73556bc44d0d18ea9eba7ecd388c8c5eb43eb884fffd7c01064a14d37d9c19d8e2eee99') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 01:53:40', 0, '2009-09-02 01:53:40', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 01:53:40', 1000, '2009-09-02 01:53:40', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 01:53:40', 2500, '2009-09-02 01:53:40', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 21:53:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 21:53:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 15ms (View: 10, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 21:53:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd7ef7f140c1847a2a0652f64ad1ffdd31ef15def8f7abf878273ba1ffb6d4b19a28f233fd8de8df298fa7dde894ac289cd41a100cb1ab1f4fdf09a1d3865a048') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 01:53:46', 'c27808670ee98d3ed2c387b6e9b633a57138b67982839a07636987c9e8723424c2542a78c23b1e8dc35961cf2bf4fa401f15cb10d1799875404a51fb9c8776e9', '2009-09-02 01:53:46', 'subscriber', 'dbTqqMQmYGvOX64YCC6t', 'd7ef7f140c1847a2a0652f64ad1ffdd31ef15def8f7abf878273ba1ffb6d4b19a28f233fd8de8df298fa7dde894ac289cd41a100cb1ab1f4fdf09a1d3865a048', 'subscriber@example.com')[0m
Redirected to http://www.example.com/
Completed in 5990ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 21:53:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'd7ef7f140c1847a2a0652f64ad1ffdd31ef15def8f7abf878273ba1ffb6d4b19a28f233fd8de8df298fa7dde894ac289cd41a100cb1ab1f4fdf09a1d3865a048') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (1.3ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 03:01:34', 0, '2009-09-02 03:01:34', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 03:01:34', 1000, '2009-09-02 03:01:34', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 03:01:34', 2500, '2009-09-02 03:01:34', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 23:01:34) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-01 23:01:34) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 24ms (View: 18, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-01 23:01:34) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'cb4ae0bc5bfbe217b4f98b3906eaadf025b0a0b6c103b5fcc275d8db1246964b2694f67e21e844d126d5df39a924404e051f18eee6cc8e75e629324fe4e9e0ba') LIMIT 1[0m
  [4;36;1mUser Create (0.8ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 03:01:38', 'c0baf330116b21b882ddf7a3634565efef95b48585c0123c4dd5f32aa03f327e67aef9cc18c5b073daf6578a56aa394777f74f941affeb5b6dd8ac88dbac9ff6', '2009-09-02 03:01:38', 'subscriber', 'b6tyImiKoYbtSYgxW63U', 'cb4ae0bc5bfbe217b4f98b3906eaadf025b0a0b6c103b5fcc275d8db1246964b2694f67e21e844d126d5df39a924404e051f18eee6cc8e75e629324fe4e9e0ba', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 03:01:38', '2009-09-02 03:01:38', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
Redirected to http://www.example.com/
Completed in 4296ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-01 23:01:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'cb4ae0bc5bfbe217b4f98b3906eaadf025b0a0b6c103b5fcc275d8db1246964b2694f67e21e844d126d5df39a924404e051f18eee6cc8e75e629324fe4e9e0ba') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:21:13', 0, '2009-09-02 04:21:13', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:21:13', 1000, '2009-09-02 04:21:13', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:21:13', 2500, '2009-09-02 04:21:13', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:21:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:21:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.8ms)
Completed in 30ms (View: 25, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:21:13) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6bfcc04e0ddf57e8058819bb68ed5b1eb58ce2c16fb83ca2a32d3ef3ab528d5532e6047897fc7483f69ff196ccbc08ee3495d86f0d8f54e22298cd62c43bdfd3') LIMIT 1[0m
  [4;36;1mUser Create (0.8ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:21:17', '1e90d561eefdffaa82a850a16327b176909a2b7265b3db723af6cb0d357f8a2e78bb02f38b35e769593fe240a22ed63cb3a2ba647570fe8a791eded307c5bf6a', '2009-09-02 04:21:17', 'subscriber', 'uumNpSkghrHF0y7HserL', '6bfcc04e0ddf57e8058819bb68ed5b1eb58ce2c16fb83ca2a32d3ef3ab528d5532e6047897fc7483f69ff196ccbc08ee3495d86f0d8f54e22298cd62c43bdfd3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:21:17', '2009-09-02 04:21:17', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
Redirected to http://www.example.com/
Completed in 4279ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:21:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '6bfcc04e0ddf57e8058819bb68ed5b1eb58ce2c16fb83ca2a32d3ef3ab528d5532e6047897fc7483f69ff196ccbc08ee3495d86f0d8f54e22298cd62c43bdfd3') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:22:42', 0, '2009-09-02 04:22:42', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:22:42', 1000, '2009-09-02 04:22:42', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:22:42', 2500, '2009-09-02 04:22:42', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:22:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:22:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (3.2ms)
Completed in 36ms (View: 29, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:22:42) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '410b17e2053677d18e8c361912f1b196b92663a048d7bc0341eef8c9249b7a1adc90db9b87edd0cfe5776488bbc8ab9dda1d55b84be5df6696f8d2b23fb6f17b') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:22:53', '308bcca039e55db12ae9631b872bb122af908f5dd76cb380dd30eeb198349cccfc9a0607c3be3801bc492ea5261e9d66f3313e6734f4eaa7d33155bbaff1ff3f', '2009-09-02 04:22:53', 'subscriber', 'Jt8pHdOA6fmt-cUQDpGP', '410b17e2053677d18e8c361912f1b196b92663a048d7bc0341eef8c9249b7a1adc90db9b87edd0cfe5776488bbc8ab9dda1d55b84be5df6696f8d2b23fb6f17b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:22:53', '2009-09-02 04:22:53', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Redirected to http://www.example.com/
Completed in 82187ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:24:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '410b17e2053677d18e8c361912f1b196b92663a048d7bc0341eef8c9249b7a1adc90db9b87edd0cfe5776488bbc8ab9dda1d55b84be5df6696f8d2b23fb6f17b') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:24:29', 0, '2009-09-02 04:24:29', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:24:29', 1000, '2009-09-02 04:24:29', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:24:29', 2500, '2009-09-02 04:24:29', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:24:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:24:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 28ms (View: 22, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:24:29) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '117202b76687bdc7745cfd3b0e89d746754d198399ab744df4a9f83ebd63296e6f4fbdc1cf6b8faeec8f05d06977ccb92b34ab30f86f932bbbc65833bece4c5e') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:24:32', 'd3616adb1dca3c8f6a5609dea3c196b869045feb5e7546327e3a11d4e44a23a30a7d110eaa9eec79afa8577d350d9d1ec5aa1af9c11c740a9319d900ea1d8813', '2009-09-02 04:24:32', 'subscriber', 'pAniTeXsiBJUs9zgMZrz', '117202b76687bdc7745cfd3b0e89d746754d198399ab744df4a9f83ebd63296e6f4fbdc1cf6b8faeec8f05d06977ccb92b34ab30f86f932bbbc65833bece4c5e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:24:32', '2009-09-02 04:24:32', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Redirected to http://www.example.com/
Completed in 395094ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:31:05) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '117202b76687bdc7745cfd3b0e89d746754d198399ab744df4a9f83ebd63296e6f4fbdc1cf6b8faeec8f05d06977ccb92b34ab30f86f932bbbc65833bece4c5e') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:31:11', 0, '2009-09-02 04:31:11', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:31:11', 1000, '2009-09-02 04:31:11', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:31:11', 2500, '2009-09-02 04:31:11', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:31:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:31:11) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m


Processing ApplicationController#new (for 127.0.0.1 at 2009-09-02 00:31:11) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:40:04', 0, '2009-09-02 04:40:04', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (57.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:40:04', 1000, '2009-09-02 04:40:04', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:40:04', 2500, '2009-09-02 04:40:04', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:40:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 59) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:40:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (1.9ms)
Completed in 29ms (View: 22, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:40:05) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3d713a000b227d82e207f33a859533d24eebcacd60112ecdb96ec2eea6acf1cf08d10dcc1ee25451ee2ea1bc2558727a69c3bdbba3d3f9818674768f270f5788') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:40:11', '77887919971f0714fae053830fd20370a364363f55b2d243a700a09cbb17dce68c4cb9d2211609726a236d5e055b8cbc9aea04b9238e3f1e8bdb7cca4775ba37', '2009-09-02 04:40:11', 'subscriber', 'hZIvmqgMb8S3OKKGlX2N', '3d713a000b227d82e207f33a859533d24eebcacd60112ecdb96ec2eea6acf1cf08d10dcc1ee25451ee2ea1bc2558727a69c3bdbba3d3f9818674768f270f5788', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:40:11', '2009-09-02 04:40:11', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
Redirected to http://www.example.com/
Completed in 6784ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:40:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '3d713a000b227d82e207f33a859533d24eebcacd60112ecdb96ec2eea6acf1cf08d10dcc1ee25451ee2ea1bc2558727a69c3bdbba3d3f9818674768f270f5788') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:40:25', 0, '2009-09-02 04:40:25', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:40:25', 1000, '2009-09-02 04:40:25', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:40:25', 2500, '2009-09-02 04:40:25', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:40:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.4ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:40:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 30ms (View: 23, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:40:25) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9b57a937caf7e78cfa4938ab8e3f48ea51db1e3dbd4789adc0e432ce4cc452a4d410cd6239f86699aa011d1703403a9f2da6607f5e01df0a5621e1fb5df7a669') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:42:09', '3fcda9e59053cd123e5ef29aca1e691c5911519d0a987c0ba11dfcf8f373aaba50a417770272d3d661ae6266fb0b05a5eef9d9292dd58958381427904115145a', '2009-09-02 04:42:09', 'subscriber', 'tjT6VNIbOfNFrnTE0U6R', '9b57a937caf7e78cfa4938ab8e3f48ea51db1e3dbd4789adc0e432ce4cc452a4d410cd6239f86699aa011d1703403a9f2da6607f5e01df0a5621e1fb5df7a669', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:42:09', '2009-09-02 04:42:09', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 04:45:46', "state" = 'trial' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 368330ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:46:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9b57a937caf7e78cfa4938ab8e3f48ea51db1e3dbd4789adc0e432ce4cc452a4d410cd6239f86699aa011d1703403a9f2da6607f5e01df0a5621e1fb5df7a669') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:46:39', 0, '2009-09-02 04:46:39', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:46:39', 1000, '2009-09-02 04:46:39', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:46:39', 2500, '2009-09-02 04:46:39', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:46:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:46:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 31ms (View: 23, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:46:39) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '621e748a701452596727f20aaa69395bd00a8989276874a37f4152a01cb7e35ab66496ad5e706e73fec7ea92071d3201647d5b4d90659ae98ca0c5e534c9f6ee') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:46:41', '68a13f405bf14b20575c5c18c42b6ee00797d4672e09642a9f4851c6cd58f54dafc58fe1ecccc9cf9820519dbb088421dcb52e7669561fdc311526feeb019d19', '2009-09-02 04:46:41', 'subscriber', 'KagOQEr4WWXvmqtycZUO', '621e748a701452596727f20aaa69395bd00a8989276874a37f4152a01cb7e35ab66496ad5e706e73fec7ea92071d3201647d5b4d90659ae98ca0c5e534c9f6ee', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:46:41', '2009-09-02 04:46:41', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
Redirected to http://www.example.com/
Completed in 2341ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:46:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '621e748a701452596727f20aaa69395bd00a8989276874a37f4152a01cb7e35ab66496ad5e706e73fec7ea92071d3201647d5b4d90659ae98ca0c5e534c9f6ee') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:48:42', 0, '2009-09-02 04:48:42', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:48:42', 1000, '2009-09-02 04:48:42', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:48:42', 2500, '2009-09-02 04:48:42', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:48:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 14ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:48:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (3.4ms)
Completed in 31ms (View: 24, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:48:42) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bf1fd6aad578e13b60077b0499a53b5494c4caa3451b5bfff0b8293ce05a2d72bf69d31c87657cd067787ca146d5ee8c84c49aff5d4b995e6a27e5cabce18741') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bf1fd6aad578e13b60077b0499a53b5494c4caa3451b5bfff0b8293ce05a2d72bf69d31c87657cd067787ca146d5ee8c84c49aff5d4b995e6a27e5cabce18741') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:50:44', '0a30289f721fa34330fefd9f460fb783a9a0fdd2cc3066a60f8308a541ba062404a1dd0f246e4ce6c78f1573ea2601c8a7c75f6e003cd4050836a09ddc14961b', '2009-09-02 04:50:44', 'subscriber', 'R_q-IgxpDN4Ak6UokrE9', 'bf1fd6aad578e13b60077b0499a53b5494c4caa3451b5bfff0b8293ce05a2d72bf69d31c87657cd067787ca146d5ee8c84c49aff5d4b995e6a27e5cabce18741', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:50:44', '2009-09-02 04:50:44', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6f74c20f90d5a254134dacf4638337242c121278d608cf6efbd39bfbd7a321ec248ffb5dce856f29d94960196e06bb397fe330fdaa738dcab4553abb21042f81') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/new


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-02 00:52:25) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:52:31', 0, '2009-09-02 04:52:31', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:52:31', 1000, '2009-09-02 04:52:31', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:52:32', 2500, '2009-09-02 04:52:32', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:52:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:52:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 35ms (View: 27, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:52:32) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '59f463a7dd53dc7adf50fc23bf199fb376a79f6fa94528eca340ad47c37ab13b9a81f71bf58e5c5ff4f35d299132cb10c406816f0963eefbf63a514ae0819bb6') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:52:35', '1796ff1cd635344fc7ce4967f2d52eb5bc5209b46330151a7153627359b6cf7a070d504475a729c731174e13e21936c53ae5317ed9b32b14db2db73da4a3fba0', '2009-09-02 04:52:35', 'subscriber', '02i6FDZkglrYIAi96Kvg', '59f463a7dd53dc7adf50fc23bf199fb376a79f6fa94528eca340ad47c37ab13b9a81f71bf58e5c5ff4f35d299132cb10c406816f0963eefbf63a514ae0819bb6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:52:35', '2009-09-02 04:52:35', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, NULL)[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
Redirected to http://www.example.com/
Completed in 62498ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:53:34) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '59f463a7dd53dc7adf50fc23bf199fb376a79f6fa94528eca340ad47c37ab13b9a81f71bf58e5c5ff4f35d299132cb10c406816f0963eefbf63a514ae0819bb6') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (1.1ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:53:41', 0, '2009-09-02 04:53:41', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:53:41', 1000, '2009-09-02 04:53:41', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:53:41', 2500, '2009-09-02 04:53:41', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:53:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:53:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.6ms)
Completed in 34ms (View: 25, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:53:41) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3b7810969de8d43b39d528e21e21d8d1b329438302feb3429c5121d715f2da35bbc7eb32a46146974230b8f11c73ac5089489c0cd31b1ad4bd48a67f4dbfbe4b') LIMIT 1[0m
  [4;35;1mUser Create (0.9ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:54:13', '1cebad7fe7a6a56e04e41543726e92c3dfdf67689094013409e8652d1f2f21a708f366e20e06f0b113f6109214aab2b1b031fb81d26e2a825a22abf22fbfb107', '2009-09-02 04:54:13', 'subscriber', '0-EQa6a6GK6_NHSYGGCO', '3b7810969de8d43b39d528e21e21d8d1b329438302feb3429c5121d715f2da35bbc7eb32a46146974230b8f11c73ac5089489c0cd31b1ad4bd48a67f4dbfbe4b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:54:13', '2009-09-02 04:54:13', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
Redirected to http://www.example.com/
Completed in 44124ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:54:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '3b7810969de8d43b39d528e21e21d8d1b329438302feb3429c5121d715f2da35bbc7eb32a46146974230b8f11c73ac5089489c0cd31b1ad4bd48a67f4dbfbe4b') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:56:48', 0, '2009-09-02 04:56:48', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (68.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:56:48', 1000, '2009-09-02 04:56:48', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:56:48', 2500, '2009-09-02 04:56:48', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:56:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 69) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:56:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.6ms)
Completed in 33ms (View: 24, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:56:48) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9cd3260367cf04a93e83c5337c417b5c39ddef8d018688918d73cb02544a029a888b3bde61366284410a4ae878b3d375cfcb4c2d107dbaab55cf6761015d8c5c') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 04:56:51', '57ff2d35c347bf572d18afc6fb0825bac1c6ab309a9c9950c0e7bbda58f9002874229f47f411d7a15efda3ee6a03f447b99aa449257ce40e666daa66c06534a9', '2009-09-02 04:56:51', 'subscriber', 'F92Iz9_ZrUTbogs2D5Ju', '9cd3260367cf04a93e83c5337c417b5c39ddef8d018688918d73cb02544a029a888b3bde61366284410a4ae878b3d375cfcb4c2d107dbaab55cf6761015d8c5c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:56:51', '2009-09-02 04:56:51', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
Redirected to http://www.example.com/
Completed in 2942ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:56:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9cd3260367cf04a93e83c5337c417b5c39ddef8d018688918d73cb02544a029a888b3bde61366284410a4ae878b3d375cfcb4c2d107dbaab55cf6761015d8c5c') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 04:58:54', 0, '2009-09-02 04:58:54', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 04:58:55', 1000, '2009-09-02 04:58:55', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 04:58:55', 2500, '2009-09-02 04:58:55', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 00:58:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 12, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 00:58:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 34ms (View: 24, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 00:58:55) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscription Create (0.0ms)[0m   [0mSQLite3::SQLException: subscriptions.subscriber_id may not be NULL: INSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:59:25', '2009-09-02 04:59:25', NULL, NULL, NULL, NULL, NULL, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'trial')[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b25345eac44712a91be3eb8d2fed3b25b19e3333831588973a6e98e5e3c07c405fbc824f47409701c70b905b3d72dc50a77386a390a2862b9bb16c9be35344cc') LIMIT 1[0m
  [4;36;1mUser Create (0.3ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 05:00:37', '00e7c904e760fedc71710a724fa625c2a84d397a0041628db7a8a032b6f159c9b6f1d737d3982e14ddb3781bd5eeeca805b682c5022bcfc05d0ea26bb742a0e9', '2009-09-02 05:00:37', 'subscriber', 'Cju7lCdFUCj51pBGo8UX', 'b25345eac44712a91be3eb8d2fed3b25b19e3333831588973a6e98e5e3c07c405fbc824f47409701c70b905b3d72dc50a77386a390a2862b9bb16c9be35344cc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 04:59:25', '2009-09-02 04:59:25', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'trial')[0m
Redirected to http://www.example.com/
Completed in 101891ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 01:00:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b25345eac44712a91be3eb8d2fed3b25b19e3333831588973a6e98e5e3c07c405fbc824f47409701c70b905b3d72dc50a77386a390a2862b9bb16c9be35344cc') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 05:29:55', 0, '2009-09-02 05:29:55', NULL, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 05:29:55', 1000, '2009-09-02 05:29:55', 'monthly', 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 05:29:55', 2500, '2009-09-02 05:29:55', 'monthly', 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 01:29:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 01:29:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.7ms)
Completed in 35ms (View: 24, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 01:29:55) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e7195c266efe75b4153017f31bd87ea4146c9e44f67ad7905782c245822e4a0e1a8dce18f9f818db767fe9db7c5cbd2c31de84c8c3b3c896cf8e55254604a805') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 05:29:58', 'f2d17cab4032bcc7f5a7da20ffde721fcd2d8d3bb6bcd49f8077d6267d744e1a12949a3310ce359044e8b759cc3ae521d8d711cc75e07a1c6bcda4247b5f3497', '2009-09-02 05:29:58', 'subscriber', '1noHBblpr1AB1OPf4TV4', 'e7195c266efe75b4153017f31bd87ea4146c9e44f67ad7905782c245822e4a0e1a8dce18f9f818db767fe9db7c5cbd2c31de84c8c3b3c896cf8e55254604a805', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 05:29:58', '2009-09-02 05:29:58', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'trial')[0m
Redirected to http://www.example.com/
Completed in 2971ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 01:29:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'e7195c266efe75b4153017f31bd87ea4146c9e44f67ad7905782c245822e4a0e1a8dce18f9f818db767fe9db7c5cbd2c31de84c8c3b3c896cf8e55254604a805') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (1.1ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:08:28', 0, '2009-09-02 07:08:28', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (2.0ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:08:28', 1000, '2009-09-02 07:08:28', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:08:28', 30000, '2009-09-02 07:08:28', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:08:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 4) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:08:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 28ms (View: 23, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:08:28) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5a67ac38e6ba85d23fd72a200e0a28876f32b211b82e9bd3dc1047daf688b69dd3f40cb5ebb3b63eba10cfe7824667cbc73ebef8f4a19b74d704307aa8b6de6d') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:08:36', 'f08f549257fc4e303e8429557b86a392bc5bf36b9ff13aaeeaf16b06d89a325e617cf488e0b9f540938c823498bcdadee02b6a718808f6c2386ae77ee86aa23d', '2009-09-02 07:08:36', 'subscriber', 'ImaA9V1eZS3OBbCtO1ZY', '5a67ac38e6ba85d23fd72a200e0a28876f32b211b82e9bd3dc1047daf688b69dd3f40cb5ebb3b63eba10cfe7824667cbc73ebef8f4a19b74d704307aa8b6de6d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:08:36', '2009-09-02 07:08:36', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:08:36', "created_at" = '2009-09-02 07:08:36', "subscription_plan_id" = 1, "state" = 'trial', "next_renewal_at" = '2009-10-02 00:00:00', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 7362ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:08:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '5a67ac38e6ba85d23fd72a200e0a28876f32b211b82e9bd3dc1047daf688b69dd3f40cb5ebb3b63eba10cfe7824667cbc73ebef8f4a19b74d704307aa8b6de6d') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (1.0ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:09:11', 0, '2009-09-02 07:09:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:09:11', 1000, '2009-09-02 07:09:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:09:12', 30000, '2009-09-02 07:09:12', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:09:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.2ms)
Completed in 14ms (View: 11, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:09:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 37ms (View: 31, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:09:12) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2fece6e8ed68f90ab15b09287c1ff8ace88d9c40fc89bc52ddfb149fadb5a4550164117dec2265d7f29c62064bfd6e7f505c57d36f7928523d3920e82c10153f') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:09:12', 'd529680a6a5dccc4c9a75146c6d8c88c9cf371aea8610074e0d0ef935739c8ff075b0864928cae9e2b6eed0d105e701165f13a9f5106e1638870b56e606e9447', '2009-09-02 07:09:12', 'subscriber', 'Gq0IsFHIy1kV32AxVi_a', '2fece6e8ed68f90ab15b09287c1ff8ace88d9c40fc89bc52ddfb149fadb5a4550164117dec2265d7f29c62064bfd6e7f505c57d36f7928523d3920e82c10153f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:09:12', '2009-09-02 07:09:12', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:09:12', "created_at" = '2009-09-02 07:09:12', "subscription_plan_id" = 1, "state" = 'trial', "next_renewal_at" = '2009-10-02 00:00:00', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 248ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:09:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '2fece6e8ed68f90ab15b09287c1ff8ace88d9c40fc89bc52ddfb149fadb5a4550164117dec2265d7f29c62064bfd6e7f505c57d36f7928523d3920e82c10153f') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:13:23', 0, '2009-09-02 07:13:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:13:23', 1000, '2009-09-02 07:13:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:13:23', 30000, '2009-09-02 07:13:23', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:13:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:13:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.5ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 28ms (View: 21, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:13:23) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '16cdabceead3ed6832bc7418cbb4e956c178e9d8c14c4fc5041f584c19b57e2279c667dcc36e4746f3b4061d719de37d7ae3458d0f226391b0d44385f5e239f4') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:13:24', 'c275f298ce95267a264b70a61d9f24eee37b2e97c03e1abe282b11d50cc2bfe66698899eba296920c97e9bbf10d2202190b799faceb7e16dcec09f09808badff', '2009-09-02 07:13:24', 'subscriber', 'VoAnyydLuWF6yL2Fc2jM', '16cdabceead3ed6832bc7418cbb4e956c178e9d8c14c4fc5041f584c19b57e2279c667dcc36e4746f3b4061d719de37d7ae3458d0f226391b0d44385f5e239f4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:13:24', '2009-09-02 07:13:24', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:13:24', "created_at" = '2009-09-02 07:13:24', "subscription_plan_id" = 2, "state" = 'trial', "next_renewal_at" = '2009-10-02 00:00:00', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 256ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:13:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '16cdabceead3ed6832bc7418cbb4e956c178e9d8c14c4fc5041f584c19b57e2279c667dcc36e4746f3b4061d719de37d7ae3458d0f226391b0d44385f5e239f4') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:15:48', 0, '2009-09-02 07:15:48', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:15:48', 1000, '2009-09-02 07:15:48', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:15:48', 30000, '2009-09-02 07:15:48', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:15:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 14ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:15:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.7ms)
Completed in 29ms (View: 23, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:15:48) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9a365fe08d3ee904cbed6ed1c66872d18ff2fc97ad1b9f6c424a017195c6a22ef1db0cfe95b622fa08e2c9187617af01ff2e3b8546bdfe6d2fd6e428566ce37d') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:15:48', '4c9a62d1cfc5a809b28acdd426aee7ec48b125cf551fb443032288ac76183ac93819373080a9a7d5fff0d2604f44107750ed105f1cde6156e82c932c5fa7c2f5', '2009-09-02 07:15:48', 'subscriber', 'SAyO0gTiSWYmLdA09Tyh', '9a365fe08d3ee904cbed6ed1c66872d18ff2fc97ad1b9f6c424a017195c6a22ef1db0cfe95b622fa08e2c9187617af01ff2e3b8546bdfe6d2fd6e428566ce37d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:15:48', '2009-09-02 07:15:48', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:15:48', "created_at" = '2009-09-02 07:15:48', "subscription_plan_id" = 2, "state" = 'trial', "next_renewal_at" = '2009-10-02 00:00:00', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 246ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:15:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9a365fe08d3ee904cbed6ed1c66872d18ff2fc97ad1b9f6c424a017195c6a22ef1db0cfe95b622fa08e2c9187617af01ff2e3b8546bdfe6d2fd6e428566ce37d') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:18:11', 0, '2009-09-02 07:18:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:18:11', 1000, '2009-09-02 07:18:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:18:11', 30000, '2009-09-02 07:18:11', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:18:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 23ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:18:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.4ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 40ms (View: 31, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:18:12) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (1.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'dca60b4e2ad22d9cade107d1b4ccdd5f8c2b2172401cf54fe51d8185a0f924c8dba8d43fb8c20e9207ab314a8a57be028ba77498be8eb287c1077678fe4508eb') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:18:12', 'c2c266b09c4a4da9f6aec39e0f140b17d4e81e3a946a745e0acb467b65b7aee144ffc365216e061ced1c78f8dbc8cda708fbd0ec56a2ab9410f9cbaadc9eb4f8', '2009-09-02 07:18:12', 'subscriber', '9LGiJTpG7KkPO8AGPpPk', 'dca60b4e2ad22d9cade107d1b4ccdd5f8c2b2172401cf54fe51d8185a0f924c8dba8d43fb8c20e9207ab314a8a57be028ba77498be8eb287c1077678fe4508eb', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:18:12', '2009-09-02 07:18:12', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:18:12', "created_at" = '2009-09-02 07:18:12', "subscription_plan_id" = 2, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 268ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:18:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'dca60b4e2ad22d9cade107d1b4ccdd5f8c2b2172401cf54fe51d8185a0f924c8dba8d43fb8c20e9207ab314a8a57be028ba77498be8eb287c1077678fe4508eb') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:20:10', 0, '2009-09-02 07:20:10', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:20:10', 1000, '2009-09-02 07:20:10', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:20:10', 30000, '2009-09-02 07:20:10', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:20:10) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:20:10) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 30ms (View: 22, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:20:11) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5134ac2319a9966efe5bc1ade0633e517b5c21999264728b5710b13e073471f8cdaa1872d89e76bc3a4e22c1029b73555092d796ab699543d55ea5e04c486e51') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:20:11', 'a6614afa12049eb5eec71f7184226161f7a2e37f4fa67f565164e06aa5d30e952dc0df61882a39d137f75332eb91efc70ec6ac622fe5bb8a838062482e612e6a', '2009-09-02 07:20:11', 'subscriber', 'h3n1Pgo_POHmT2fHIfj-', '5134ac2319a9966efe5bc1ade0633e517b5c21999264728b5710b13e073471f8cdaa1872d89e76bc3a4e22c1029b73555092d796ab699543d55ea5e04c486e51', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:20:11', '2009-09-02 07:20:11', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:20:11', "created_at" = '2009-09-02 07:20:11', "subscription_plan_id" = 2, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 248ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:20:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '5134ac2319a9966efe5bc1ade0633e517b5c21999264728b5710b13e073471f8cdaa1872d89e76bc3a4e22c1029b73555092d796ab699543d55ea5e04c486e51') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:22:30', 0, '2009-09-02 07:22:30', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:22:30', 1000, '2009-09-02 07:22:30', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:22:30', 30000, '2009-09-02 07:22:30', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:22:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:22:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 32ms (View: 23, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:22:30) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '965f186bf0821054d4cee88bd139e407abf2460f80fd8a14c70bbc293819ac12301a61a62800c1d8961ec052b46a88364a373b5a7d6610cee1574fff79d192e2') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:22:31', '22989e84224d960e77366da48f51a0ffb00270e5d6b2536de34ba084467589f4787e2c531cd98543bc090a64bfef82ba381ceb2f4c979d59acc5f3b91ea3cb6b', '2009-09-02 07:22:31', 'subscriber', 'XpOZVd37CcPlE-IPd6qp', '965f186bf0821054d4cee88bd139e407abf2460f80fd8a14c70bbc293819ac12301a61a62800c1d8961ec052b46a88364a373b5a7d6610cee1574fff79d192e2', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:22:31', '2009-09-02 07:22:31', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:22:31', "created_at" = '2009-09-02 07:22:31', "subscription_plan_id" = 1, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 248ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:22:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '965f186bf0821054d4cee88bd139e407abf2460f80fd8a14c70bbc293819ac12301a61a62800c1d8961ec052b46a88364a373b5a7d6610cee1574fff79d192e2') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:24:31', 0, '2009-09-02 07:24:31', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:24:31', 1000, '2009-09-02 07:24:31', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:24:32', 30000, '2009-09-02 07:24:32', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:24:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:24:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.9ms)
Completed in 34ms (View: 24, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:24:32) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7ea07050f83298809f503739db4647f0ed2743658df697391cab5c9407114a9845d82ec2497f9489c5beebc5bd608cb67c7f74989728a96e5687c87b7ee60422') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:24:32', '57888c0d1d8a804208c503cfbf961e1acc76d6032bac010aa9d3d14143b982e1fd0393c684a56760ec327ba6b943e7e372177a04caae13d90f7200d264f33efe', '2009-09-02 07:24:32', 'subscriber', 'Gks9w9BpkHekYzzWD93s', '7ea07050f83298809f503739db4647f0ed2743658df697391cab5c9407114a9845d82ec2497f9489c5beebc5bd608cb67c7f74989728a96e5687c87b7ee60422', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:24:32', '2009-09-02 07:24:32', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
Redirected to http://www.example.com/
Completed in 248ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:24:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '7ea07050f83298809f503739db4647f0ed2743658df697391cab5c9407114a9845d82ec2497f9489c5beebc5bd608cb67c7f74989728a96e5687c87b7ee60422') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:26:47', 0, '2009-09-02 07:26:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (48.0ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:26:47', 1000, '2009-09-02 07:26:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:26:47', 30000, '2009-09-02 07:26:47', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:26:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 49) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:26:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 34ms (View: 24, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:26:47) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ae636f6340a65fd3a9f8e7d44b529e8f842a28017c3027f121c0b555a020458f050b4e1002c4909515b81f9bad64cc0d4cfbf98dc459663f4245162ec090f889') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:26:48', '946301e3c1ae6ee1ecb8026f1b35111933d9f4232cb2c7bda6313c086217a885284e3db68b7681be7f405f02c72e529173e6747331ec4b4bc9453baaa1676d57', '2009-09-02 07:26:48', 'subscriber', 'gCEq0hvq7CXnxOhbejZe', 'ae636f6340a65fd3a9f8e7d44b529e8f842a28017c3027f121c0b555a020458f050b4e1002c4909515b81f9bad64cc0d4cfbf98dc459663f4245162ec090f889', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:26:48', '2009-09-02 07:26:48', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:26:48', "created_at" = '2009-09-02 07:26:48', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 249ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:26:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'ae636f6340a65fd3a9f8e7d44b529e8f842a28017c3027f121c0b555a020458f050b4e1002c4909515b81f9bad64cc0d4cfbf98dc459663f4245162ec090f889') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:26:55', 0, '2009-09-02 07:26:55', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:26:55', 1000, '2009-09-02 07:26:55', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:26:55', 30000, '2009-09-02 07:26:55', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:26:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:26:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.9ms)
Completed in 33ms (View: 23, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:26:56) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.9ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a5c318fb9b5ce9e6fd45d687ae23cbc3dc24a59cd556f5e61fe61b3cd04a6e9712762a7838c8d1b03ef147fd35b16d69c8222ba41700cd1bba0685002fd81ebf') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:26:56', 'd2bc61b1775aab0f2e112f672a42122a4c2a327f54d4cf7177d5da703afb962e945acbe6b86a72f43faa834f827e0b3ad1d0815213d0534152634ffeca55183c', '2009-09-02 07:26:56', 'subscriber', 'VRZlzAsGRmOV5G6D2rBw', 'a5c318fb9b5ce9e6fd45d687ae23cbc3dc24a59cd556f5e61fe61b3cd04a6e9712762a7838c8d1b03ef147fd35b16d69c8222ba41700cd1bba0685002fd81ebf', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:26:56', '2009-09-02 07:26:56', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:26:56', "created_at" = '2009-09-02 07:26:56', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 250ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:26:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'a5c318fb9b5ce9e6fd45d687ae23cbc3dc24a59cd556f5e61fe61b3cd04a6e9712762a7838c8d1b03ef147fd35b16d69c8222ba41700cd1bba0685002fd81ebf') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:26:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:26:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 15ms (View: 8, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:26:56) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a7c2f7c5f58cbbd7981527f473040cde6984f19be71ea819566ec52a7ccc178febf11801fe39f9deb5d417d0f0aeedbb448aacb26b9402530b1cff577a69bcb2') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:26:56', 'c92d8270f621a659124ef07f3b53f1791221ecbd81a2f5a5a4ed63053b619e63144c8207ccf210a93bb65c4aab30e756410631a8761841b9ec8a6e25e564015f', '2009-09-02 07:26:56', 'subscriber', 'b-ElcOFEWuxJLlYwTl_k', 'a7c2f7c5f58cbbd7981527f473040cde6984f19be71ea819566ec52a7ccc178febf11801fe39f9deb5d417d0f0aeedbb448aacb26b9402530b1cff577a69bcb2', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:26:56', '2009-09-02 07:26:56', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:26:56', "created_at" = '2009-09-02 07:26:56', "subscription_plan_id" = 2, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:26:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'a7c2f7c5f58cbbd7981527f473040cde6984f19be71ea819566ec52a7ccc178febf11801fe39f9deb5d417d0f0aeedbb448aacb26b9402530b1cff577a69bcb2') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:50:16', 0, '2009-09-02 07:50:16', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:50:16', 1000, '2009-09-02 07:50:16', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:50:16', 30000, '2009-09-02 07:50:16', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:50:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:50:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 35ms (View: 24, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:50:16) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.7ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '668a7901325f050b2be82378e165f6324695515efd5f3a9e77b92e2ff2b66f48cce5db79befe0bb3a1cb5510cb962a9a3cb8c11480b415f50e2757d076ca2aeb') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:50:16', 'a5238571f8f08cc27c434b607a562fd357ca211d2a3ae17eb6ad0f8927ca1dcd1f64c8f4dd0f2bc9bb2444ddbd08295580791650959c4450935d361620fb8bf1', '2009-09-02 07:50:16', 'subscriber', 'UNUPNYbmE84E_EElnkN9', '668a7901325f050b2be82378e165f6324695515efd5f3a9e77b92e2ff2b66f48cce5db79befe0bb3a1cb5510cb962a9a3cb8c11480b415f50e2757d076ca2aeb', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:50:16', '2009-09-02 07:50:16', NULL, NULL, NULL, NULL, 1, NULL, 'User', 3, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:50:16', "created_at" = '2009-09-02 07:50:16', "subscription_plan_id" = 3, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 258ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:50:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '668a7901325f050b2be82378e165f6324695515efd5f3a9e77b92e2ff2b66f48cce5db79befe0bb3a1cb5510cb962a9a3cb8c11480b415f50e2757d076ca2aeb') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:54:07', 0, '2009-09-02 07:54:07', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:54:07', 1000, '2009-09-02 07:54:07', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:54:07', 30000, '2009-09-02 07:54:07', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:54:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.2ms)
Completed in 14ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:54:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (1.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 36ms (View: 24, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:54:07) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '104cc72dd6ac9f206f6a156e34f7cfe6c42438cc35640c613933d6b010d7e4dc2d458689a27ca8784eeafc4400d7a98c2501b57932d33e0df0b6d402f33084a5') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:54:08', '99a7d512ddadfeba75454fc7749ddac919b522d6aa82f7dfb51e21b57f4d0daddc9ac77f298aef87d0016822ac8fac2f9d909dc26ab86dd9737f74b5b7d53b41', '2009-09-02 07:54:08', 'subscriber', 'pJSdAnlFvIRB75TqIzpZ', '104cc72dd6ac9f206f6a156e34f7cfe6c42438cc35640c613933d6b010d7e4dc2d458689a27ca8784eeafc4400d7a98c2501b57932d33e0df0b6d402f33084a5', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:54:08', '2009-09-02 07:54:08', NULL, NULL, NULL, NULL, 1, NULL, 'User', 3, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:54:08', "created_at" = '2009-09-02 07:54:08', "subscription_plan_id" = 3, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 253ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:54:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '104cc72dd6ac9f206f6a156e34f7cfe6c42438cc35640c613933d6b010d7e4dc2d458689a27ca8784eeafc4400d7a98c2501b57932d33e0df0b6d402f33084a5') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:56:30', 0, '2009-09-02 07:56:30', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:56:30', 1000, '2009-09-02 07:56:30', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:56:30', 30000, '2009-09-02 07:56:30', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:56:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:56:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.4ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 36ms (View: 24, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:56:30) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c8d2be233da207cdc9bfd11c6a075122522527f917e25ecde60a96400cd86ec520f7c2c5537d532b7780117abe350e77635c3e32d3f52643586e18c9f18dd1f1') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:56:30', '825de5063b72c75f654bd90ac489e5a12587e59a21108393b3a3aa9d4e2abd662eb3c87feaee98b8aafe3def473d9f084158f7576cd40b3e0836ff9c563a3d52', '2009-09-02 07:56:30', 'subscriber', 'WDUJJCTKjfuBAb9wPvEO', 'c8d2be233da207cdc9bfd11c6a075122522527f917e25ecde60a96400cd86ec520f7c2c5537d532b7780117abe350e77635c3e32d3f52643586e18c9f18dd1f1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:56:30', '2009-09-02 07:56:30', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:56:30', "created_at" = '2009-09-02 07:56:30', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 250ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:56:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'c8d2be233da207cdc9bfd11c6a075122522527f917e25ecde60a96400cd86ec520f7c2c5537d532b7780117abe350e77635c3e32d3f52643586e18c9f18dd1f1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-02 07:57:24', 0, '2009-09-02 07:57:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (63.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-02 07:57:24', 1000, '2009-09-02 07:57:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-02 07:57:24', 30000, '2009-09-02 07:57:24', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 65) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.5ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 36ms (View: 24, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:57:25) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd7b71927fadbbe12ab1c4259ea292076ce5aafc2d22d79fe4560960aa6db4a474e8bde14fa1d2ea035639b3411619e415ddf53f6988ae252a8f3a955381aa180') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:57:25', '7299b8aeb44c9ff35c41c1d74b5378046edbf852976631ab8719dd9a689c01333f9038f9f4885465f8162fd48693dc591c3309ecaa02f0e793ae293538468c89', '2009-09-02 07:57:25', 'subscriber', 'baJbnJ-nbf-W7mFwBv2i', 'd7b71927fadbbe12ab1c4259ea292076ce5aafc2d22d79fe4560960aa6db4a474e8bde14fa1d2ea035639b3411619e415ddf53f6988ae252a8f3a955381aa180', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:57:25', '2009-09-02 07:57:25', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:57:25', "created_at" = '2009-09-02 07:57:25', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 247ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'd7b71927fadbbe12ab1c4259ea292076ce5aafc2d22d79fe4560960aa6db4a474e8bde14fa1d2ea035639b3411619e415ddf53f6988ae252a8f3a955381aa180') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (5.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.4ms)
Completed in 18ms (View: 9, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:57:25) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '987c83ad59d28fe32e3876e3807b97f3ec7f2402a6a70c86a8fc9e3e0c9f8de979f99193b667d09c8fa485753f4b840a32a464ba15e12d0cc03ca1a4b325649b') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:57:25', '4125427cbeb5878299536f218beac8c81d13d937731f3d936fc997d513ed35c37aa93124780d24a787b89153fd9f89006cbd06c6acb2eae594dfe233ce6642f2', '2009-09-02 07:57:25', 'subscriber', 'TE1UXhh1yXPqP2jUYVkc', '987c83ad59d28fe32e3876e3807b97f3ec7f2402a6a70c86a8fc9e3e0c9f8de979f99193b667d09c8fa485753f4b840a32a464ba15e12d0cc03ca1a4b325649b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:57:25', '2009-09-02 07:57:25', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:57:25', "created_at" = '2009-09-02 07:57:25', "subscription_plan_id" = 2, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 22ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '987c83ad59d28fe32e3876e3807b97f3ec7f2402a6a70c86a8fc9e3e0c9f8de979f99193b667d09c8fa485753f4b840a32a464ba15e12d0cc03ca1a4b325649b') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (5.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 18ms (View: 9, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 03:57:25) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '63f61ad735340bdc9b5afd91fb932a66744473d0c403d520485cd7c8288279c6b8cd51575c9e6295d0d3f60d94b22a002ef8b1691cb360893c8397dd68eb352c') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-02 07:57:25', 'ef0984c0b58e4a26825a1ca78430cb9b09f2646d42bee52408700c484e15bdc31211a33f59eceedb326b41d46c0fd46b94e6a81a599bbbfc61b27849d5534c93', '2009-09-02 07:57:25', 'subscriber', '5Duzi91PttpfOrZP_J6f', '63f61ad735340bdc9b5afd91fb932a66744473d0c403d520485cd7c8288279c6b8cd51575c9e6295d0d3f60d94b22a002ef8b1691cb360893c8397dd68eb352c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-02 07:57:25', '2009-09-02 07:57:25', NULL, NULL, NULL, NULL, 1, NULL, 'User', 3, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-02 07:57:25', "created_at" = '2009-09-02 07:57:25', "subscription_plan_id" = 3, "state" = 'trial', "next_renewal_at" = '2009-10-02', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 22ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 03:57:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '63f61ad735340bdc9b5afd91fb932a66744473d0c403d520485cd7c8288279c6b8cd51575c9e6295d0d3f60d94b22a002ef8b1691cb360893c8397dd68eb352c') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 02:35:34', 0, '2009-09-03 02:35:34', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 02:35:34', 1000, '2009-09-03 02:35:34', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 02:35:34', 30000, '2009-09-03 02:35:34', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:34) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 22ms (View: 19, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:34) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 3ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-02 22:35:34) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:34) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '414690ac01d58b7722a66cddea8d9de4db2d12fdc0a1a4bc340b1a6673cf7593b34c6382f90a97a6e8bf08ed93473873f333c7e8881339e4a17341713aa73bbe') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:35', 'b3b631128d0c18733f330c66ebcc5e622afca589c6524780d4495fcb89167e435a82b633e972b383d17ffcf5a1c2393d74d32e589ebfb9b2c75db2245be2c34e', '2009-09-03 02:35:35', 'subscriber', 'rmdjuUBDobAtN75LlLEp', '414690ac01d58b7722a66cddea8d9de4db2d12fdc0a1a4bc340b1a6673cf7593b34c6382f90a97a6e8bf08ed93473873f333c7e8881339e4a17341713aa73bbe', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-02 22:35:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4bad0cfb97b3393d87bead3dad7cdfc086b68c2a6830110aa203e21a6f140587d5019fceb066fd05e199b3c0b118f5ba0444b4b897aaa959c650c87b2ed99ecb') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:35', '451cc6392768a2fe8909d5d615588caafbc89ba318ea95fbf745ddfd9edb304c7d9b5721f091fd69330a1a2ad80d97447f55d3d9b638398fd62036016a97d1a1', '2009-09-03 02:35:35', 'subscriber', 'Ix8cbdYwbazmqhtAL5ZZ', '4bad0cfb97b3393d87bead3dad7cdfc086b68c2a6830110aa203e21a6f140587d5019fceb066fd05e199b3c0b118f5ba0444b4b897aaa959c650c87b2ed99ecb', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-02 22:35:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 117ms (View: 116, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-02 22:35:35) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Create (0.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-03 02:35:35', 'title 1', 'body 1', '2009-09-03 02:35:35')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '82acd7fe708131254f68ba34d9cb7b08c015d201fbbf293d8b722e51b3908269e45807fed1b80ec36cd8434d7105f759d3e230339f8c3352f4c4a88c33cbb484') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:35', '3d407cfef9752308f930b0a0d7f7086abd7e278a5e1a2f3623c843a7ef0270cee37101a30818ce885a172a890d385d71e2732a2480f0a71eacfee6848a809eb9', '2009-09-03 02:35:35', 'subscriber', '-rntLb5efqCTS6WHF3ZR', '82acd7fe708131254f68ba34d9cb7b08c015d201fbbf293d8b722e51b3908269e45807fed1b80ec36cd8434d7105f759d3e230339f8c3352f4c4a88c33cbb484', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-02 22:35:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-03 02:35:35', 'title 1', 'body 1', '2009-09-03 02:35:35')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-03 02:35:35', 'title 2', 'body 2', '2009-09-03 02:35:35')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-03 02:35:35', 'title 3', 'body 3', '2009-09-03 02:35:35')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-03 02:35:35', 'title 4', 'body 4', '2009-09-03 02:35:35')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.6ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-02 22:35:35) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:35:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (1.9ms)
Completed in 34ms (View: 28, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:35:35) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '566abc1d522f412adf921263792e69886b14bfc64fb6135d6311847bd424ac88aef1186ea2040162ff5f7df163b7507883536aa1a91d9d9f7d2a65d7ebb733fb') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:35', '288030b5d8bad6e7f74f17c0d42cccc030441b48ce2e544bc9fafdddcec20d3c7a110169ab502f157d8cd9d8979797eaa0cdcc7590958b91cb10d1e34c6c0592', '2009-09-03 02:35:35', 'subscriber', 'zV24umkr5WQy6Qxr6PsR', '566abc1d522f412adf921263792e69886b14bfc64fb6135d6311847bd424ac88aef1186ea2040162ff5f7df163b7507883536aa1a91d9d9f7d2a65d7ebb733fb', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:35:35', '2009-09-03 02:35:35', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:35:35', "created_at" = '2009-09-03 02:35:35', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 150ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '566abc1d522f412adf921263792e69886b14bfc64fb6135d6311847bd424ac88aef1186ea2040162ff5f7df163b7507883536aa1a91d9d9f7d2a65d7ebb733fb') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:35:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '12d1083a53b8b62b13244f5a15304706e765768d934b7f1c822681070958e0074953cc87fdc8e9f5cd7bdac44b06d784e157454978431705a5b62b4c23947931') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:36', '8133a671f95a129abdc5bc482361a97947dcefd1b8e0ba847d1bc99eb6823f49de98271597a85205ad4eff77f03a2fff3a7bd4e111799c64c5a22e722b0274c0', '2009-09-03 02:35:36', 'subscriber', 'T6vo8xSj9D89uy4D2wqk', '12d1083a53b8b62b13244f5a15304706e765768d934b7f1c822681070958e0074953cc87fdc8e9f5cd7bdac44b06d784e157454978431705a5b62b4c23947931', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:35:36', '2009-09-03 02:35:36', NULL, NULL, NULL, NULL, 1, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:35:36', "created_at" = '2009-09-03 02:35:36', "subscription_plan_id" = 2, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '12d1083a53b8b62b13244f5a15304706e765768d934b7f1c822681070958e0074953cc87fdc8e9f5cd7bdac44b06d784e157454978431705a5b62b4c23947931') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:35:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '569f44f551f75ec30135a412a9cc88062e8728f11a3f44f75e5c2087b65bd9c6a5ddbf3fb4fddd8234bf8c20aaad4f592b0b1da1908c63cb596335bf344a57bc') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:36', '51e25658398afd04aba7fac4e2613f6acb263eba316e8138eb67548f28753c1a9c780797c2f2de91a0756bc88e005256c646dd44d13c7f1b14e1bb57d6caa5e2', '2009-09-03 02:35:36', 'subscriber', 'Nwzn5KDcriR27z3bQRkJ', '569f44f551f75ec30135a412a9cc88062e8728f11a3f44f75e5c2087b65bd9c6a5ddbf3fb4fddd8234bf8c20aaad4f592b0b1da1908c63cb596335bf344a57bc', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:35:36', '2009-09-03 02:35:36', NULL, NULL, NULL, NULL, 1, NULL, 'User', 3, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:35:36', "created_at" = '2009-09-03 02:35:36', "subscription_plan_id" = 3, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '569f44f551f75ec30135a412a9cc88062e8728f11a3f44f75e5c2087b65bd9c6a5ddbf3fb4fddd8234bf8c20aaad4f592b0b1da1908c63cb596335bf344a57bc') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 3ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 9ms (View: 7, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:35:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5df757dc035358b0648035b3a5fe4c0e6adc294b095d0b27cf5530f519b9baa2521b5961e6faad52f91839934915b977adf8b13d4587a5698e422de3cf369558') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:36', '06b5d0225158fb99f59ba49b3c8e59c6180b2431d79533db90c08137492960ca92b0c9c24ac41c7b53c6a55979a2c59592e68a631e53e7e0d8de9871954d8059', '2009-09-03 02:35:36', 'subscriber', '0KPmagtkYFAgOH5BC6rg', '5df757dc035358b0648035b3a5fe4c0e6adc294b095d0b27cf5530f519b9baa2521b5961e6faad52f91839934915b977adf8b13d4587a5698e422de3cf369558', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:35:36', '2009-09-03 02:35:36', NULL, NULL, NULL, NULL, 1, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:35:36', "created_at" = '2009-09-03 02:35:36', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '5df757dc035358b0648035b3a5fe4c0e6adc294b095d0b27cf5530f519b9baa2521b5961e6faad52f91839934915b977adf8b13d4587a5698e422de3cf369558') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 125ms (View: 124, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-02 22:35:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ee6b4c1af61ea981da140add8014d61bb54f21f9bde0080f37164fe9bee10e02edf26f375d5b64f7772f0c6a57edbda11b951d94ed391b9da6f39e9b4cff65a3') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:36', 'd98f3b84e81a8345846e2d8e00962e99ec2589f230674a62729c5dcb357d4f21f9628e53d63f4fe239bea679a8968edd4fd73b90ed84daa97784d06a3c9bedd7', '2009-09-03 02:35:36', 'subscriber', 'cus-P46NkuZ5gHZRdWJz', 'ee6b4c1af61ea981da140add8014d61bb54f21f9bde0080f37164fe9bee10e02edf26f375d5b64f7772f0c6a57edbda11b951d94ed391b9da6f39e9b4cff65a3', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-02 22:35:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8263353b4309b91245b9a2da87f96b11fa736742949ad69556b72f5405be67b9ab447fdb7586bf35754fa320b77855cf1132350a5134306dd160c4fb50044fd9') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:35:36', '04517b23cae05e391151257d207e04725f1e0f683859942235413a419725a0f1efabc6fbefcfb3d5e9f5a456cc371843c52fa63abd3088b7ab6cf15c160890c0', '2009-09-03 02:35:36', 'subscriber', 'yxmZcJKz6KkTXhBiSpOj', '8263353b4309b91245b9a2da87f96b11fa736742949ad69556b72f5405be67b9ab447fdb7586bf35754fa320b77855cf1132350a5134306dd160c4fb50044fd9', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-02 22:35:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 3, DB: 0) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-02 22:35:36) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-03 02:35:36', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:35:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 02:41:36', 0, '2009-09-03 02:41:36', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 02:41:36', 1000, '2009-09-03 02:41:36', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 02:41:36', 30000, '2009-09-03 02:41:36', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:41:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:41:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 28ms (View: 23, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:41:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0eff273c7ab0cd47e7c656577dd5b40af7c8e0093b23810628461cf0cfddfe59e65befc9e367d8cd163ba14ce5cc07a71a4cb75fbe47317dd390b7e46ed5db1e') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:41:37', '105ea7c820ba6e95d9cfc67e41f3b071051c2f4223d4045eb5587996945a5224a5c486566417fb316353bd9fb17cfa88198657abd4d3c59b639a35e4453dd6fc', '2009-09-03 02:41:37', 'subscriber', '2JW5aEvatrxVk99N2w9B', '0eff273c7ab0cd47e7c656577dd5b40af7c8e0093b23810628461cf0cfddfe59e65befc9e367d8cd163ba14ce5cc07a71a4cb75fbe47317dd390b7e46ed5db1e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:41:37', '2009-09-03 02:41:37', NULL, NULL, NULL, NULL, 876516208, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:41:37', "created_at" = '2009-09-03 02:41:37', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 245ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '0eff273c7ab0cd47e7c656577dd5b40af7c8e0093b23810628461cf0cfddfe59e65befc9e367d8cd163ba14ce5cc07a71a4cb75fbe47317dd390b7e46ed5db1e') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:41:37) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fcc04e3b1085c1f97fcbc9e90e9876ccb6844401740a204c22f2749767036e775db14fe4769f9dabcbb9637f724193292e4d5d50474cc40e252d61f7684d146f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:41:37', '2d8fcfdbacf61f0c19912a86be66853a39b69b1af2ac56aa0499c2b9c1196f1ebe3f1701a5e3f97856083c43cf7525934896eafcf5a3144aa26e718dd49bdd34', '2009-09-03 02:41:37', 'subscriber', 'LAAHJ9GQLEmhMzdxtMXx', 'fcc04e3b1085c1f97fcbc9e90e9876ccb6844401740a204c22f2749767036e775db14fe4769f9dabcbb9637f724193292e4d5d50474cc40e252d61f7684d146f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:41:37', '2009-09-03 02:41:37', NULL, NULL, NULL, NULL, 876516208, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:41:37', "created_at" = '2009-09-03 02:41:37', "subscription_plan_id" = 2, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 125ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'fcc04e3b1085c1f97fcbc9e90e9876ccb6844401740a204c22f2749767036e775db14fe4769f9dabcbb9637f724193292e4d5d50474cc40e252d61f7684d146f') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:41:37) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ea1c87507261ab3c5a73faf06959abf8fdcd3ef2e4a74e7e6afe1ca73dc7b2eaa0cafbac23eee4ee66e901f6debc79bd6b0e65cc50863ef7f133bfe7d2087fad') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:41:37', '10e323f95fe05bf049948c1998413925b00c686a3b22ed68cac1f08906a1cac75a3944bb15fe2c9b83afa1e33ad0e3a07191e29c8c32ffbba06e30344061d234', '2009-09-03 02:41:37', 'subscriber', 'GLwl53mD6enfhs0GXjez', 'ea1c87507261ab3c5a73faf06959abf8fdcd3ef2e4a74e7e6afe1ca73dc7b2eaa0cafbac23eee4ee66e901f6debc79bd6b0e65cc50863ef7f133bfe7d2087fad', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:41:37', '2009-09-03 02:41:37', NULL, NULL, NULL, NULL, 876516208, NULL, 'User', 3, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:41:37', "created_at" = '2009-09-03 02:41:37', "subscription_plan_id" = 3, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 22ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:41:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'ea1c87507261ab3c5a73faf06959abf8fdcd3ef2e4a74e7e6afe1ca73dc7b2eaa0cafbac23eee4ee66e901f6debc79bd6b0e65cc50863ef7f133bfe7d2087fad') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 02:44:40', 0, '2009-09-03 02:44:40', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (57.3ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 02:44:40', 1000, '2009-09-03 02:44:40', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 02:44:40', 30000, '2009-09-03 02:44:40', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 59) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 28ms (View: 23, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:44:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '07fdf4e5b77954565716b452bb190eb31ef250ff1e5b119655e06912b9a4f1cda08d082e01b3c77abddb6770e5af34bd14234935e0897730137a3a7055957fd0') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:44:40', '76a57cdffc313122000fa5a1116210c9b0b1804f2e182f165c7fc3536b68ffbaab6c6ec1c67e3832cab6354b204417c8ad3113f4af926a59814964d6100fcc2a', '2009-09-03 02:44:40', 'subscriber', '6lIHeX7cqTyXErzGCmP6', '07fdf4e5b77954565716b452bb190eb31ef250ff1e5b119655e06912b9a4f1cda08d082e01b3c77abddb6770e5af34bd14234935e0897730137a3a7055957fd0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:44:40', '2009-09-03 02:44:40', NULL, NULL, NULL, NULL, 876516208, NULL, 'User', 1, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:44:40', "created_at" = '2009-09-03 02:44:40', "subscription_plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 246ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '07fdf4e5b77954565716b452bb190eb31ef250ff1e5b119655e06912b9a4f1cda08d082e01b3c77abddb6770e5af34bd14234935e0897730137a3a7055957fd0') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 9ms (View: 7, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:44:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '71effea9ff0a43fee6240b8e81a1ecaf4b20bddb25baae48d2436a90adf806f103793862e5bfe8a6ccc7eb8a817be018d7adcb05e16c711cdceacd7328700bde') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:44:40', '5e1aab4decb43d74eb850f9bca18d2f0660be54ca920ba16e9d250a2196ba859a44461b2cac10f457bfeeb6c5feda9691b1a57c202e5c48179054e0f937d2f34', '2009-09-03 02:44:40', 'subscriber', 'Xmih045RubRnavpBV2iY', '71effea9ff0a43fee6240b8e81a1ecaf4b20bddb25baae48d2436a90adf806f103793862e5bfe8a6ccc7eb8a817be018d7adcb05e16c711cdceacd7328700bde', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:44:40', '2009-09-03 02:44:40', NULL, NULL, NULL, NULL, 876516208, NULL, 'User', 2, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:44:40', "created_at" = '2009-09-03 02:44:40', "subscription_plan_id" = 2, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '71effea9ff0a43fee6240b8e81a1ecaf4b20bddb25baae48d2436a90adf806f103793862e5bfe8a6ccc7eb8a817be018d7adcb05e16c711cdceacd7328700bde') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-02 22:44:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9aaedb62c04e7d1084137c2bea53b48ba778e4adb38fe114903dc4488f27ea76d2e82613535d0b82eb72dfc58f3beb0a8bde942f1e56ae528fec0dd295a43f38') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 02:44:40', 'b4a442fdb07f8c644819511d4b6ca6f9afd388e25e2d6c9fefec8eb031c3db14b116f8c0466c7f678948a0aa75c654b4e55433e7d3cd4fb478cc31df1f48c47e', '2009-09-03 02:44:40', 'subscriber', '_m_GLeC6JenNFyrC1gwR', '9aaedb62c04e7d1084137c2bea53b48ba778e4adb38fe114903dc4488f27ea76d2e82613535d0b82eb72dfc58f3beb0a8bde942f1e56ae528fec0dd295a43f38', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("billing_zipcode", "billing_phone", "created_at", "updated_at", "billing_name", "billing_city", "billing_state", "billing_key", "subscriber_id", "cc_last_digits", "subscriber_type", "subscription_plan_id", "next_renewal_at", "info_create_edit", "billing_street", "cc_expires_on", "state") VALUES(NULL, NULL, '2009-09-03 02:44:40', '2009-09-03 02:44:40', NULL, NULL, NULL, NULL, 876516208, NULL, 'User', 3, NULL, NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 02:44:40', "created_at" = '2009-09-03 02:44:40', "subscription_plan_id" = 3, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 21ms (DB: 1) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-02 22:44:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9aaedb62c04e7d1084137c2bea53b48ba778e4adb38fe114903dc4488f27ea76d2e82613535d0b82eb72dfc58f3beb0a8bde942f1e56ae528fec0dd295a43f38') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 06:28:30', 0, '2009-09-03 06:28:30', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 06:28:30', 1000, '2009-09-03 06:28:30', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 06:28:30', 30000, '2009-09-03 06:28:30', 12, 't')[0m
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 06:38:49', 0, '2009-09-03 06:38:49', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 06:38:49', 1000, '2009-09-03 06:38:49', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 06:38:49', 30000, '2009-09-03 06:38:49', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:38:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 22ms (View: 19, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:38:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 28ms (View: 22, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:38:49) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '79ee6103c806247f3e8a2203b181e6f4511df24a4c133d3523578d5a15328741c92a897afb22c2471af611e012063368ad3caabcafa95f6b06556325ad09c751') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:38:50', 'df100609e5cd094811b2cc838046cc93d0bb6d2fce9e53b08052ea80a0e3c17cb19df90b4504358309fd0f5933e3b35d42239d3371a420f2ed3dfa0f07bfd2f7', '2009-09-03 06:38:50', 'subscriber', 'gZr7TuueEo13cHeLJGgT', '79ee6103c806247f3e8a2203b181e6f4511df24a4c133d3523578d5a15328741c92a897afb22c2471af611e012063368ad3caabcafa95f6b06556325ad09c751', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "next_renewal_at", "info_create_edit", "plan_id", "state") VALUES('2009-09-03 06:38:50', '2009-09-03 06:38:50', 1, 'User', NULL, NULL, 1, 'pending')[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-03 02:38:50) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:38:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:38:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:38:50) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5a67b7181fe00de383f840d9d17f0f0a89ac0be1c36d91b8094702854d54cf19480354ffdbdef8c68945e22dbb92b89a91ff9c23fcf9fddf7d05a8256278ab39') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:38:50', 'aba7ccc8e2adf8631af74c21c815f435b123a643faee8acbd8dd9eabb928560ae028f9944be2f13a2ac61e5cc57b924c760db150e470299cb0d1a4486e84641f', '2009-09-03 06:38:50', 'subscriber', '6KWpRQPOvb9AvdPWW_Cr', '5a67b7181fe00de383f840d9d17f0f0a89ac0be1c36d91b8094702854d54cf19480354ffdbdef8c68945e22dbb92b89a91ff9c23fcf9fddf7d05a8256278ab39', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "next_renewal_at", "info_create_edit", "plan_id", "state") VALUES('2009-09-03 06:38:50', '2009-09-03 06:38:50', 1, 'User', NULL, NULL, 2, 'pending')[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-03 02:38:50) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:38:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:38:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:38:50) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9a85d05ce53b9fcc725de939e91794ac1850714c83f1e91c8b9db55072261b501fca7284fa5fc785652e8f31a4cd577dbf3495e3c5c06df7b3e808bfe8169632') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:38:50', 'ad5a79351c5741f8711c1b16209640528aa26965e45e5de8c96da54dea4eb28657620ec73a23ff0944542a99cbef78cc98851cb3cd74bfa6c04130e2584a0771', '2009-09-03 06:38:50', 'subscriber', 'VHMdsIfBXNKedcHd84tJ', '9a85d05ce53b9fcc725de939e91794ac1850714c83f1e91c8b9db55072261b501fca7284fa5fc785652e8f31a4cd577dbf3495e3c5c06df7b3e808bfe8169632', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "next_renewal_at", "info_create_edit", "plan_id", "state") VALUES('2009-09-03 06:38:50', '2009-09-03 06:38:50', 1, 'User', NULL, NULL, 3, 'pending')[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-03 02:38:50) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 06:39:14', 0, '2009-09-03 06:39:14', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 06:39:14', 1000, '2009-09-03 06:39:14', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 06:39:14', 30000, '2009-09-03 06:39:14', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:39:14) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 14ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:39:14) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 28ms (View: 22, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:39:14) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0ba14d2d40ac9102f161deb26b3f4e2905fe44ff5dca08e5faafe28a859437362fa627f936a1c8ae89572aee34eff42312b04d910c33956e91db68457145c61e') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:39:15', '74f3086af8adb39e726e5c692968fea53287bac4a3a7a2543585c6f3be4c11d43f8c83c03ecf9912743438a5094935428315e7c02c63f894ae16e52172e852d6', '2009-09-03 06:39:15', 'subscriber', 'lnciAg4g7UfUt_jcPkkQ', '0ba14d2d40ac9102f161deb26b3f4e2905fe44ff5dca08e5faafe28a859437362fa627f936a1c8ae89572aee34eff42312b04d910c33956e91db68457145c61e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 06:39:15', '2009-09-03 06:39:15', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 06:39:15', "created_at" = '2009-09-03 06:39:15', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 240ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '0ba14d2d40ac9102f161deb26b3f4e2905fe44ff5dca08e5faafe28a859437362fa627f936a1c8ae89572aee34eff42312b04d910c33956e91db68457145c61e') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:39:15) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4cddc32cd88b2832f68074056c959f95c9d6e95696678a142c80b2483d23d38d08da8dc548f54625b390716ae98f952874de3d3a344e57079e5fee85f6d5e51a') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:39:15', '678cb6a3fc7ed1de1690e9e0340b16d62d5334921206a467e90e1d1a1484dcf1ab27d367e193ca22d2773f755f34714bd1a8ba4336ec8a195578f557458b640f', '2009-09-03 06:39:15', 'subscriber', 'Q4JlfmkExJ74NU5iMmLc', '4cddc32cd88b2832f68074056c959f95c9d6e95696678a142c80b2483d23d38d08da8dc548f54625b390716ae98f952874de3d3a344e57079e5fee85f6d5e51a', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 06:39:15', '2009-09-03 06:39:15', 1, 'User', NULL, NULL, 2, 'pending')[0m
Redirected to http://www.example.com/
Completed in 124ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '4cddc32cd88b2832f68074056c959f95c9d6e95696678a142c80b2483d23d38d08da8dc548f54625b390716ae98f952874de3d3a344e57079e5fee85f6d5e51a') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:39:15) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bd4dc7d0c64cbfd2b0e1e257b0e646723064cb92539aa430089281d9eae63ee11905a949fdb08498e5a0ec6ee718df54255212096c640440a0fd8a74b5fa9202') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:39:15', '1108432424a6865ca53e576e7bb56a8974ac82df079daf69b5f8c418c62f0b376419cb30a56dec153f76715f1aee34c5d1523bfdbd0cbe43900bae0ab1bc2fdc', '2009-09-03 06:39:15', 'subscriber', 'YgWzwmL5SsQOe9gxVfTk', 'bd4dc7d0c64cbfd2b0e1e257b0e646723064cb92539aa430089281d9eae63ee11905a949fdb08498e5a0ec6ee718df54255212096c640440a0fd8a74b5fa9202', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 06:39:15', '2009-09-03 06:39:15', 1, 'User', NULL, NULL, 3, 'pending')[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:39:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'bd4dc7d0c64cbfd2b0e1e257b0e646723064cb92539aa430089281d9eae63ee11905a949fdb08498e5a0ec6ee718df54255212096c640440a0fd8a74b5fa9202') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 06:46:32', 0, '2009-09-03 06:46:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (52.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 06:46:32', 1000, '2009-09-03 06:46:32', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 06:46:32', 30000, '2009-09-03 06:46:32', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 53) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 29ms (View: 23, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:46:32) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '082a8371286dbbdfe7a75919f1e1a798b69defa8a487047e9c2c0ed1ea3e16aa0827a815e9d50fe4d570e517ebf958555ed186694e46f7ca8563af8f7e10bd6f') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:46:32', '90a6271277024d8782a21cd7c9eb7a7269b315cfeb0dfb532e7119a6a1e0c5c17de83411216363e40cd39f322a41e008d361d89a5e63a7d36efce9c9f55f2dcf', '2009-09-03 06:46:32', 'subscriber', 'rNOgioOQmhJDtIB21yKJ', '082a8371286dbbdfe7a75919f1e1a798b69defa8a487047e9c2c0ed1ea3e16aa0827a815e9d50fe4d570e517ebf958555ed186694e46f7ca8563af8f7e10bd6f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 06:46:32', '2009-09-03 06:46:32', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 06:46:32', "created_at" = '2009-09-03 06:46:32', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 239ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '082a8371286dbbdfe7a75919f1e1a798b69defa8a487047e9c2c0ed1ea3e16aa0827a815e9d50fe4d570e517ebf958555ed186694e46f7ca8563af8f7e10bd6f') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 9ms (View: 7, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:46:32) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b86ff3962cff537ddb495c1718634613bf2bd278f55b1e1e53808b7199d7c885391144a3714c46176fc08635fc38b47b32bbb015e1e83d800e8b4c82321fbaae') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:46:32', 'a8fd81d5b1d0ab1462f191b034ed76b1cfaf64aa4647a74960f3720118edf139f3f4413f29a0bed5219ca4b59edf29b693ab9e626bd2be5a7c518c0a8c634d6b', '2009-09-03 06:46:32', 'subscriber', 'X2k-7vnA9yrLkTOYbw9I', 'b86ff3962cff537ddb495c1718634613bf2bd278f55b1e1e53808b7199d7c885391144a3714c46176fc08635fc38b47b32bbb015e1e83d800e8b4c82321fbaae', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 06:46:32', '2009-09-03 06:46:32', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 06:46:32', "created_at" = '2009-09-03 06:46:32', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b86ff3962cff537ddb495c1718634613bf2bd278f55b1e1e53808b7199d7c885391144a3714c46176fc08635fc38b47b32bbb015e1e83d800e8b4c82321fbaae') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 9ms (View: 6, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 02:46:32) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '80946d17a9db1f6cdb0cad518f22958edaebbeecc13d894dfdf235807405448de404bf2c5340c1d5eca54e943df992da8a1f7cf50b8a4b50f97b1effe806200c') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 06:46:32', 'edc1716c0a41cb780c4df1be6a9558839ffc4ac56ac3f3548dde745925cc6ddfaad58c540a2f03e0bd40520c39cf401d34a7863c88c9b8c42cc117317e970c19', '2009-09-03 06:46:32', 'subscriber', 'Xu4hS0TCdA8QP_dddvsn', '80946d17a9db1f6cdb0cad518f22958edaebbeecc13d894dfdf235807405448de404bf2c5340c1d5eca54e943df992da8a1f7cf50b8a4b50f97b1effe806200c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 06:46:32', '2009-09-03 06:46:32', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 06:46:32', "created_at" = '2009-09-03 06:46:32', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 02:46:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '80946d17a9db1f6cdb0cad518f22958edaebbeecc13d894dfdf235807405448de404bf2c5340c1d5eca54e943df992da8a1f7cf50b8a4b50f97b1effe806200c') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:16:35', 0, '2009-09-03 07:16:35', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (58.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:16:35', 1000, '2009-09-03 07:16:35', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:16:35', 30000, '2009-09-03 07:16:35', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:16:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 48ms (View: 44, DB: 60) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 03:16:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.5ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."rate_cents" = 0) LIMIT 1[0m
Rendered layouts/_user_nav (2.0ms)
Completed in 30ms (View: 24, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 03:16:35) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a84799de33f966294a082e4eb099b8e7bf982337519aafb75b5794133c6e0f4cd72eeb4903b04aed3c399415027ab674676fe1cfc74a0af30e15aaee7d429826') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:16:35', '5d177d5f992e0903691390756e6e358b6662a40ab0832102eadfc57044272ef021c864b9e8caee571843209a059aa5f4dd3fdbee5e31b3d7964d9c1df3eb2ef4', '2009-09-03 07:16:35', 'subscriber', 'FDucQm0h32RbTTQ2ucu-', 'a84799de33f966294a082e4eb099b8e7bf982337519aafb75b5794133c6e0f4cd72eeb4903b04aed3c399415027ab674676fe1cfc74a0af30e15aaee7d429826', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:16:35', '2009-09-03 07:16:35', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:16:35', "created_at" = '2009-09-03 07:16:35', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 238ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:16:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'a84799de33f966294a082e4eb099b8e7bf982337519aafb75b5794133c6e0f4cd72eeb4903b04aed3c399415027ab674676fe1cfc74a0af30e15aaee7d429826') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:16:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 03:16:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 10ms (View: 7, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 03:16:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4cc80280fe9c32e921e31a7a92a0cd0bb519cdb4bfa0896fad43f3b118a0d1d36d4a092cbb9daacd6cdd994e41fa20a83e9c7db1aab61100a28c09fcecf9c6a1') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:16:36', '85cd31439fac8d3ebdc88158f84ec43852c76fdfec67b3d327fdfb8926429ea3793dab7b28952b8426b8462f2d711763892f2ebb087927140033cd4b82a47c06', '2009-09-03 07:16:36', 'subscriber', '8QWVA65YDC0y-cP21okM', '4cc80280fe9c32e921e31a7a92a0cd0bb519cdb4bfa0896fad43f3b118a0d1d36d4a092cbb9daacd6cdd994e41fa20a83e9c7db1aab61100a28c09fcecf9c6a1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:16:36', '2009-09-03 07:16:36', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:16:36', "created_at" = '2009-09-03 07:16:36', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 22ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:16:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '4cc80280fe9c32e921e31a7a92a0cd0bb519cdb4bfa0896fad43f3b118a0d1d36d4a092cbb9daacd6cdd994e41fa20a83e9c7db1aab61100a28c09fcecf9c6a1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:16:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-03 03:16:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 9ms (View: 6, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-03 03:16:36) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '356ffe9a228d9aa9a4a9e5d2ba9fcafc272b803eb16b7f87c14e480620ad12a2194ae9cd80a8b71cf88ba8a596c673d53f9bb86451f70e205d3fd7bc4bdeee05') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:16:36', '76c8f8c64ddc407ba27f5800989a9b9bb43ac0711b2906d2a5392b6a43b4c4d65677b7f50ffc5d3450508d8ef50add8dcbb34da82dd8fe6a6fe87d3785798bc6', '2009-09-03 07:16:36', 'subscriber', 'Sb6e4M3N0_LXTNgH5OtO', '356ffe9a228d9aa9a4a9e5d2ba9fcafc272b803eb16b7f87c14e480620ad12a2194ae9cd80a8b71cf88ba8a596c673d53f9bb86451f70e205d3fd7bc4bdeee05', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:16:36', '2009-09-03 07:16:36', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:16:36', "created_at" = '2009-09-03 07:16:36', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:16:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '356ffe9a228d9aa9a4a9e5d2ba9fcafc272b803eb16b7f87c14e480620ad12a2194ae9cd80a8b71cf88ba8a596c673d53f9bb86451f70e205d3fd7bc4bdeee05') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:35:38', 0, '2009-09-03 07:35:38', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:35:38', 1000, '2009-09-03 07:35:38', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:35:38', 30000, '2009-09-03 07:35:38', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8eae43a1ab1e83cae9794c6fd3af0d7e5f5e530530f896d00d4a66eec0d66e8220668b8e916227fa43b8af4e662f7fc2894766415389089ad2b6cbd65b94ed6f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:35:38', '4a5915dc801c1bf654678636734dbecea12ea11dd6bd6f7b415d562600e06cba9f88eec67b6540e4510f86b36a7e898dbed849fe080c48a06db7c94fbcecfca3', '2009-09-03 07:35:38', 'subscriber', 'dVp1Y4J5L-SFZgIRSGWj', '8eae43a1ab1e83cae9794c6fd3af0d7e5f5e530530f896d00d4a66eec0d66e8220668b8e916227fa43b8af4e662f7fc2894766415389089ad2b6cbd65b94ed6f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:35:38', '2009-09-03 07:35:38', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:35:38', "created_at" = '2009-09-03 07:35:38', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 03:35:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 03:35:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:35:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:36:44', 0, '2009-09-03 07:36:44', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:36:44', 1000, '2009-09-03 07:36:44', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:36:44', 30000, '2009-09-03 07:36:44', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9f16187c59bc63c1d20d1177e6d5ca57d971a11988261de3121de0d12f28a99f2c94ad90c271ec72b3d906dc4179e4df5c6f80faa173f27ee1197cdebd3e9d55') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:36:44', 'e063ee458a77d49352f16aaa7e3ea7e4886894f40ad2a508d1774f4c0523eeea83397323a72e30da9fd4cbcc7c8c0aff20a27ec8f78bd4bb2c0c909a2f35e8d8', '2009-09-03 07:36:44', 'subscriber', 'hGaOFApFetvtp615OgkA', '9f16187c59bc63c1d20d1177e6d5ca57d971a11988261de3121de0d12f28a99f2c94ad90c271ec72b3d906dc4179e4df5c6f80faa173f27ee1197cdebd3e9d55', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:36:44', '2009-09-03 07:36:44', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:36:44', "created_at" = '2009-09-03 07:36:44', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 03:36:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 03:36:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:37:43', 0, '2009-09-03 07:37:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:37:43', 1000, '2009-09-03 07:37:43', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:37:43', 30000, '2009-09-03 07:37:43', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '18c257b984dfc579a8de31081a30975dda9f41228e010f1851d06c93206afd288fdb95458cf83e8ec31af7a2a6828f813c6b0196a849c95bbe4464928ce29e84') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:37:44', '71dbcf503a9de871e035e977f3823c900f11dc849c07b8ea4b0284c2b57fca12772ec0ab70aedfda600aeb33a6ccbdf198e91faa03be973e5692b9979e479b23', '2009-09-03 07:37:44', 'subscriber', 'B0-Eed0UNkyO6FLx0NVr', '18c257b984dfc579a8de31081a30975dda9f41228e010f1851d06c93206afd288fdb95458cf83e8ec31af7a2a6828f813c6b0196a849c95bbe4464928ce29e84', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:37:44', '2009-09-03 07:37:44', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:37:44', "created_at" = '2009-09-03 07:37:44', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 03:37:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 03:37:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:37:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:38:20', 0, '2009-09-03 07:38:20', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:38:20', 1000, '2009-09-03 07:38:20', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:38:20', 30000, '2009-09-03 07:38:20', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c5d077bb2a815b32fb676305d3634f23079d5f8fb3c7c44cb301b8b69201948fe45415c8facdda1d0a2b141f912adbf0dfc62b52a2c5a7815046573d98fd8b00') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:38:21', 'bc16273467b6a041b89c4265bfdceded5cd45efa9570d689211a39e0bc472ccac896333371ae922efeba3f6b09edfb036a7ee5da7762d0fa4a1fe7dc6bbeb511', '2009-09-03 07:38:21', 'subscriber', 'IYex9gxX0L1jerfiW3mE', 'c5d077bb2a815b32fb676305d3634f23079d5f8fb3c7c44cb301b8b69201948fe45415c8facdda1d0a2b141f912adbf0dfc62b52a2c5a7815046573d98fd8b00', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:38:21', '2009-09-03 07:38:21', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:38:21', "created_at" = '2009-09-03 07:38:21', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 03:38:21) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 03:38:21) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:38:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:39:45', 0, '2009-09-03 07:39:45', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:39:45', 1000, '2009-09-03 07:39:45', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:39:45', 30000, '2009-09-03 07:39:45', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a9904f02bcdb09b830b6183fb95b57c04b8f36afcccd6f60e41f2e4b858b7f8fef8334c1ddefd41d17914ac560b5007306abaaf3757e20f0a3f924b5104840ac') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:39:45', '3a22b1dd8e0beab6cb0a490211e4dd1bf77ee3b4639e9039cab5d4efb2a2b580754918934d1294b52aa836898e883323e6087b0db93b58ac59b33a43c067a72e', '2009-09-03 07:39:45', 'subscriber', 'u77bUjefr3DOk0i-78V4', 'a9904f02bcdb09b830b6183fb95b57c04b8f36afcccd6f60e41f2e4b858b7f8fef8334c1ddefd41d17914ac560b5007306abaaf3757e20f0a3f924b5104840ac', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:39:45', '2009-09-03 07:39:45', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:39:45', "created_at" = '2009-09-03 07:39:45', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 03:39:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 03:39:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:39:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 03:39:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 3, DB: 0) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 07:44:38', 0, '2009-09-03 07:44:38', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (76.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 07:44:38', 1000, '2009-09-03 07:44:38', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 07:44:38', 30000, '2009-09-03 07:44:38', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4cbd6d6a813c3e9ac160d6ef32b4c672d92e5303c508439b035f6ca665e8fdaf454cae0f444357a5b33bf16baaf2c319d6c25db0f9a6b6d2a70a844f9ea81a63') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 07:44:39', 'fdfcb653f99f1022a87bd28062d1772945744d2af3936ae7ac4da7c4231f448bc02cdb4d69c3e8f8fca51bc3bca6d495670a4e69d46e650e389e9df22309ffc1', '2009-09-03 07:44:39', 'subscriber', '-3j0x5lm1EZesPKK0GBw', '4cbd6d6a813c3e9ac160d6ef32b4c672d92e5303c508439b035f6ca665e8fdaf454cae0f444357a5b33bf16baaf2c319d6c25db0f9a6b6d2a70a844f9ea81a63', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 07:44:39', '2009-09-03 07:44:39', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 07:44:39', "created_at" = '2009-09-03 07:44:39', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 03:44:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 15ms (View: 11, DB: 80) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 03:44:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 03:44:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 03:44:39) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 3, DB: 0) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 08:03:11', 0, '2009-09-03 08:03:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 08:03:11', 1000, '2009-09-03 08:03:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 08:03:11', 30000, '2009-09-03 08:03:11', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (97.7ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'aa8059414cd384ccbf856c7fb9d17816b189378b06e41bebf56f9cb7f72e4516c502962cc553a74bb942a1327ee5371f96e05f2a2f9337c0fabff4f5e0abd401') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 08:03:11', '2608f08b4e87efddbe0a62a7e2cca04f6b43b2bbb1db25ca794161a93ab200051d7049e2698173eae2323445b6ef5cfabd9a4fda2b214d0ef9fa065c7739ae5e', '2009-09-03 08:03:11', 'subscriber', '2pGJq_nf-7OFz3uzuJyc', 'aa8059414cd384ccbf856c7fb9d17816b189378b06e41bebf56f9cb7f72e4516c502962cc553a74bb942a1327ee5371f96e05f2a2f9337c0fabff4f5e0abd401', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 08:03:11', '2009-09-03 08:03:11', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 08:03:11', "created_at" = '2009-09-03 08:03:11', "plan_id" = 1, "state" = 'active', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 04:03:11) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 102) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 04:03:11) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 04:03:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 04:03:12) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 08:19:06', 0, '2009-09-03 08:19:06', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 08:19:06', 1000, '2009-09-03 08:19:06', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 08:19:06', 30000, '2009-09-03 08:19:06', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '435136c9b0c22c4e2e884b852ae2697938a137b4225de2276dbe65c99994d789d5412e53bd0b6f8a87cac40766575de771426f5f2fa333c0b53363cfac262fcd') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 08:19:06', 'f4dc94a463168fda41fdd872458cff2d59a3e39bdd4f3aa6f33bdc5d9fb50297b91743987a524d6fa2740f58c9765d654aed9020b64b8f883a1ab3cec9c62348', '2009-09-03 08:19:06', 'subscriber', 'wfoPuOo_SZcnotztJTpc', '435136c9b0c22c4e2e884b852ae2697938a137b4225de2276dbe65c99994d789d5412e53bd0b6f8a87cac40766575de771426f5f2fa333c0b53363cfac262fcd', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 08:19:06', '2009-09-03 08:19:06', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 08:19:06', "created_at" = '2009-09-03 08:19:06', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 04:19:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 04:19:07) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 04:19:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 04:19:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.5ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 08:35:06', 0, '2009-09-03 08:35:06', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 08:35:07', 1000, '2009-09-03 08:35:07', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 08:35:07', 30000, '2009-09-03 08:35:07', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a752441c560bc10f0dc4f4084c66b431d9613c5a2782678a0a0a3c0233640d2ec0f97cd59ec7046cbca62e9e2b2a736870bdb7d2b3c7e44e6ecd6b553fe866fc') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 08:35:07', '6e99c4ff6b736cdab62e82dc603e9062ce06f715ccc0d6b25161e075fab8ae823bb0c5640dc742e92b1430c2d5820f8eef6966190a6173719cc75b919b9c0daf', '2009-09-03 08:35:07', 'subscriber', 'wz9qJKpK2aWWpLwS_Sna', 'a752441c560bc10f0dc4f4084c66b431d9613c5a2782678a0a0a3c0233640d2ec0f97cd59ec7046cbca62e9e2b2a736870bdb7d2b3c7e44e6ecd6b553fe866fc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 08:35:07', '2009-09-03 08:35:07', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 08:35:07', "created_at" = '2009-09-03 08:35:07', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 04:35:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 16ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 04:35:07) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 04:35:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 04:35:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.7ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 08:35:18', 0, '2009-09-03 08:35:18', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 08:35:18', 1000, '2009-09-03 08:35:18', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 08:35:18', 30000, '2009-09-03 08:35:18', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e830ab50d140f13a63833d4d63b100f03fe088ec2525c7e573de7e8ea47c585b6b5e07a226f3640f424664b5ab548ce035a31b59f9bbbf9811bf171cd45dda83') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 08:35:18', 'ccd434e66d39cd4bd2234e1a0d7e55615d05c3af61589e2e8a5e010292b94ba90a784f74d9918afe56b7f21ee52f7d719daa38b1b3bb8b7bf68664f3611f5d57', '2009-09-03 08:35:18', 'subscriber', 'pigVeLQOMeTQw_uJW4vT', 'e830ab50d140f13a63833d4d63b100f03fe088ec2525c7e573de7e8ea47c585b6b5e07a226f3640f424664b5ab548ce035a31b59f9bbbf9811bf171cd45dda83', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 08:35:18', '2009-09-03 08:35:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 08:35:18', "created_at" = '2009-09-03 08:35:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 04:35:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 04:35:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 04:35:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 04:35:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.7ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (5.0ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:37:21', 0, '2009-09-03 09:37:21', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (66.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:37:21', 1000, '2009-09-03 09:37:21', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:37:22', 30000, '2009-09-03 09:37:22', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5f44752c00d13c22b5de8ff434f9f5d4fa3dc03882652e67ee89d46236fa86e9e266aca4824384bd4d20357c7b66dfb4c98fbc71b796860a0b45e0e63e389345') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 09:37:22', 'a1b57704793c939dcbfc3209d64b46b7ad60869d4155ee136278c353c84e9501c25a438ddd90691a8ce21c3a80a6120a5a211c34c34758de50c973baad1a0fbc', '2009-09-03 09:37:22', 'subscriber', 'f1CIjLke3jroYyrBExhB', '5f44752c00d13c22b5de8ff434f9f5d4fa3dc03882652e67ee89d46236fa86e9e266aca4824384bd4d20357c7b66dfb4c98fbc71b796860a0b45e0e63e389345', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 09:37:22', '2009-09-03 09:37:22', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 09:37:22', "created_at" = '2009-09-03 09:37:22', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 05:37:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 25ms (View: 21, DB: 70) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 05:37:22) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 05:37:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 05:37:22) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:37:30', 0, '2009-09-03 09:37:30', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:37:30', 1000, '2009-09-03 09:37:30', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:37:30', 30000, '2009-09-03 09:37:30', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '27e7c0dcc0e89481affcc0f65c883565980a7ccae3db08a11c54afb553d09f87c7806863263e43bc4b6f85e0a418758f4c05d9f2885be76c2270e8da8afb883c') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 09:37:30', '4dd2f74bf375ae6060b35dd9881eb64ad4976134bace74c82c47e6d7ca64a0705eaab26a504c11cee1eeab0ccdf7e1824fa63750f4d7212560c1e438a3bc92da', '2009-09-03 09:37:30', 'subscriber', 'u5kJgtEUJyJxa6_gjtUZ', '27e7c0dcc0e89481affcc0f65c883565980a7ccae3db08a11c54afb553d09f87c7806863263e43bc4b6f85e0a418758f4c05d9f2885be76c2270e8da8afb883c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 09:37:30', '2009-09-03 09:37:30', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 09:37:30', "created_at" = '2009-09-03 09:37:30', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 05:37:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 05:37:30) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 05:37:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 05:37:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 05:37:31) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionBilling Load (0.9ms)[0m   [0mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 68ms (View: 35, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:39:07', 0, '2009-09-03 09:39:07', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (58.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:39:07', 1000, '2009-09-03 09:39:07', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:39:07', 30000, '2009-09-03 09:39:07', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f199f74c301f375d188e027d3d33c121e3db68cd721b6412d4036f9e22c458eeccd80a128d91d535c881aa404f52159c65460bbe55ba3eecf7c31b2865aff009') LIMIT 1[0m
  [4;36;1mUser Create (0.4ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 09:39:08', '738b1e1148902de7b4b61cf8dcf8a119ebe25f68baadfdb85d0a00eafb437149738ce5ef5763d157c3717f2a5247ddc84176135c3c95ff8341247cd9bf5faae1', '2009-09-03 09:39:08', 'subscriber', 'PIIyNdvS8Z0Ojh2Xdrmn', 'f199f74c301f375d188e027d3d33c121e3db68cd721b6412d4036f9e22c458eeccd80a128d91d535c881aa404f52159c65460bbe55ba3eecf7c31b2865aff009', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 09:39:08', '2009-09-03 09:39:08', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 09:39:08', "created_at" = '2009-09-03 09:39:08', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 05:39:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 16ms (View: 12, DB: 62) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 05:39:08) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 05:39:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 05:39:08) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 05:39:08) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionBilling Load (0.3ms)[0m   [0mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 30ms (View: 20, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:39:38', 0, '2009-09-03 09:39:38', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (74.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:39:38', 1000, '2009-09-03 09:39:38', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:39:38', 30000, '2009-09-03 09:39:38', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7224752d66357e8ab27c0dba63691bb0360a63459d2f180bb07290d4543877c7a04e7e42f65818561879c7f3f73fb632dcda9eab44e6fcd7539b2818b62844e9') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 09:39:38', '9b0071eb45c7136975768bdea48fa90e5cf8cbef99f7b542800aa5a676b191bd91b62cecc0f38af9fdb2a2f4c188905c8f561564e854855886b36d8ae683420b', '2009-09-03 09:39:38', 'subscriber', 'n4fSIyJLpjpHKaUu4uAS', '7224752d66357e8ab27c0dba63691bb0360a63459d2f180bb07290d4543877c7a04e7e42f65818561879c7f3f73fb632dcda9eab44e6fcd7539b2818b62844e9', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 09:39:38', '2009-09-03 09:39:38', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 09:39:38', "created_at" = '2009-09-03 09:39:38', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 05:39:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 16ms (View: 11, DB: 78) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 05:39:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 05:39:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 05:39:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.1ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 05:39:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionBilling Load (0.3ms)[0m   [0mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 28ms (View: 18, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:39:48', 0, '2009-09-03 09:39:48', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:39:48', 1000, '2009-09-03 09:39:48', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:39:48', 30000, '2009-09-03 09:39:48', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '81cbe40aeb525f758597d82dbb355d9890254a45bca932f4703cf03012577efef2332378ec436e20c6c878d7ce3b5437bd4d711d42a85abc972ae4df2bdc9271') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 09:39:48', 'fec787289c08c5c8878129f1746b467d884792fb5e2332a6688ad641559bd02ec98430013a81c8318518dd29996ad2685531aad8abad511fe9e9805b94e93f87', '2009-09-03 09:39:48', 'subscriber', 'vGxcRlnN_rotzSEjXbbo', '81cbe40aeb525f758597d82dbb355d9890254a45bca932f4703cf03012577efef2332378ec436e20c6c878d7ce3b5437bd4d711d42a85abc972ae4df2bdc9271', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 09:39:48', '2009-09-03 09:39:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 09:39:48', "created_at" = '2009-09-03 09:39:48', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 05:39:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.2ms)
Completed in 31ms (View: 26, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 05:39:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 05:39:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 05:39:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 05:39:49) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionBilling Load (0.3ms)[0m   [0mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 28ms (View: 18, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:40:32', 0, '2009-09-03 09:40:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (65.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:40:33', 1000, '2009-09-03 09:40:33', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:40:33', 30000, '2009-09-03 09:40:33', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c93acab46d28c29bc08669d761e535aba6c7f92d8265fee398615354f8abe6fd3b9e8be09e650019747d3280ea5f00cae420df7d7df0acd18fc8422054b16c7d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 09:40:33', '9057ee85b8f2e1113d00bbac096f1ff4c0569cdc312e85a191015e033dc4809fea972d6a4c7d48171314a1d51be46d2e3bbedcf4ca8c533c8e31852058521404', '2009-09-03 09:40:33', 'subscriber', 'A8mOUHgTlvhC_oSWV1wS', 'c93acab46d28c29bc08669d761e535aba6c7f92d8265fee398615354f8abe6fd3b9e8be09e650019747d3280ea5f00cae420df7d7df0acd18fc8422054b16c7d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 09:40:33', '2009-09-03 09:40:33', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 09:40:33', "created_at" = '2009-09-03 09:40:33', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 05:40:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 69) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 05:40:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 05:40:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-03 05:40:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 05:40:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionBilling Load (0.3ms)[0m   [0mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 28ms (View: 18, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 09:59:17', 0, '2009-09-03 09:59:17', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 09:59:18', 1000, '2009-09-03 09:59:18', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 09:59:18', 30000, '2009-09-03 09:59:18', 12, 't')[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 10:01:52', 0, '2009-09-03 10:01:52', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 10:01:52', 1000, '2009-09-03 10:01:52', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 10:01:52', 30000, '2009-09-03 10:01:52', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f87c4bb97a9ad4fa084549703fef3999c053162defe97f0d7c33c3003263c3d29e0fd22101496887369e1528daa32bf75c3b14627c4f3a74b40f8b72fe26330d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 10:01:52', '99eaf90752d2482c5940d6efc511f128249da48d018813988c3f5783aabdcfbd9ff2cfa7df143770045d08b4de84dc54d7098b0676566fdbe4807bbafb20df10', '2009-09-03 10:01:52', 'subscriber', 'M-T712qjIXqqvW2xFrLG', 'f87c4bb97a9ad4fa084549703fef3999c053162defe97f0d7c33c3003263c3d29e0fd22101496887369e1528daa32bf75c3b14627c4f3a74b40f8b72fe26330d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 10:01:52', '2009-09-03 10:01:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 10:01:52', "created_at" = '2009-09-03 10:01:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionBilling Load (0.2ms)[0m   [0mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 10:08:05', 0, '2009-09-03 10:08:05', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (52.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 10:08:05', 1000, '2009-09-03 10:08:05', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 10:08:05', 30000, '2009-09-03 10:08:05', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0051e296ce30158105425167be2a8905bd48338f929b7a9cac4e1573d9707e0d2a9fbde04320962df30142a3d987481064914872f68053950771e2e086b4d171') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 10:08:05', '0be73dcd435572db0f4ca5cbedbc0da78e89c8d0ca3f571510bfb5986ce001887f4be15a849ac6f086773775c407746bdeefc4da43f198a9343218c49aedff42', '2009-09-03 10:08:05', 'subscriber', 'eyZqOif28tFwpPhFQRtk', '0051e296ce30158105425167be2a8905bd48338f929b7a9cac4e1573d9707e0d2a9fbde04320962df30142a3d987481064914872f68053950771e2e086b4d171', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 10:08:05', '2009-09-03 10:08:05', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 10:08:05', NULL, '2009-09-03 10:08:05', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 10:08:05', "created_at" = '2009-09-03 10:08:05', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 10:09:34', 0, '2009-09-03 10:09:34', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (61.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 10:09:34', 1000, '2009-09-03 10:09:34', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 10:09:34', 30000, '2009-09-03 10:09:34', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2af750f36630f8fb8597f1d5dbaa91681a01da60d368c34adcd0b17eea341998701e9a933643ee1de5f70effc962dd2f9dacb6967878a1e5df53a1714f5fd893') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 10:09:35', 'db7cb62437109b41acc0d95abc542335ce3ba6420ddd35bb25842916ef11519b4ae9dfd9c32d09d2a4d3134735086cbf5a08539b89b2de91389f83e2af4093c5', '2009-09-03 10:09:35', 'subscriber', 'CRme7Y_ppDtNtmop19CT', '2af750f36630f8fb8597f1d5dbaa91681a01da60d368c34adcd0b17eea341998701e9a933643ee1de5f70effc962dd2f9dacb6967878a1e5df53a1714f5fd893', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 10:09:35', '2009-09-03 10:09:35', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.4ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 10:09:35', NULL, '2009-09-03 10:09:35', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 10:09:35', "created_at" = '2009-09-03 10:09:35', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 06:09:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 16ms (View: 12, DB: 66) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 06:09:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 06:09:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 10:10:04', 0, '2009-09-03 10:10:04', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 10:10:04', 1000, '2009-09-03 10:10:04', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 10:10:04', 30000, '2009-09-03 10:10:04', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ba6fb9197407cf3c0496741a0c97e86dcfa146ec4313e8392570c16f760e6618598273dfa985057e40eee41419e3206e4a81bf05e9c6b9da14e62094c52e6932') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 10:10:05', 'd24b998d42c1a7dba94582a5170ea4be5978bd95c91adcab9142bde7bf2ecc9b89b8ac2f3081267145758e1f1aef8d79b9a5647e56c52bfe4b5df490b5f6a45c', '2009-09-03 10:10:05', 'subscriber', 'aBDyBinqkNGNBFK7ojSW', 'ba6fb9197407cf3c0496741a0c97e86dcfa146ec4313e8392570c16f760e6618598273dfa985057e40eee41419e3206e4a81bf05e9c6b9da14e62094c52e6932', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 10:10:05', '2009-09-03 10:10:05', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.4ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 10:10:05', NULL, '2009-09-03 10:10:05', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 10:10:05', "created_at" = '2009-09-03 10:10:05', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 06:10:05) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 06:10:05) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 06:10:05) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 06:10:05) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-03 06:10:05) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 10:11:21', 0, '2009-09-03 10:11:21', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 10:11:21', 1000, '2009-09-03 10:11:21', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 10:11:21', 30000, '2009-09-03 10:11:21', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5999d1e9eec54e9e8922394bbded5724b659e988aaed7c7ddd40d685a281797575e5d735025bca5f7b6dccb5a2d5a4ff5c85e4dbb79df6edbc88f296118d316d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 10:11:21', '236a8aae4474bf4c5a7cfec144277a64bd2cb087db11a6b043295e89ff6175c3988b24f19c190466d02c734577eed5d26105bac1f34f27ab88536e6f45d9a02d', '2009-09-03 10:11:21', 'subscriber', 'uU-aBnySFDiixXgm67vc', '5999d1e9eec54e9e8922394bbded5724b659e988aaed7c7ddd40d685a281797575e5d735025bca5f7b6dccb5a2d5a4ff5c85e4dbb79df6edbc88f296118d316d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 10:11:21', '2009-09-03 10:11:21', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 10:11:21', NULL, '2009-09-03 10:11:21', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 10:11:21', "created_at" = '2009-09-03 10:11:21', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 06:11:21) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.6ms)
Completed in 25ms (View: 21, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 06:11:21) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 06:11:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 06:11:21) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 31ms (View: 20, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 06:11:21) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#credit_card (for 127.0.0.1 at 2009-09-03 06:11:21) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (1.1ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 17:45:46', 0, '2009-09-03 17:45:46', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 17:45:46', 1000, '2009-09-03 17:45:46', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 17:45:46', 30000, '2009-09-03 17:45:46', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8d9dbe97f9652be591b40b5472ee0d4e423332d8ebff897b6568b2ce62e051c8c4e2b28bc71ba58785bfae145271ba1eb9b23a45aabc96890851c1f8b8b76dea') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 17:45:46', 'c911b78763540ec1d3580d27e1cdfddb6d76e0a4e52350bd89bb2800527bac5a6361c575515302beffee5c21be5076bcdf54704b4e0cd33aaf37f8e5f0f2ccde', '2009-09-03 17:45:46', 'subscriber', 'm0zQoFxbvry7z_GOZJ5g', '8d9dbe97f9652be591b40b5472ee0d4e423332d8ebff897b6568b2ce62e051c8c4e2b28bc71ba58785bfae145271ba1eb9b23a45aabc96890851c1f8b8b76dea', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 17:45:46', '2009-09-03 17:45:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.4ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 17:45:46', NULL, '2009-09-03 17:45:46', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 17:45:46', "created_at" = '2009-09-03 17:45:46', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 13:45:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 24ms (View: 20, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 13:45:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 13:45:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 13:45:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 13:45:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 18:59:02', 0, '2009-09-03 18:59:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 18:59:02', 1000, '2009-09-03 18:59:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 18:59:02', 30000, '2009-09-03 18:59:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0f5614e7dd8efa8e6b2e103bfbb9afbc41f3b8c57eb12dcd09346ce02d4d0fbcf86fbc897ca96a6bcbf2010a63f5c21e8eb1305a37aab3a1132b5493123f11e7') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 18:59:02', '86a641d7705a4cc334306caa31c512c4f9bfc6b5a3fb6ad4b5f1e919c96879261c0de2c415147c0b808572812562ff3ded62c38f7b580beabcde4399330ff1cf', '2009-09-03 18:59:02', 'subscriber', 'kswaNVodGhRi3qSNNdAl', '0f5614e7dd8efa8e6b2e103bfbb9afbc41f3b8c57eb12dcd09346ce02d4d0fbcf86fbc897ca96a6bcbf2010a63f5c21e8eb1305a37aab3a1132b5493123f11e7', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 18:59:02', '2009-09-03 18:59:02', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 18:59:02', NULL, '2009-09-03 18:59:02', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 18:59:02', "created_at" = '2009-09-03 18:59:02', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 14:59:02) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 24ms (View: 20, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 14:59:02) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 14:59:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 14:59:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 14:59:02) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 18:59:19', 0, '2009-09-03 18:59:19', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 18:59:19', 1000, '2009-09-03 18:59:19', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 18:59:19', 30000, '2009-09-03 18:59:19', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '258bb5b0984bf406416d70bb250a401cdce29a141d547e90625e19b884a8d953ec58665e31d772364b2085bccf32725e9daa0db4a4edcaaa9f9c735ff847ebc4') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 18:59:19', '6eda7b98602068d5991fd7592273c043ff79e93e0c48cf2e1d68d59e11bf0d17960a1b194f70afaa420e902276d3d88b67f61672c59e26bb653485c87fe41b6d', '2009-09-03 18:59:19', 'subscriber', 'u6vWkn3grIXYlhjcYcGT', '258bb5b0984bf406416d70bb250a401cdce29a141d547e90625e19b884a8d953ec58665e31d772364b2085bccf32725e9daa0db4a4edcaaa9f9c735ff847ebc4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 18:59:19', '2009-09-03 18:59:19', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 18:59:19', NULL, '2009-09-03 18:59:19', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 18:59:19', "created_at" = '2009-09-03 18:59:19', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 14:59:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 14:59:19) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 14:59:19) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 14:59:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 14:59:19) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:00:04', 0, '2009-09-03 19:00:04', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:00:04', 1000, '2009-09-03 19:00:04', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:00:04', 30000, '2009-09-03 19:00:04', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '24c68321c2a87ca42d2bf326ba38220c7b73f6190074c485164e70818238fc2d90611d8440cf8a2ef464b95637cd6eb6feb4b887917b83aa829d953009434402') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:00:04', '4ef80800a9b80b52075c61a0bd06672c1197be3c18b5c9f1516e7c3b42e08c44fa3e935a422d5e9989f43dee28d91a235dc58686559d3a394d00eae2e018f0bf', '2009-09-03 19:00:04', 'subscriber', 'r7ihsq0LzBA8PytMPo0u', '24c68321c2a87ca42d2bf326ba38220c7b73f6190074c485164e70818238fc2d90611d8440cf8a2ef464b95637cd6eb6feb4b887917b83aa829d953009434402', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:00:04', '2009-09-03 19:00:04', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:00:04', NULL, '2009-09-03 19:00:04', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:00:04', "created_at" = '2009-09-03 19:00:04', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:00:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:00:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:00:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:00:04) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:00:04) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:02:32', 0, '2009-09-03 19:02:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:02:32', 1000, '2009-09-03 19:02:32', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:02:32', 30000, '2009-09-03 19:02:32', 12, 't')[0m
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:24:15', 0, '2009-09-03 19:24:15', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:24:16', 1000, '2009-09-03 19:24:16', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:24:16', 30000, '2009-09-03 19:24:16', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5f7a9928c81f1b33b114250449062fab30c20b221e694bec183c5cafd1544b6e682ed74495ad2699b2a48e6c56f48266e929f93dac526b25587b008310af0201') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:24:16', '61e9ac9a3774cfe8f4c0dcf5454daa1aca350e7a37ec6513d57cb86ffab87ecba346215bdb25616ca53c7d2c9ed11ab5fd3fd016a4f6d2afa28b1189e24c4e0d', '2009-09-03 19:24:16', 'subscriber', 'YuzBWNqAslMZTna62565', '5f7a9928c81f1b33b114250449062fab30c20b221e694bec183c5cafd1544b6e682ed74495ad2699b2a48e6c56f48266e929f93dac526b25587b008310af0201', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:24:16', '2009-09-03 19:24:16', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:24:16', NULL, '2009-09-03 19:24:16', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:24:16', "created_at" = '2009-09-03 19:24:16', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:24:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 19ms (View: 15, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:24:16) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:24:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:24:16) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:24:16) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:27:45', 0, '2009-09-03 19:27:45', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:27:45', 1000, '2009-09-03 19:27:45', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:27:45', 30000, '2009-09-03 19:27:45', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9cd4ecd0f9f93346f20e1bd4daeb13dcd0b6e5ae75260ead4aaa497d48cefc3cc224379e9f985600cfde797a282bbc6a12d9f88d610ad444f70793eeeef507db') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:27:46', '8aa50a8ec714b04c5d55579aa147556992457f778534d6e4905ed468609d48cf824c8d1a123c2d2f10b60ed1356f6a76019feeeb866feaa7cb15d793a33f91c3', '2009-09-03 19:27:46', 'subscriber', 'PjgNKyHvVBbpNnYNKS3n', '9cd4ecd0f9f93346f20e1bd4daeb13dcd0b6e5ae75260ead4aaa497d48cefc3cc224379e9f985600cfde797a282bbc6a12d9f88d610ad444f70793eeeef507db', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:27:46', '2009-09-03 19:27:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:27:46', NULL, '2009-09-03 19:27:46', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:27:46', "created_at" = '2009-09-03 19:27:46', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:27:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:27:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:27:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:27:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:27:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:28:25', 0, '2009-09-03 19:28:25', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (71.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:28:25', 1000, '2009-09-03 19:28:25', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:28:25', 30000, '2009-09-03 19:28:25', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6d964c2bd7acbc5729353a8c4763f2c343cc41003277f69552ab9fdce912609456e367b8c6ecb4ccc8605722fa6a46167d4c159bc06684e6eaf3de08f7a5d279') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:28:26', 'de7a1b5666606d0bf5395934c645020a9aede4d26d95fff905e371bcb0983072bad51f35ca9bd2e1cecbef33e5d6f5ce075871c3a6bef87eec5f19276380b534', '2009-09-03 19:28:26', 'subscriber', 'NEVBoOsTDw8I73EdsM5s', '6d964c2bd7acbc5729353a8c4763f2c343cc41003277f69552ab9fdce912609456e367b8c6ecb4ccc8605722fa6a46167d4c159bc06684e6eaf3de08f7a5d279', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:28:26', '2009-09-03 19:28:26', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:28:26', NULL, '2009-09-03 19:28:26', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:28:26', "created_at" = '2009-09-03 19:28:26', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:28:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 76) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:28:26) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:28:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:28:26) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:28:26) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:29:23', 0, '2009-09-03 19:29:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:29:23', 1000, '2009-09-03 19:29:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:29:23', 30000, '2009-09-03 19:29:23', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9d18a86823b20f252e19bdd1aeac8c987e56614b2da260f6f9e9cf358572bce8481197da7abe99da7c2636b4a28f0baa2b1cda58b817676535b58290d26cecda') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:29:24', '8b30ee0c2b96cf8ca768ea4ec031b0cd0e69f9e97a006230d9dc3d2e38f6761082e505792ca8ee5f0e6da6a8e8871ee13a3a1da8eb982ebafc90cacbc358b2d4', '2009-09-03 19:29:24', 'subscriber', 'Swl3DaYznVuT_LEL-TWs', '9d18a86823b20f252e19bdd1aeac8c987e56614b2da260f6f9e9cf358572bce8481197da7abe99da7c2636b4a28f0baa2b1cda58b817676535b58290d26cecda', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:29:24', '2009-09-03 19:29:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:29:24', NULL, '2009-09-03 19:29:24', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:29:24', "created_at" = '2009-09-03 19:29:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:29:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:29:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:29:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:29:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:29:24) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:29:53', 0, '2009-09-03 19:29:53', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:29:53', 1000, '2009-09-03 19:29:53', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:29:53', 30000, '2009-09-03 19:29:53', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '80ece072ae17f6b0a0dd950c93e67d468df408e549fe7bf4aee5efe00337c10df5a6c6e8db62c28125907d24c94b61fa531f2f8a9ddedc7963528d04ac7dab8d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:29:53', '3d9dd01c11320b298af8888d3e251124cd32a6e4b0f1e6c62cf073b9a75b1e93e2edcfcc6859a53474d98d60c26dfd8e3a840804c957dafcbec700a10a763a4a', '2009-09-03 19:29:53', 'subscriber', 'kL1hLirtB6lCUXIGApei', '80ece072ae17f6b0a0dd950c93e67d468df408e549fe7bf4aee5efe00337c10df5a6c6e8db62c28125907d24c94b61fa531f2f8a9ddedc7963528d04ac7dab8d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:29:53', '2009-09-03 19:29:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:29:53', NULL, '2009-09-03 19:29:53', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:29:53', "created_at" = '2009-09-03 19:29:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:29:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 16ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:29:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:29:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:29:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:29:54) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/create_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#create_credit_card (for 127.0.0.1 at 2009-09-03 15:29:54) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#create_credit_card (for 127.0.0.1 at 2009-09-03 15:29:54) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-03 19:38:56', 0, '2009-09-03 19:38:56', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-03 19:38:56', 1000, '2009-09-03 19:38:56', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-03 19:38:56', 30000, '2009-09-03 19:38:56', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ef6b45dfdd4b0394b224ffd2bba877351c42a9532822cff6cdd8cd2d11745e36b3075d6405027308441ecbed2a90cdead0cc7e61001d48fcec166d808c82798f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-03 19:38:56', 'd4b27995df3a4e2b4a7d1335c1423ea99f83e09195c8e4cc4f2b3588983c9ba55959399821c4c764d677efa6d455e278489ecbe952788e401073c03a12ed8831', '2009-09-03 19:38:56', 'subscriber', 'V_xIfkf08KDNarHRr2YL', 'ef6b45dfdd4b0394b224ffd2bba877351c42a9532822cff6cdd8cd2d11745e36b3075d6405027308441ecbed2a90cdead0cc7e61001d48fcec166d808c82798f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-03 19:38:56', '2009-09-03 19:38:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionBilling Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionBilling Create (0.3ms)[0m   [0mINSERT INTO "subscription_billings" ("address1", "city", "address2", "st", "created_at", "zipcode", "updated_at", "fullname", "subscription_id", "phone", "cc_type", "cc_last_digits", "gateway_key", "cc_expires_on", "state") VALUES(NULL, NULL, NULL, NULL, '2009-09-03 19:38:56', NULL, '2009-09-03 19:38:56', NULL, 1, NULL, NULL, NULL, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-03 19:38:56', "created_at" = '2009-09-03 19:38:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-03', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-03 15:38:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 17ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-03 15:38:56) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-03 15:38:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-03 15:38:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionBilling Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_billings" WHERE ("subscription_billings".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-03 15:38:56) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-03 15:38:56) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-03 15:38:56) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-04 08:15:42', 0, '2009-09-04 08:15:42', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-04 08:15:42', 1000, '2009-09-04 08:15:42', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-04 08:15:42', 30000, '2009-09-04 08:15:42', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f49813a0b9b2f7249763fffca9eba9e6fde9dabcfea7ce64125e9b03a3a91c5c3c6e632969d0093799d60a38e8a2b52ecb5c2359bd9c6ef30c998f6b1b70150e') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-04 08:15:43', '53bb2ed27c7cc5e57f6827b883179313e268733d21db04b56bbe898d40011cf113272d62b25a64779ff5a174a0e13737fc18340f7251f15aa0ca695ab699d037', '2009-09-04 08:15:43', 'subscriber', 'Ljyi3oNp9HLWNTqspe7o', 'f49813a0b9b2f7249763fffca9eba9e6fde9dabcfea7ce64125e9b03a3a91c5c3c6e632969d0093799d60a38e8a2b52ecb5c2359bd9c6ef30c998f6b1b70150e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-04 08:15:43', '2009-09-04 08:15:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0324ecd33f8252ba0ac4a45ff84e96828aa3fa2ab750b84885c5b8dfa887dfb4c06df2584fc3df15fb7b0e1699ce97ec9adf9a3057e225460b525b9944480aa4') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-04 08:15:43', '37d73cd97b2125231f39d2ae96dfd6c07ae04cb1e46d8994accb278e7ce947a7b23a9d3ccc133e7c7374d276596a4d3e70d2f4ebf54a4e047060002de8e08d48', '2009-09-04 08:15:43', 'subscriber', '1MTm9G35sRxBKUKDkah6', '0324ecd33f8252ba0ac4a45ff84e96828aa3fa2ab750b84885c5b8dfa887dfb4c06df2584fc3df15fb7b0e1699ce97ec9adf9a3057e225460b525b9944480aa4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-04 08:15:43', '2009-09-04 08:15:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c7cf9ae51dcbe2818e277206069aab710286729d4c541da47c054a0882f0295e3f447e3838c876e7ea03e0f9a666a0ed635d8851fdae27b882a07445289fdb07') LIMIT 1[0m
  [4;36;1mUser Create (1.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-04 08:15:43', '8137467c293311ed527b8c0209bf7f1c8b775f013584a17bf1917c6c4d297706a6d317fd0a90aa55dd0773acf4dafa21c8ee64edcf9eb4c08c26c861c426f60c', '2009-09-04 08:15:43', 'subscriber', 'Pys55mDCHztSOAmsLkP5', 'c7cf9ae51dcbe2818e277206069aab710286729d4c541da47c054a0882f0295e3f447e3838c876e7ea03e0f9a666a0ed635d8851fdae27b882a07445289fdb07', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-04 08:15:43', '2009-09-04 08:15:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-04 08:21:09', 0, '2009-09-04 08:21:09', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-04 08:21:09', 1000, '2009-09-04 08:21:09', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-04 08:21:09', 30000, '2009-09-04 08:21:09', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd705daf950a5472bc0a82c160b6ce50368c29476260a4ea613874cf3718e26b050c3a027eb26ae7ea19eb7ded8da18ae0fa1715edf846824496b5d2c7f00169c') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-04 08:21:09', 'c731467831a94e23c13486a3da0e901f3b2412adf54f13c67ad73c58dc514c86f2ba974d27ffee1ddc385a1f194ea090bb22ea3ceeb026f147afdc632c937ec0', '2009-09-04 08:21:09', 'subscriber', 'KLpg4xfO1N-WkSoA4pwQ', 'd705daf950a5472bc0a82c160b6ce50368c29476260a4ea613874cf3718e26b050c3a027eb26ae7ea19eb7ded8da18ae0fa1715edf846824496b5d2c7f00169c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-04 08:21:09', '2009-09-04 08:21:09', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-04 08:21:09', "created_at" = '2009-09-04 08:21:09', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-04', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-04 08:21:09', NULL, NULL, NULL, '2009-09-04 08:21:09', 1, NULL, NULL, 'none')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-04 04:21:09) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 23ms (View: 19, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-04 04:21:09) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-04 04:21:09) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 9, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-04 04:21:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 45ms (View: 19, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-04 04:21:10) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-04 04:21:10) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-04 04:21:13) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '313affab760cd4f0e1385c0290a1280dcfbfb68e1dfa22e9b4f5d24cd6879cc4eceb7f5581e84ac8e5d3975b76b2dc45914f21226f76586731597f3199966b64') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-04 08:21:13', '2311e846778d434ff4900b5113321527d1fe9a76ec68da9dc8d6b4facdebf05f26e78927399187e0fb04a6c23dc1e2d60ca6994329dea80797f02b5216e908dc', '2009-09-04 08:21:13', 'subscriber', 'VIWO6njM5RFd-vUDo_Ud', '313affab760cd4f0e1385c0290a1280dcfbfb68e1dfa22e9b4f5d24cd6879cc4eceb7f5581e84ac8e5d3975b76b2dc45914f21226f76586731597f3199966b64', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-04 08:21:13', '2009-09-04 08:21:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-04 08:21:13', "created_at" = '2009-09-04 08:21:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-04', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-04 08:21:13', NULL, NULL, NULL, '2009-09-04 08:21:13', 1, NULL, NULL, 'none')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-04 04:21:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-04 04:21:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-04 04:21:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-04 04:21:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'deb39b2278450bd3945890d88ea6c9694c1bd975be1ea0815af3ca25ff40b63ed15cedd0834ca25bf52d8bf1a3b49f62282249e48158d6b0f1cf8c7190535e5b') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-04 08:21:13', '3e8f259356dd83b05b0e4354bc7d38809d75989cd5d6e6840d81009d59455926bfb1f82df81dae346ec0304129cf137b854d079e53795efa27059fc509d0655c', '2009-09-04 08:21:13', 'subscriber', 'ALJ1N7hgc0QOl8IqBOh9', 'deb39b2278450bd3945890d88ea6c9694c1bd975be1ea0815af3ca25ff40b63ed15cedd0834ca25bf52d8bf1a3b49f62282249e48158d6b0f1cf8c7190535e5b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-04 08:21:13', '2009-09-04 08:21:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-04 08:21:13', "created_at" = '2009-09-04 08:21:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-04', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-04 08:21:13', NULL, NULL, NULL, '2009-09-04 08:21:13', 1, NULL, NULL, 'none')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-04 04:21:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-04 04:21:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-04 04:21:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-04 04:21:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:12:36', 0, '2009-09-05 05:12:36', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:12:36', 1000, '2009-09-05 05:12:36', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:12:36', 30000, '2009-09-05 05:12:36', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 24ms (View: 21, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f7ecd801be990bd87b669dfd5c9b8e5060e6b70b33e789ac422d03bef5e1baab4d996f7d0da0af614dc44e52f261b20f8c9788e71f8bd7a13e003ad62efb775e') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:12:36', 'ead1900c63e30df57cff4310c736b2986c8a2978d34e1c3d8d11b63514d43fa651f38cdff777f7891b9e14a062729fc9e649a6ae8ac9ced7b4ca5263ffb3a766', '2009-09-05 05:12:36', 'subscriber', 'XxzNnUsL7VrEB_AHGKQ8', 'f7ecd801be990bd87b669dfd5c9b8e5060e6b70b33e789ac422d03bef5e1baab4d996f7d0da0af614dc44e52f261b20f8c9788e71f8bd7a13e003ad62efb775e', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:12:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '98fc95ade340b092296ace209d9e894aa304c26e88cfb18547cf4006ffe5a286ab276000ec3fe8f7541bf9cd9b59b313a02070e6617c08f50f181bf3fe714e6a') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:12:36', 'd239178ff9d7002a84ac6897260fd2f985863dd9fac88b0d1de35d7a75f8106b5ad0defabcbe6bdaa1899afe6c055b1de768bbcd54ca6ae1f0f94b2b57883a7e', '2009-09-05 05:12:36', 'subscriber', '5dC2p9fMSpHXF_J6dcPE', '98fc95ade340b092296ace209d9e894aa304c26e88cfb18547cf4006ffe5a286ab276000ec3fe8f7541bf9cd9b59b313a02070e6617c08f50f181bf3fe714e6a', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:12:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-05 01:12:36) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 05:12:36', 'title 1', 'body 1', '2009-09-05 05:12:36')[0m
Redirected to http://www.example.com/infos/1
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4c131a4b68019c695e7a513d87303042b2e7003233e3624c1eeb311a93154faebdd7cb79968232bc36622c0a94c2ccd9acbf1062a8eb3ec2849ce3c7387650b2') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:12:36', '90e1cbcf793e8e77d8105a5e0445c558a8ad814d536daaea4fdfcd8b48a2ec7f56108b9ef087f47af5d1ed46fd79d52e20155d26fc115ad63860693ff4b395e7', '2009-09-05 05:12:36', 'subscriber', '5tWpGg--ZtLOrfDxzPIh', '4c131a4b68019c695e7a513d87303042b2e7003233e3624c1eeb311a93154faebdd7cb79968232bc36622c0a94c2ccd9acbf1062a8eb3ec2849ce3c7387650b2', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:12:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 05:12:37', 'title 1', 'body 1', '2009-09-05 05:12:37')[0m
  [4;36;1mInfo Create (0.2ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 05:12:37', 'title 2', 'body 2', '2009-09-05 05:12:37')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 05:12:37', 'title 3', 'body 3', '2009-09-05 05:12:37')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 05:12:37', 'title 4', 'body 4', '2009-09-05 05:12:37')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-05 01:12:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.6ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-05 01:12:37) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-05 01:12:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:12:53', 0, '2009-09-05 05:12:53', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:12:53', 1000, '2009-09-05 05:12:53', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:12:53', 30000, '2009-09-05 05:12:53', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:12:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 32ms (View: 26, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:12:53) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'de3ddfa739ea8bd4c6d77af090adf1b235aae6e65e50da931032bdcafb6e594ddf0ee4b2bd7abcaa3f3f6c410fae64f0fd73dfe447fb2fb21b4843b87c1ae57a') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:12:54', 'e341eeef5ee6ba631c50ec83d8c838471decde9bb8a1d5a85a8fdbea07853b772e7ebf0babdd4ee1f910065e184951f52278fb8cbb6886518397fd8b1620f272', '2009-09-05 05:12:54', 'subscriber', '3OHFtfUFZ1-h8bhRYARv', 'de3ddfa739ea8bd4c6d77af090adf1b235aae6e65e50da931032bdcafb6e594ddf0ee4b2bd7abcaa3f3f6c410fae64f0fd73dfe447fb2fb21b4843b87c1ae57a', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:12:54', '2009-09-05 05:12:54', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:12:54', NULL, NULL, NULL, '2009-09-05 05:12:54', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:12:54', "created_at" = '2009-09-05 05:12:54', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 257ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'de3ddfa739ea8bd4c6d77af090adf1b235aae6e65e50da931032bdcafb6e594ddf0ee4b2bd7abcaa3f3f6c410fae64f0fd73dfe447fb2fb21b4843b87c1ae57a') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 112ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:12:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2593bf8c00879a1458199d2a6d3d9da364170ddef320ce76c6fbde25f2559b2ce5b08deb937cd51222d001202556656e24128dbb6fa339918b6a3bf2e80be805') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:12:54', 'd90e6b22d37f1c1b25b43823cfd46258dc98fec56a21bce67cbbb5d03473eb6e86de9d9f911b363bd21aa4200189721ccb858df486b3ab4f02ebc557c72603a6', '2009-09-05 05:12:54', 'subscriber', 'P2HF4PlO5r2sKP_jAwmY', '2593bf8c00879a1458199d2a6d3d9da364170ddef320ce76c6fbde25f2559b2ce5b08deb937cd51222d001202556656e24128dbb6fa339918b6a3bf2e80be805', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:12:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd65bcb3d7efddd985b589819958143a2cb5a02adcfea8836000745353dacb6859a65923ce0aa65ba8f48357ce552d8f6701b8fc343a4602b050dd93c343c7b4b') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:12:54', '9605a44bcc371b1792c8316e393a0837ccc8dc98c3b9719e6e14d94d783b1d794c76806f60bf21433708c280baab6fcf215551f60749206902b5654db653c261', '2009-09-05 05:12:54', 'subscriber', 'IhD8UlQw0Y2evXcCf7g4', 'd65bcb3d7efddd985b589819958143a2cb5a02adcfea8836000745353dacb6859a65923ce0aa65ba8f48357ce552d8f6701b8fc343a4602b050dd93c343c7b4b', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:12:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 129ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-05 01:12:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:15:54', 0, '2009-09-05 05:15:54', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:15:54', 1000, '2009-09-05 05:15:54', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:15:54', 30000, '2009-09-05 05:15:54', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 33ms (View: 27, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:15:54) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8fd5884387ee8de2b0b48c0d27fe9b42c86746779381d6c5af94c13cdba51f1751292598c95330084258b634e12dd80d283110f8dcd1410caaa2a81648bf96b3') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:15:54', 'f57fe1cdc53b21c7603448025cbafffe044a3323b5a89e27dcfdbb6ebadeb1b4dcce34f633de410456bba8053fdc48e89266a5ca1373ad00a68492c661b80315', '2009-09-05 05:15:54', 'subscriber', '2nPhj2xZQP7Qs-QlDoWr', '8fd5884387ee8de2b0b48c0d27fe9b42c86746779381d6c5af94c13cdba51f1751292598c95330084258b634e12dd80d283110f8dcd1410caaa2a81648bf96b3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:15:54', '2009-09-05 05:15:54', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:15:54', NULL, NULL, NULL, '2009-09-05 05:15:54', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:15:54', "created_at" = '2009-09-05 05:15:54', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 255ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '8fd5884387ee8de2b0b48c0d27fe9b42c86746779381d6c5af94c13cdba51f1751292598c95330084258b634e12dd80d283110f8dcd1410caaa2a81648bf96b3') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 10ms (View: 9, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 125ms (View: 121, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:15:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '88b8d3d8ad113727bd70d49046f455a672b3793cf0073f34ca39f6921d0996edaa612cee558a4acceb2a6d5513c966c5a9cf5f6babe65a4e13f7fb705edbf71b') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:15:54', '027773c292a2f911666f36fcdc99d319a1bc8adab7011b97261a392e11e744e1006130dccea7213a227e7a34c97bb22d8175bb04214f8962699034c26ab793a8', '2009-09-05 05:15:54', 'subscriber', 'Kl_hwljXcGOdXlpgn-ew', '88b8d3d8ad113727bd70d49046f455a672b3793cf0073f34ca39f6921d0996edaa612cee558a4acceb2a6d5513c966c5a9cf5f6babe65a4e13f7fb705edbf71b', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.5ms)
Completed in 4ms (View: 4, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:15:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4521b4951fdfc8d4f4c152a1f5368d2cc96525798d6e02e308ccc063b92fe57ad55147145f51a91a45e0aaffb5aee3a4ca060aac344e34ea851c8e242e771b44') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:15:54', '323de94b6c0c1f7af7d10e375f67683fa59ba62a51a4e3a5b66237ba2018bdafd7bc422fcae805c7dc7f92f39906ec732d3ffcafe5af9b966a4aebb0a655fadc', '2009-09-05 05:15:54', 'subscriber', '0tf-di9d_q9xDpPQWEMA', '4521b4951fdfc8d4f4c152a1f5368d2cc96525798d6e02e308ccc063b92fe57ad55147145f51a91a45e0aaffb5aee3a4ca060aac344e34ea851c8e242e771b44', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:15:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:15:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 125ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:15:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 01:15:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-05 01:15:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:33:53', 0, '2009-09-05 05:33:53', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:33:53', 1000, '2009-09-05 05:33:53', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:33:53', 30000, '2009-09-05 05:33:53', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '981310a703acbd2488b8538333f0d2fae0b7b82fb5cf54d78b6614d425dd8a62b2ae4be71b3d41b8d32dc35030c62ebf87cdc3021b76f17632d3632a29023f0f') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:47:18', 0, '2009-09-05 05:47:18', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:47:18', 1000, '2009-09-05 05:47:18', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:47:18', 30000, '2009-09-05 05:47:18', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6b54e0295af1dc03ff4eac93ea3ac906753fc21159cadedef903aeb048726f526c300377c4c807dd86d22e19a163058312824b176ce8a4056370006f623c686e') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:48:11', 0, '2009-09-05 05:48:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (62.0ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:48:11', 1000, '2009-09-05 05:48:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:48:12', 30000, '2009-09-05 05:48:12', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '377d00046a1b4dc95e1d4b5245d2e9aeea06f39b4b58e39bcfd3ae6029b57bfbcea985395e38ec6b0c691edda674a5fc63f76845aaa849633507251e807ac182') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:48:32', 0, '2009-09-05 05:48:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:48:32', 1000, '2009-09-05 05:48:32', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:48:32', 30000, '2009-09-05 05:48:32', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9399f3b04e221f5da13e28765e4071371e82c51db2c4771a5ebe18005f0eee9126df9d3f0a6ef6d6371be5fecf8416dc8dc116d3fa8061d046981f4836e669c5') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5d000f15c13ca280ce898d35e8ddb042af5e8df38dbf5934803b5abed03555c9be71e6091461fe7713616361cabca71c5dd661eecb4a0ee776795d32b3409522') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5d000f15c13ca280ce898d35e8ddb042af5e8df38dbf5934803b5abed03555c9be71e6091461fe7713616361cabca71c5dd661eecb4a0ee776795d32b3409522') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5d000f15c13ca280ce898d35e8ddb042af5e8df38dbf5934803b5abed03555c9be71e6091461fe7713616361cabca71c5dd661eecb4a0ee776795d32b3409522') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:49:31', '095cd268cdecaf1282de20f8c59de85dbcb149eaeec22ab27705d926ae4b169028a9ece9fdb7a05589453ee59119822ccd2c0d8aaf8a64aa6a4534566cef92ee', '2009-09-05 05:49:31', 'subscriber', '51iS7gZ6tCd2IeoT8k2x', '5d000f15c13ca280ce898d35e8ddb042af5e8df38dbf5934803b5abed03555c9be71e6091461fe7713616361cabca71c5dd661eecb4a0ee776795d32b3409522', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:49:31', '2009-09-05 05:49:31', 876516208, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:49:31', NULL, NULL, NULL, '2009-09-05 05:49:31', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:49:31', "created_at" = '2009-09-05 05:49:31', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '412823b1e51d8738ba7964027f2a1555996caacf3e23093c6bd92831078880bf937edd323b714d28eb96feb9e50323301a3746126e50db61b3a658671ef0bd2f') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '412823b1e51d8738ba7964027f2a1555996caacf3e23093c6bd92831078880bf937edd323b714d28eb96feb9e50323301a3746126e50db61b3a658671ef0bd2f') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0c8655e60961a7cbbf8870dfdbf70346ad758e9abd94799e75e33474fdd464a959fbf6d6ec88dfabc3963d8dded726f6d0f8c628a691099cd4969714d4cf5a2f') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:50:43', 0, '2009-09-05 05:50:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:50:44', 1000, '2009-09-05 05:50:44', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:50:44', 30000, '2009-09-05 05:50:44', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bc2602a39b4df453a815120b1444ec5f93a3b48689c48f290e465c2db5a755b932d0bf8fa1bec8fcaffa394d4cacbe81f2704c2c15642243420492e1cc46d549') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.8ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a15e7fe254f6e8dff75fd0b41086e974e5c686df48b5c1d29bc0a6f5317d9c94a2707652e1eb42446899ae9775f231c17034e7e5e24534f4bcfc5e9aaa4fe436') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:55:50', 0, '2009-09-05 05:55:50', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:55:50', 1000, '2009-09-05 05:55:50', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:55:50', 30000, '2009-09-05 05:55:50', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f0e890486ff02653670e55f8f1cca30a8e3a48c9ab1afc63487101e2745720a60b2e2efce4cf202c1bf8128d38db1427ccfaf8947c87cc8b730d167d9414edb4') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:55:51', '1a8bb5a9600cc92ef9b5bf094777907766cbd6058487cb726192b9405dad4316d2c1875ea03e8afcfff180b1e081bdeccb824c65739f20af75ae42db167e92d0', '2009-09-05 05:55:51', 'subscriber', 'cujJqIO5rCgrNYraYQ71', 'f0e890486ff02653670e55f8f1cca30a8e3a48c9ab1afc63487101e2745720a60b2e2efce4cf202c1bf8128d38db1427ccfaf8947c87cc8b730d167d9414edb4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:55:51', '2009-09-05 05:55:51', 876516208, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:55:51', NULL, NULL, NULL, '2009-09-05 05:55:51', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:55:51', "created_at" = '2009-09-05 05:55:51', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:55:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:55:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:55:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:55:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 01:55:52) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (5.0ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 9, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/876516208/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-05 01:55:52) [GET]
  Parameters: {"action"=>"edit", "id"=>"876516208", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/876516208/edit]
REQUESTING PAGE: POST /users/876516208 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/876516208/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-05 01:55:52) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"876516208", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 876516208) LIMIT 1[0m
  [4;35;1mUser Update (0.2ms)[0m   [0mUPDATE "users" SET "updated_at" = '2009-09-05 05:55:52', "email" = 'changed@example.com' WHERE "id" = 876516208[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/876516208]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/876516208"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:55:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:56:40', 0, '2009-09-05 05:56:40', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (64.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:56:40', 1000, '2009-09-05 05:56:40', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:56:41', 30000, '2009-09-05 05:56:41', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 66) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 34ms (View: 26, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:56:41) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '31f3dcd85bb3f85e5d6e5e2223bd12c19df37968724c75fd7c54a931daea0e30e83c926ca7139f052f28a85c700b3212d160dad899c5f7ea65ad63c8eed1e571') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:56:41', '74245ffdc3719123feb8b12925ac35716f9777bdf5dc523f616d016cc26399885a716adbf7d1e7dc7c8c735f60043b83f725be322736a32571a8ed46469541b5', '2009-09-05 05:56:41', 'subscriber', 'JJe3n-Z8HfKX2WvR2sij', '31f3dcd85bb3f85e5d6e5e2223bd12c19df37968724c75fd7c54a931daea0e30e83c926ca7139f052f28a85c700b3212d160dad899c5f7ea65ad63c8eed1e571', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:56:41', '2009-09-05 05:56:41', 876516208, 'User', NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:56:41', NULL, NULL, NULL, '2009-09-05 05:56:41', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:56:41', "created_at" = '2009-09-05 05:56:41', "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 263ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '31f3dcd85bb3f85e5d6e5e2223bd12c19df37968724c75fd7c54a931daea0e30e83c926ca7139f052f28a85c700b3212d160dad899c5f7ea65ad63c8eed1e571') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 101ms (View: 101, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:56:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '55ddd2a3af7b7c0390eea5fdef0e54a94897967efd156bc058798cd7cdc24e313919f223859d80dc56f4909340051cb7b359ef059f27729a376936259dbf44d2') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:56:41', '3068c77bd5dd358c3a014e8b5c368e2a95f8204173afd905a97e032ac758217243c29fed5872ccd494f95cfd3de5f1481206e8bca3e7c153eed6df6ff01f2efc', '2009-09-05 05:56:41', 'subscriber', '8vlobhZ05PnzhVNaN0AA', '55ddd2a3af7b7c0390eea5fdef0e54a94897967efd156bc058798cd7cdc24e313919f223859d80dc56f4909340051cb7b359ef059f27729a376936259dbf44d2', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:56:41', '2009-09-05 05:56:41', 876516208, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:56:41', NULL, NULL, NULL, '2009-09-05 05:56:41', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:56:41', "created_at" = '2009-09-05 05:56:41', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:56:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e3ac2b0a0d07993f2b1db3e94f1926e953047feb6076594d422c99813614db39768ce8fed3ce0f5e6d1de1ccd07201cf3d01173b90ef55a029ee7783af6a785d') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 876516208) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:56:41', '44dee1c2ebe91e47e22a48c81608ea692943b4224c5835c02e8ae0610d3c942a7cc2124e8955b09e51877d4399bbb198e97a7aef2ac8566c6bcf18389a0fa1af', '2009-09-05 05:56:41', 'subscriber', 'ipgw7P4hky0FMaL7oYQz', 'e3ac2b0a0d07993f2b1db3e94f1926e953047feb6076594d422c99813614db39768ce8fed3ce0f5e6d1de1ccd07201cf3d01173b90ef55a029ee7783af6a785d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:56:41', '2009-09-05 05:56:41', 876516208, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:56:41', NULL, NULL, NULL, '2009-09-05 05:56:41', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:56:41', "created_at" = '2009-09-05 05:56:41', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 01:56:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.0ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/876516208/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-05 01:56:41) [GET]
  Parameters: {"action"=>"edit", "id"=>"876516208", "controller"=>"users"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 6, DB: 1) | 200 OK [http://www.example.com/users/876516208/edit]
REQUESTING PAGE: POST /users/876516208 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/876516208/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-05 01:56:42) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"876516208", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 876516208) LIMIT 1[0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-05 05:56:42', "email" = 'changed@example.com' WHERE "id" = 876516208[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/876516208]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/876516208"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:56:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '876516208') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:57:32', 0, '2009-09-05 05:57:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:57:32', 1000, '2009-09-05 05:57:32', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:57:32', 30000, '2009-09-05 05:57:32', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 34ms (View: 26, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:57:33) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ba75ec7fb4ec5e3c7696680cd61eaa6b4a073ff580f3240c0ed01a3caf9bd412b4e6840cb6fe93eae6f7f141179a2bc0275b6dabc86c9c0036788c359a58a9b5') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:57:33', '6f213a8d2790fb16f6caf6e1147e5e2a30e96950edfd1deec43b282cf0be06ef716ff002408341a4b453b0482e0febdad61babfc6d51415a2c48ba4c0284c2c6', '2009-09-05 05:57:33', 'subscriber', 'ADa_gbPzZZIsyBhE9TlZ', 'ba75ec7fb4ec5e3c7696680cd61eaa6b4a073ff580f3240c0ed01a3caf9bd412b4e6840cb6fe93eae6f7f141179a2bc0275b6dabc86c9c0036788c359a58a9b5', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:57:33', '2009-09-05 05:57:33', 876516208, 'User', NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:57:33', NULL, NULL, NULL, '2009-09-05 05:57:33', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:57:33', "created_at" = '2009-09-05 05:57:33', "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 257ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'ba75ec7fb4ec5e3c7696680cd61eaa6b4a073ff580f3240c0ed01a3caf9bd412b4e6840cb6fe93eae6f7f141179a2bc0275b6dabc86c9c0036788c359a58a9b5') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 12ms (View: 7, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:57:33) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f8d2721e492efa54848fd7cdf899a5a11afbd7e9be18834b490e74d4bcf8e0d9361dd27e158904c8dfbc96b5d96f2e63e8a3625e09fa782b9bcb7eb6453f0372') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:57:33', '87933f0114b84fd0b59e2783328db464a33fd3822fd2a6ec248e7a4980f59ca45298104d06d79f9c488b4739549e57eeedc3d221a17834e461628b8130ff3080', '2009-09-05 05:57:33', 'subscriber', 'LgrqAagC1uh2bKxFoFIF', 'f8d2721e492efa54848fd7cdf899a5a11afbd7e9be18834b490e74d4bcf8e0d9361dd27e158904c8dfbc96b5d96f2e63e8a3625e09fa782b9bcb7eb6453f0372', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:57:33', '2009-09-05 05:57:33', 876516208, 'User', NULL, NULL, NULL, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:57:33', NULL, NULL, NULL, '2009-09-05 05:57:33', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:57:33', "created_at" = '2009-09-05 05:57:33', "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'f8d2721e492efa54848fd7cdf899a5a11afbd7e9be18834b490e74d4bcf8e0d9361dd27e158904c8dfbc96b5d96f2e63e8a3625e09fa782b9bcb7eb6453f0372') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (3.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 12ms (View: 7, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:57:33) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '44bb5e0261faece33f13b5aa645044067dcce08756ac87c5ea07166617f2c31cfc9bff0d9afe4167203c85f018555140419602d102fa36861c857066e317cd4c') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 05:57:33', '5a1a63af79553e63f5d898fe7fddf48d74cc38ae821c877c28b126c5a07d712325c4643308efe686cc6cf6fe0763088b4eb5a5c5bccb35b9be5a0d64b066b830', '2009-09-05 05:57:33', 'subscriber', 'GO3D-CKbfvxW0L9a0TJu', '44bb5e0261faece33f13b5aa645044067dcce08756ac87c5ea07166617f2c31cfc9bff0d9afe4167203c85f018555140419602d102fa36861c857066e317cd4c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 05:57:33', '2009-09-05 05:57:33', 876516208, 'User', NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 05:57:33', NULL, NULL, NULL, '2009-09-05 05:57:33', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 05:57:33', "created_at" = '2009-09-05 05:57:33', "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 876516208 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:57:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '44bb5e0261faece33f13b5aa645044067dcce08756ac87c5ea07166617f2c31cfc9bff0d9afe4167203c85f018555140419602d102fa36861c857066e317cd4c') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 876516208 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 05:59:54', 0, '2009-09-05 05:59:54', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 05:59:54', 1000, '2009-09-05 05:59:54', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 05:59:54', 30000, '2009-09-05 05:59:54', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 01:59:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 01:59:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.4ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 36ms (View: 26, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 01:59:54) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (2.6ms)[0m   [0mSELECT * FROM "subscription_plans" [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 06:00:57', 0, '2009-09-05 06:00:57', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 06:00:57', 1000, '2009-09-05 06:00:57', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 06:00:57', 30000, '2009-09-05 06:00:57', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:00:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 02:00:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 31ms (View: 25, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 02:00:57) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e555375e825951b6d69461e48d77bf16246481435fe1849d8d31822d26e48f8f24b546b78fadc77acab8bf068d1ce119bce8e04fd3909b5c377a416e5f9ebed3') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:01:00', '6cef262d6e831cee8f93830a17ff063f342093f3f880859b0aa6b2ee8e3e11ad676467df0afad874499a040569311f732d8c9b7d83c421b2ddfedf0c8bd9aab8', '2009-09-05 06:01:00', 'subscriber', 'iOkLDerf_vbpfp7kYWbU', 'e555375e825951b6d69461e48d77bf16246481435fe1849d8d31822d26e48f8f24b546b78fadc77acab8bf068d1ce119bce8e04fd3909b5c377a416e5f9ebed3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 06:01:00', '2009-09-05 06:01:00', 1, 'User', NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 06:01:00', NULL, NULL, NULL, '2009-09-05 06:01:00', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 06:01:00', "created_at" = '2009-09-05 06:01:00', "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 3061ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:01:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'e555375e825951b6d69461e48d77bf16246481435fe1849d8d31822d26e48f8f24b546b78fadc77acab8bf068d1ce119bce8e04fd3909b5c377a416e5f9ebed3') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 06:01:12', 0, '2009-09-05 06:01:12', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 06:01:12', 1000, '2009-09-05 06:01:12', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 06:01:12', 30000, '2009-09-05 06:01:12', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:01:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 02:01:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 31ms (View: 25, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 02:01:12) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '29bdd900124c1407a36d9688acb21730573835f811d4b99d5b9a2a2fd9abcf42a5415fc0fdbd8025a0310c38b7af47a7784853eb0f8d2d528cd7b8fe5be767e3') LIMIT 1[0m
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:02:59', '2cef89494402443820ae0e51001dc442c927e7861e169765dd5541e75214ef60eab4e321adf16381fa3ce6d6945d40dec1b64a9c54a836790d205ecd03e4006a', '2009-09-05 06:02:59', 'subscriber', 'XIK5jBg7nL4fGTqAI5qA', '29bdd900124c1407a36d9688acb21730573835f811d4b99d5b9a2a2fd9abcf42a5415fc0fdbd8025a0310c38b7af47a7784853eb0f8d2d528cd7b8fe5be767e3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 06:02:59', '2009-09-05 06:02:59', 1, 'User', NULL, NULL, NULL, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 06:02:59', NULL, NULL, NULL, '2009-09-05 06:02:59', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 06:02:59', "created_at" = '2009-09-05 06:02:59', "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 107638ms (DB: 4) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:03:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '29bdd900124c1407a36d9688acb21730573835f811d4b99d5b9a2a2fd9abcf42a5415fc0fdbd8025a0310c38b7af47a7784853eb0f8d2d528cd7b8fe5be767e3') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 06:09:17', 0, '2009-09-05 06:09:17', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 06:09:17', 1000, '2009-09-05 06:09:17', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 06:09:17', 30000, '2009-09-05 06:09:17', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:09:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 02:09:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 36ms (View: 30, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 02:09:17) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 02:09:17) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:09:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:09:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:09:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b08e20c64c89b0dd5ca5f111d24a6feb76d81b91d20528e3aa923fc169aee513a9b3b74271d3830c0da606c1e6c865230011061501d6da1cd52f186132040163') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:09:17', '23af43ae42e1204994a72460eabc4c6227da6a68a3a6e73ab4cd8bb00f3877f31e0bb9ad107baed8bf3667236cfd692f48a97e3d33e5230f6e01341441860992', '2009-09-05 06:09:17', 'subscriber', 'A8yYu96uEnO0YATLz3xD', 'b08e20c64c89b0dd5ca5f111d24a6feb76d81b91d20528e3aa923fc169aee513a9b3b74271d3830c0da606c1e6c865230011061501d6da1cd52f186132040163', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 06:09:17', '2009-09-05 06:09:17', 1, 'User', NULL, NULL, NULL, NULL)[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 06:09:17', NULL, NULL, NULL, '2009-09-05 06:09:17', 1, NULL, NULL, 'none')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6777924e8a205c1d2c0b9ad34c7b2d03aa30565c96b57771df4451d9e99876d7c4096a93354cd346bf3af85900fe4187b3b87922eee39b5353a6805fa1eae671') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b08e20c64c89b0dd5ca5f111d24a6feb76d81b91d20528e3aa923fc169aee513a9b3b74271d3830c0da606c1e6c865230011061501d6da1cd52f186132040163') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:09:17', '44b8e2ddfbc5b6d81d2d33e480ac6380a0f6a7251e027bcf7577babd7a41bd1841d1eafa2193890617cd4e6f173ad1501cb59ef85bf22e14076d003dffcf14af', '2009-09-05 06:09:17', 'subscriber', 'C5GGdFoRvScLix1hcCU5', '6777924e8a205c1d2c0b9ad34c7b2d03aa30565c96b57771df4451d9e99876d7c4096a93354cd346bf3af85900fe4187b3b87922eee39b5353a6805fa1eae671', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 06:09:17', '2009-09-05 06:09:17', 1, 'User', NULL, NULL, NULL, NULL)[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 06:09:17', NULL, NULL, NULL, '2009-09-05 06:09:17', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 06:56:12', 0, '2009-09-05 06:56:12', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 06:56:12', 1000, '2009-09-05 06:56:12', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 06:56:12', 30000, '2009-09-05 06:56:12', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 46ms (View: 39, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 02:56:12) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 02:56:12) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:56:12) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'aa3f8d266169a5e98b99eafd3f4fc5fd724faf6cbcbd0868dca46de0ff27297f561d0b00414ca78dac84f2171eb7fb3b1673b01ea58cf1a1f58db353184fc06d') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:56:12', '528ad3590fd9247b809424eb356277e6221d347939670279d04a5d159b5d28dfb22f7ae3d7cfc945b89164472ef0323d5c1360d7772979fabc5cee79d9dc3c22', '2009-09-05 06:56:12', 'subscriber', 'mSkT-fo7LivfboayuZkr', 'aa3f8d266169a5e98b99eafd3f4fc5fd724faf6cbcbd0868dca46de0ff27297f561d0b00414ca78dac84f2171eb7fb3b1673b01ea58cf1a1f58db353184fc06d', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:56:12) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9d9e3ba25c5bf22d648186163c326f76b2f4e61294df186fe0ddfe6a6c184c55357a6f0d3b78e8a8c4ff45d01f37f7f9a41151ea8ac5a03b1b3c2c0fa5f8852a') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:56:12', 'd33abae7487e18bfe3c09a634cd0f182c45ea65afbe790f279520682216eed456551fb06066e62b28653f059744b2766e0f0f7b70324e7a7daa317a9d7f346b0', '2009-09-05 06:56:12', 'subscriber', 'OBNJRvgcLXueEtWeaz0c', '9d9e3ba25c5bf22d648186163c326f76b2f4e61294df186fe0ddfe6a6c184c55357a6f0d3b78e8a8c4ff45d01f37f7f9a41151ea8ac5a03b1b3c2c0fa5f8852a', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:56:12) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:56:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 21, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 02:56:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-05 02:56:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 06:57:43', 0, '2009-09-05 06:57:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 06:57:43', 1000, '2009-09-05 06:57:43', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 06:57:43', 30000, '2009-09-05 06:57:43', 12, 't')[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5a3ca1d8711a8e89d769fba1fcba220202af5ef8fb3f992a58ed380b489b0c04dcc2e3ff2b0de826adc7b0af8b56f6b00936cda49dc900171c0a528ef85d2f68') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:57:44', 'ec20c4320ef4a2000dd83eb35257799363e434f4877864f5f7a6045f10ca5ead9f18f9e4b3dfe2ae18796283502206855d6c3ac97d48c67721cdb1917634b840', '2009-09-05 06:57:44', 'subscriber', 'Q5W3-h3_Yx2SZ5g66kA0', '5a3ca1d8711a8e89d769fba1fcba220202af5ef8fb3f992a58ed380b489b0c04dcc2e3ff2b0de826adc7b0af8b56f6b00936cda49dc900171c0a528ef85d2f68', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:57:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 15ms (View: 11, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:57:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 02:57:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered users/_sidebar (31.9ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 43ms (View: 35, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-05 02:57:44) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-05 02:57:44) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-05 06:57:44', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 06:57:52', 0, '2009-09-05 06:57:52', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 06:57:52', 1000, '2009-09-05 06:57:52', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 06:57:52', 30000, '2009-09-05 06:57:52', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 02:57:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.4ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 49ms (View: 39, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 02:57:52) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 02:57:52) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:57:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:57:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 21ms (View: 5, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e37a6c0827072075fad20967a261542e73cd2e7c92ce6c1655c912520bdde6268f6f6cde0844f072609ab78c030f0220196349657e51dcb463586d32b235d6b9') LIMIT 1[0m
  [4;36;1mUser Create (0.9ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:57:53', '422027b0727c2de7f18b4a90d1e02cebb8999e4aacea917e5dad3c6c164105da30eeb146dc384e976bd5c72216aeac476f132e85da09bb78e111eaab867b969e', '2009-09-05 06:57:53', 'subscriber', 'OddOTIwRPOFt1QzLCzcF', 'e37a6c0827072075fad20967a261542e73cd2e7c92ce6c1655c912520bdde6268f6f6cde0844f072609ab78c030f0220196349657e51dcb463586d32b235d6b9', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 6ms (View: 5, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:57:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '55380f7f3e9306863a770c915018d6c15e8d1acb243b0d375fd730855d858ca55f2f01008c05a2e37c5e47499d6ed8d47c09392fc72f982501de9fdb60fcf98e') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 06:57:53', 'd39f70eb6577144af4cfdf20d5619a76325e136d6134e9277d2af60a5a5ef25c3a94606b8585ed969fd22e2e4b49a18042940098ab31c74856dcaf884b8dc607', '2009-09-05 06:57:53', 'subscriber', 'XhAtkWdNg8fuu-Ky-dsY', '55380f7f3e9306863a770c915018d6c15e8d1acb243b0d375fd730855d858ca55f2f01008c05a2e37c5e47499d6ed8d47c09392fc72f982501de9fdb60fcf98e', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 02:57:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendered users/_sidebar (4.8ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 5, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-05 02:57:53) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mUser Update (0.2ms)[0m   [0mUPDATE "users" SET "updated_at" = '2009-09-05 06:57:53', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 02:57:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:01:48', 0, '2009-09-05 07:01:48', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:01:48', 1000, '2009-09-05 07:01:48', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:01:48', 30000, '2009-09-05 07:01:48', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:01:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:01:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 48ms (View: 40, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:01:48) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'afa50dd418955921590d89b0f65091376a4c66df0f61d8bd295a37fd2637354de15473c72d4a4c77caf0c7c4dc7996643a6d2ae956d63173e9d4d5a253252771') LIMIT 1[0m
  [4;36;1mUser Create (97.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:01:49', '6a285c58cc61a20d91a3e260cf1a27858b54f12660777f2edff29c592d21ab5f1d38600a096be20c4734285f861db32e98a13544f6f90f63edfb1f9e69c7b49f', '2009-09-05 07:01:49', 'subscriber', 'ksG8Nn6Z_gPLB0f_hvLG', 'afa50dd418955921590d89b0f65091376a4c66df0f61d8bd295a37fd2637354de15473c72d4a4c77caf0c7c4dc7996643a6d2ae956d63173e9d4d5a253252771', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:01:49', '2009-09-05 07:01:49', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (44.0ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:01:49', NULL, NULL, NULL, '2009-09-05 07:01:49', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:01:49) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:03:44', 0, '2009-09-05 07:03:44', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (62.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:03:44', 1000, '2009-09-05 07:03:44', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:03:44', 30000, '2009-09-05 07:03:44', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:03:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 64) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:03:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 51ms (View: 41, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:03:44) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '00269a903c1be830455dfe81f480a1e7a00cae97efe51ec87bd0d6fdd05acf8500747650c13fcb526ec310ed85877954bf9be12b577a1939eaa9eaa5fb73fc0d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:03:45', 'de432c2710e60dc3f08f0ccadf454212433abdd4b193b7aaa183fc157c6e277bde34ae64aa8603fc10558cebf998f95fed7bd5c36f47a35395aa6d0900162df5', '2009-09-05 07:03:45', 'subscriber', 'Vtyd5ZkKhUs8dFQmf46C', '00269a903c1be830455dfe81f480a1e7a00cae97efe51ec87bd0d6fdd05acf8500747650c13fcb526ec310ed85877954bf9be12b577a1939eaa9eaa5fb73fc0d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:03:45', '2009-09-05 07:03:45', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.6ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:03:51', NULL, NULL, NULL, '2009-09-05 07:03:51', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:04:34) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:04:40', 0, '2009-09-05 07:04:40', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:04:40', 1000, '2009-09-05 07:04:40', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:04:40', 30000, '2009-09-05 07:04:40', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:04:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:04:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 50ms (View: 40, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:04:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7e1c5f0ce867c08e6abadb1cc53631324e92e8d7ff01585e88f9ba0e4adce36172a7124a8cbc8a041e4ad60d3478f2e219729357a309aa1339e9d40d4639c2d2') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:04:40', 'b51ecc8b74cf3a5700462f305e3d4f7b4c11f0dab8a91ed6a9b55b8afdba56c0b68fae0db5286f8bd977869f8733aed62696487bf7b805b48c67a8dc9f182996', '2009-09-05 07:04:40', 'subscriber', 'fZb_piRzkSzATGW4zo4j', '7e1c5f0ce867c08e6abadb1cc53631324e92e8d7ff01585e88f9ba0e4adce36172a7124a8cbc8a041e4ad60d3478f2e219729357a309aa1339e9d40d4639c2d2', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:04:40', '2009-09-05 07:04:40', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:04:44', NULL, NULL, NULL, '2009-09-05 07:04:44', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:06:38) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:07:28', 0, '2009-09-05 07:07:28', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:07:28', 1000, '2009-09-05 07:07:28', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:07:28', 30000, '2009-09-05 07:07:28', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:07:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:07:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 51ms (View: 41, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:07:29) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '961a6a78c088e062a66dff15c99f5b54ace4bcb7ed936120049a81951792df8dea926d7f849623bf3e3d16e69686ecd7dcb65f1a1e0a8b0bfb0001de50c5dce8') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:07:29', 'ea8efa4d6d6e9dadf2407620f59a92b3097c0a68c47636ab1d8e343dfcf17e8f939ed4fe13556ecf585232ebcec71cc68a007c17be0d2cc64c23b97ce4207d90', '2009-09-05 07:07:29', 'subscriber', 'R-crx6keFT4FNnCoBcFP', '961a6a78c088e062a66dff15c99f5b54ace4bcb7ed936120049a81951792df8dea926d7f849623bf3e3d16e69686ecd7dcb65f1a1e0a8b0bfb0001de50c5dce8', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:07:29', '2009-09-05 07:07:29', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:07:36', NULL, NULL, NULL, '2009-09-05 07:07:36', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:08:52', "created_at" = '2009-09-05 07:07:29', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 83332ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:08:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '961a6a78c088e062a66dff15c99f5b54ace4bcb7ed936120049a81951792df8dea926d7f849623bf3e3d16e69686ecd7dcb65f1a1e0a8b0bfb0001de50c5dce8') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:11:49', 0, '2009-09-05 07:11:49', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (196.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:11:49', 1000, '2009-09-05 07:11:49', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:11:49', 30000, '2009-09-05 07:11:49', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:11:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 198) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:11:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 53ms (View: 41, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:11:49) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b048ce414506455580ad7ea750bef3f27934a6fa5d8f7a3954eb7dc513003a4eff31ca0a83d7671c2cc2c4fd85557357f37873d206d40f719e7a7837714ecbc6') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:11:49', 'a729ef0327a1447fa4a393fdd12428d856a8b963364ff29ed094fbeee4fec06a8faae13d0338f1b540830038d35303b8af39ea0335805935978d800bf7fbb280', '2009-09-05 07:11:49', 'subscriber', 'ecuuuT9cGe4_-0xydXNi', 'b048ce414506455580ad7ea750bef3f27934a6fa5d8f7a3954eb7dc513003a4eff31ca0a83d7671c2cc2c4fd85557357f37873d206d40f719e7a7837714ecbc6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:11:49', '2009-09-05 07:11:49', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:11:51', NULL, NULL, NULL, '2009-09-05 07:11:51', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:11:51) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:12:26', 0, '2009-09-05 07:12:26', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:12:26', 1000, '2009-09-05 07:12:26', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:12:26', 30000, '2009-09-05 07:12:26', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:12:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:12:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 51ms (View: 39, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:12:26) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'dc9c47ce1e3befad12e4f89be67262bbd994c795fd430af32ea4b4912fb7eba5c0cd3a840314a731d5c2efcdba0952a149262bb4dfa1403c47c5ece9e4e19b72') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:12:27', '1cb0249c424e7266124f429abcb458572f080f43a5b8ad70d81df3572e2ad061490f7d00123ff0e7e2768de6547d6ca6ce1a2a82f8184d903f85d511604a6bf9', '2009-09-05 07:12:27', 'subscriber', '7-2YF_YiQm7hQgYJ2Hwn', 'dc9c47ce1e3befad12e4f89be67262bbd994c795fd430af32ea4b4912fb7eba5c0cd3a840314a731d5c2efcdba0952a149262bb4dfa1403c47c5ece9e4e19b72', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:12:27', '2009-09-05 07:12:27', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:12:59', NULL, NULL, NULL, '2009-09-05 07:12:59', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:12:59) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:13:04', 0, '2009-09-05 07:13:04', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:13:04', 1000, '2009-09-05 07:13:04', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:13:05', 30000, '2009-09-05 07:13:05', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:13:05) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:13:05) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.4ms)
Completed in 4860ms (View: 4848, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:13:10) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bc7710cbbbd6abb0a7230a92d5ff705a2c16a629d865db02ba3a660c2b1b78f932366565cb7c9bc7fbcb9d25862906836ca01a3338d2b0640c21dcdeb707c4cc') LIMIT 1[0m
  [4;36;1mUser Create (0.8ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:13:10', '529166c023f4f64b0bcea9efaaed92711ac556911d83578248fb60059341ae8a3b25e5db92fe0f6606140616dcff0139fce2d65245993bcacf0deaa4ef5366f8', '2009-09-05 07:13:10', 'subscriber', 'JCv_eiJr84L1qA_kJHhE', 'bc7710cbbbd6abb0a7230a92d5ff705a2c16a629d865db02ba3a660c2b1b78f932366565cb7c9bc7fbcb9d25862906836ca01a3338d2b0640c21dcdeb707c4cc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:13:10', '2009-09-05 07:13:10', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:13:20', NULL, NULL, NULL, '2009-09-05 07:13:20', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:13:20) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:13:35', 0, '2009-09-05 07:13:35', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (71.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:13:35', 1000, '2009-09-05 07:13:35', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:13:35', 30000, '2009-09-05 07:13:35', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:13:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 73) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:13:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 173537ms (View: 173525, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:16:29) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '31190b30ae31f5bca227461dff45adf89b3f2bad42f691b35a1b475dc198d707c4f2af723945e890311c7379b416fa427c9166ee9a45d6875f3e9f904b090e3f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:16:29', '5db03e7d320a64a56ba0691a6b2f3e5096d93bc388279bc5af17245e83c5c6fd508703d54c972aa1ac9efcad41af75cf430ae8fa18fad68a8ef2958f4fd5c759', '2009-09-05 07:16:29', 'subscriber', 'RzE95VAt0Pijz_7qYLIn', '31190b30ae31f5bca227461dff45adf89b3f2bad42f691b35a1b475dc198d707c4f2af723945e890311c7379b416fa427c9166ee9a45d6875f3e9f904b090e3f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:16:29', '2009-09-05 07:16:29', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:19:11', NULL, NULL, NULL, '2009-09-05 07:19:11', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:19:11', "created_at" = '2009-09-05 07:16:29', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 162275ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:19:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '31190b30ae31f5bca227461dff45adf89b3f2bad42f691b35a1b475dc198d707c4f2af723945e890311c7379b416fa427c9166ee9a45d6875f3e9f904b090e3f') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:19:18', 0, '2009-09-05 07:19:18', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:19:18', 1000, '2009-09-05 07:19:18', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:19:18', 30000, '2009-09-05 07:19:18', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:19:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:19:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.7ms)
Completed in 3180ms (View: 3167, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:19:22) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'cee68641913d3f8bd5ed31fb4ba9c31e238a91149739db8038e9d1fa9505468c3a5261ef0dc44b4c9fe32a57f5c7d258d9c0468dbf522dee5a83c6a58b542f6a') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:22:15', 'e3dc757ace9225f2f325a23975027598cc22b4c271348e47f710ba2e29746acdf9b3eaec3a1e67420496d0524182f8c4fd36593c167778ae521b997e03977754', '2009-09-05 07:22:15', 'subscriber', 'o6_llZq9HEeCYYhXQs6q', 'cee68641913d3f8bd5ed31fb4ba9c31e238a91149739db8038e9d1fa9505468c3a5261ef0dc44b4c9fe32a57f5c7d258d9c0468dbf522dee5a83c6a58b542f6a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:22:15', '2009-09-05 07:22:15', 1, 'User', NULL, NULL, 1, NULL)[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:22:16', NULL, NULL, NULL, '2009-09-05 07:22:16', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-05 03:22:16) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:22:22', 0, '2009-09-05 07:22:22', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:22:22', 1000, '2009-09-05 07:22:22', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:22:22', 30000, '2009-09-05 07:22:22', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:22:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:22:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (6.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 1760ms (View: 1746, DB: 7) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:22:24) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4e8490610a644850f65b73c5f586f9c62678bca028402adf3ae55deeb97efc530f12ca72de2f3bf2aa63c76be1105cdd89515a1f544c6bb02a1e758441e9d947') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionPlan Load (6.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 1525ms (View: 10, DB: 7) | 200 OK [http://www.example.com/users]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:23:16', 0, '2009-09-05 07:23:16', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:23:16', 1000, '2009-09-05 07:23:16', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:23:16', 30000, '2009-09-05 07:23:16', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:23:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:23:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (6.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 3447ms (View: 3433, DB: 7) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:23:19) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '64e484560b78bfeaa30145c28b8c615ab6a1826752ff6855ce48fe0096a5dc841c7236c367f2b02d3cce7bbc6a287024d7a91d7849b061929323bd8e3968a37f') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '64e484560b78bfeaa30145c28b8c615ab6a1826752ff6855ce48fe0096a5dc841c7236c367f2b02d3cce7bbc6a287024d7a91d7849b061929323bd8e3968a37f') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (6.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 141769ms (View: 10, DB: 8) | 200 OK [http://www.example.com/users]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:25:47', 0, '2009-09-05 07:25:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:25:47', 1000, '2009-09-05 07:25:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:25:47', 30000, '2009-09-05 07:25:47', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:25:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:25:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (6.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.4ms)
Completed in 1960ms (View: 1946, DB: 7) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:25:49) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '316fb4eaff36e73d70377a07d572b85f41e7563e68759baa76ea50eb959eddcb90fb9d744ca44e1f0e8d1d655d29d71f0f1a02bddc028784502bb1e3b98628c6') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:25:50', '31b2f9b1b76619d32bc1a73aa3d5fd5e08d0fa691f100a01999bad644074999adb62383ff47f474be979c1c61798d1c63dc9aa53b2bce760c2a1517641953536', '2009-09-05 07:25:50', 'subscriber', 'vr_tUV7XNF0WcL3U0SYp', '316fb4eaff36e73d70377a07d572b85f41e7563e68759baa76ea50eb959eddcb90fb9d744ca44e1f0e8d1d655d29d71f0f1a02bddc028784502bb1e3b98628c6', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:25:50', '2009-09-05 07:25:50', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:25:51', NULL, NULL, NULL, '2009-09-05 07:25:51', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:25:51', "created_at" = '2009-09-05 07:25:50', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 1873ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:25:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '316fb4eaff36e73d70377a07d572b85f41e7563e68759baa76ea50eb959eddcb90fb9d744ca44e1f0e8d1d655d29d71f0f1a02bddc028784502bb1e3b98628c6') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:28:27', 0, '2009-09-05 07:28:27', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:28:27', 1000, '2009-09-05 07:28:27', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:28:27', 30000, '2009-09-05 07:28:27', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:28:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (7.4ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 55ms (View: 41, DB: 8) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:28:27) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b89701dc3ab89795023b2b078b9430eb6a9c3aa84c1d442d5423754c3414619685b4f42a61ab6b33f31ece544bc8da6e912a16728709eb0e1ccf3d4c79d20072') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:28:31', '7457e1dddce85de6d81294388dbb16d6ea71d17076f673ad6d48fe6923b373d0e1ea2bcad18537c8208d55269d25339f7f646e4e7b8e782b0c93dc4d7c0bd312', '2009-09-05 07:28:31', 'subscriber', 'FvVCZXxTIm_WRqKMoZ40', 'b89701dc3ab89795023b2b078b9430eb6a9c3aa84c1d442d5423754c3414619685b4f42a61ab6b33f31ece544bc8da6e912a16728709eb0e1ccf3d4c79d20072', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:28:31', '2009-09-05 07:28:31', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:28:31', NULL, NULL, NULL, '2009-09-05 07:28:31', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:28:31', "created_at" = '2009-09-05 07:28:31', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 4487ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b89701dc3ab89795023b2b078b9430eb6a9c3aa84c1d442d5423754c3414619685b4f42a61ab6b33f31ece544bc8da6e912a16728709eb0e1ccf3d4c79d20072') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:28:46', 0, '2009-09-05 07:28:46', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (48.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:28:46', 1000, '2009-09-05 07:28:46', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:28:46', 30000, '2009-09-05 07:28:46', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 50) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:28:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (7.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 55ms (View: 39, DB: 8) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:28:46) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '680a2e8d61acdf8f102a5b8970d343e483a90ffa655e0a8568119171a1b9c00af7426a6894689233b7a2febce7792baa9357b0e0a36639425059d11bb4b95d2c') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:28:47', '0902b735b41787d5068d77f5c8e9505f0cda47c9f09f8114710a2b0d600a557a485b4257cf4930815520e60500094e2a971994ee628401ab9083d7713d0b56ab', '2009-09-05 07:28:47', 'subscriber', 'jwfMC7NVTqC4hOuV7Ted', '680a2e8d61acdf8f102a5b8970d343e483a90ffa655e0a8568119171a1b9c00af7426a6894689233b7a2febce7792baa9357b0e0a36639425059d11bb4b95d2c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:28:47', '2009-09-05 07:28:47', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:28:47', NULL, NULL, NULL, '2009-09-05 07:28:47', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:28:47', "created_at" = '2009-09-05 07:28:47', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 254ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '680a2e8d61acdf8f102a5b8970d343e483a90ffa655e0a8568119171a1b9c00af7426a6894689233b7a2febce7792baa9357b0e0a36639425059d11bb4b95d2c') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 9ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:28:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 11ms (View: 6, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '565be197b3d871e218834a0fbd198d7a2113ff532c0a5809b3d89e77f7f462762e8d4d2775feb96b0be153af13d56dde2ace73cb7495d470bfa516baa6f81d42') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:28:47', '7a48ca5fd6aa70ed9a1cb14ab54807fc7549ff1c6aeb5887c8bba6bfe78122745ac90e6deedb699f6f77abb3c2f33bc84be61ccf1e3177f21a482dd843517ad7', '2009-09-05 07:28:47', 'subscriber', 'hGcPva76pj42alCaSyB4', '565be197b3d871e218834a0fbd198d7a2113ff532c0a5809b3d89e77f7f462762e8d4d2775feb96b0be153af13d56dde2ace73cb7495d470bfa516baa6f81d42', 'subscriber@example.com')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:28:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '14d4b4ded7672ff0afbdfd142cd3bd0e3f4a66fc206a572b31efad790653880d4c7ae95af7105fadc2580125be68deeccac1e4024d634573adb0d5b9efdc9b8c') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:28:47', '98b889a5af935a58823eaf1609f25e4f0906455958fb0f039d0ddea19aff8b22f4e8948a3acb780bb0f945db53a3b55c8014631517ca337ff20b41aec94177f2', '2009-09-05 07:28:47', 'subscriber', 'ZoTUxsjeAvlJxQv0mR8a', '14d4b4ded7672ff0afbdfd142cd3bd0e3f4a66fc206a572b31efad790653880d4c7ae95af7105fadc2580125be68deeccac1e4024d634573adb0d5b9efdc9b8c', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:28:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendered users/_sidebar (5.0ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-05 03:28:47) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-05 07:28:47', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:28:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:29:00', 0, '2009-09-05 07:29:00', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:29:00', 1000, '2009-09-05 07:29:00', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:29:00', 30000, '2009-09-05 07:29:00', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 3ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5f0538a3eeaa58da00e4316516452aec4115c3f7a4e5cbe50891355e9d25885ac650e7e75da3266ff15b1373027fa6aac228932ecb213e617e5c9341d1e7f48d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:29:00', 'dfbada7f71eb1a221d0b7f218104ff78e7e7c0ba086a50231edb79c499c802f0c757fd86b1921b4a5dd7912d5d740508f83baa078667969b5890cbbf60b41525', '2009-09-05 07:29:00', 'subscriber', 'T4VHeWlUmhjqtnh46T-A', '5f0538a3eeaa58da00e4316516452aec4115c3f7a4e5cbe50891355e9d25885ac650e7e75da3266ff15b1373027fa6aac228932ecb213e617e5c9341d1e7f48d', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:29:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5c889743b67276ab0506923d590acb4e80a499c63b17e10b733159572c007648cbcc02a30266cbaad84de10e49e69f0870dc17120148e1ad5751fc7b2380a66f') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:29:00', 'e9fa968373bd05c78e5d62b43b253c596b2ff70235dc3b69f2cea7e8f7408782f6064ade0a40680cf7187df8e4de5a7ca3cd86e722ae8425b39078fae013f462', '2009-09-05 07:29:00', 'subscriber', 'cznz83sOrsCYrtUkFZWS', '5c889743b67276ab0506923d590acb4e80a499c63b17e10b733159572c007648cbcc02a30266cbaad84de10e49e69f0870dc17120148e1ad5751fc7b2380a66f', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (109.4ms)
Completed in 113ms (View: 113, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:29:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-05 03:29:00) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Create (0.3ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 07:29:00', 'title 1', 'body 1', '2009-09-05 07:29:00')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6531906ac64a6cca3fe7117e5b725ee85dedb69cadc333a7d49c82900bdb4261dc73b43eeff4c4c86922bacc37f6ad6b6b17f0f112c13acea0b2972f8621837f') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:29:00', 'a5d803ad024efcc20398568d0a40a56b91d98ebb046407ce5da4ab8dba1fdc03eb4c0e2709280a79b50c9913c7a4f21c430c3cdd82c4ff6b3117de18b3655af9', '2009-09-05 07:29:00', 'subscriber', 'Zh_b9yapH7t8v3Org-yh', '6531906ac64a6cca3fe7117e5b725ee85dedb69cadc333a7d49c82900bdb4261dc73b43eeff4c4c86922bacc37f6ad6b6b17f0f112c13acea0b2972f8621837f', 'subscriber@example.com')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 1) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:29:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 127ms (View: 126, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 07:29:01', 'title 1', 'body 1', '2009-09-05 07:29:01')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 07:29:01', 'title 2', 'body 2', '2009-09-05 07:29:01')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 07:29:01', 'title 3', 'body 3', '2009-09-05 07:29:01')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-05 07:29:01', 'title 4', 'body 4', '2009-09-05 07:29:01')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-05 03:29:01) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.6ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-05 03:29:01) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.4ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-05 03:29:01) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:29:16', 0, '2009-09-05 07:29:16', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:29:16', 1000, '2009-09-05 07:29:16', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:29:16', 30000, '2009-09-05 07:29:16', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:29:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (8.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 57ms (View: 40, DB: 9) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:29:16) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c9f6762cda4240c94efe170fdbbaf36a189d4ed0f8d6c84d67a1bc353c1c94a562630b97219bd460f66c0cc6b6dff3e1868a3cda5b388089bc8546d636565107') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:29:16', 'e603991862bc4d4f7e069455f28c09302f52f57355be92c53a48be67694df2e9e5b13cb2634008fa5d8e5fe2356a9884545964d7568fefa344281c3487bd08e8', '2009-09-05 07:29:16', 'subscriber', 'b_4y9w9-TEEDALqVnuPO', 'c9f6762cda4240c94efe170fdbbaf36a189d4ed0f8d6c84d67a1bc353c1c94a562630b97219bd460f66c0cc6b6dff3e1868a3cda5b388089bc8546d636565107', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:29:16', '2009-09-05 07:29:16', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:29:16', NULL, NULL, NULL, '2009-09-05 07:29:16', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:29:16', "created_at" = '2009-09-05 07:29:16', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 156ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'c9f6762cda4240c94efe170fdbbaf36a189d4ed0f8d6c84d67a1bc353c1c94a562630b97219bd460f66c0cc6b6dff3e1868a3cda5b388089bc8546d636565107') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:29:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (8.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 26ms (View: 13, DB: 8) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:29:17) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '98374e5fd7f04143d27dc663279c46fcc24860efdc892df1919a90135f243647b776c71c560316628ed543f52f3136a59ff132811bbbd0b6f3d4357c74f9e83d') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:29:17', 'ad9e656526eeee40bee126640447ae0e9fa720cfe780c737b7ad0ac9d915e325804a54a8cdf349e6d6ef7bed65d8733aaeec73c68b021fc058489180ad776a5b', '2009-09-05 07:29:17', 'subscriber', 'dpu_lGErxTvXuu9AEoWw', '98374e5fd7f04143d27dc663279c46fcc24860efdc892df1919a90135f243647b776c71c560316628ed543f52f3136a59ff132811bbbd0b6f3d4357c74f9e83d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:29:17', '2009-09-05 07:29:17', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:29:17', NULL, NULL, NULL, '2009-09-05 07:29:17', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:29:17', "created_at" = '2009-09-05 07:29:17', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '98374e5fd7f04143d27dc663279c46fcc24860efdc892df1919a90135f243647b776c71c560316628ed543f52f3136a59ff132811bbbd0b6f3d4357c74f9e83d') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:29:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (8.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 25ms (View: 11, DB: 8) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:29:17) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'afa4e1678783c9a4a204a5fe085b1f87fb9bc1ff616adf6c0443992b0ee766bcea15b8bac7493fa0a360abb729db8aaa3269462334b63dae171890e023f8932e') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:29:17', '4f5aa7297716ddac0d408b2c7138256bcd5b3a2d0607eae740a5148dcadee086bf1f8756b9f931bc0046aa121c9a17e45b63746d99e6f08cb0f785f7fecdf9c5', '2009-09-05 07:29:17', 'subscriber', '_ZixI9jYM9SiIWLibfDu', 'afa4e1678783c9a4a204a5fe085b1f87fb9bc1ff616adf6c0443992b0ee766bcea15b8bac7493fa0a360abb729db8aaa3269462334b63dae171890e023f8932e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:29:17', '2009-09-05 07:29:17', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:29:17', NULL, NULL, NULL, '2009-09-05 07:29:17', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:29:17', "created_at" = '2009-09-05 07:29:17', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 24ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:29:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'afa4e1678783c9a4a204a5fe085b1f87fb9bc1ff616adf6c0443992b0ee766bcea15b8bac7493fa0a360abb729db8aaa3269462334b63dae171890e023f8932e') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:30:03', 0, '2009-09-05 07:30:03', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (63.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:30:03', 1000, '2009-09-05 07:30:03', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:30:03', 30000, '2009-09-05 07:30:03', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 16ms (View: 13, DB: 65) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (8.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 56ms (View: 40, DB: 9) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:30:03) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4a4d4c8df800bba67ac1ab0db8cb29065a679bf29315673448797d118ec1169420d612f703c72ccec684d43d58b1173cd0cc793081311a270f20a8376ef28a1f') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:30:03', '5c56e6e943be05a8ea16ab87ff5067e3230e19335ba1de2e7f48d77a4ba1426f8f4e25fd9a3c4b3658478b2e1c0bd84823de3b1cb5c8e23f1058c2acd3918cb4', '2009-09-05 07:30:03', 'subscriber', 'aeV87uOPhURix_EGqxow', '4a4d4c8df800bba67ac1ab0db8cb29065a679bf29315673448797d118ec1169420d612f703c72ccec684d43d58b1173cd0cc793081311a270f20a8376ef28a1f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:30:03', '2009-09-05 07:30:03', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:30:03', NULL, NULL, NULL, '2009-09-05 07:30:03', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:30:03', "created_at" = '2009-09-05 07:30:03', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 153ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '4a4d4c8df800bba67ac1ab0db8cb29065a679bf29315673448797d118ec1169420d612f703c72ccec684d43d58b1173cd0cc793081311a270f20a8376ef28a1f') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (8.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 29ms (View: 12, DB: 9) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:30:03) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '934ca8b5424091bc798a741ef97e9ce674f9a23d533158b6ae579cd97701373ef223e510368ab8d139c41e1c5ee30f5b5f26e14d790bba18e09c6e9ea57b27ee') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:30:03', '21b81f6fed29b54cba70ab86db03dd753a49fef23db33c813653eb5318028ac3d67cdfcc899ecaeda50e5d95d97a9154e93e29c2e2dd3c9a1222662518b83310', '2009-09-05 07:30:03', 'subscriber', 'WTh-qj_shjlleddTrgLh', '934ca8b5424091bc798a741ef97e9ce674f9a23d533158b6ae579cd97701373ef223e510368ab8d139c41e1c5ee30f5b5f26e14d790bba18e09c6e9ea57b27ee', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:30:03', '2009-09-05 07:30:03', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:30:03', NULL, NULL, NULL, '2009-09-05 07:30:03', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:30:03', "created_at" = '2009-09-05 07:30:03', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '934ca8b5424091bc798a741ef97e9ce674f9a23d533158b6ae579cd97701373ef223e510368ab8d139c41e1c5ee30f5b5f26e14d790bba18e09c6e9ea57b27ee') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-05 03:30:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (8.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 25ms (View: 12, DB: 9) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-05 03:30:04) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3615e907fd966579d11af2b2781813ef4d9e9689f999eacedb94fa387993784d366581cf2ba62c320d6cdc2188f31431eb458b117486c6c770bb1170c483936e') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:30:04', 'e7916b8e25134dc3dbb785eb32ae27b5d60583cdb0bfbef5b06c721bc617810fedb0181f70fe473ae34a726c8e75802a6920a222449c3634a3cd82a5bfe86f53', '2009-09-05 07:30:04', 'subscriber', 'mjx99uRumq2FNFempwuz', '3615e907fd966579d11af2b2781813ef4d9e9689f999eacedb94fa387993784d366581cf2ba62c320d6cdc2188f31431eb458b117486c6c770bb1170c483936e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:30:04', '2009-09-05 07:30:04', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:30:04', NULL, NULL, NULL, '2009-09-05 07:30:04', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:30:04', "created_at" = '2009-09-05 07:30:04', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 24ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:30:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '3615e907fd966579d11af2b2781813ef4d9e9689f999eacedb94fa387993784d366581cf2ba62c320d6cdc2188f31431eb458b117486c6c770bb1170c483936e') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:31:12', 0, '2009-09-05 07:31:12', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:31:12', 1000, '2009-09-05 07:31:12', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:31:12', 30000, '2009-09-05 07:31:12', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd5c97d89e642f81f87689d6724f2a4fa1b76fffe7bc0d8e2fb5f920a4f1562bc9c3cba7a173663ccbf553990a94711ba3c5763959b89e8b89a62eeeb7d039707') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:31:13', '5fa969b74931888dd7e3ab1bfdb2a1e348da7c767c8cdb3fb3ea884af116ca1a07e4b000010e9507446d0958471625137272921413f54cf8c7340bd4eeb16049', '2009-09-05 07:31:13', 'subscriber', 'f9ANGbgIcvGU0sKO6AD9', 'd5c97d89e642f81f87689d6724f2a4fa1b76fffe7bc0d8e2fb5f920a4f1562bc9c3cba7a173663ccbf553990a94711ba3c5763959b89e8b89a62eeeb7d039707', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:31:13', '2009-09-05 07:31:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:31:13', NULL, NULL, NULL, '2009-09-05 07:31:13', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:31:13', "created_at" = '2009-09-05 07:31:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 58ms (View: 54, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:31:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 25ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:31:13) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:31:13', '2009-09-05 07:31:13', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 25ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '97f37669c3976b5f459a597ea88500683290bd678e42d8ab0f60c2f8532b1482022b27242d480733ff67e8e3af265091e5c18d1969d46ab713955a86b86fdb9e') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:31:13', '16bae5bdd04edeb1c14b28e19efbba9777c575effc40210f27fcb70a67cbd36fb378a5f2a715904ee5cbefac36f09340d24410462f3a64947b8537470ddf9adb', '2009-09-05 07:31:13', 'subscriber', 'tcf_pLEM9JqAewYVxndI', '97f37669c3976b5f459a597ea88500683290bd678e42d8ab0f60c2f8532b1482022b27242d480733ff67e8e3af265091e5c18d1969d46ab713955a86b86fdb9e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:31:13', '2009-09-05 07:31:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:31:13', NULL, NULL, NULL, '2009-09-05 07:31:13', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:31:13', "created_at" = '2009-09-05 07:31:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:31:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '66400b91e0c4c6415af921e2054cee7bbd8428cf90f62fffbcef84caf4a41fa4d72ec0390f460522b8597b3c7bbf6b3845ac90a93717bfea983962f3ab5a9e99') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:31:13', '1ee611360bcaeb59a72afc456e615698a811bb5c9a66981b7309442c5e807a8aa2b0900865ae77efe7915766a8c55ae8de0b056da50f01105b98899e4c6296cd', '2009-09-05 07:31:13', 'subscriber', 'HJSObSBXpF33cgFR8TC7', '66400b91e0c4c6415af921e2054cee7bbd8428cf90f62fffbcef84caf4a41fa4d72ec0390f460522b8597b3c7bbf6b3845ac90a93717bfea983962f3ab5a9e99', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:31:13', '2009-09-05 07:31:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:31:13', NULL, NULL, NULL, '2009-09-05 07:31:13', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:31:13', "created_at" = '2009-09-05 07:31:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:31:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:31:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:32:55', 0, '2009-09-05 07:32:55', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:32:55', 1000, '2009-09-05 07:32:55', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:32:55', 30000, '2009-09-05 07:32:55', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bcac151611a1793350a8a120283469087fc75bc45de1504a0dcbe687ab9584e10e4c6787a40fbe5903435af925ef3c16cfd504d9196904e35ffcc095e8b965cf') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:32:55', 'a261e6d5ce355cc22c58dd010a5b928e85c67e86cb049f47673fbd16bc2811d28f995e3bf209dd0b621a950421166e0fbf5501b48bf41ae8325a2c105ab55435', '2009-09-05 07:32:55', 'subscriber', 'R4BG9PHjN4CUcOGGEdlk', 'bcac151611a1793350a8a120283469087fc75bc45de1504a0dcbe687ab9584e10e4c6787a40fbe5903435af925ef3c16cfd504d9196904e35ffcc095e8b965cf', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:32:55', '2009-09-05 07:32:55', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:32:55', NULL, NULL, NULL, '2009-09-05 07:32:55', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:32:55', "created_at" = '2009-09-05 07:32:55', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:32:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 16ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:32:55) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:32:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:32:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:32:55) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:32:55) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:32:55', '2009-09-05 07:32:55', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 26ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:33:41', 0, '2009-09-05 07:33:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:33:41', 1000, '2009-09-05 07:33:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:33:41', 30000, '2009-09-05 07:33:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6d72e6619ee5af75ac3adf24e63735a3b7c75da640f608643a945b4e1cbc22ec9c8d884532ee21ce93a00e5c626b2672df87e1c0fe44e91f5c6a56894dcb80ec') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:33:41', 'd6598c52e834381da0862d6d37e453dacd4d4410c2d6b991e2c6936478bc4b05dbd06aa3e589794dd4a716401498368bf0ea77d24f579e3b750e77d2f32c5a10', '2009-09-05 07:33:41', 'subscriber', 'b-pWlcL69hb28vjJtM7L', '6d72e6619ee5af75ac3adf24e63735a3b7c75da640f608643a945b4e1cbc22ec9c8d884532ee21ce93a00e5c626b2672df87e1c0fe44e91f5c6a56894dcb80ec', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:33:41', '2009-09-05 07:33:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:33:41', NULL, NULL, NULL, '2009-09-05 07:33:41', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:33:41', "created_at" = '2009-09-05 07:33:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:33:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:33:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:33:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:33:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:33:41) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:33:42) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:33:42', '2009-09-05 07:33:42', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 25ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:35:43', 0, '2009-09-05 07:35:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:35:43', 1000, '2009-09-05 07:35:43', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:35:43', 30000, '2009-09-05 07:35:43', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6dac5040bd0ab970ee825990f27d5d9048a25c02c34a29c643e9fb82a1ed65fd9a997d0e4b5bf564b9eb069cfb02675d8642dfa32ffeebc3b72a8897d964b57e') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:35:43', '8dab1228251a957997566323154d1302d326f798563228ccd6ad2305e232a36a90f4032f5db6b685b11da9a3a4af8dd2134ba60037edbebb9fb22c39966904c3', '2009-09-05 07:35:43', 'subscriber', 'eOfeciE3p0aTYI3KUBlh', '6dac5040bd0ab970ee825990f27d5d9048a25c02c34a29c643e9fb82a1ed65fd9a997d0e4b5bf564b9eb069cfb02675d8642dfa32ffeebc3b72a8897d964b57e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:35:43', '2009-09-05 07:35:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:35:43', NULL, NULL, NULL, '2009-09-05 07:35:43', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:35:43', "created_at" = '2009-09-05 07:35:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:35:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:35:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:35:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:35:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:35:43) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:35:43) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:36:21', '2009-09-05 07:36:21', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:36:37', '2009-09-05 07:36:37', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 146705ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:38:23', 0, '2009-09-05 07:38:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:38:23', 1000, '2009-09-05 07:38:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:38:23', 30000, '2009-09-05 07:38:23', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1f36573a24a8e918fbedf5d3fcbdc4006ea488e1a3090a37a60e9ecd14782b4890564d2fc6df5146d0257e65efc8f70ba1a4f6a895607a2a831eb3d40f19253d') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:38:24', '1f3afb7e8959fd43987c2cb848c596c05e3fd73ad8d52820ee4eeccd1302eff8a964be67c947ce60f7fd0f6384cbc736ced0d650d0d702e2f689f314eacfc874', '2009-09-05 07:38:24', 'subscriber', 'mMMQLjb4ZP1OMU10g_uD', '1f36573a24a8e918fbedf5d3fcbdc4006ea488e1a3090a37a60e9ecd14782b4890564d2fc6df5146d0257e65efc8f70ba1a4f6a895607a2a831eb3d40f19253d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:38:24', '2009-09-05 07:38:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:38:31', NULL, NULL, NULL, '2009-09-05 07:38:31', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:38:31', "created_at" = '2009-09-05 07:38:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:38:31) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 16ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:38:31) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 9ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:38:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:38:31) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:38:31) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:38:31) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:40:05', '2009-09-05 07:40:05', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (1.2ms)
Completed in 222898ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:42:25', 0, '2009-09-05 07:42:25', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:42:25', 1000, '2009-09-05 07:42:25', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:42:25', 30000, '2009-09-05 07:42:25', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd98142863b58b3f8cddb8c49a51d608121d77a310a26aa26f75ece77782225e0f6af40dfc8ef4f3f7a4ed6ba9d87f903cbe749a99cdfba06e65d2a848aa72974') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:42:25', 'd03978b8383653c43bcfd46b27155d32486ce72f1bdc6cb9b55dfb7912c42c0a5947d14131f3fc649d67f47b027839e868d378d2d5192a05674d4f17f3172f4f', '2009-09-05 07:42:25', 'subscriber', 'kgZBQRTAJKGMYyEIiEl2', 'd98142863b58b3f8cddb8c49a51d608121d77a310a26aa26f75ece77782225e0f6af40dfc8ef4f3f7a4ed6ba9d87f903cbe749a99cdfba06e65d2a848aa72974', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:42:25', '2009-09-05 07:42:25', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.6ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:42:44', NULL, NULL, NULL, '2009-09-05 07:42:44', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:42:44', "created_at" = '2009-09-05 07:42:25', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:42:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 16ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:42:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:42:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:42:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:42:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:42:45) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"4111111111111111", "month"=>"10", "type"=>"visa", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-05 07:46:32', '2009-09-05 07:46:32', NULL, 'store', 1, 'f', '--- {}

', 'Bogus Gateway: Use CreditCard number 1 for success, 2 for exception and anything else for error', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 227093ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:49:22', 0, '2009-09-05 07:49:22', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (62.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:49:22', 1000, '2009-09-05 07:49:22', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:49:22', 30000, '2009-09-05 07:49:22', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9421a6fd22d789afa6df94e15e49fb9e96726a04a675b74a6c7e9c19a0a5997a99214b13966b38abbc5f59eb46fca86752b427899178575efa7d9aa6d6b26def') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:49:22', '8af07e769aa7852298dae3bd725d415e761688e54a25cb4c7f08c50ece2260674f2faa4e45aab2e71386f8f452c48f9672c5f12e2e7486893dd63e0ff567afdf', '2009-09-05 07:49:22', 'subscriber', '3mHoq2H2cagvZfVO12qO', '9421a6fd22d789afa6df94e15e49fb9e96726a04a675b74a6c7e9c19a0a5997a99214b13966b38abbc5f59eb46fca86752b427899178575efa7d9aa6d6b26def', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:49:22', '2009-09-05 07:49:22', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:49:24', NULL, NULL, NULL, '2009-09-05 07:49:24', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:49:24', "created_at" = '2009-09-05 07:49:22', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:49:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 16ms (View: 12, DB: 66) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:49:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:49:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:49:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 25ms (View: 15, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:49:24) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card


Processing ApplicationController#credit_card (for 127.0.0.1 at 2009-09-05 03:49:24) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:51:16', 0, '2009-09-05 07:51:16', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:51:17', 1000, '2009-09-05 07:51:17', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:51:17', 30000, '2009-09-05 07:51:17', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'abeb9786684f09133cebcdb67911794959c5784a5070169f06d617702fbbb47f4b89ea2c067873590eb12bc31cc855ad5246923d737d0c45680184fbcb9963a8') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:51:17', '5790d298a1a7bc11964b199be8097936b12f50450e593aeaf67c60c6f977fc07b8de2b7dafb4e4f5b38404ca81bdd15f878af1640b6544d507e83b86726d25aa', '2009-09-05 07:51:17', 'subscriber', 'T9AN2MPMJ2SCtzJTrFyw', 'abeb9786684f09133cebcdb67911794959c5784a5070169f06d617702fbbb47f4b89ea2c067873590eb12bc31cc855ad5246923d737d0c45680184fbcb9963a8', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:51:17', '2009-09-05 07:51:17', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:51:19', NULL, NULL, NULL, '2009-09-05 07:51:19', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:51:19', "created_at" = '2009-09-05 07:51:17', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:51:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 17ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:51:20) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:51:20) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:51:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:51:20) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:52:14', 0, '2009-09-05 07:52:14', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (58.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:52:14', 1000, '2009-09-05 07:52:14', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:52:14', 30000, '2009-09-05 07:52:14', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '04ebf09ec2f668ebd3d6a24260a854f182e3dbc5952fdaea667d4d8d3f0f39320b8ce5c6381733a5102fb6004157128678d38986c567e04810e242515e35425d') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:52:14', '00752e4e124e9e2a8e737c8925f72ae0a54b1924674cb343d026748a993792bfd488d021cb073bbb4ae0dfd5b15a3455aa66427813fe278b7a998aa1453d6f0c', '2009-09-05 07:52:14', 'subscriber', 'P3yQ8J4L1MEOd4RbB3y7', '04ebf09ec2f668ebd3d6a24260a854f182e3dbc5952fdaea667d4d8d3f0f39320b8ce5c6381733a5102fb6004157128678d38986c567e04810e242515e35425d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:52:14', '2009-09-05 07:52:14', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:52:17', NULL, NULL, NULL, '2009-09-05 07:52:17', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:52:17', "created_at" = '2009-09-05 07:52:14', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:52:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 16ms (View: 12, DB: 63) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:52:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:52:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:52:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:52:17) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:52:17) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 07:52:19', '2009-09-05 07:52:19', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 07:52:19', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:52:19) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 07:55:28', 0, '2009-09-05 07:55:28', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (57.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 07:55:28', 1000, '2009-09-05 07:55:28', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 07:55:28', 30000, '2009-09-05 07:55:28', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3ca0d30e7a9971163c7d6808f169e3cff1945afb2c32cb240c8faed4eab0782fa362c58bbb6b3a4529288ddeaf51c2cbd87273e949b0779ee32e3f7126a4b295') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 07:55:28', '7c8f926d40415fbae9261be7dfa795bcd5229543cf982604cc5d71b55b73d6ac89d11f3e4ae8f5d9f821396b8151dd71cde3a89871eda3d91181259405981251', '2009-09-05 07:55:28', 'subscriber', 'o6ZaAy-HeB0KGih3j-qN', '3ca0d30e7a9971163c7d6808f169e3cff1945afb2c32cb240c8faed4eab0782fa362c58bbb6b3a4529288ddeaf51c2cbd87273e949b0779ee32e3f7126a4b295', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 07:55:28', '2009-09-05 07:55:28', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 07:55:31', NULL, NULL, NULL, '2009-09-05 07:55:31', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 07:55:31', "created_at" = '2009-09-05 07:55:28', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 03:55:31) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 17ms (View: 13, DB: 61) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 03:55:31) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 03:55:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:55:31) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 03:55:31) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 03:55:31) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 07:55:33', '2009-09-05 07:55:33', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 07:55:33', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1645ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 03:55:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-05 03:55:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:02:24', 0, '2009-09-05 08:02:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:02:24', 1000, '2009-09-05 08:02:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:02:24', 30000, '2009-09-05 08:02:24', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '17ad44dbbb759cf31669d71d4420b30072ce67c7daf05059f5a1d273be0ec8f618b752955537e0a872de002bcedeb609d4bfa2faae070daa72877b021f404e05') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:02:24', '95af4ac553c555a2c49b3fb63ce90268171c4e753b96341c668cd2982bbb2415879b2e920bf291a76f1a828d86dbe5fe6db5681c9c3678c34ba47ebbb824b3fc', '2009-09-05 08:02:24', 'subscriber', 'rlrX046_u-U3tFK_uGVp', '17ad44dbbb759cf31669d71d4420b30072ce67c7daf05059f5a1d273be0ec8f618b752955537e0a872de002bcedeb609d4bfa2faae070daa72877b021f404e05', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:02:24', '2009-09-05 08:02:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:02:27', NULL, NULL, NULL, '2009-09-05 08:02:27', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:02:27', "created_at" = '2009-09-05 08:02:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:02:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 16ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:02:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:02:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:02:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
ERROR: compiling _run_erb_app47views47subscriptions47show46html46erb RAISED compile error
/Users/jonathan/rails/saasapp/app/views/subscriptions/show.html.erb:44: syntax error, unexpected ':', expecting ')'
...(( t.success? 'Successfully' : 'Failed to' ).to_s); @output_...
                              ^
Function body:           def _run_erb_app47views47subscriptions47show46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ;  title "Subscription Details" ; @output_buffer.concat "\n<fieldset>\n\t<legend>Subscription</legend>\n\t<p>\n\t\t<strong>Plan:</strong>\n\t\t"




; @output_buffer.concat(( @subscription.plan.name.titleize ).to_s); @output_buffer.concat "\n\t\t"
; @output_buffer.concat(( button_to "Change Plan", edit_subscription_path(:current), :method => :get ).to_s); @output_buffer.concat "\n\t</p>\n\t"

;  unless @user.subscription.free? ; @output_buffer.concat "\n\t\t<p>\n\t\t\t<strong>Status:</strong>\n\t\t\t"


; @output_buffer.concat(( @user.subscription.state.titleize ).to_s); @output_buffer.concat "\n\t\t</p>\n\t\t"

;  if @subscription.trial? ; @output_buffer.concat "\n\t\t\t<p>\n\t\t\t\t<strong>Trial Period Ends:</strong>\n\t\t\t\t"


; @output_buffer.concat(( @subscription.next_renewal_on ).to_s); @output_buffer.concat "\n\t\t\t</p>\n\t\t"

;  else ; @output_buffer.concat "\n\t\t\t<p>\n\t\t\t\t<strong>Paid Through:</strong>\n\t\t\t\t"


; @output_buffer.concat(( @subscription.next_renewal_on ).to_s); @output_buffer.concat "\n\t\t\t</p>\n\t\t"

;  end ; @output_buffer.concat "\n\t"
;  end ; @output_buffer.concat "\n</fieldset>\n<fieldset>\n\t<legend>Billing Info</legend>\n\t<p>\n\t\t<strong>Credit Card:</strong>\n\t  "





;  if @subscription.profile.nil? || @subscription.profile.none? ; @output_buffer.concat "\n\t\t\t(no credit card on file)\n\t\t"

;  else ; @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( "#{@subscription.profile.card_type.titleize} #{@subscription.profile.card_display_number} Expires: #{@subscription.profile.card_expires_on}" ).to_s); @output_buffer.concat "\n\t\t"
;  end ; @output_buffer.concat "\n\t\t"
; @output_buffer.concat(( button_to "Change Credit Card", credit_card_subscription_path(:current), :method => :get ).to_s); @output_buffer.concat "\n\t</p>\n\t"

;  if @subscription.last_transaction ; @output_buffer.concat "\n\t<p>\n\t\t<strong>Last Transaction:</strong>\n\t\t\t"


; @output_buffer.concat "\n\t\t\t"
;  t = @subscription.last_transaction ; @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( t.created_at ).to_s); @output_buffer.concat " :\n\t\t\t"
; @output_buffer.concat(( t.success? 'Successfully' : 'Failed to' ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( t.action.capitalize ).to_s); @output_buffer.concat " card\n\t\t\t"
; @output_buffer.concat(( "for $#{t.amount }" unless t.amount.to_i==0 ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( t.message ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( "(#{link_to 'history', history_subscription_path(:current)})" ).to_s); @output_buffer.concat "\n\t</p>\n"

;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/jonathan/rails/saasapp/app/views/subscriptions/show.html.erb:54:in `compile!'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:61:in `compile'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:28:in `render_without_template_tracking'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/test_case.rb:20:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/template.rb:194:in `render_template'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:260:in `render_without_mock_proxy'
/opt/local/lib/ruby/gems/1.8/gems/rspec-rails-1.2.7.1/lib/spec/rails/extensions/action_view/base.rb:27:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:343:in `_render_with_layout'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:257:in `render_without_mock_proxy'
/opt/local/lib/ruby/gems/1.8/gems/rspec-rails-1.2.7.1/lib/spec/rails/extensions/action_view/base.rb:27:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1241:in `render_for_file'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:937:in `render_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1317:in `default_render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1323:in `perform_action_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:617:in `call_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lint.rb:47:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lint.rb:35:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:320:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:196:in `get'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:498:in `__send__'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:498:in `get'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/rails.rb:68:in `send'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/rails.rb:68:in `do_request'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/rails.rb:37:in `get'
(__FORWARDABLE__):3:in `__send__'
(__FORWARDABLE__):3:in `get'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:282:in `send'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:282:in `process_request'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:122:in `request_page'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:220:in `visit'
(eval):2:in `visit'
./features/step_definitions/webrat_steps.rb:11
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:24:in `instance_exec'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:24:in `cucumber_instance_exec'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:45:in `cucumber_run_with_backtrace_filtering'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:12:in `cucumber_instance_exec'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/rb_support/rb_step_definition.rb:44:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/step_match.rb:16:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_invocation.rb:42:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_invocation.rb:29:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:76:in `visit_step'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:145:in `visit_step'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_collection.rb:15:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_collection.rb:14:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_collection.rb:14:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:72:in `visit_steps'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/scenario.rb:33:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/step_mother.rb:199:in `before_and_after'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/scenario.rb:32:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:42:in `visit_feature_element'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:82:in `visit_feature_element'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/feature.rb:25:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/feature.rb:24:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/feature.rb:24:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:20:in `visit_feature'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:44:in `visit_feature'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:29:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:17:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:17:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:28:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:16:in `visit_features'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:28:in `visit_features'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:9:in `__send__'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:9:in `method_missing'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:8:in `map'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:8:in `method_missing'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/cli/main.rb:66:in `execute!'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/cli/main.rb:29:in `execute'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/cucumber:9
/opt/local/bin/cucumber:19:in `load'
/opt/local/bin/cucumber:19


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-05 04:02:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:03:11', 0, '2009-09-05 08:03:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:03:11', 1000, '2009-09-05 08:03:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:03:11', 30000, '2009-09-05 08:03:11', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd5edfcf1b7435398b4fad72b50ab1085da33292513111a126323bb95fc573562e96a4515105709d193e4bfda3693787555ce2bf4cdbd24a7fc2ccb124941c45f') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:03:12', '9c1b9cbb4546e6cd5cdaeaa1876ada79c8bfe5d0b8d4a98c7610768b9783b2c4c67fe7478464a17603da26ab9130748360509410c01a442780a00cbeaff58868', '2009-09-05 08:03:12', 'subscriber', 'qTYB1t6iiD3gDSNy7OSG', 'd5edfcf1b7435398b4fad72b50ab1085da33292513111a126323bb95fc573562e96a4515105709d193e4bfda3693787555ce2bf4cdbd24a7fc2ccb124941c45f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:03:12', '2009-09-05 08:03:12', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:03:15', NULL, NULL, NULL, '2009-09-05 08:03:15', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:03:15', "created_at" = '2009-09-05 08:03:12', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:03:15) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.2ms)
Completed in 16ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:03:15) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:03:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:03:15) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:03:15) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:03:15) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 08:03:17', '2009-09-05 08:03:17', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 08:03:17', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1701ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:03:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 138ms (View: 131, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:18:21', 0, '2009-09-05 08:18:21', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:18:21', 1000, '2009-09-05 08:18:21', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:18:21', 30000, '2009-09-05 08:18:21', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '94a860add19840be383ce0f450735d16e7b5f7c586261afae1d22cddb6fee6aa5c442eb03d608992ef7c2645ad1d7458c858f6b5e9c372d5ed61adee7f1cc7d3') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:18:21', 'c1fdc61773d6cb369c7cf256b10a0dfe289663709209678a2652d3e62dda6304e449f540eade344a957af7eb3b21cbb6afd485cd5a59455e0c5c7239b65c735e', '2009-09-05 08:18:21', 'subscriber', 'N9wrp2jrE7-DJEr_pftW', '94a860add19840be383ce0f450735d16e7b5f7c586261afae1d22cddb6fee6aa5c442eb03d608992ef7c2645ad1d7458c858f6b5e9c372d5ed61adee7f1cc7d3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:18:21', '2009-09-05 08:18:21', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:18:25', NULL, NULL, NULL, '2009-09-05 08:18:25', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:18:25', "created_at" = '2009-09-05 08:18:21', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:18:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 28ms (View: 24, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:18:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:18:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:18:25) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:18:25) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:18:25) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 08:18:27', '2009-09-05 08:18:27', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 08:18:27', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1570ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:18:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 159ms (View: 152, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionProfile Load (1.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:19:06', 0, '2009-09-05 08:19:06', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (55.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:19:06', 1000, '2009-09-05 08:19:06', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:19:06', 30000, '2009-09-05 08:19:06', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8cb89520591544e44ad350955ec22c65d86b39e4d3e881cd28d73210a87fd5b5b84c2903b16067be20ef264ccbbf3443efda082bae4af487c5bb79f727d8b466') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:19:07', 'ff2f0944f679f2c8be50d27c0f7c5c23f87264b6db49799f0fbde6c2acc8cd05655fb0d0df1f4f5f5a63d278cac78a75a08a2794f7f9b885491a605c607fffa3', '2009-09-05 08:19:07', 'subscriber', 'X99bCbZQuCRahwc-OrgP', '8cb89520591544e44ad350955ec22c65d86b39e4d3e881cd28d73210a87fd5b5b84c2903b16067be20ef264ccbbf3443efda082bae4af487c5bb79f727d8b466', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:19:07', '2009-09-05 08:19:07', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:19:38', NULL, NULL, NULL, '2009-09-05 08:19:38', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:19:38', "created_at" = '2009-09-05 08:19:07', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:19:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 59) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:19:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:19:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:19:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 39ms (View: 30, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:19:38) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:19:38) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 08:20:09', '2009-09-05 08:20:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 08:20:09', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 31155ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:20:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 115ms (View: 108, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionProfile Load (0.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:20:19', 0, '2009-09-05 08:20:19', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:20:19', 1000, '2009-09-05 08:20:19', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:20:19', 30000, '2009-09-05 08:20:19', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1ec1de7877ad38f32e03a807257975e42c236f2893dfada1ae776059a4db325fac40891401d9c909c4aa782ad0888fd65efe380e8e88f1eae08a725ce5ae8db9') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:20:19', '5e29b15be1aa35a83595246caa2183963c8927624b4276b5d94fd927f553ba8d4bae013651595fc92e7e524161ce4067c3c60c6f97d35c7e0d479b0c08929f8d', '2009-09-05 08:20:19', 'subscriber', 'Kb4A5ZOiJVDL-V0x7qQA', '1ec1de7877ad38f32e03a807257975e42c236f2893dfada1ae776059a4db325fac40891401d9c909c4aa782ad0888fd65efe380e8e88f1eae08a725ce5ae8db9', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:20:19', '2009-09-05 08:20:19', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:20:19', NULL, NULL, NULL, '2009-09-05 08:20:19', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:20:19', "created_at" = '2009-09-05 08:20:19', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:20:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:20:20) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:20:20) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:20:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:20:20) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:20:20) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 08:20:20', '2009-09-05 08:20:20', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 08:20:20', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:20:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 115ms (View: 107, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionProfile Load (2.7ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:21:25', 0, '2009-09-05 08:21:25', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:21:25', 1000, '2009-09-05 08:21:25', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:21:25', 30000, '2009-09-05 08:21:25', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c29c2db2ac444b28dd95dd304c7e44f965fe754b55a4bd382c5c9de1117a18a3bbf2234e4afa7412993b82cf97b99838ab8b5fe0c0c974d02b0cc47c93a2c180') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:21:26', 'bad646e45a850d6a0a98c39e0917fa537a4475e44c3f15886448674addc2ac15c5b7ea25ece5f24eeb9fd0e670ee48012e812e82b3295317d607cf6d54b81c79', '2009-09-05 08:21:26', 'subscriber', 'vV6pB6Uii2720TVOWaXq', 'c29c2db2ac444b28dd95dd304c7e44f965fe754b55a4bd382c5c9de1117a18a3bbf2234e4afa7412993b82cf97b99838ab8b5fe0c0c974d02b0cc47c93a2c180', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:21:26', '2009-09-05 08:21:26', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:21:26', NULL, NULL, NULL, '2009-09-05 08:21:26', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:21:26', "created_at" = '2009-09-05 08:21:26', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:21:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:21:26) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:21:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:21:26) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:22:01', 0, '2009-09-05 08:22:01', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:22:01', 1000, '2009-09-05 08:22:01', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:22:01', 30000, '2009-09-05 08:22:01', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3723a31659fbcc29e2aa7a42de0041cc4e5566163da79e26b521c7eb31a4008466a238dca4d2f27691039d0748fa9c2bb47e1c604074b6c1977d6211da83c048') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:22:01', '58a72c2b6522d18c319ff2d05241771d6d62b175b12e913328276a7959c003971300369f4ba4325252b1b91acabac573381b221c83868be53b23627e4a5aa310', '2009-09-05 08:22:01', 'subscriber', 'S2YhprB0p4giMKtpiOmH', '3723a31659fbcc29e2aa7a42de0041cc4e5566163da79e26b521c7eb31a4008466a238dca4d2f27691039d0748fa9c2bb47e1c604074b6c1977d6211da83c048', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:22:01', '2009-09-05 08:22:01', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:22:01', NULL, NULL, NULL, '2009-09-05 08:22:01', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:22:01', "created_at" = '2009-09-05 08:22:01', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:22:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:22:01) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:22:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:22:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:25:12', 0, '2009-09-05 08:25:12', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:25:12', 1000, '2009-09-05 08:25:12', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:25:12', 30000, '2009-09-05 08:25:12', 12, 't')[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:29:14', 0, '2009-09-05 08:29:14', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:29:14', 1000, '2009-09-05 08:29:14', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:29:14', 30000, '2009-09-05 08:29:14', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f87889e7de5d67bcacea407bd40fdb042b44f5b285a09cacb592defd1897942392db5f8ede5b298d04cd34378a355f600d6dd0aba329e9f6c026229fecdddd6a') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:29:14', '2e1eb3e1bb015c675021e8d2a71dcbeca2086ba1b45c02a04f0f2e62cb8a5dd375737fbe7ec0c5d0976034cfce38ae02b1a205b983b0b800cdda92121fbbae18', '2009-09-05 08:29:14', 'subscriber', '2uXuAkEYlUWbCyzs2X2s', 'f87889e7de5d67bcacea407bd40fdb042b44f5b285a09cacb592defd1897942392db5f8ede5b298d04cd34378a355f600d6dd0aba329e9f6c026229fecdddd6a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.4ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:29:14', '2009-09-05 08:29:14', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:29:14', NULL, NULL, NULL, '2009-09-05 08:29:14', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:29:14', "created_at" = '2009-09-05 08:29:14', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:29:14) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:29:14) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:29:14) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:29:14) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:29:14) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:29:39', 0, '2009-09-05 08:29:39', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:29:39', 1000, '2009-09-05 08:29:39', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:29:39', 30000, '2009-09-05 08:29:39', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'faed599fcc34b3a03b500af10e9e431671a68a83c7032b4ce1f4928b40b3d75125e84b82500995360fe87fd608e1252b9591d68ec00b94221a207b3257f320cc') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:29:40', '786e28ff9563fd3a49c027de63e10ae223d086a9fcdb062f6b435e3cbdf89a430e1005fb10bc54d4e5bb1b999f41df35f36cbf491f4b6e1d43470ab5540484bd', '2009-09-05 08:29:40', 'subscriber', 'ooU6Q5AItlK-ajjoe0bT', 'faed599fcc34b3a03b500af10e9e431671a68a83c7032b4ce1f4928b40b3d75125e84b82500995360fe87fd608e1252b9591d68ec00b94221a207b3257f320cc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:29:40', '2009-09-05 08:29:40', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:29:40', NULL, NULL, NULL, '2009-09-05 08:29:40', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:29:40', "created_at" = '2009-09-05 08:29:40', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:29:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:29:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:29:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:29:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:29:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:29:40) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:30:23', 0, '2009-09-05 08:30:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:30:23', 1000, '2009-09-05 08:30:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:30:23', 30000, '2009-09-05 08:30:23', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f5b1912cd6eb54025576ca0ed7161c18ce30b1d4eb2fce7f812a0f46648c73cef62f7e19ceae20c12edf00407f096cb966b2c91068b722f2745bf739cf901ad0') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:30:24', 'ba6bc7040f87c873494e66104ac8dc074252ad151f86d34f6268ef37964c948cf5255b4e065de085e0dd3d288d468e81e6bcf3b6a2d3f13952de8f5e23d0de58', '2009-09-05 08:30:24', 'subscriber', '9N7NIys9a-rX2sG0j4SZ', 'f5b1912cd6eb54025576ca0ed7161c18ce30b1d4eb2fce7f812a0f46648c73cef62f7e19ceae20c12edf00407f096cb966b2c91068b722f2745bf739cf901ad0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:30:24', '2009-09-05 08:30:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:30:24', NULL, NULL, NULL, '2009-09-05 08:30:24', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:30:24', "created_at" = '2009-09-05 08:30:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:30:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (6.9ms)
Completed in 21ms (View: 16, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:30:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:30:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:30:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:30:24) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:30:24) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:31:47', 0, '2009-09-05 08:31:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (67.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:31:47', 1000, '2009-09-05 08:31:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:31:47', 30000, '2009-09-05 08:31:47', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1126cc677a372279db31685c1e7e161f295fe2163bd2bb3c9aa22e9d7ab9a6a867b4f82f2f58a9b06f0862ef9e1516a470ef9288473bcd5fb0bc00ae17230c64') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:31:47', '31326aa22212597241bc84cec0280bf414b9914cb439fa047ff1f1c52ddacf88b3cdaa025db085f359d7308f955b8c5dc7a11eb903c0dec11a9d5c6c08f96d24', '2009-09-05 08:31:47', 'subscriber', 'CqMXm6xPDnj8o38i98rC', '1126cc677a372279db31685c1e7e161f295fe2163bd2bb3c9aa22e9d7ab9a6a867b4f82f2f58a9b06f0862ef9e1516a470ef9288473bcd5fb0bc00ae17230c64', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:31:47', '2009-09-05 08:31:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:31:47', NULL, NULL, NULL, '2009-09-05 08:31:47', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:31:47', "created_at" = '2009-09-05 08:31:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:31:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 72) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:31:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:31:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:31:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:31:47) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:31:47) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:33:53', 0, '2009-09-05 08:33:53', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (63.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:33:53', 1000, '2009-09-05 08:33:53', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:33:53', 30000, '2009-09-05 08:33:53', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '83aaf6535d911569d1cfb9055f78ab487868785a3c66091ee3078b1afe2bba7c19fce766bf5ac0106c6733268da884e7b5df78f96737419ce382d209a936e2a6') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:33:53', 'fdefb253b05b270adb4e7fc0b56ccc7e02fa977d935e10e1d5258208bd0e7644e3064fd2da4f2152afa1909bb8ff358f96222510bb7fe4ab947aaf1ade54ef16', '2009-09-05 08:33:53', 'subscriber', '3VsHCNZ6cKNazpROlLJb', '83aaf6535d911569d1cfb9055f78ab487868785a3c66091ee3078b1afe2bba7c19fce766bf5ac0106c6733268da884e7b5df78f96737419ce382d209a936e2a6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:33:53', '2009-09-05 08:33:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:33:53', NULL, NULL, NULL, '2009-09-05 08:33:53', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:33:53', "created_at" = '2009-09-05 08:33:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:33:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 67) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:33:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:33:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:33:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:33:53) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:33:53) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:34:43', 0, '2009-09-05 08:34:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (60.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:34:43', 1000, '2009-09-05 08:34:43', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:34:43', 30000, '2009-09-05 08:34:43', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'aac4efa3bb16e5d863d61589a5cedb761650631da59916aaae641a078ee877c154de536f7a4911d842014028353d8998baa8f3d1f637c0db872a5731dddd4240') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:34:43', 'ec5b12e8855af1ecdf9a58f1a190ae7c193ceebf3218a7384a0741efd51c7c6d0bb42568b2648791ce2b47801ca661a6a32e3b192589ca60a466314ce4052db5', '2009-09-05 08:34:43', 'subscriber', 'N8-B34PG9c18WcNIddZV', 'aac4efa3bb16e5d863d61589a5cedb761650631da59916aaae641a078ee877c154de536f7a4911d842014028353d8998baa8f3d1f637c0db872a5731dddd4240', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:34:43', '2009-09-05 08:34:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:34:43', NULL, NULL, NULL, '2009-09-05 08:34:43', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:34:43', "created_at" = '2009-09-05 08:34:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:34:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 65) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:34:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:34:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:34:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:34:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:34:44) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:37:44', 0, '2009-09-05 08:37:44', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:37:44', 1000, '2009-09-05 08:37:44', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:37:44', 30000, '2009-09-05 08:37:44', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b70150277d3b7eb99b1d087342ee706e8c39d09c52656ebaa7639bae4b755483203cb9013130841899038b131031261f0bfd82dc7b2185033ebe58fbec4389b3') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:37:44', '3c4d6690fe2ba8b158f0d2efc40f7c76ede62dd5353418b9e88407c9509ae4fa3c4d56af981e0b980558df605aeb8d3cafcaa03c75e7680dbebe1079866b934c', '2009-09-05 08:37:44', 'subscriber', 'CNXzNmCRbrqBFhIt3U6b', 'b70150277d3b7eb99b1d087342ee706e8c39d09c52656ebaa7639bae4b755483203cb9013130841899038b131031261f0bfd82dc7b2185033ebe58fbec4389b3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:37:44', '2009-09-05 08:37:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:37:44', NULL, NULL, NULL, '2009-09-05 08:37:44', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:37:44', "created_at" = '2009-09-05 08:37:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:37:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:37:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:37:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:37:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:37:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:37:44) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:41:53', 0, '2009-09-05 08:41:53', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:41:54', 1000, '2009-09-05 08:41:54', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:41:54', 30000, '2009-09-05 08:41:54', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3673061d88b4009d3cb57e27cd9b217eb79dc1865eb5a5a0086591b95270ce1688bd72e2ca68acdbcbd622c68daa728bdb11ff031c381bd75714541fcbcb23d9') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:41:54', 'fe6e6163b8a3827903b58afdd03bd24375e6c6f366e05f06f2740a85d6a89214e933b339bcee9ac41a725e732aff1f31c3b88ed69579a1684c42fc8178ee82cd', '2009-09-05 08:41:54', 'subscriber', 'UjbKt3SWZbF5Px-5SrWI', '3673061d88b4009d3cb57e27cd9b217eb79dc1865eb5a5a0086591b95270ce1688bd72e2ca68acdbcbd622c68daa728bdb11ff031c381bd75714541fcbcb23d9', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:41:54', '2009-09-05 08:41:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:41:54', NULL, NULL, NULL, '2009-09-05 08:41:54', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:41:54', "created_at" = '2009-09-05 08:41:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:41:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:41:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:41:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:41:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:41:54) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:41:54) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:46:01', 0, '2009-09-05 08:46:01', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:46:01', 1000, '2009-09-05 08:46:01', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:46:01', 30000, '2009-09-05 08:46:01', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '221280682f2067f67ba231a26acf4e2e1b1620c449150a24d4d5f05550ee1c9372980c5641978783d1e174b2116c654b2e764dcda9c0405447c1c8da2048d51a') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:46:01', '88da429329f7c37778bfba891044ee32dad866c554bbf3cc792a948bb0df58b93ac4e752e120cf231cf5aaf0cd3338d827b7d9cd631cc7a5e35fb9a56ec80203', '2009-09-05 08:46:01', 'subscriber', 'DTwx9tvdDpGSdQLrRCZi', '221280682f2067f67ba231a26acf4e2e1b1620c449150a24d4d5f05550ee1c9372980c5641978783d1e174b2116c654b2e764dcda9c0405447c1c8da2048d51a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:46:01', '2009-09-05 08:46:01', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:46:01', NULL, NULL, NULL, '2009-09-05 08:46:01', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:46:01', "created_at" = '2009-09-05 08:46:01', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:46:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:46:01) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:46:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:46:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (25.3ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:46:54', 0, '2009-09-05 08:46:54', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:46:54', 1000, '2009-09-05 08:46:54', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:46:54', 30000, '2009-09-05 08:46:54', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0bb28a0186185ebc995f3a8b31f112dbc15373941a1d461f94d847397c220cbacfb3a7bcdc227948213fbbbb8ca9eafb7015003b4cc3ec2780ca28d7095f4cb9') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:46:54', '30faea0ff7e1d14045d14f879493904afc9c5525bf45c524d0fb6ce6b234b6ee77512221fda3be2bcfd1c392c7537cd1df07d4cfe9b67f007e54bf622c8e7cff', '2009-09-05 08:46:54', 'subscriber', '1ahhOExfF3S-jovIMera', '0bb28a0186185ebc995f3a8b31f112dbc15373941a1d461f94d847397c220cbacfb3a7bcdc227948213fbbbb8ca9eafb7015003b4cc3ec2780ca28d7095f4cb9', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:46:54', '2009-09-05 08:46:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:46:54', NULL, NULL, NULL, '2009-09-05 08:46:54', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:46:54', "created_at" = '2009-09-05 08:46:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:46:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 16ms (View: 11, DB: 29) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:46:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:46:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:46:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:46:55) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:46:55) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>""}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-05 08:47:04', 0, '2009-09-05 08:47:04', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-05 08:47:04', 1000, '2009-09-05 08:47:04', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-05 08:47:04', 30000, '2009-09-05 08:47:04', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'debd16ee30b776322cc29bd1ee9799dd43290d7b2d067efb46a8f536555171f0793404136de72b38d0c6abe795d7c93992b2c94a1db5fe6e90b135be34531666') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-05 08:47:04', '4d03815e3564c31bbe49702e2594b84afb81ee51ec2b3be3057a4f6fa261cf9deb98354843e20156aed57c25cc22a7bb83d6131f02f5319922c3c8f1e876b795', '2009-09-05 08:47:04', 'subscriber', 'rgD16eCxZoaZyILd1UHm', 'debd16ee30b776322cc29bd1ee9799dd43290d7b2d067efb46a8f536555171f0793404136de72b38d0c6abe795d7c93992b2c94a1db5fe6e90b135be34531666', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-05 08:47:04', '2009-09-05 08:47:04', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-05 08:47:04', NULL, NULL, NULL, '2009-09-05 08:47:04', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-05 08:47:04', "created_at" = '2009-09-05 08:47:04', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 04:47:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 04:47:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 04:47:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:47:04) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 04:47:05) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 9, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 04:47:05) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"store_credit_card", "credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "last_name"=>"Last Name", "year"=>"2012", "verification_value"=>"999", "first_name"=>"First Name"}, "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-05 08:47:05', '2009-09-05 08:47:05', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-05 08:47:05', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 04:47:05) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 106, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 03:08:50', 0, '2009-09-06 03:08:50', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 03:08:50', 1000, '2009-09-06 03:08:50', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 03:08:50', 30000, '2009-09-06 03:08:50', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '088c2311f3f2229fa3cd2d07d201cfee9137432a4a024aeec55a8cfdf955572edf12bfb235efb23b2c58825fd904c92a0a9ab8fd996987d5dd52e20b59af89c6') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 03:08:50', '8d7d0deb19067ae100917329f206e325333d4fbde80ac6e2768d4eb77e14a72d57c979750f25531e1804f821409b71954a73568bf53338f44958f9d9f13a081a', '2009-09-06 03:08:50', 'subscriber', 'hfjT-k7KFkPF8sX5VMB6', '088c2311f3f2229fa3cd2d07d201cfee9137432a4a024aeec55a8cfdf955572edf12bfb235efb23b2c58825fd904c92a0a9ab8fd996987d5dd52e20b59af89c6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 03:08:50', '2009-09-06 03:08:50', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 03:08:50', NULL, NULL, NULL, '2009-09-06 03:08:50', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 03:08:50', "created_at" = '2009-09-06 03:08:50', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 23:08:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 33ms (View: 29, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 23:08:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 23:08:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 23:08:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 38ms (View: 28, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 23:08:51) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 30ms (View: 23, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 03:13:09', 0, '2009-09-06 03:13:09', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (60.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 03:13:09', 1000, '2009-09-06 03:13:09', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 03:13:09', 30000, '2009-09-06 03:13:09', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'afe88ed451e5a508a83c5c8595712d75f6c49bca93442775861b80d9b6a35b55c1557054e82169c5cf41fff928dcbdd6be172939842fb6595f0cf892b8030fbb') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 03:13:10', 'd0228716be58951e3172863c2ae126f3b9eb6dc435249addb34003a6ebcc4855b12134d29a151db149f6cb88ca0f5304da421bb6c2f77a757b44e5ee5088f570', '2009-09-06 03:13:10', 'subscriber', 'cafTNQwEuhVkZdNWq3W0', 'afe88ed451e5a508a83c5c8595712d75f6c49bca93442775861b80d9b6a35b55c1557054e82169c5cf41fff928dcbdd6be172939842fb6595f0cf892b8030fbb', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 03:13:10', '2009-09-06 03:13:10', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 03:13:10', NULL, NULL, NULL, '2009-09-06 03:13:10', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 03:13:10', "created_at" = '2009-09-06 03:13:10', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 23:13:10) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 65) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 23:13:10) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 23:13:10) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 23:13:10) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 23:13:10) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 23:13:10) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 7467ms (View: 7, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 03:44:41', 0, '2009-09-06 03:44:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 03:44:41', 1000, '2009-09-06 03:44:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 03:44:41', 30000, '2009-09-06 03:44:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a202e48819c1628d1eb556019247366f1461c0efdf74e78c7f27bfd4cebfb46957adf15af44c8cee3c1eadc51048c2249db587ee318f4098e3d139ebece52d08') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 03:44:41', '0c9b8d5e4c540a9c5e9706a38453a6aebf73ffb22d284139e9b701c16172183adc20dc4ce0fab5253fb8f820c48e518c925d1d13de5ef9f88184dc6ba0056156', '2009-09-06 03:44:41', 'subscriber', '7s0IiE3zNbAqiLKUBt5z', 'a202e48819c1628d1eb556019247366f1461c0efdf74e78c7f27bfd4cebfb46957adf15af44c8cee3c1eadc51048c2249db587ee318f4098e3d139ebece52d08', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 03:44:41', '2009-09-06 03:44:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 03:44:41', NULL, NULL, NULL, '2009-09-06 03:44:41', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 03:44:41', "created_at" = '2009-09-06 03:44:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 23:44:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 28ms (View: 24, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 23:44:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 23:44:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 23:44:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 23:44:42) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 23:44:42) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 41068ms (View: 7, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 03:45:58', 0, '2009-09-06 03:45:58', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 03:45:58', 1000, '2009-09-06 03:45:58', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 03:45:58', 30000, '2009-09-06 03:45:58', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0c261a31a775c3a4b5ddefe80e5bef9baec906984a1fe422b9ec59aeaaa1c6942358ffff9405412640f5bad2b48cc4af184e7d6f627bbd4f3ba96728ea1841bc') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 03:45:58', 'a4eba912d1d87bc624381fffcd46bc088646bc4b8bd614b8f9131398846ce9bb68d23c49c86d6b89afbcaf2c7167eade875a11f1c1eab09b437612a14cce6c7f', '2009-09-06 03:45:58', 'subscriber', 'ZGoGgm5cANS1uQ68U0Uw', '0c261a31a775c3a4b5ddefe80e5bef9baec906984a1fe422b9ec59aeaaa1c6942358ffff9405412640f5bad2b48cc4af184e7d6f627bbd4f3ba96728ea1841bc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 03:45:58', '2009-09-06 03:45:58', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 03:45:58', NULL, NULL, NULL, '2009-09-06 03:45:58', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 03:45:58', "created_at" = '2009-09-06 03:45:58', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 23:45:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 23:45:58) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 23:45:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 23:45:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 23:45:58) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 03:46:20', 0, '2009-09-06 03:46:20', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 03:46:20', 1000, '2009-09-06 03:46:20', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 03:46:20', 30000, '2009-09-06 03:46:20', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '943aeb9fcd3e8f5110c982fa29ded84774ed3318c22d0c96f0687bbb00452d665882dbf39fcecca78379b65e05b99abd55e21166b2357406c48e36e30e6388c3') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 03:46:20', 'aca2e1f44d27f51463492fb7193887a7c136f8235abc9517ef7c3f83f56fdefda3dd919fa7240cc57b4d5e4215009c997819f9e32aa181538051088020a8afc9', '2009-09-06 03:46:20', 'subscriber', 'gLVqdJ7tQzg-pnpMpBTu', '943aeb9fcd3e8f5110c982fa29ded84774ed3318c22d0c96f0687bbb00452d665882dbf39fcecca78379b65e05b99abd55e21166b2357406c48e36e30e6388c3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 03:46:20', '2009-09-06 03:46:20', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 03:46:20', NULL, NULL, NULL, '2009-09-06 03:46:20', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 03:46:20', "created_at" = '2009-09-06 03:46:20', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 23:46:20) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 23:46:20) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 23:46:20) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 23:46:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 27ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 23:46:20) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 03:47:57', 0, '2009-09-06 03:47:57', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (71.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 03:47:57', 1000, '2009-09-06 03:47:57', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 03:47:57', 30000, '2009-09-06 03:47:57', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e77b50f5dffa93da1b6fde460912df8ff44e12d08e53519cce56db16c7e710c37cd94e51e0f4e266de4a92bd5b44709478a1608d21e014224e7045c80ca61be0') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 03:47:58', '81f9a3365774590a82163340ca6ea7ea2de0e866d64b0f86b16acb4eba4c3b4b4734ece4f4254c79c7fb85081a72df0489e206747bfe83e309ae395edfc0fa56', '2009-09-06 03:47:58', 'subscriber', 'ES6gum406hQ0Iu2vSBp9', 'e77b50f5dffa93da1b6fde460912df8ff44e12d08e53519cce56db16c7e710c37cd94e51e0f4e266de4a92bd5b44709478a1608d21e014224e7045c80ca61be0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 03:47:58', '2009-09-06 03:47:58', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 03:47:58', NULL, NULL, NULL, '2009-09-06 03:47:58', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 03:47:58', "created_at" = '2009-09-06 03:47:58', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-05', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-05 23:47:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 76) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-05 23:47:58) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-05 23:47:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-05 23:47:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-05 23:47:58) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-05 23:47:58) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 03:47:58', '2009-09-06 03:47:58', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 1981ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:05:11', 0, '2009-09-06 04:05:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:05:11', 1000, '2009-09-06 04:05:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:05:11', 30000, '2009-09-06 04:05:11', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b70a56a8b777cf8e597cc00cf4ecf08937aff27d9844a7a29da42e4087c92a76bc7062b2425c154e88b660830c2edbbe75dd0c7b5a9d187fa268e6e8b515a4cb') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:05:11', '1692f04706ab741511e19ce65cffc0d8b52fd63184c800303dec75b7d70fceb94447b67907a77d63b7dce79b4df8682b516c870fad04285530d3ab3aaeaef199', '2009-09-06 04:05:11', 'subscriber', 'kTJhneExdcUZYfvlvzq8', 'b70a56a8b777cf8e597cc00cf4ecf08937aff27d9844a7a29da42e4087c92a76bc7062b2425c154e88b660830c2edbbe75dd0c7b5a9d187fa268e6e8b515a4cb', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:05:11', '2009-09-06 04:05:11', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:05:11', NULL, NULL, NULL, '2009-09-06 04:05:11', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:05:11', "created_at" = '2009-09-06 04:05:11', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:05:11) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:05:11) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:05:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:05:12) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (48.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:06:00', 0, '2009-09-06 04:06:00', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (187.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:06:00', 1000, '2009-09-06 04:06:00', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:06:00', 30000, '2009-09-06 04:06:00', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '38e736dde5dd1f37dce122fd4aa79684a8ce4f37dd55a36f52ca0bf17c9eeedc8b5e45617e281a3fcdb4597ce36dbb941642db51cc74b3a37a72bb0179528e98') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:06:00', 'c8437f5e3ccd4a6d2e67ada8b78bfb7b26179664c5015b3a93b56fad860d6ab501f760b80be333a722348099d5e8215528806dadc96742d72e105f3b6770bb69', '2009-09-06 04:06:00', 'subscriber', 'bS9jWFG8HnQ08qoE7EJZ', '38e736dde5dd1f37dce122fd4aa79684a8ce4f37dd55a36f52ca0bf17c9eeedc8b5e45617e281a3fcdb4597ce36dbb941642db51cc74b3a37a72bb0179528e98', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:06:00', '2009-09-06 04:06:00', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:06:00', NULL, NULL, NULL, '2009-09-06 04:06:00', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:06:00', "created_at" = '2009-09-06 04:06:00', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:06:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 239) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:06:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:06:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:06:00) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:06:24', 0, '2009-09-06 04:06:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:06:24', 1000, '2009-09-06 04:06:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:06:24', 30000, '2009-09-06 04:06:24', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f896781abf946ce54cb2aa26552fc39aa51852429ec2b167031991f325e1dd870128633a195e1567447df0421369de5fbba709b1fc1c4ab5fbf2f16eaf2da75b') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:06:26', '443d3031d3e4e1459478b286363b597096c3272698bf5baac40d363768513a556dd76fa69cb9b8787f0497d160e30d1e65c444bd89a38f0be9ac1e7efd22b611', '2009-09-06 04:06:26', 'subscriber', 'ulcomQNcW__nbGx5o-al', 'f896781abf946ce54cb2aa26552fc39aa51852429ec2b167031991f325e1dd870128633a195e1567447df0421369de5fbba709b1fc1c4ab5fbf2f16eaf2da75b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:06:26', '2009-09-06 04:06:26', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:06:26', NULL, NULL, NULL, '2009-09-06 04:06:26', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:06:26', "created_at" = '2009-09-06 04:06:26', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:06:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:06:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:06:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:06:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:06:42', 0, '2009-09-06 04:06:42', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:06:42', 1000, '2009-09-06 04:06:42', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:06:42', 30000, '2009-09-06 04:06:42', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6dfae9f34a792531a103a7fa960e315cc46139cbb69df6e6dfd0d339b0b650b84d44ede68c7e7d21f6bfcf60bc786957f4b71126f81f0623e1b46888fdca584b') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:06:45', '004f17973ecb2a5569773971ffe4fb7fb4a7585c7f62146404a5735b1eb73b4d6f5119c1014677ad28883d2acb62af40502bbb1b3683cb9efaae22271107b4a8', '2009-09-06 04:06:45', 'subscriber', 'a2H7KlPpA787ap5Mqb69', '6dfae9f34a792531a103a7fa960e315cc46139cbb69df6e6dfd0d339b0b650b84d44ede68c7e7d21f6bfcf60bc786957f4b71126f81f0623e1b46888fdca584b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:06:45', '2009-09-06 04:06:45', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:06:45', NULL, NULL, NULL, '2009-09-06 04:06:45', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:06:45', "created_at" = '2009-09-06 04:06:45', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:13:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:13:03) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:13:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:13:03) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:13:10', 0, '2009-09-06 04:13:10', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:13:10', 1000, '2009-09-06 04:13:10', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:13:10', 30000, '2009-09-06 04:13:10', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f13959537ffd15d1121e3e469fd32ffa3ef9ca1e89e72f2336a26f13dd6d2b25bb42462794b6e2197f1feca5c1162a1e05d6335f5e2ff2e130976dae69da83ce') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:13:26', '2b943e63526aaf663cc773f9b8eb8cb604c763c310377af8d8d967eb724a5002248610e9d4e8c5f74d868295de052118a3c9346ec8cfaf23d9c8dab1118517f2', '2009-09-06 04:13:26', 'subscriber', '5aIwE5gafBdudqf28Fah', 'f13959537ffd15d1121e3e469fd32ffa3ef9ca1e89e72f2336a26f13dd6d2b25bb42462794b6e2197f1feca5c1162a1e05d6335f5e2ff2e130976dae69da83ce', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:13:26', '2009-09-06 04:13:26', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:13:27', NULL, NULL, NULL, '2009-09-06 04:13:27', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:13:27', "created_at" = '2009-09-06 04:13:26', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:13:27', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:13:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:13:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:13:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:13:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:13:27) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:13:27) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:13:27', '2009-09-06 04:13:27', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:13:27', '2009-09-06 04:13:27', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:13:27', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:13:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 176ms (View: 168, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:15:37', 0, '2009-09-06 04:15:37', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (68.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:15:37', 1000, '2009-09-06 04:15:37', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:15:37', 30000, '2009-09-06 04:15:37', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2cad54b4c10f2d4e259f81f6c4f80c3ff8ebeed8260e554e1ff9eab0f41bdc2dbb65368e31abf226fd455757c74e1556fff55eee45906e0d34c569030024055b') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:15:38', 'b68bbe799cedf196a474522289717013e2915764117917399a62efe849887aa170192f8801f3cda2227d6556b111c7f4d66bd3d2f4acbddecb3ad5a528bbec2c', '2009-09-06 04:15:38', 'subscriber', '3AP8u9LYoE5Ounoiz6ZG', '2cad54b4c10f2d4e259f81f6c4f80c3ff8ebeed8260e554e1ff9eab0f41bdc2dbb65368e31abf226fd455757c74e1556fff55eee45906e0d34c569030024055b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:15:38', '2009-09-06 04:15:38', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:15:38', NULL, NULL, NULL, '2009-09-06 04:15:38', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:15:38', "created_at" = '2009-09-06 04:15:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:15:38', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:15:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 73) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:15:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:15:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:15:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:15:38) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 24ms (View: 17, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:15:38) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:15:38', '2009-09-06 04:15:38', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:15:38', '2009-09-06 04:15:38', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:15:38', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:15:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 112ms (View: 106, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:22:55', 0, '2009-09-06 04:22:55', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:22:55', 1000, '2009-09-06 04:22:55', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:22:55', 30000, '2009-09-06 04:22:55', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd9f38c7efac9a9ef8f08c52e10d9ce4c20c90a9bdbe39421b17b76d6e71aef654cdc2bad8ffe839bf6f42c8b6b0b16660ee71dc44d3c486efd5eb10fd84e0f7e') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:22:56', '53dc7a7bba9d82e8960ac0e506563eaefab56bc7d8cfa17532dcb22a0d0ee8d25af5d8ad10eea16eac69435e9a5e18618b647bdbeeb5da7cfccb1e2b8781edcd', '2009-09-06 04:22:56', 'subscriber', '54QCx9xpOB5lGbVH3xTk', 'd9f38c7efac9a9ef8f08c52e10d9ce4c20c90a9bdbe39421b17b76d6e71aef654cdc2bad8ffe839bf6f42c8b6b0b16660ee71dc44d3c486efd5eb10fd84e0f7e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:22:56', '2009-09-06 04:22:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:22:56', NULL, NULL, NULL, '2009-09-06 04:22:56', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:22:56', "created_at" = '2009-09-06 04:22:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 16ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:22:56) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:22:56) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:22:56', '2009-09-06 04:22:56', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:22:56', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 24ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 107, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (15.6ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8cbbfd7693e13a3b03a25997256c1cfb2edcf22d9126608068baa1600cf7bd1f25e32b458ef8b873462ca51365a049112df1b92399f83f07d2a0445667f9ffb5') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (35.2ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:22:56', '6a8b3b7a0921a75dea891f39ab51aa03943b96b2cade9aeb4ebdebbb1bcf63dde70a8df8bfa62548abb1a93dbacd874ecc8ec24ba45ffdf3c2593c1793bc94e4', '2009-09-06 04:22:56', 'subscriber', 'nBy5FatlqIvvFW9Mw8vB', '8cbbfd7693e13a3b03a25997256c1cfb2edcf22d9126608068baa1600cf7bd1f25e32b458ef8b873462ca51365a049112df1b92399f83f07d2a0445667f9ffb5', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:22:56', '2009-09-06 04:22:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.8ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:22:56', NULL, NULL, NULL, '2009-09-06 04:22:56', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:22:56', "created_at" = '2009-09-06 04:22:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (9.8ms)
Completed in 14ms (View: 14, DB: 55) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:22:56) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:22:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:22:57) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:22:57) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:22:57) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 14852ms (View: 7, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a60de65101f2b02674dfd17813db3d2f2551d391db4668d54938346a578a3d31c722b9031cb7586fa3d0155d5e3236143e0671160d23f9f5876d73c5aa46d9a3') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:23:12', '2db57ab8b10123e87f5fd7f571f2183969e78717f02e9c4a1988381729850f9633d522d52ddcddbb6468ba460689ec683f7463fe1538610d455b10ef9e4f71d2', '2009-09-06 04:23:12', 'subscriber', 'SukmcuI7PSG9foFVyvN5', 'a60de65101f2b02674dfd17813db3d2f2551d391db4668d54938346a578a3d31c722b9031cb7586fa3d0155d5e3236143e0671160d23f9f5876d73c5aa46d9a3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:23:12', '2009-09-06 04:23:12', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:23:12', NULL, NULL, NULL, '2009-09-06 04:23:12', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:23:12', "created_at" = '2009-09-06 04:23:12', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:23:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:23:12) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 244ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:23:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:23:12) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:23:12) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:23:12) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:23:12', '2009-09-06 04:23:12', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 5191ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9930fd7ee1a8782bc457f762955d6140967f52b7bed096fca4ade6ce8f7bc25a5a396b89a1b2f6df8729fa32f0df4e3e295a96354a54c65359d3b678467ea623') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.9ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:23:17', 'bb13cd10ab683d287cd9f319a34279921b6ca9a3f87b7b96e5b4d3f4499e3f290f144ab5af45a2ae12ca23dc4ec5727ad29e955b4433463cd7d233eb8c116857', '2009-09-06 04:23:17', 'subscriber', 'wnbOzPHop0VjWRlNUyBX', '9930fd7ee1a8782bc457f762955d6140967f52b7bed096fca4ade6ce8f7bc25a5a396b89a1b2f6df8729fa32f0df4e3e295a96354a54c65359d3b678467ea623', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:23:17', '2009-09-06 04:23:17', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:23:18', NULL, NULL, NULL, '2009-09-06 04:23:18', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:23:18', "created_at" = '2009-09-06 04:23:17', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:23:18', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:23:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 11, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:23:18) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:23:18', '2009-09-06 04:23:18', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:23:18', '2009-09-06 04:23:18', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:23:18', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 42ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.6ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (1.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f9badd364e53bfc0dfeb47be879dd15cce04e842a8699a1b5090c77ed579f3de11098841f17e716321fece19fb837230a9a6eefb3d20a19588df9d2d16a1d148') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:23:18', '626fd1f6e19a640a57277dd29638fa1660cb207a131b2b498ae540975dc8daf8016dc673080cfe0039ae635faedfd92516c74cf16fa338fb567ec0629241969c', '2009-09-06 04:23:18', 'subscriber', '0sP3bjvHdelyFucz9Df1', 'f9badd364e53bfc0dfeb47be879dd15cce04e842a8699a1b5090c77ed579f3de11098841f17e716321fece19fb837230a9a6eefb3d20a19588df9d2d16a1d148', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:23:18', '2009-09-06 04:23:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:23:18', NULL, NULL, NULL, '2009-09-06 04:23:18', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:23:18', "created_at" = '2009-09-06 04:23:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:23:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 7, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:23:18) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 24ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:23:19) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:23:19', '2009-09-06 04:23:19', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:23:19', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 17ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:23:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (101.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:38:52', 0, '2009-09-06 04:38:52', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:38:52', 1000, '2009-09-06 04:38:52', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:38:53', 30000, '2009-09-06 04:38:53', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '87f610f5026e0f7958a721bcc9f88198590637ebc7d23eebf5639f85260a9a1b55144a417694ed2e41b01454a6ba12feb4fa33636359ef54345e6cc09c1f4b36') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:38:53', 'eac8fa1a70875c87a4cc15da7d8ef6c5574ebda7224d67fbb43a57b6597880ec43035f3be493fb61d6fa9a6d773732d5a49ab71aa4a05b9cdca37ff7b59a8e9c', '2009-09-06 04:38:53', 'subscriber', 'exv7fZRuC79sZfMX8Fvr', '87f610f5026e0f7958a721bcc9f88198590637ebc7d23eebf5639f85260a9a1b55144a417694ed2e41b01454a6ba12feb4fa33636359ef54345e6cc09c1f4b36', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:38:53', '2009-09-06 04:38:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:38:53', NULL, NULL, NULL, '2009-09-06 04:38:53', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:38:53', "created_at" = '2009-09-06 04:38:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:38:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 41ms (View: 27, DB: 105) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:38:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:38:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 33ms (View: 24, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:38:53) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 31ms (View: 24, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:38:53) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:38:53', '2009-09-06 04:38:53', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:38:53', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 33ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 157ms (View: 151, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8cd2062e6d9a3e88f8bc4f43ae972fe63738665348547d555622741e89b79c9a8fea032a52f0d0d1898e3e19e0db602072e05b76a63cca87d65632325dc64eb3') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:38:54', '6b7c62e4ba5774a1ed517d222413763d45a079bc4f39def5c6d8c15f39111dc48fbb2cd84fb1a12610f6fa98012b9b4ed1a0c592873ef9d5978d7c76249b4b6b', '2009-09-06 04:38:54', 'subscriber', 'rFv9VqdZ6zEynlaWPSD9', '8cd2062e6d9a3e88f8bc4f43ae972fe63738665348547d555622741e89b79c9a8fea032a52f0d0d1898e3e19e0db602072e05b76a63cca87d65632325dc64eb3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (10.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:38:54', '2009-09-06 04:38:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:38:54', NULL, NULL, NULL, '2009-09-06 04:38:54', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:38:54', "created_at" = '2009-09-06 04:38:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:38:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 20ms (View: 20, DB: 15) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:38:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:38:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 10ms (View: 9, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:38:54) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (1.9ms)
Completed in 29ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:38:55) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 27ms (View: 7, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (34.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '969b720957b61f40fcf33777b74284d1ba245b09299859a30e695ce86fa2fd059cde319a4e5c6f2030ce88ed1d0a4ca06bfaf27efc53157bc7f4cc3efd986780') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:38:55', '0544f44f19c385d360801586a21bad721589a93fbee6c69727c623c5a537fba58b2808c2c3a0f1d631e0491bd676851b5ce2defb1a8178073ac532481c64bc94', '2009-09-06 04:38:55', 'subscriber', 'ozHN1OuquCODOoIEncKS', '969b720957b61f40fcf33777b74284d1ba245b09299859a30e695ce86fa2fd059cde319a4e5c6f2030ce88ed1d0a4ca06bfaf27efc53157bc7f4cc3efd986780', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:38:55', '2009-09-06 04:38:55', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:38:55', NULL, NULL, NULL, '2009-09-06 04:38:55', 1, NULL, NULL, 'none')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:38:55', "created_at" = '2009-09-06 04:38:55', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:38:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (11.4ms)
Completed in 81ms (View: 81, DB: 39) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:38:55) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:38:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:38:55) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 31ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:38:55) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:38:55', '2009-09-06 04:38:55', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 33ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c2330f5e7dea5ed16f9151a63b2ca7baed228a6c1db74109658ba4cba1b778f349160d72518c836a1f238dbd8873f926e24e71f51952945627ed8f513995cc25') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:38:56', '2d3a78b6f1d22c9284e2af5492ca8d32e792812f25c2b66fbc4826df4c52ed27f63e65d4498236341a0253fbb202865124fafacab0cd2b855d34128171bad65b', '2009-09-06 04:38:56', 'subscriber', 'jnd1fc5cfH2CHnN_vM0c', 'c2330f5e7dea5ed16f9151a63b2ca7baed228a6c1db74109658ba4cba1b778f349160d72518c836a1f238dbd8873f926e24e71f51952945627ed8f513995cc25', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:38:56', '2009-09-06 04:38:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:38:56', NULL, NULL, NULL, '2009-09-06 04:38:56', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:38:56', "created_at" = '2009-09-06 04:38:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:38:56', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:38:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:38:56) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:38:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:38:56) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (11.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 32ms (View: 13, DB: 13) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:38:56) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:38:56', '2009-09-06 04:38:56', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:38:56', '2009-09-06 04:38:56', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:38:56', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 33ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.6ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (14.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (1.7ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'efe36d814aa457f63f33e2a92ed2c70f950a952ab314e1fbf6148299037d1d8dceafccdfbb13799cea0d1eb54b45af6c44a3c2cbc426b1bfc146852d6d1bc70a') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:38:57', '84ddb6a36ba2daba7fe58e7d7a35d901e979d1f13903bf2605cdff45bf2db71c78083adbdabc1b11a95dcd5626ebf8b73dde7f028136a9b2b09d8be61fa38098', '2009-09-06 04:38:57', 'subscriber', '7a25ANwDQzXHQn6lOWjC', 'efe36d814aa457f63f33e2a92ed2c70f950a952ab314e1fbf6148299037d1d8dceafccdfbb13799cea0d1eb54b45af6c44a3c2cbc426b1bfc146852d6d1bc70a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:38:57', '2009-09-06 04:38:57', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:38:57', NULL, NULL, NULL, '2009-09-06 04:38:57', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:38:57', "created_at" = '2009-09-06 04:38:57', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:38:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 7ms (View: 7, DB: 20) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:38:57) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 22ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:38:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:57) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:38:57) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 23ms (View: 15, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:38:57) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:38:57', '2009-09-06 04:38:57', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:38:57', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 17ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:38:57) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:42:48', 0, '2009-09-06 04:42:48', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (47.3ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:42:48', 1000, '2009-09-06 04:42:48', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:42:48', 30000, '2009-09-06 04:42:48', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5155692160f50fa54434a4639f4cfdc7af92db4dcbf9b5e773adecee42b9de4378859ac3ef2c0e135469a836edefbcfa9b8696b3dc0930eb2193cd3a33df74a9') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:42:48', 'a0231d7d1db4a3e6f2506d57162873ae5d1efe7b4d7e3f414865e46e67f505f92fa318da773b50d1fc948f68f87dd994b7b06920af4862c34603a5f6b3270c8b', '2009-09-06 04:42:48', 'subscriber', 'O4pdCU8nj8DBme0X_VTg', '5155692160f50fa54434a4639f4cfdc7af92db4dcbf9b5e773adecee42b9de4378859ac3ef2c0e135469a836edefbcfa9b8696b3dc0930eb2193cd3a33df74a9', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:42:48', '2009-09-06 04:42:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:42:48', NULL, NULL, NULL, '2009-09-06 04:42:48', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:42:48', "created_at" = '2009-09-06 04:42:48', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:42:48', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:42:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 51) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:42:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:42:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:42:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 24ms (View: 14, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:42:49) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:42:49) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:42:49', '2009-09-06 04:42:49', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:42:49', '2009-09-06 04:42:49', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:42:49', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:42:49) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 111ms (View: 105, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:44:28', 0, '2009-09-06 04:44:28', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (69.4ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:44:28', 1000, '2009-09-06 04:44:28', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:44:28', 30000, '2009-09-06 04:44:28', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e96b0216d0e624275bdec89bbc382412481cfe7c4be7ee5c006a678ce5342d14d58f4df77b3cbb5d1546fe41b9fc6e9119549157e60768820563f885be19c654') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:44:28', '3fbc0c9fcb1be7e5dff0d3f2ceb497857d556efe6ceef63515015ead82d848ad4223083b1a1685c8d6751445fc0ac210ffc4a90fa704e81201019e2e1525acd9', '2009-09-06 04:44:28', 'subscriber', 'jeZW3lf__J5sdyqJIFDH', 'e96b0216d0e624275bdec89bbc382412481cfe7c4be7ee5c006a678ce5342d14d58f4df77b3cbb5d1546fe41b9fc6e9119549157e60768820563f885be19c654', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:44:28', '2009-09-06 04:44:28', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:44:28', NULL, NULL, NULL, '2009-09-06 04:44:28', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:44:28', "created_at" = '2009-09-06 04:44:28', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:44:28', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:44:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 74) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:44:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:44:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:44:28) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 5245ms (View: 5236, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:44:33) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:44:34) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:44:34', '2009-09-06 04:44:34', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:44:34', '2009-09-06 04:44:34', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:44:34', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:44:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.6ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 1001ms (View: 994, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:44:43', 0, '2009-09-06 04:44:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:44:43', 1000, '2009-09-06 04:44:43', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:44:43', 30000, '2009-09-06 04:44:43', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '08edd2f85f09be053d80743a6b878e0b63f572e12ca616402acbe9f67811c9d97e6aca3aaa8faa629d2ff528c6848132f8ce6652a778789fff5e049adcb3826c') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:44:44', '8cb9796b8e844705c2f6251d4e1f48e5c26352904374b67cfb6600798bb8a7fe4160ca213105d70876fc1ef29a44f28b1097a07940dae332c421ef44f294595e', '2009-09-06 04:44:44', 'subscriber', 'Lvu7BDioIyAyUohHa0aT', '08edd2f85f09be053d80743a6b878e0b63f572e12ca616402acbe9f67811c9d97e6aca3aaa8faa629d2ff528c6848132f8ce6652a778789fff5e049adcb3826c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:44:44', '2009-09-06 04:44:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:44:44', NULL, NULL, NULL, '2009-09-06 04:44:44', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:44:44', "created_at" = '2009-09-06 04:44:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:44:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:44:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:44:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 10ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:44:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:44:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 10324ms (View: 10314, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:44:54) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:44:54) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:44:54', '2009-09-06 04:44:54', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:44:54', '2009-09-06 04:44:54', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:44:54', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:44:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC, created_at DESC LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.6ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC[0m
  [4;36;1mSubscriptionTransaction Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at ASC, created_at DESC[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY created_at DESC[0m
  [4;36;1mSubscriptionTransaction Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC, created_at DESC[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 626737ms (View: 626727, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionProfile Load (0.7ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:55:30', 0, '2009-09-06 04:55:30', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:55:30', 1000, '2009-09-06 04:55:30', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:55:30', 30000, '2009-09-06 04:55:30', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5eb1c4094a7a8e7ea85e70cd4bcb65bdfa7c38a301b7d9ffe517fb363defc521a483665404db2b0bea43071aff05e8161570d2fb18fef05c04b79e3382f63b4d') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:55:30', '2a9773474b4f995471b5520fcede3117952fd02a5e7c1eb3a7374335cb309e64c947ee57f14f2f1102ab71a62d1af58029a15fc9b5ee2de3f62b3dd536da1cc4', '2009-09-06 04:55:30', 'subscriber', 'Im4Xd4eThgWBvbVkcRrI', '5eb1c4094a7a8e7ea85e70cd4bcb65bdfa7c38a301b7d9ffe517fb363defc521a483665404db2b0bea43071aff05e8161570d2fb18fef05c04b79e3382f63b4d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:55:30', '2009-09-06 04:55:30', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:55:30', NULL, NULL, NULL, '2009-09-06 04:55:30', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:55:30', "created_at" = '2009-09-06 04:55:30', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:55:30', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:55:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:55:30) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:55:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:55:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-06 00:55:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 04:56:27', 0, '2009-09-06 04:56:27', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (61.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 04:56:27', 1000, '2009-09-06 04:56:27', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 04:56:27', 30000, '2009-09-06 04:56:27', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a144055565d27e8667d0e812a2eba7393d287f2669de17882d3e18307b00d5a5627394ba2ad22b0b726fcaf530d36e14eef6c5399b780db8cc27b221a6aeda44') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 04:56:27', '6094425a0d1f345cc2186cd87fe25dc1651c66cc76ca6435ece69f1fbc2f4e75471ae67faaaf34db4580907ba0581272a41c57e77c25856f4145136ca8020d76', '2009-09-06 04:56:27', 'subscriber', 'U77tW5qIbB1OeHm_ZO6R', 'a144055565d27e8667d0e812a2eba7393d287f2669de17882d3e18307b00d5a5627394ba2ad22b0b726fcaf530d36e14eef6c5399b780db8cc27b221a6aeda44', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 04:56:27', '2009-09-06 04:56:27', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 04:56:27', NULL, NULL, NULL, '2009-09-06 04:56:27', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 04:56:27', "created_at" = '2009-09-06 04:56:27', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:56:27', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 00:56:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 66) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 00:56:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 00:56:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:56:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 00:56:27) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 00:56:27) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 04:56:27', '2009-09-06 04:56:27', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 04:56:27', '2009-09-06 04:56:27', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 04:56:27', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 00:56:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 139ms (View: 132, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 05:23:45', 0, '2009-09-06 05:23:45', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 05:23:45', 1000, '2009-09-06 05:23:45', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 05:23:45', 30000, '2009-09-06 05:23:45', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2e71f27a29b95bd64898f3740e0327c3815177e3bfdc05449c9933270288a8c68cf6d2ecba4ff707a912ed7c2da901f4c14e5078e7bd2fd8cdbab613662733b1') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 05:23:45', '32fc7f910ef5038fb93c17e7331280a472f6e9a3b79175d37a15c945ea54cafb549bc09327e3312b85762ac6cadd5c993896d73fae5574e8885862e6846a8d4a', '2009-09-06 05:23:45', 'subscriber', 'du7Cn4Hgw1azToKQEU4M', '2e71f27a29b95bd64898f3740e0327c3815177e3bfdc05449c9933270288a8c68cf6d2ecba4ff707a912ed7c2da901f4c14e5078e7bd2fd8cdbab613662733b1', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 05:23:45', '2009-09-06 05:23:45', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 05:23:45', NULL, NULL, NULL, '2009-09-06 05:23:45', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 05:23:45', "created_at" = '2009-09-06 05:23:45', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 01:23:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 01:23:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 01:23:46) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 05:23:46', '2009-09-06 05:23:46', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 05:23:46', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 29ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 136ms (View: 129, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 01:23:46) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 05:23:46', '2009-09-06 05:23:46', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 05:23:46', '2009-09-06 05:23:46', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 05:23:46', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
ERROR: compiling _run_erb_app47views47subscriptions47history46html46erb RAISED compile error
/Users/jonathan/rails/saasapp/app/views/subscriptions/history.html.erb:3: syntax error, unexpected '(', expecting kEND
;  @transactions(:order => 'created_at DESC').e...
                 ^
/Users/jonathan/rails/saasapp/app/views/subscriptions/history.html.erb:3: syntax error, unexpected ')', expecting kEND
...s(:order => 'created_at DESC').each do |tx| ; @output_buffer...
                              ^
Function body:           def _run_erb_app47views47subscriptions47history46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>Transaction History</h1>\n<ul>\n\t"

;  @transactions(:order => 'created_at DESC').each do |tx| ; @output_buffer.concat "\n\t  <li> "
; @output_buffer.concat(( tx.created_at ).to_s); @output_buffer.concat " : "; @output_buffer.concat(( tx.action.titleize ).to_s); @output_buffer.concat " "; @output_buffer.concat(( tx.amount ).to_s); @output_buffer.concat " "; @output_buffer.concat(( tx.message unless tx.success? ).to_s); @output_buffer.concat "</li>\n\t"
;  end ; @output_buffer.concat "\n</ul>\n"

; @output_buffer.concat(( link_to "Back", subscription_path(:current) ).to_s); @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /Users/jonathan/rails/saasapp/app/views/subscriptions/history.html.erb:11:in `compile!'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:61:in `compile'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/renderable.rb:28:in `render_without_template_tracking'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/test_case.rb:20:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/template.rb:194:in `render_template'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:260:in `render_without_mock_proxy'
/opt/local/lib/ruby/gems/1.8/gems/rspec-rails-1.2.7.1/lib/spec/rails/extensions/action_view/base.rb:27:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:343:in `_render_with_layout'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_view/base.rb:257:in `render_without_mock_proxy'
/opt/local/lib/ruby/gems/1.8/gems/rspec-rails-1.2.7.1/lib/spec/rails/extensions/action_view/base.rb:27:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1241:in `render_for_file'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:937:in `render_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:51:in `render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1317:in `default_render'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:1323:in `perform_action_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:617:in `call_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.2/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/flash.rb:141:in `perform_action'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `send'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:523:in `process_without_filters'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/filters.rb:606:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:391:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/base.rb:386:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/routing/route_set.rb:433:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:88:in `dispatch'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:111:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:82:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:29:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:9:in `cache'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/query_cache.rb:28:in `call'
/opt/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/params_parser.rb:15:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/rewindable_input.rb:25:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/session/cookie_store.rb:93:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/failsafe.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/dispatcher.rb:106:in `call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lint.rb:47:in `_call'
/opt/local/lib/ruby/gems/1.8/gems/rack-1.0.0/lib/rack/lint.rb:35:in `call'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:320:in `process'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:196:in `get'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:498:in `__send__'
/opt/local/lib/ruby/gems/1.8/gems/actionpack-2.3.2/lib/action_controller/integration.rb:498:in `get'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/rails.rb:68:in `send'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/rails.rb:68:in `do_request'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/rails.rb:37:in `get'
(__FORWARDABLE__):3:in `__send__'
(__FORWARDABLE__):3:in `get'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:282:in `send'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:282:in `process_request'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/session.rb:122:in `request_page'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/elements/link.rb:20:in `click'
/opt/local/lib/ruby/gems/1.8/gems/webrat-0.5.3/lib/webrat/core/scope.rb:260:in `click_link'
(__FORWARDABLE__):3:in `__send__'
(__FORWARDABLE__):3:in `click_link'
(eval):2:in `click_link'
./features/step_definitions/webrat_steps.rb:19
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:24:in `instance_exec'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:24:in `cucumber_instance_exec'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:45:in `cucumber_run_with_backtrace_filtering'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/core_ext/instance_exec.rb:12:in `cucumber_instance_exec'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/rb_support/rb_step_definition.rb:44:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/step_match.rb:16:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_invocation.rb:42:in `invoke'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_invocation.rb:29:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:76:in `visit_step'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:145:in `visit_step'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_collection.rb:15:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_collection.rb:14:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/step_collection.rb:14:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:72:in `visit_steps'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/scenario.rb:33:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/step_mother.rb:199:in `before_and_after'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/scenario.rb:32:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:42:in `visit_feature_element'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:82:in `visit_feature_element'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/feature.rb:25:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/feature.rb:24:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/feature.rb:24:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:20:in `visit_feature'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:44:in `visit_feature'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:29:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:17:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:17:in `each'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/features.rb:28:in `accept'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/ast/visitor.rb:16:in `visit_features'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/formatter/pretty.rb:28:in `visit_features'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:9:in `__send__'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:9:in `method_missing'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:8:in `map'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/broadcaster.rb:8:in `method_missing'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/cli/main.rb:66:in `execute!'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/../lib/cucumber/cli/main.rb:29:in `execute'
/opt/local/lib/ruby/gems/1.8/gems/cucumber-0.3.98/bin/cucumber:9
/opt/local/bin/cucumber:19:in `load'
/opt/local/bin/cucumber:19


Processing ApplicationController#history (for 127.0.0.1 at 2009-09-06 01:23:46) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 05:25:00', 0, '2009-09-06 05:25:00', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (47.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 05:25:00', 1000, '2009-09-06 05:25:00', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 05:25:00', 30000, '2009-09-06 05:25:00', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '42fd6b3906566265c1bc2a5679b2097fff1489e95273d8b17a4bf15083a002c4ff6ecaaf81fadf087ba8a4aea066bb2303fa872fa1f4c5b2989b91cc47576e2e') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 05:25:00', 'e9892b05fbe24089c893fe288afcc0cdc1f3f643022b40e4eb788c4c51bb3a3d3f213ca6b196c737f092fe252f9c91e518b689e113318a1a2c83d7b58a2a9b1a', '2009-09-06 05:25:00', 'subscriber', '7dgY2OeQictqfZP7CKNf', '42fd6b3906566265c1bc2a5679b2097fff1489e95273d8b17a4bf15083a002c4ff6ecaaf81fadf087ba8a4aea066bb2303fa872fa1f4c5b2989b91cc47576e2e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 05:25:00', '2009-09-06 05:25:00', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 05:25:00', NULL, NULL, NULL, '2009-09-06 05:25:00', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 05:25:00', "created_at" = '2009-09-06 05:25:00', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 01:25:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 52) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 01:25:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 108ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 01:25:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 01:25:00) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 01:25:00) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 05:25:01', '2009-09-06 05:25:01', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 05:25:01', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 35ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 01:25:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 119ms (View: 112, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 01:25:01) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 01:25:01) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-06 05:25:01', '2009-09-06 05:25:01', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 05:25:01', '2009-09-06 05:25:01', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 05:25:01', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 01:25:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-06 01:25:01) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;36;1mSubscriptionTransaction Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-06 05:38:40', 0, '2009-09-06 05:38:40', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-06 05:38:40', 1000, '2009-09-06 05:38:40', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-06 05:38:40', 30000, '2009-09-06 05:38:40', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0863d056081ff7322057a261e272277888c096cdad7174ae2aab25303f048cab5f94bd54342842f31e34a4d7d8dcd92a72f1543d6674e5e247ebb9d14a237419') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-06 05:38:41', '691d9c1be554dfe472b5363db629ff6069e2a7c0f50fb8f0dc3f206ff8964a608c73cc665a12206d4190587ed488b75eb7af387499877f8dd6b0f0f28bd28c80', '2009-09-06 05:38:41', 'subscriber', 'lwZks2hk_bmDm5oM45H2', '0863d056081ff7322057a261e272277888c096cdad7174ae2aab25303f048cab5f94bd54342842f31e34a4d7d8dcd92a72f1543d6674e5e247ebb9d14a237419', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-06 05:38:41', '2009-09-06 05:38:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-06 05:38:41', NULL, NULL, NULL, '2009-09-06 05:38:41', 1, NULL, NULL, 'none')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-06 05:38:41', "created_at" = '2009-09-06 05:38:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-06', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-06 01:38:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-06 01:38:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-06 01:38:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 01:38:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-06 01:38:41) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-06 01:38:41) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-06 05:38:41', '2009-09-06 05:38:41', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-06 05:38:41', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-06 01:38:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 112ms (View: 105, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (8.3ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 03:37:24', 0, '2009-09-07 03:37:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 03:37:24', 1000, '2009-09-07 03:37:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 03:37:24', 30000, '2009-09-07 03:37:24', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (7.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd1c9baeb06592a548f9ecdc31c388990e891ef2065aeacf9f5852880493cfc82184865873d0a9cadd55142bde0e0da676b1308117437f8f149b7f079c1579055') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 03:37:24', '4771c05b7dfadeab895db762b1d1f87b4a87cfede029994a9915867dbc4b6f3a5807765a5c2146b477685f2c960c56404482288ada6cbce6edde1140fdc4e289', '2009-09-07 03:37:24', 'subscriber', 'b2BXXVVrlb5gfdRb-6as', 'd1c9baeb06592a548f9ecdc31c388990e891ef2065aeacf9f5852880493cfc82184865873d0a9cadd55142bde0e0da676b1308117437f8f149b7f079c1579055', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 03:37:24', '2009-09-07 03:37:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 03:44:02', 0, '2009-09-07 03:44:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 03:44:02', 1000, '2009-09-07 03:44:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 03:44:02', 30000, '2009-09-07 03:44:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a1397852ca7731e05ebfdc97c3cea0f8ba95101628043570e500eaba13a1977f91d52ef5e28f4aef1836b2788da7776956514987ec0f3642bb15f19a53b55b57') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 03:44:02', '06ce23d4b0af79527bbea9f21ade187f4f24a340d84e4871613eb08e4038bcb2717b761e3b9d9c960b4b8f70f3f322248eeb0672706482f3e4213e4e5e245d0c', '2009-09-07 03:44:02', 'subscriber', 'UdlIOn3JbKQ90rxsYMz3', 'a1397852ca7731e05ebfdc97c3cea0f8ba95101628043570e500eaba13a1977f91d52ef5e28f4aef1836b2788da7776956514987ec0f3642bb15f19a53b55b57', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 03:44:02', '2009-09-07 03:44:02', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 03:54:30', 0, '2009-09-07 03:54:30', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (67.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 03:54:30', 1000, '2009-09-07 03:54:30', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 03:54:30', 30000, '2009-09-07 03:54:30', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '246e6d86f65a930c9b81f7f4a39c5b6984433c5435cae695d8b2c12626036a07a3e597bd66dfbe67a6832b97113b81aa0de57d4f336723fd74c000d7c46a5cae') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 03:54:30', '2d96ec5bb04e0700d570e9a43c63b8176514a35b6a0c36c9964b33c91c8ea2e8c49f24b5ba0d67e7e74ce4a1f9c85c7299693e199df2930001da57c12ff7f043', '2009-09-07 03:54:30', 'subscriber', 'D6tnsKI_c_RXrZAx40Oi', '246e6d86f65a930c9b81f7f4a39c5b6984433c5435cae695d8b2c12626036a07a3e597bd66dfbe67a6832b97113b81aa0de57d4f336723fd74c000d7c46a5cae', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 03:54:30', '2009-09-07 03:54:30', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 03:55:35', 0, '2009-09-07 03:55:35', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (68.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 03:55:35', 1000, '2009-09-07 03:55:35', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 03:55:35', 30000, '2009-09-07 03:55:35', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd2e9c82681185805152691cc371fd3679740b7f07c7e3d49afc787fe31399ec9eb904edf669d72a27c11368d89c87169f25c9a510d9da3bca8b266137b38afb0') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 03:57:29', 'c3d2116191a9ce9d62d911578a1e2cd6e5da8237a6782be86103e78d233fe0dd4807a90e5ff9fcc9400cc62d66d37afeb6e3202811028d0d194b9da2d9ffc009', '2009-09-07 03:57:29', 'subscriber', 'xJvafoXLMxGLN-LiAhhW', 'd2e9c82681185805152691cc371fd3679740b7f07c7e3d49afc787fe31399ec9eb904edf669d72a27c11368d89c87169f25c9a510d9da3bca8b266137b38afb0', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 03:57:29', '2009-09-07 03:57:29', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (1.2ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:00:13', 0, '2009-09-07 04:00:13', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:00:13', 1000, '2009-09-07 04:00:13', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:00:13', 30000, '2009-09-07 04:00:13', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f4b7183b779aa4eccd2993e2b47e0e3490a16823be94b4726b4725f1da169d2143777a9b3ae99af5ae2d7451b1a17eb4a851594a7e3d6774d5c76af6808f8d26') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:00:19', '92c12b0d55f906d5a6a05bd7362657225a0a60ffb7775e05477ed2427f0c99f30d628d48cbdf35b6e33cdce8f186344172375088df9fd1827536944c1fffb350', '2009-09-07 04:00:19', 'subscriber', 'V6nZ3t58nx-jGrgQEteN', 'f4b7183b779aa4eccd2993e2b47e0e3490a16823be94b4726b4725f1da169d2143777a9b3ae99af5ae2d7451b1a17eb4a851594a7e3d6774d5c76af6808f8d26', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:00:19', '2009-09-07 04:00:19', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:00:19', NULL, NULL, NULL, '2009-09-07 04:00:19', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:00:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.6ms)
Completed in 26ms (View: 21, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:00:19) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:00:19) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:00:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 34ms (View: 25, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:00:19) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:00:19) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:00:19', '2009-09-07 04:00:19', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:00:19', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:00:19) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:01:19', 0, '2009-09-07 04:01:19', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:01:19', 1000, '2009-09-07 04:01:19', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:01:19', 30000, '2009-09-07 04:01:19', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7fecdf1f76107878a6ecbee9cec5e7c3318977b13b9b355302edc787e6d7b681b639ab1c214120f9ac3daadfaa74cc60dcbcaad1eba12d16316210fc25c27186') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:01:19', '4ab362ed87c03ae6b5288c43d2278e770cf7f8bfa83d4ea191f61c05d6c5158504c5e6b1d185f623d75038f09c1a14fb280dbe3cdb2e43fe077015a105efe5ac', '2009-09-07 04:01:19', 'subscriber', 'SdcfohtkpyykuCTHIQxh', '7fecdf1f76107878a6ecbee9cec5e7c3318977b13b9b355302edc787e6d7b681b639ab1c214120f9ac3daadfaa74cc60dcbcaad1eba12d16316210fc25c27186', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:01:19', '2009-09-07 04:01:19', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:01:19', NULL, NULL, NULL, '2009-09-07 04:01:19', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:01:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:01:19) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:01:19) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:01:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:01:19) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:01:20) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:01:20', '2009-09-07 04:01:20', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:01:20', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:01:20) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:01:45', 0, '2009-09-07 04:01:45', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:01:45', 1000, '2009-09-07 04:01:45', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:01:45', 30000, '2009-09-07 04:01:45', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '717ce8edc5685d3bb2953ff58097fe59adf38a3ba210b4f263b07da46cf45da3677e209e3fc8cff95c639af1d492ab065370af649b750cf12a956b93dd2c92db') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:01:46', 'baba833da796eebac54a5c401e530fd252e6cbfc01347b0022e33b52c50090e331774452c6a54e85ee1fbc9d7966df635ca5460e033c2df8e314eeaa6a60fd45', '2009-09-07 04:01:46', 'subscriber', 'VOaCSqImVPGHcF428eGX', '717ce8edc5685d3bb2953ff58097fe59adf38a3ba210b4f263b07da46cf45da3677e209e3fc8cff95c639af1d492ab065370af649b750cf12a956b93dd2c92db', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:01:46', '2009-09-07 04:01:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:01:46', NULL, NULL, NULL, '2009-09-07 04:01:46', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:08:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 16ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:08:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:08:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:08:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:08:33) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:08:33) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:08:33', '2009-09-07 04:08:33', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:08:33', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:08:33) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:08:39', 0, '2009-09-07 04:08:39', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:08:39', 1000, '2009-09-07 04:08:39', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:08:39', 30000, '2009-09-07 04:08:39', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '74f2c36766119293df382a45596c4823068aa4dce2d0c872075e011fa3e45e0379d82c9a9028cb238ab745cd9f19670996309bdd7ae867bd3cea1bcc8f3382ad') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:08:39', '724787b6af40a7253435c4e370439f1f82e21d55a882dbadbdc999be135bbe56d15355c6adf884924a2954b29b05fff7ad5e3b0987dba301af2e6be8c6cd9a59', '2009-09-07 04:08:39', 'subscriber', 'Vsh4ZLuffF4-EYt2Z95i', '74f2c36766119293df382a45596c4823068aa4dce2d0c872075e011fa3e45e0379d82c9a9028cb238ab745cd9f19670996309bdd7ae867bd3cea1bcc8f3382ad', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:08:39', '2009-09-07 04:08:39', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:08:39', NULL, NULL, NULL, '2009-09-07 04:08:39', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:08:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:08:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:08:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:08:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:08:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:08:40) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:08:40', '2009-09-07 04:08:40', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:08:40', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:08:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 193ms (View: 186, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:10:50', 0, '2009-09-07 04:10:50', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (72.4ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:10:50', 1000, '2009-09-07 04:10:50', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:10:50', 30000, '2009-09-07 04:10:50', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7d2e75b8540b2b7566ad2ed3fc69d9a3e001bdc9029e249a8d41773cbb7154a6d0f61313e3cbc4fccab3952fdb148af3258b5afc5bb44e0617a92e9712fb845b') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:10:50', 'ead910bc6fc90e729702f4e560c57926447e2c64721ae5d7a26508a71f2b136ec60a67fffa3d5cc0a8602ca8749a78b04a8fd42188d96e27e282342a3224baf5', '2009-09-07 04:10:50', 'subscriber', '2hJBksT0hGPHjfGF1t1v', '7d2e75b8540b2b7566ad2ed3fc69d9a3e001bdc9029e249a8d41773cbb7154a6d0f61313e3cbc4fccab3952fdb148af3258b5afc5bb44e0617a92e9712fb845b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:10:50', '2009-09-07 04:10:50', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:10:50', NULL, NULL, NULL, '2009-09-07 04:10:50', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:10:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 76) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:10:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:10:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:10:50) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:10:50) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 15, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:10:50) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:10:51', '2009-09-07 04:10:51', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:10:51', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:10:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 115ms (View: 109, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:11:36', 0, '2009-09-07 04:11:36', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (74.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:11:36', 1000, '2009-09-07 04:11:36', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:11:36', 30000, '2009-09-07 04:11:36', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'cac05cf67bfbf20a35842bab4c0df766876cee47b265c3c166c473a9a90290e5cad5068d43034e5e4a4ac0dc04e5c256aa657eb1d9b1ad9543ddac1c4687050c') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:11:37', 'f7e15372cd7005bf0dd49be08cc13992d121845e10e92320c787ce6a4fae09a0914c9dc7aad92a0d8171b3cd03dc56e5a0196e0ba901f013b16b66c0b88b3fde', '2009-09-07 04:11:37', 'subscriber', 'pjzU4mOTQwd4UUoHLrAb', 'cac05cf67bfbf20a35842bab4c0df766876cee47b265c3c166c473a9a90290e5cad5068d43034e5e4a4ac0dc04e5c256aa657eb1d9b1ad9543ddac1c4687050c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:11:37', '2009-09-07 04:11:37', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:11:37', NULL, NULL, NULL, '2009-09-07 04:11:37', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:11:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 78) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:11:37) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:11:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:11:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:11:37) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:11:37) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:11:49', '2009-09-07 04:11:49', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:11:49', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 121911ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:13:39) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 105, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:13:46', 0, '2009-09-07 04:13:46', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:13:46', 1000, '2009-09-07 04:13:46', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:13:46', 30000, '2009-09-07 04:13:46', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8ad22a337a5ca9340635f0155cc391323c7d95b5e21c1c9a00b048b101c9f7e6eeb32b2f36bb5665e8049536f57b018415fa28f8c6f0ed955269cb4b28eb2593') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:13:46', 'f2c003cd990f019e447c68ff2baaa957f9556d8039a582dd82e61721475583e51a62101a549c02ee157aabe3b8c1cfb9e4e1f945a1fdcdc7070df3b40846c86c', '2009-09-07 04:13:46', 'subscriber', 'wQMul1zitWShzddrEcV1', '8ad22a337a5ca9340635f0155cc391323c7d95b5e21c1c9a00b048b101c9f7e6eeb32b2f36bb5665e8049536f57b018415fa28f8c6f0ed955269cb4b28eb2593', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:13:46', '2009-09-07 04:13:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:13:46', "state" = 'expired', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:13:46', NULL, NULL, NULL, '2009-09-07 04:13:46', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:13:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 61ms (View: 57, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:13:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:13:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:13:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:13:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:13:46) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:13:47', '2009-09-07 04:13:47', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:13:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1036ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:13:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 107, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:14:09', 0, '2009-09-07 04:14:09', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:14:09', 1000, '2009-09-07 04:14:09', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:14:09', 30000, '2009-09-07 04:14:09', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '51a2d2ef85f4f356f86e7785179dcb55a3b141860b53dfdb1f52bccfdb0ae96459615004a49ea464a155106925935238c39e845c11d50485f717a1653dc1ec24') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:14:10', '959538ab46f35fe16796666926f824ce0bf4877d839e3b0cdd6d9e70152536585afc54f8020de055a81b29a39b0e6f4853a33028a2e2b7be0a048274c20b2460', '2009-09-07 04:14:10', 'subscriber', '1IMTVhYlhtKs7VNdd9s7', '51a2d2ef85f4f356f86e7785179dcb55a3b141860b53dfdb1f52bccfdb0ae96459615004a49ea464a155106925935238c39e845c11d50485f717a1653dc1ec24', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:14:10', '2009-09-07 04:14:10', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:14:10', "state" = 'expired', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:14:10', NULL, NULL, NULL, '2009-09-07 04:14:10', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:14:10) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:14:10) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 8ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:14:10) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:14:10) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:14:10) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:14:10) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:21:00', '2009-09-07 04:21:00', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:21:00', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 410114ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:21:00) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:21:06', 0, '2009-09-07 04:21:06', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:21:06', 1000, '2009-09-07 04:21:06', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:21:06', 30000, '2009-09-07 04:21:06', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6affa128dfc077053aff771fdda20bc3f60944149f278586ba1293040c7b74b8d6a9bf097f41c13aace6b6ecd39c9698b7244cb596f7f9eb36d23151dd204d54') LIMIT 1[0m
  [4;35;1mUser Create (100.0ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:21:07', '58083b3cc574ea3b98448d624e761f0853d968a067b4ef5f94048793b2aebda7908804a155ba73044244d2ec708725c3f756ed303545f2f75d3de06a13320c34', '2009-09-07 04:21:07', 'subscriber', '8dqgJaK0Jw0kWuCK1r5I', '6affa128dfc077053aff771fdda20bc3f60944149f278586ba1293040c7b74b8d6a9bf097f41c13aace6b6ecd39c9698b7244cb596f7f9eb36d23151dd204d54', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:21:07', '2009-09-07 04:21:07', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:21:31', 0, '2009-09-07 04:21:31', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:21:31', 1000, '2009-09-07 04:21:31', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:21:31', 30000, '2009-09-07 04:21:31', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ead1fcde79fc19082e16b5f8eeeb03be44d4571724dc66019e33c257f900595cb2769cea95a1b44a0c6468b991ac1b77af70d2b2fc8350a5d0ddf378cfa76335') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:21:32', 'c883808b7194c33dc156c37c715b35b5135e10440b1dcc9f16d8a2135510579190a6dacbe4b5edb76845d60979a860976684f39188509cf1d405126a7b319eaf', '2009-09-07 04:21:32', 'subscriber', 'GPaTaGhlJwEDlMccRJob', 'ead1fcde79fc19082e16b5f8eeeb03be44d4571724dc66019e33c257f900595cb2769cea95a1b44a0c6468b991ac1b77af70d2b2fc8350a5d0ddf378cfa76335', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:21:32', '2009-09-07 04:21:32', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:21:32', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:21:32', NULL, NULL, NULL, '2009-09-07 04:21:32', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:21:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 21ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:21:32) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:21:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:21:32) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:21:32) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:21:32) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:21:34', '2009-09-07 04:21:34', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:21:34', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 2265ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:21:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 112ms (View: 106, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:22:09', 0, '2009-09-07 04:22:09', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:22:09', 1000, '2009-09-07 04:22:09', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:22:09', 30000, '2009-09-07 04:22:09', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b1e947150c1fccccf89944927a9d64a2dfb4abec3dfda8399c2212aa9a663ddc381aebb0e66ad6cc02eafd18319451bd3350192092e84d98f60137d8b12ca8b1') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:22:11', '7fe3694b0864cc2e92132815281e0c4644816f6df0bb4b673d74aa295be28444b621af693d99b9261deaf31400e86ac570d8aaf4c13adbad9a39498453319865', '2009-09-07 04:22:11', 'subscriber', 'fGvszZKE-9p2V15wbqGA', 'b1e947150c1fccccf89944927a9d64a2dfb4abec3dfda8399c2212aa9a663ddc381aebb0e66ad6cc02eafd18319451bd3350192092e84d98f60137d8b12ca8b1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:22:11', '2009-09-07 04:22:11', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:22:31', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:22:31', NULL, NULL, NULL, '2009-09-07 04:22:31', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:22:31) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 16ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:22:31) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:22:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:22:31) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:22:31) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:22:31) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:22:33', '2009-09-07 04:22:33', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:22:33', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1395ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:22:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 107, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:22:38', 0, '2009-09-07 04:22:38', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:22:38', 1000, '2009-09-07 04:22:38', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:22:38', 30000, '2009-09-07 04:22:38', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4df1b0243cac6def4c83ae0a74224f4bb243588c7c0f0a13fa9fd1833378c23f91cfccc4286cab687de6de31134822d9eefa80dbe787c2c295896a6fe935d9ca') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:22:42', 'dd8c309d0273b3e1a95fb1e92af162149e98f037ea1f79c89153dab0586b010d326770513f87a17445684a2474874e1f201305d533ad0755354d88b8faf14137', '2009-09-07 04:22:42', 'subscriber', 'S0Z-Cjz-if1ZzHwF0OmA', '4df1b0243cac6def4c83ae0a74224f4bb243588c7c0f0a13fa9fd1833378c23f91cfccc4286cab687de6de31134822d9eefa80dbe787c2c295896a6fe935d9ca', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:22:42', '2009-09-07 04:22:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:22:50', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:22:50', NULL, NULL, NULL, '2009-09-07 04:22:50', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:22:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.2ms)
Completed in 16ms (View: 12, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:22:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:22:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:22:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:22:51) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:22:51) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:23:01', '2009-09-07 04:23:01', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:23:01', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 10121ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:23:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 107, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:29:24', 0, '2009-09-07 04:29:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (64.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:29:24', 1000, '2009-09-07 04:29:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:29:24', 30000, '2009-09-07 04:29:24', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ae5991d9cd255eca57143e8c2b0bca7bb93a4176a78f94bcf59809346ed023a66104da1ac9b327b862bd45994dea15eb398b27595307c6df39ef9a28d29115c5') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:29:27', '18a22194c593680dd02ebbfcedcb5d16a615772b5e896a3ca00bdc4e971e13ae21dff07b4c0a5f892d9811a3873b9e880c1c6019452cd14b7a1e76cc5b17b05f', '2009-09-07 04:29:27', 'subscriber', 'pdwFMxAggMs0OBbj683m', 'ae5991d9cd255eca57143e8c2b0bca7bb93a4176a78f94bcf59809346ed023a66104da1ac9b327b862bd45994dea15eb398b27595307c6df39ef9a28d29115c5', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:29:27', '2009-09-07 04:29:27', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:29:27', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:29:27', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:29:27', NULL, NULL, NULL, '2009-09-07 04:29:27', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:29:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 68) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:29:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:29:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:29:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:29:27) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:29:27) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:29:28', '2009-09-07 04:29:28', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:29:28', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:29:28) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:35:02', 0, '2009-09-07 04:35:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (60.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:35:02', 1000, '2009-09-07 04:35:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:35:02', 30000, '2009-09-07 04:35:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c79afa719b0b5736b9be3504b3d331cb434fc9137ba336f69dced3a36edc1ac8bc567d7f3826352458645f799045fa74d2d3b9dccfeddf886fa18aa6824dc29e') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:35:05', '8c86331585336a46a52d68b985d46c7a9b4b24f372f294a962fa1dbf3d47cdb816b405574a252be44b33861259a4e4a1de084f78ba81132d7553493480998dda', '2009-09-07 04:35:05', 'subscriber', 'WuW4i-TBQ1huGWnAGMBz', 'c79afa719b0b5736b9be3504b3d331cb434fc9137ba336f69dced3a36edc1ac8bc567d7f3826352458645f799045fa74d2d3b9dccfeddf886fa18aa6824dc29e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:35:05', '2009-09-07 04:35:05', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:35:05', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:35:05', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:35:05', NULL, NULL, NULL, '2009-09-07 04:35:05', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:35:05) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 64) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:35:05) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:35:05) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:35:05) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:35:05) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:35:06) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:35:09', '2009-09-07 04:35:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:35:09', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:36:06) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:36:46', 0, '2009-09-07 04:36:46', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (62.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:36:46', 1000, '2009-09-07 04:36:46', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:36:46', 30000, '2009-09-07 04:36:46', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5786f03545f5eb15073324033529056abb4c5d3059cb476f1bf1c604f20cf9512a3e6fedf11c07b6f6aae17f562d6aa5213e08fc27f5547db75b752e23f0970e') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:36:49', '288bba2ccddb402d282fcc2b5015f657ff08ae28cb15f6ccbcc6c67ee30a40c000ff534163ecd619e812ee7964751465bcc9c73c4c25e0f02622f589fd9bd251', '2009-09-07 04:36:49', 'subscriber', 'wbdUA7uGf3Q7P7L08-sA', '5786f03545f5eb15073324033529056abb4c5d3059cb476f1bf1c604f20cf9512a3e6fedf11c07b6f6aae17f562d6aa5213e08fc27f5547db75b752e23f0970e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:36:49', '2009-09-07 04:36:49', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:36:49', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:36:49', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:36:49', NULL, NULL, NULL, '2009-09-07 04:36:49', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:36:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 66) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:36:49) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:36:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:36:49) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:36:49) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:36:49) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:36:55', '2009-09-07 04:36:55', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:36:56', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:39:27) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:39:33', 0, '2009-09-07 04:39:33', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:39:33', 1000, '2009-09-07 04:39:33', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:39:33', 30000, '2009-09-07 04:39:33', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '712d3ba573526eb318db26d1a0b65df0fe33a9d82d44b95bfbb4333c69d65d0a3f2dd7ebedeaa8e382b6c9ec15337d6957d8c00c138a9542f8b1b2747206b587') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:39:35', '8b9cf6cccc5d206364e328895615ddbe03551603337f731f2a45b5fd934a2b75c8cac5cd40e65cff9299464df221bb01fab6a5528e113c69d1410bc26706ec1f', '2009-09-07 04:39:35', 'subscriber', '1Q960kBeImky28gdTPBG', '712d3ba573526eb318db26d1a0b65df0fe33a9d82d44b95bfbb4333c69d65d0a3f2dd7ebedeaa8e382b6c9ec15337d6957d8c00c138a9542f8b1b2747206b587', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:39:35', '2009-09-07 04:39:35', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:39:35', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:39:35', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:39:35', NULL, NULL, NULL, '2009-09-07 04:39:35', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:39:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:39:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:39:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:39:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:39:36) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:39:36) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:39:37', '2009-09-07 04:39:37', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:39:37', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:39:38) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:48:39', 0, '2009-09-07 04:48:39', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:48:39', 1000, '2009-09-07 04:48:39', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:48:39', 30000, '2009-09-07 04:48:39', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '908fad51d56a0323b6fdcf902f36f9080e2ea6e07453365961cb0004239fda5ff4d8742cf081c42f6cf9d8e05166732cd6d42a6d1f52c34cb373b08b8f68deca') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:48:41', 'b42f58caa7ceaff1923588681484edac6c4c396bd98b1b5e41bff190561abf402e58b663d4d4a965b348128b1127a380c24df22f27675118d4d42014ef9177df', '2009-09-07 04:48:41', 'subscriber', 'iZaJhlPLW4IFLAXtfDD7', '908fad51d56a0323b6fdcf902f36f9080e2ea6e07453365961cb0004239fda5ff4d8742cf081c42f6cf9d8e05166732cd6d42a6d1f52c34cb373b08b8f68deca', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:48:41', '2009-09-07 04:48:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:48:41', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:48:41', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:48:41', NULL, NULL, NULL, '2009-09-07 04:48:41', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:48:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:48:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:48:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:48:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:48:41) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:48:41) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:48:42', '2009-09-07 04:48:42', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:48:42', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:48:42) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 04:48:59', 0, '2009-09-07 04:48:59', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 04:48:59', 1000, '2009-09-07 04:48:59', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 04:48:59', 30000, '2009-09-07 04:48:59', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'aa565b80e97f71bb95cdd976fb4e24591fc79aea09c7443806ec8aeea62bf7d768220b7de24e6d2136e19ffb023609c76391dd59daccf44d0077bd658bddb573') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 04:49:02', '7ae29622a2c3c90eaea0bff3c018e82bffea7a45943099e578268c0322a3598bad4882261959ed00236df72e20124a56569a6fef5d90dd5d2a6f4a891dd2aeaf', '2009-09-07 04:49:02', 'subscriber', '8M1nMNjrHlYci8GJWPCx', 'aa565b80e97f71bb95cdd976fb4e24591fc79aea09c7443806ec8aeea62bf7d768220b7de24e6d2136e19ffb023609c76391dd59daccf44d0077bd658bddb573', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 04:49:02', '2009-09-07 04:49:02', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:49:02', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 04:49:02', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 04:49:02', NULL, NULL, NULL, '2009-09-07 04:49:02', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 00:49:02) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 00:49:02) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 00:49:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 00:49:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 00:49:02) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:49:02) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 04:49:02', '2009-09-07 04:49:02', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 04:49:02', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 00:49:03) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (1.1ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:03:44', 0, '2009-09-07 05:03:44', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (52.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:03:44', 1000, '2009-09-07 05:03:44', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:03:44', 30000, '2009-09-07 05:03:44', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bfb4eac75c4e21b5161a16cb3103fd45f48ebf22bade8c5ca138e05c7c5d0c65bc6349e262da447a1c5a4e4aa1e4ee235a1c79ad5e9272955b3e2fb525a338af') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:03:47', 'efb1ab78c50ea0c38fb984b2d23c61a50226139cc9c6cefd4bfacb3194bc1bd0cf67e96db978cd988d864c435ff6f041bea844b6d14725e60ae2181f779b0aff', '2009-09-07 05:03:47', 'subscriber', 'e8_0gvh2qkg_X362SPM8', 'bfb4eac75c4e21b5161a16cb3103fd45f48ebf22bade8c5ca138e05c7c5d0c65bc6349e262da447a1c5a4e4aa1e4ee235a1c79ad5e9272955b3e2fb525a338af', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:03:47', '2009-09-07 05:03:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:03:47', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:03:47', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:03:47', NULL, NULL, NULL, '2009-09-07 05:03:47', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:03:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 57) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:03:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:03:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:03:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 24ms (View: 15, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:03:47) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:03:47) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:03:48', '2009-09-07 05:03:48', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:03:48', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:03:48) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:04:22', 0, '2009-09-07 05:04:22', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (86.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:04:22', 1000, '2009-09-07 05:04:22', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:04:22', 30000, '2009-09-07 05:04:22', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9a22c03be7e4c2903f92d957c5edadb3e77efaeda2c1f67989557d7e1cd9d5f1bf2fecbb2ad5d871022423d0ee43058f1be110917a3d2c0c53ee030db59bfb87') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:04:24', '242235ce0da37b583649eed20832d17ac27f1e9f6176174f6909c5f8c0e5e55952ed12a9a39a6753a4c2ca8f9cd58223397f66ecc15de48e1a769a18f46ebb84', '2009-09-07 05:04:24', 'subscriber', 'h4sBvPQaQbsIjGnfXoir', '9a22c03be7e4c2903f92d957c5edadb3e77efaeda2c1f67989557d7e1cd9d5f1bf2fecbb2ad5d871022423d0ee43058f1be110917a3d2c0c53ee030db59bfb87', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:04:24', '2009-09-07 05:04:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:04:24', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:04:24', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:04:24', NULL, NULL, NULL, '2009-09-07 05:04:24', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:04:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 90) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:04:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:04:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:04:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:04:24) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:04:25) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:04:26', '2009-09-07 05:04:26', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:04:26', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:04:30) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:04:36', 0, '2009-09-07 05:04:36', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:04:36', 1000, '2009-09-07 05:04:36', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:04:36', 30000, '2009-09-07 05:04:36', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '50f377ea94ef5f34242c61a25042f995e0aca78776a1eddf958e2bf7a5a3dded9c899766645a63c0f6c84065ea295c706cdb365a8eeedef9983fc15315e43b88') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:04:37', '53f291fa1043640abd37af7de51054c908c8e118ea45ad63d4182b44fb1e2f3279ba732d52ac85a80ef1c2b73bb831492d513aff0861b58fa77e65868bd96da4', '2009-09-07 05:04:37', 'subscriber', 'pt-qoq4suJsc03R5WgM5', '50f377ea94ef5f34242c61a25042f995e0aca78776a1eddf958e2bf7a5a3dded9c899766645a63c0f6c84065ea295c706cdb365a8eeedef9983fc15315e43b88', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:04:37', '2009-09-07 05:04:37', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:04:37', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:04:37', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:04:37', NULL, NULL, NULL, '2009-09-07 05:04:37', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:04:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:04:37) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:04:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:04:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:04:37) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:04:38) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:04:38', '2009-09-07 05:04:38', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:04:38', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:05:57) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (43.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:06:13', 0, '2009-09-07 05:06:13', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:06:13', 1000, '2009-09-07 05:06:13', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:06:13', 30000, '2009-09-07 05:06:13', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '682a7f49bbb9f09ca471527118ed0c151ba5dc816eb6a9a61fdca0ddcdb3ec23ffbcf706e71f2cfe82d50034a7f48156d1835c0eb10bcda80997c892b1916527') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:07:07', 'd8d41a696e5a7a0a65a3f0c84400e1d30a1f5ec6a97e1919562746b00e32177ef64a4eb78a921c8e049916850b534d5beb3b4b7bf4925f46960a7cd05e8d1c50', '2009-09-07 05:07:07', 'subscriber', '2zKrLyEoctsVJ1AN1XFS', '682a7f49bbb9f09ca471527118ed0c151ba5dc816eb6a9a61fdca0ddcdb3ec23ffbcf706e71f2cfe82d50034a7f48156d1835c0eb10bcda80997c892b1916527', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:07:07', '2009-09-07 05:07:07', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:07:07', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:07:07', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:07:07', NULL, NULL, NULL, '2009-09-07 05:07:07', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:07:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 47) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:07:07) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:07:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:07:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:07:07) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:07:07) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:07:08', '2009-09-07 05:07:08', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:07:08', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:12:56) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:13:02', 0, '2009-09-07 05:13:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:13:02', 1000, '2009-09-07 05:13:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:13:02', 30000, '2009-09-07 05:13:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c231e7be3d744e627f18f526b4f4080d35e0984d560faa73404e72ea04fe85cb59d40f5ed9cecfd53fb07bc353f6d5214838957ab5b3ea4343e78d348ebd2f58') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:13:06', '0bd15f18a6006652d09bccad1ad9643b8a2ee8db3dd25754f9af4afcb88d7e8e005ba4e0b0d1f050b16fa6c8fd718c97a2a8768b9a0e4f04e98497646cf386e7', '2009-09-07 05:13:06', 'subscriber', 'otZlso0rLLuzvXxdNBiY', 'c231e7be3d744e627f18f526b4f4080d35e0984d560faa73404e72ea04fe85cb59d40f5ed9cecfd53fb07bc353f6d5214838957ab5b3ea4343e78d348ebd2f58', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:13:06', '2009-09-07 05:13:06', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:13:06', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:13:06', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:13:06', NULL, NULL, NULL, '2009-09-07 05:13:06', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:13:06) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:13:06) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:13:06) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:13:06) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:13:06) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:13:06) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:13:07', '2009-09-07 05:13:07', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:13:07', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:13:07) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:14:23', 0, '2009-09-07 05:14:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:14:23', 1000, '2009-09-07 05:14:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:14:23', 30000, '2009-09-07 05:14:23', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '91176c0b82ade3575b4e84994b556388d6fbba8a7c0eda9dedf7c2a58a7ab86d8c87d3378c8b688c0662fb27dd4b27a1d8eff81d22f0dfe428d605b83e601e2d') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:14:25', 'db20942ec6c88a570eefd4a41a66b7f4c7c167b82a3a0f21070dc4cf6b5e23cc099ae7d0ed774becf3befc1dc07f20f1383a167009a301a51bd6f08c34c258b1', '2009-09-07 05:14:25', 'subscriber', 'q_X5rt_GWsFyONDafweV', '91176c0b82ade3575b4e84994b556388d6fbba8a7c0eda9dedf7c2a58a7ab86d8c87d3378c8b688c0662fb27dd4b27a1d8eff81d22f0dfe428d605b83e601e2d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:14:25', '2009-09-07 05:14:25', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:14:25', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:14:25', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:14:25', NULL, NULL, NULL, '2009-09-07 05:14:25', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:14:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:14:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:14:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:14:25) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:14:25) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:14:25) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:14:26', '2009-09-07 05:14:26', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:14:26', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:14:26) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:15:47', 0, '2009-09-07 05:15:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:15:47', 1000, '2009-09-07 05:15:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:15:47', 30000, '2009-09-07 05:15:47', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6c0eb8d40cb194d9e7f0dbc9e048ddfc7570f28ba2db4312659835e206791a966ed315ede4470546752a693846f73547f7d86e8c89f35dc6873dd005d88d0347') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:15:48', 'd545bc27799b90c8215c18f393ac7b6fa2f10a108ddf1bcd3ba4ae1909962af7353747352b84c8fd7d2a03242f4234cfbe11cc8afd7e8997cb5b7f4c04e0db10', '2009-09-07 05:15:48', 'subscriber', 'xtx7QvCDMXrroBt7A69V', '6c0eb8d40cb194d9e7f0dbc9e048ddfc7570f28ba2db4312659835e206791a966ed315ede4470546752a693846f73547f7d86e8c89f35dc6873dd005d88d0347', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:15:48', '2009-09-07 05:15:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:15:48', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:15:48', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:15:48', NULL, NULL, NULL, '2009-09-07 05:15:48', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:15:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:15:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:15:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:15:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:15:48) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:15:49) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:15:49', '2009-09-07 05:15:49', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:15:49', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:15:50', '2009-09-07 05:15:50', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:15:50) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:17:01', 0, '2009-09-07 05:17:01', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (64.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:17:01', 1000, '2009-09-07 05:17:01', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:17:01', 30000, '2009-09-07 05:17:01', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9be63c95fb6c30cfdba9ccb482c01902ba06d8d1c429910a9f77562c7903c157322226f6195193773604a113f311db9a63a02509aafb8a981790b0e9a1a19a52') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:17:03', '2ce46bd78661903f6ff53012b821b984a513165b8e237d4f76ad34718e5ecba28accd013347fe41071e29be28308ee746052a86675c880e59e2e079617c10944', '2009-09-07 05:17:03', 'subscriber', 'PyC6UGel-lKIpD0a9K-E', '9be63c95fb6c30cfdba9ccb482c01902ba06d8d1c429910a9f77562c7903c157322226f6195193773604a113f311db9a63a02509aafb8a981790b0e9a1a19a52', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:17:03', '2009-09-07 05:17:03', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:17:03', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:17:03', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:17:03', NULL, NULL, NULL, '2009-09-07 05:17:03', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:17:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 68) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:17:03) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:17:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:17:03) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:17:03) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:17:03) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:17:04', '2009-09-07 05:17:04', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:17:04', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:17:05', '2009-09-07 05:17:05', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m


Processing ApplicationController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:17:05) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:20:20', 0, '2009-09-07 05:20:20', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:20:20', 1000, '2009-09-07 05:20:20', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:20:20', 30000, '2009-09-07 05:20:20', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e98b79feb68e79cb18a8c36028dba62f6cc8d116abc3c8a4c3af763671f30929ffb604c4fb78aeb528f179bbf783f88b749b5e7cc85199e6811cbb3ead9e783e') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:20:22', '55212d4d3989e2ba23ffd0beccd72833646e5a1abb089ec5ed295159eafa3efb0653a95288d83991bd9faa8d53b4c8c2b87e64e5d990d7a47a6fe6245554b018', '2009-09-07 05:20:22', 'subscriber', 'VcpzlnmQ9FFl7i7TLKRc', 'e98b79feb68e79cb18a8c36028dba62f6cc8d116abc3c8a4c3af763671f30929ffb604c4fb78aeb528f179bbf783f88b749b5e7cc85199e6811cbb3ead9e783e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:20:22', '2009-09-07 05:20:22', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:20:22', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:20:22', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:20:22', NULL, NULL, NULL, '2009-09-07 05:20:22', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:20:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:20:23) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:20:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:20:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:20:23) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:20:23) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:20:23', '2009-09-07 05:20:23', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:20:23', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:20:24', '2009-09-07 05:20:24', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:20:24', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1528ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:20:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 01:20:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:21:58', 0, '2009-09-07 05:21:58', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (66.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:21:58', 1000, '2009-09-07 05:21:58', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:21:58', 30000, '2009-09-07 05:21:58', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5da390d4c663636ef6e3826d8fc0ace9f8daf940215d88293d1612c2551fb1162c2c7d7dab8d00a53a22ce5b68faf72524d4ac73021c3f918d7c35fd6ca2e4ee') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:22:00', '2bb2523710b6471b82cebe61395fc4361496ed003313773b82908302066d3e06c97f5b9c1dbb1d6c2ebbe2be5e91debd7667cb28d95d0667677246aea91492ff', '2009-09-07 05:22:00', 'subscriber', 'C4RKC9E7vHY_MeTNEsqR', '5da390d4c663636ef6e3826d8fc0ace9f8daf940215d88293d1612c2551fb1162c2c7d7dab8d00a53a22ce5b68faf72524d4ac73021c3f918d7c35fd6ca2e4ee', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:22:00', '2009-09-07 05:22:00', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:22:00', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:22:00', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:22:00', NULL, NULL, NULL, '2009-09-07 05:22:00', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:22:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 70) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:22:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:22:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:22:00) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:22:00) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:22:00) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:22:01', '2009-09-07 05:22:01', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:22:01', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:22:02', '2009-09-07 05:22:02', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:22:02', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1492ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:22:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 01:22:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:23:17', 0, '2009-09-07 05:23:17', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (62.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:23:17', 1000, '2009-09-07 05:23:17', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:23:17', 30000, '2009-09-07 05:23:17', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b7153114ca45eeeacfa8e1b03b59a31ec9714141538934858c51522a1ecc65b4785aba2ac0212df08446b972d90ccc79e341607fbd7b4e2ad0b6f2bf44161c2f') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:23:19', 'edcd26d9cbf946e52c46c61b1a0a36b5e8d117a8d0b5315d8e58b07b2f123df5e4c5e1b1d166800183f2c48f7c707f2d90b8e04f7f5e106596908deccaad883a', '2009-09-07 05:23:19', 'subscriber', 'AS5-3sBbqBDt-7Bplb1O', 'b7153114ca45eeeacfa8e1b03b59a31ec9714141538934858c51522a1ecc65b4785aba2ac0212df08446b972d90ccc79e341607fbd7b4e2ad0b6f2bf44161c2f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:23:19', '2009-09-07 05:23:19', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:23:19', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:23:19', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:23:19', NULL, NULL, NULL, '2009-09-07 05:23:19', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:23:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 66) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:23:19) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:23:19) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:23:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:23:19) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:23:19) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:23:20', '2009-09-07 05:23:20', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:23:20', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:23:23', '2009-09-07 05:23:23', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:23:23', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 3816ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:23:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 01:25:35) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:25:42', 0, '2009-09-07 05:25:42', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:25:42', 1000, '2009-09-07 05:25:42', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:25:42', 30000, '2009-09-07 05:25:42', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8447f8eed391b5c0b4f43aa3a6f5528fcdb4a29ccfcf9c220fbf9f22439b6f92bf8c8bc4c5d6259f8ccbe3c3663a815975bf1eab3f4a56d72ce71ebbf01a128d') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:25:44', 'ca569f0d261b798b0288a36e6cf5b8c8b4f069b194d6aa7a0cb8c536895d7561402ab7478239c30f9028fcb6979798fb1d157789cd5b695e3ec35b2f0cd9ec32', '2009-09-07 05:25:44', 'subscriber', 'c-8x-GYVaP_r92X5eaMi', '8447f8eed391b5c0b4f43aa3a6f5528fcdb4a29ccfcf9c220fbf9f22439b6f92bf8c8bc4c5d6259f8ccbe3c3663a815975bf1eab3f4a56d72ce71ebbf01a128d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:25:44', '2009-09-07 05:25:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:25:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:25:44', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:25:44', NULL, NULL, NULL, '2009-09-07 05:25:44', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:25:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:25:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:25:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:25:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:25:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:25:44) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:25:46', '2009-09-07 05:25:46', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:25:46', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:25:47', '2009-09-07 05:25:47', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:25:47', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 2140ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:25:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 117ms (View: 111, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:26:57', 0, '2009-09-07 05:26:57', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:26:57', 1000, '2009-09-07 05:26:57', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:26:57', 30000, '2009-09-07 05:26:57', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd74df2dcf9c003d26d0cd2161cc245d4bce111e1f8cd430f68e8463bbe83347c299f88c23e19caf1156ea2f0d5f712f99ef8e6e5db704911ab2b1d8ef0eaf0e7') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:26:57', '7e2a1312bd2e71ef1b38d9aa927af21c150114053ac05508bbd7935cd41f76d361477ba4543ced31b5cdacf0f8022dc60deddcb8758238b78a0f5741943385f3', '2009-09-07 05:26:57', 'subscriber', 'BNqqvKTII1RECFHLifbx', 'd74df2dcf9c003d26d0cd2161cc245d4bce111e1f8cd430f68e8463bbe83347c299f88c23e19caf1156ea2f0d5f712f99ef8e6e5db704911ab2b1d8ef0eaf0e7', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:26:57', '2009-09-07 05:26:57', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:26:57', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:26:58', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:26:58', NULL, NULL, NULL, '2009-09-07 05:26:58', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:26:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:26:58) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:26:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:26:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:26:58) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:26:58) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:26:58', '2009-09-07 05:26:58', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:26:58', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:27:08', '2009-09-07 05:27:08', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:27:08', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 10075ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:27:08) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 114ms (View: 108, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:27:46', 0, '2009-09-07 05:27:46', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:27:46', 1000, '2009-09-07 05:27:46', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:27:46', 30000, '2009-09-07 05:27:46', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '729027fe79ceb26c79dce8d104d1b8d3daa6c94bf0674bd7fc0c342671bff579789992b2cc65ecc6f510a9b0cb2c0c0512a2f5c3164b60bee0260dbd592b6326') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:27:47', 'c9137c7a3ea839861be37b90994df89ae8192242e1ea609cdfc57509b683c25b8ea390087c74484baafb7feede15da9ccb5eba44723332ac2f60a092975cfadb', '2009-09-07 05:27:47', 'subscriber', 'J5QKznMFXle5fcE1ZzhE', '729027fe79ceb26c79dce8d104d1b8d3daa6c94bf0674bd7fc0c342671bff579789992b2cc65ecc6f510a9b0cb2c0c0512a2f5c3164b60bee0260dbd592b6326', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:27:47', '2009-09-07 05:27:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:27:47', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:27:47', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:27:47', NULL, NULL, NULL, '2009-09-07 05:27:47', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:27:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:27:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:27:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:27:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:27:47) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 25ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:27:47) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:27:47', '2009-09-07 05:27:47', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:27:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:27:47', '2009-09-07 05:27:47', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:27:47', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 42ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:27:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 119ms (View: 113, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:29:26', 0, '2009-09-07 05:29:26', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:29:26', 1000, '2009-09-07 05:29:26', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:29:26', 30000, '2009-09-07 05:29:26', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '343022b681bf483c2a4553d2892bff8592e40a54e44b47c2b73816c1948885759616f55037478006f35d0d7d785bc83e6d2200b44692db12a77ea28bf391d704') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:29:26', 'd77034eb1515b45fb09a69dde283ac54ea225bb39f7d9be2981489b1c17f234cfd37d16fea1f009d0ecf08cff7eda4776c5294c9194ab3df1a71e68b698f9a16', '2009-09-07 05:29:26', 'subscriber', '68SgeoK_9YjzXjp5lOnK', '343022b681bf483c2a4553d2892bff8592e40a54e44b47c2b73816c1948885759616f55037478006f35d0d7d785bc83e6d2200b44692db12a77ea28bf391d704', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:29:26', '2009-09-07 05:29:26', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:29:26', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:29:26', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:29:26', NULL, NULL, NULL, '2009-09-07 05:29:26', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:29:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 16ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:29:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:29:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:29:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:29:27) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:29:27) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:29:27', '2009-09-07 05:29:27', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:29:27', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:29:27', '2009-09-07 05:29:27', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:29:27', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 37ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:29:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 111ms (View: 105, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:35:47', 0, '2009-09-07 05:35:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:35:47', 1000, '2009-09-07 05:35:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:35:47', 30000, '2009-09-07 05:35:47', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '690881eb256497c6dcc089089895a5cd05eae5d30cd886aba450de6907b066a884a1041659004a439347ef360b901f2a96bb350bebcd70abf22d8d3d6cd8d48e') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:35:48', '426d81ebc6063208fa367173e2e485d93aa55e78a391597e4e60476a274ca6660a1124d811b1a58413ccf8f9ce3708d33711f01d6deced4467d1c8ad830df4f7', '2009-09-07 05:35:48', 'subscriber', 'iHSQUShrXzKB-Oz0k1bB', '690881eb256497c6dcc089089895a5cd05eae5d30cd886aba450de6907b066a884a1041659004a439347ef360b901f2a96bb350bebcd70abf22d8d3d6cd8d48e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:35:48', '2009-09-07 05:35:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:35:48', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:35:48', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:35:48', NULL, NULL, NULL, '2009-09-07 05:35:48', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:35:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:35:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:35:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:35:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:35:48) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:35:48) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:35:48', '2009-09-07 05:35:48', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:35:48', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:35:48', '2009-09-07 05:35:48', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:35:48', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 37ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:35:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 153ms (View: 147, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:36:41', 0, '2009-09-07 05:36:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:36:41', 1000, '2009-09-07 05:36:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:36:41', 30000, '2009-09-07 05:36:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8c00defd42fe072392b9eb749a9c5b7971d0747067dc5d8a3c891a3858e9e674915459f87bf43a904295f1802dd119e448649eb207b11768e83c3f5dde4efc16') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:36:42', '4af469ebfed8ec2b45a492e002c93d2fb336553d077fb73594c86ac13eb19d2efee1f7c0cfa59ed8c1ff2b58ad22487da31ed6c4c5cbabbb414aa96511c17649', '2009-09-07 05:36:42', 'subscriber', 'PIkPKYXpg8KMAborCcbR', '8c00defd42fe072392b9eb749a9c5b7971d0747067dc5d8a3c891a3858e9e674915459f87bf43a904295f1802dd119e448649eb207b11768e83c3f5dde4efc16', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:36:42', '2009-09-07 05:36:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:36:42', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:36:42', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:36:42', NULL, NULL, NULL, '2009-09-07 05:36:42', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:36:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:36:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:36:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:36:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:36:42) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:36:42) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:36:42', '2009-09-07 05:36:42', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:36:42', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:36:42', '2009-09-07 05:36:42', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:36:42', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 37ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:36:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 111ms (View: 104, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:37:56', 0, '2009-09-07 05:37:56', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:37:56', 1000, '2009-09-07 05:37:56', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:37:56', 30000, '2009-09-07 05:37:56', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ff61995ea1fd837e2e87447ce382e773fc5f1ee89c6c23110049021f0b8483db1fec13b2287488facf1fcd6061158a0bc1341146c1320dbf2028d3ab935465e1') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:37:56', 'cc5b6de9be93004294381a785206c417956985acf023ccecbb64d4f2893125cb36ed45f37eb978aa386fe5133cb1c59b0c1b8603b4bcdc8748d6ee5bc43637b9', '2009-09-07 05:37:56', 'subscriber', 'd1bSzUXnRG0W4Ueo_NMw', 'ff61995ea1fd837e2e87447ce382e773fc5f1ee89c6c23110049021f0b8483db1fec13b2287488facf1fcd6061158a0bc1341146c1320dbf2028d3ab935465e1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:37:56', '2009-09-07 05:37:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:37:56', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:37:56', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:37:56', NULL, NULL, NULL, '2009-09-07 05:37:56', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:37:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:37:56) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:37:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:37:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:37:56) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:37:57) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:37:57', '2009-09-07 05:37:57', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:37:57', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:37:57', '2009-09-07 05:37:57', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:37:57', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 36ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:37:57) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 106, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscription Load (0.2ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = NULL AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 05:38:39', 0, '2009-09-07 05:38:39', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 05:38:39', 1000, '2009-09-07 05:38:39', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 05:38:39', 30000, '2009-09-07 05:38:39', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e209112171c3a18467ef524568745254f5c63d442bfc788fef3e281f80cd871ab768d3c38b1074967cbd3d6850bb2f74c2a1547cadd95cd2979608b4b08722d8') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 05:38:40', '8acea81d6247b2f81d6a23b4881ccbf66b1e26c28b75d674c6e0482c28220e5033ab2b772270876cf3c6b2f4b3ae9e72c8c7b0b4eeb6eeafc2aaf46e59dd5c9a', '2009-09-07 05:38:40', 'subscriber', 'S6BnGL1kZibFi7rVlwkJ', 'e209112171c3a18467ef524568745254f5c63d442bfc788fef3e281f80cd871ab768d3c38b1074967cbd3d6850bb2f74c2a1547cadd95cd2979608b4b08722d8', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 05:38:40', '2009-09-07 05:38:40', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:38:40', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:38:40', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 05:38:40', NULL, NULL, NULL, '2009-09-07 05:38:40', 1, NULL, NULL, 'no_info')[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 01:38:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 01:38:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 01:38:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:38:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 01:38:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 01:38:40) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:38:40', '2009-09-07 05:38:40', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 05:38:40', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 05:38:40', '2009-09-07 05:38:40', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 05:38:40', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 37ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 01:38:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 112ms (View: 106, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscription Load (0.2ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = NULL AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:05:42', 0, '2009-09-07 07:05:42', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:05:42', 1000, '2009-09-07 07:05:42', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:05:42', 30000, '2009-09-07 07:05:42', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '061c4989faf8016bc53e3a21b5092abbe37e289da8d79aa7fe33adae3a64b22bde5fbd9f6e4bf020bbc02efac5647509caea59a81c6875f65092e74ad6a27708') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:05:42', 'c97c0d79d2f5e491f8b6ccf755cce8cf81f44efbae17cf3213f14facc31fd48ac5a5bb1fc0540504b89b89009db47a7a22dd6a4a5103ed65902ae472a4b214a0', '2009-09-07 07:05:42', 'subscriber', 'EICN--Eaw3ERfJtwP0uG', '061c4989faf8016bc53e3a21b5092abbe37e289da8d79aa7fe33adae3a64b22bde5fbd9f6e4bf020bbc02efac5647509caea59a81c6875f65092e74ad6a27708', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:05:42', '2009-09-07 07:05:42', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:05:42', NULL, NULL, NULL, '2009-09-07 07:05:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:05:42', "created_at" = '2009-09-07 07:05:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:05:42', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:05:42', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:05:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.2ms)
Completed in 25ms (View: 21, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:05:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:05:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:05:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:05:43) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 150ms (View: 142, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:05:43) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:05:43', '2009-09-07 07:05:43', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:05:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:05:43', '2009-09-07 07:05:43', 0, 'charge', 1, 't', '--- 
authorized_amount: "0.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:05:43', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 133ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:05:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 34ms (View: 28, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:06:56', 0, '2009-09-07 07:06:56', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (67.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:06:56', 1000, '2009-09-07 07:06:56', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:06:56', 30000, '2009-09-07 07:06:56', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7190f5a89efef090bce667c628a27b9909e5dc1a79b9b8547487dcaf1a9d155aa204aa459c593ce12e4b48238cbae59eef8428177870a9db5700ef5bcade57dd') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:06:57', 'be0b69c0e64ded31f37cc7627c58ada2c6ab939e0f7dd4582c8fb2dd77f24173081d7d3ebaa78faa6302ef0e65f48c11b7239998959dabaa21aa4ce5fd907eb8', '2009-09-07 07:06:57', 'subscriber', 'beOsXB3H3bnpmYalDv5t', '7190f5a89efef090bce667c628a27b9909e5dc1a79b9b8547487dcaf1a9d155aa204aa459c593ce12e4b48238cbae59eef8428177870a9db5700ef5bcade57dd', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:06:57', '2009-09-07 07:06:57', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:06:57', NULL, NULL, NULL, '2009-09-07 07:06:57', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:06:57', "created_at" = '2009-09-07 07:06:57', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:06:57', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:06:57', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:06:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 71) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:06:57) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:06:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:06:57) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:06:57) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 141ms (View: 134, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:06:57) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:06:57', '2009-09-07 07:06:57', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:06:57', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:07:31', '2009-09-07 07:07:31', 0, 'charge', 1, 't', '--- 
authorized_amount: "0.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:07:31', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 33702ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:07:31) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:07:47', 0, '2009-09-07 07:07:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:07:47', 1000, '2009-09-07 07:07:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:07:47', 30000, '2009-09-07 07:07:47', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'eedf91c6fb8746f8e585ffdfc165b35f7345c059c51fc7ad43d13f52ace3ada0a77f2ab37379999e37b377078c9fe697633e7181c33e716cba77953ff8b9c513') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:07:47', 'f6f9f03fecbc2b7344a81770ea1952eced9b50e2c5fc1fb61b5fa8ebb931a882f271a3d055536bf42ba97c1d03ae50014deb1d46b3835a8ec43cc7ebf4acfeb1', '2009-09-07 07:07:47', 'subscriber', 'PwSuB0F1tkKZPhC_DSK2', 'eedf91c6fb8746f8e585ffdfc165b35f7345c059c51fc7ad43d13f52ace3ada0a77f2ab37379999e37b377078c9fe697633e7181c33e716cba77953ff8b9c513', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:07:47', '2009-09-07 07:07:47', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:07:47', NULL, NULL, NULL, '2009-09-07 07:07:47', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:07:47', "created_at" = '2009-09-07 07:07:47', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:07:47', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:07:47', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:07:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:07:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:07:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:07:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:07:47) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 140ms (View: 133, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:07:47) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:07:47', '2009-09-07 07:07:47', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:07:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:07:48', '2009-09-07 07:07:48', 0, 'charge', 1, 't', '--- 
authorized_amount: "0.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:07:48', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1112ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:07:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:08:08', 0, '2009-09-07 07:08:08', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:08:08', 1000, '2009-09-07 07:08:08', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:08:08', 30000, '2009-09-07 07:08:08', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3437ea3c27e5b338e85928db753744a55b8eb1c5f15ffca58b227d5efe5e8aea05bf9fd6a20efe4cc22f984c10b6ba89ee1de586c4dffc062d5ebabb067b992c') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:08:08', 'db6943be20d352276da10fa55501066af08fe8aabea42468bd151c56e61020c73af4de5e7b5b422d8ece4dc37702423d6b4f6bafc780595e0d9e06b192ee5116', '2009-09-07 07:08:08', 'subscriber', 'qEJoxeGqB1wK6ZMfDEsR', '3437ea3c27e5b338e85928db753744a55b8eb1c5f15ffca58b227d5efe5e8aea05bf9fd6a20efe4cc22f984c10b6ba89ee1de586c4dffc062d5ebabb067b992c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:08:08', '2009-09-07 07:08:08', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:08:08', NULL, NULL, NULL, '2009-09-07 07:08:08', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:08:08', "created_at" = '2009-09-07 07:08:08', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:08:08', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:08:08', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:08:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:08:08) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:08:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:08:08) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:08:08) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 141ms (View: 134, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:08:09) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:08:09', '2009-09-07 07:08:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:08:09', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:11:49', '2009-09-07 07:11:49', 0, 'charge', 1, 't', '--- 
authorized_amount: "0.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:11:49', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 220592ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:11:49) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:11:56', 0, '2009-09-07 07:11:56', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:11:56', 1000, '2009-09-07 07:11:56', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:11:56', 30000, '2009-09-07 07:11:56', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd38318fbeafe6d8e6c05651586966a028c5a07d169fff99d0c9836d0c94b6412c18f16a0f9d7c5fb67d2224b510ee7e3074c472be9fb099255f40bb6a17201e2') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:12:24', '4e5770a65d5a3702aed6b9e55602ccd2f2b48c8ce3c533a7c2d146a2bea44616b65d851719f6693c19ef930437f49357aff9b4ba2ccd9c85c5df934535af7d2a', '2009-09-07 07:12:24', 'subscriber', 'URLCqCiOeGRswYk94Huh', 'd38318fbeafe6d8e6c05651586966a028c5a07d169fff99d0c9836d0c94b6412c18f16a0f9d7c5fb67d2224b510ee7e3074c472be9fb099255f40bb6a17201e2', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:12:24', '2009-09-07 07:12:24', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:12:24', NULL, NULL, NULL, '2009-09-07 07:12:24', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:12:24', "created_at" = '2009-09-07 07:12:24', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:14:54', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:14:54', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:14:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:14:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:14:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:14:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:14:54) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 141ms (View: 135, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:14:54) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:14:54', '2009-09-07 07:14:54', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:14:54', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:14:56', '2009-09-07 07:14:56', 0, 'charge', 1, 't', '--- 
authorized_amount: "0.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:14:56', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1773ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:14:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:15:02', 0, '2009-09-07 07:15:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:15:02', 1000, '2009-09-07 07:15:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:15:02', 30000, '2009-09-07 07:15:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9bc1e8538378c00127eee39f5df39accc502d54b39a5ed15f13e6e84f00a3a3b45d9e578933084c9b41926478d5ad13cfea51c9cd41efa4449ee8b44003ddd85') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:15:05', '0ed506c286cebefd1dc2971452d67e9cd887f7c3a68c4e2c69ede48f95d1903ed876fa48644b1f1a4d9401bbc3eec7db721f9a69537785f609fd50d6d872d1cc', '2009-09-07 07:15:05', 'subscriber', 'yU_BL8KvpK08620iBe1X', '9bc1e8538378c00127eee39f5df39accc502d54b39a5ed15f13e6e84f00a3a3b45d9e578933084c9b41926478d5ad13cfea51c9cd41efa4449ee8b44003ddd85', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:15:05', '2009-09-07 07:15:05', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:15:05', NULL, NULL, NULL, '2009-09-07 07:15:05', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:15:05', "created_at" = '2009-09-07 07:15:05', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:15:16', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:15:16', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:15:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 16ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:15:16) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:15:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:15:16) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:15:16) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 143ms (View: 136, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:15:16) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:15:16', '2009-09-07 07:15:16', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:15:16', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:15:17', '2009-09-07 07:15:17', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:15:17', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 1184ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:15:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscription Load (0.2ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = NULL AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:16:17', 0, '2009-09-07 07:16:17', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:16:17', 1000, '2009-09-07 07:16:17', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:16:17', 30000, '2009-09-07 07:16:17', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '37038a6decc8b31f44f8b6114a59e99c1942af4144522025d247aa75a13b0c521b740f003e664db57dd2792acea2deb1dbeadf06706789d7fa09a1c9845e4556') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:16:20', '802d9a45e5a5779eb14fbfffe173e16171ce28032c1f8332936838b23f278b5d85405edafa7d723a1ff2ec3765d8ef9f6a3711d452bee24ef1a046ad0794f2db', '2009-09-07 07:16:20', 'subscriber', '_z7Pi6FKK4uVPcJAuFqS', '37038a6decc8b31f44f8b6114a59e99c1942af4144522025d247aa75a13b0c521b740f003e664db57dd2792acea2deb1dbeadf06706789d7fa09a1c9845e4556', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:16:20', '2009-09-07 07:16:20', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:16:20', NULL, NULL, NULL, '2009-09-07 07:16:20', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:16:20', "created_at" = '2009-09-07 07:16:20', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:16:20', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:16:20', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:16:20) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:16:21) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:16:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:16:21) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:16:21) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 147ms (View: 140, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:16:21) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:16:21', '2009-09-07 07:16:21', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:16:21', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:16:26', '2009-09-07 07:16:26', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:16:27', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 59425ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:17:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mSubscription Load (0.2ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = NULL AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:19:42', 0, '2009-09-07 07:19:42', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:19:42', 1000, '2009-09-07 07:19:42', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:19:42', 30000, '2009-09-07 07:19:42', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1c3cffcad40303641ddd6efd1540112247c1301569bf6396ce8f328bd72f0a14e9530ed9a07ae3e5ecc13294a101cb7e2d2ce20bccea25f9f4951d90298b61bf') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:19:44', 'b951701e3bc8dfa3236e28f3fe65f2abd46a43ca648a1949ba528d9d81f74ff130296c362bf8cd97040d1b1f99dff50c1b5c913f85372be14afadf5244f67d9f', '2009-09-07 07:19:44', 'subscriber', 'rBhwMO9AsurRUMiiuWEr', '1c3cffcad40303641ddd6efd1540112247c1301569bf6396ce8f328bd72f0a14e9530ed9a07ae3e5ecc13294a101cb7e2d2ce20bccea25f9f4951d90298b61bf', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:19:44', '2009-09-07 07:19:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:19:44', NULL, NULL, NULL, '2009-09-07 07:19:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:19:44', "created_at" = '2009-09-07 07:19:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:19:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:19:44', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:19:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:19:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:19:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:19:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:19:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 139ms (View: 132, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:19:44) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:19:44', '2009-09-07 07:19:44', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:19:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:19:45', '2009-09-07 07:19:45', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:19:45', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 667ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:19:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 14, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:25:31', 0, '2009-09-07 07:25:31', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:25:31', 1000, '2009-09-07 07:25:31', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:25:31', 30000, '2009-09-07 07:25:31', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5be995642f1ac47d9a4b1e67ad8da94273a5b534952a435da161f1493344e557d8630ca19b6948c4afe65ae677b95200689d84adb6141dbcb3161f471d534849') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:25:31', '41d56be6824c3ad7196217f68d9080c01b6a499642085fe8210043d5eb32e20d308f436dc2d554534c0980f34a5def811fd0397b3d39920346fd8c4ed48dd833', '2009-09-07 07:25:31', 'subscriber', 'X8tyTBZu4_7wXuCPzejK', '5be995642f1ac47d9a4b1e67ad8da94273a5b534952a435da161f1493344e557d8630ca19b6948c4afe65ae677b95200689d84adb6141dbcb3161f471d534849', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:25:31', '2009-09-07 07:25:31', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:25:31', NULL, NULL, NULL, '2009-09-07 07:25:31', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:25:31', "created_at" = '2009-09-07 07:25:31', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:25:31', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:25:31', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:25:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:25:32) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:25:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:25:32) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:25:32) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 139ms (View: 131, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:25:32) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:25:32', '2009-09-07 07:25:32', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:25:32', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:25:34', '2009-09-07 07:25:34', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:25:34', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 2588ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:25:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:26:06', 0, '2009-09-07 07:26:06', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (64.0ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:26:06', 1000, '2009-09-07 07:26:06', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:26:06', 30000, '2009-09-07 07:26:06', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '39516c59aeaca54e65072db24097545c6083630026ffab6a28a272b2621aeb2738e5f7b4a06fc5ff4118fda7fd844cd9cf9b19c5893e16e23c752247a97de70f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:26:06', 'eede4110074e843ea28dd41506769d4ec4c099adf5602ba118e34dd615e64e45a211129e06eba306f33da46a440e3cabd255f15564a9ade488a0f335e5f68d21', '2009-09-07 07:26:06', 'subscriber', 'M9f34NhOaUAkkA7Se4x6', '39516c59aeaca54e65072db24097545c6083630026ffab6a28a272b2621aeb2738e5f7b4a06fc5ff4118fda7fd844cd9cf9b19c5893e16e23c752247a97de70f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:26:06', '2009-09-07 07:26:06', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:26:06', NULL, NULL, NULL, '2009-09-07 07:26:06', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:06', "created_at" = '2009-09-07 07:26:06', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:06', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:26:06) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 68) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:26:06) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:26:06) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:06) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 140ms (View: 133, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:26:07) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:26:07', '2009-09-07 07:26:07', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:26:07', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 25ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fac508923f09be126ea3221706feb333e4bcd52ba9cb96ec44a48ab86a6e644d2dbbe50ba3a0289cb628757e05a2b0cf85c633ce68ab84396df99ee67d745331') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:26:07', '7a50f9e814a3b457729fb6801cdff1d5e4335dea4976871d30c3bf1d2b4ef167e4d76fd844e2e7e3763db2a1f8f821cf96680b2cdec2f538267e265eb5573622', '2009-09-07 07:26:07', 'subscriber', 'mvKI8o03w4ajtVu5PAc0', 'fac508923f09be126ea3221706feb333e4bcd52ba9cb96ec44a48ab86a6e644d2dbbe50ba3a0289cb628757e05a2b0cf85c633ce68ab84396df99ee67d745331', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:26:07', '2009-09-07 07:26:07', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:26:07', NULL, NULL, NULL, '2009-09-07 07:26:07', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:07', "created_at" = '2009-09-07 07:26:07', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:07', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:26:07) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:26:07) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 11, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:26:07) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '43e07a70ac6f5922e5a6cd8b4af2fca40bad099bc9d996b6c718dc3be3e66e712e13dbfaa171e4baaa250f20e1d0c5c4dddec251cdf8c03a0d1422364750d788') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:26:08', 'b09fd04178155ac9e8a8089591cfe58c126df58f42f95a8815207e3505a119f9e9543b62fdfa2318d754fe10a297d9392f1fa2fdababa0c018c3cd1bf7f0e565', '2009-09-07 07:26:08', 'subscriber', 'BMw6-19_WVAy3rFCWSB5', '43e07a70ac6f5922e5a6cd8b4af2fca40bad099bc9d996b6c718dc3be3e66e712e13dbfaa171e4baaa250f20e1d0c5c4dddec251cdf8c03a0d1422364750d788', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:26:08', '2009-09-07 07:26:08', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:26:08', NULL, NULL, NULL, '2009-09-07 07:26:08', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:08', "created_at" = '2009-09-07 07:26:08', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:08', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:26:08) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:26:08) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-07 07:26:08', '2009-09-07 07:26:08', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '98d5d14d00c02cccf311fb69889d78a2b9f09c716676ba642cbba40d401af55936564d25fc43db0bbe624e03d78db5a4bacbef8a22f45d3c8d270ac969e3270f') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:26:08', 'b5c03a5a638d59a5eaaa584aa6ba26fa62fc5f1cb85b1777731674ab403689e15818259e9e0269e2d4eb504ca528b42e64c0a8f34224b64896b2e2dea2a1b912', '2009-09-07 07:26:08', 'subscriber', 'Z8L-hnsBD0x1w3pRj9a_', '98d5d14d00c02cccf311fb69889d78a2b9f09c716676ba642cbba40d401af55936564d25fc43db0bbe624e03d78db5a4bacbef8a22f45d3c8d270ac969e3270f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.6ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:26:08', '2009-09-07 07:26:08', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:26:08', NULL, NULL, NULL, '2009-09-07 07:26:08', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:08', "created_at" = '2009-09-07 07:26:08', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:08', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.3ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:26:08', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 8ms (View: 7, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:26:08) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 26ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:26:08) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 11, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:26:09) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-07 07:26:09', '2009-09-07 07:26:09', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:26:09', '2009-09-07 07:26:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:26:09', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '79074333cf112d63183346824d91ad23dc22998dfde230864417e2de8278ab4ed06b1ac6669452eab3225e6cca3de98a871b5dea36f927f2237cfa76762e9bc0') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:26:09', '47ff88d8885937c719de89a2300093a9880739fe05e52e7e16c5a0164fa3c7df4d95101af99e3e34f61ecf577ba7e6ae7aa7f01739e24252c19bee5094f59b91', '2009-09-07 07:26:09', 'subscriber', 'QO2k3Q-vrk2AoOXLZh7U', '79074333cf112d63183346824d91ad23dc22998dfde230864417e2de8278ab4ed06b1ac6669452eab3225e6cca3de98a871b5dea36f927f2237cfa76762e9bc0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:26:09', '2009-09-07 07:26:09', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.2ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:26:09', NULL, NULL, NULL, '2009-09-07 07:26:09', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:09', "created_at" = '2009-09-07 07:26:09', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:09', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:09', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:26:09) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:26:09) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:26:09', '2009-09-07 07:26:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:26:09', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:26:09', '2009-09-07 07:26:09', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:09', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 34ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a4de448714b560aec3929e2a428142ba98b46622eee581cde964c0f1a9b4017ea95b85031263c6273ef851a55d7d7b8111b7743325b9387a62e0e027f990757e') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:26:09', '4ee614356f8c4549f8a20909b7cc6b3ea5662644ee854a8fdeb2e77d550cfc3c659f637546ed26d0e71767dcf8ff9b2e4804b61540fa90f534b14411b2e356e0', '2009-09-07 07:26:09', 'subscriber', 'pIEhB0iImngOw3xhJyUl', 'a4de448714b560aec3929e2a428142ba98b46622eee581cde964c0f1a9b4017ea95b85031263c6273ef851a55d7d7b8111b7743325b9387a62e0e027f990757e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:26:09', '2009-09-07 07:26:09', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:26:09', NULL, NULL, NULL, '2009-09-07 07:26:09', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:09', "created_at" = '2009-09-07 07:26:09', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:26:09', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:26:09) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:26:09) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:26:09', '2009-09-07 07:26:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:26:09', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 03:26:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:28:09', 0, '2009-09-07 07:28:09', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:28:09', 1000, '2009-09-07 07:28:09', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:28:09', 30000, '2009-09-07 07:28:09', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'eecb290c769ad230390cda8cda7259534a9d12d604e73c1c5e57c102a0b4c0ac63965bbd0b25e1c24ecf1bc6cbe46db3af6229d4af56c0a3ede970508471a787') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:28:09', 'd1b9c3c49209131cd89e98a21dfb2e6e3128926f25de6e716a17086ab223ee9be15f86e8933df5df7ec7c9de03a910ec21fbcd5791ff458d9db6913c8397eba4', '2009-09-07 07:28:09', 'subscriber', 'QjYxqmNxJ5e93ZUPob3G', 'eecb290c769ad230390cda8cda7259534a9d12d604e73c1c5e57c102a0b4c0ac63965bbd0b25e1c24ecf1bc6cbe46db3af6229d4af56c0a3ede970508471a787', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:28:09', '2009-09-07 07:28:09', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:28:09', NULL, NULL, NULL, '2009-09-07 07:28:09', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:28:09', "created_at" = '2009-09-07 07:28:09', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:28:09', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:28:09) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:28:09) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:28:09) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:28:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 14, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:28:09) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 140ms (View: 132, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:28:09) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:28:09', '2009-09-07 07:28:09', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:28:09', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:28:09) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 03:28:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:29:01', 0, '2009-09-07 07:29:01', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:29:02', 1000, '2009-09-07 07:29:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:29:02', 30000, '2009-09-07 07:29:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '94073a7dafccb7fb03a71d125a191dc1bb726a4015c3f31b5c6c4ea3a0dc4eca73beb277cc278beb0b1d9c69e56ca9ec32e28542657253b61be23b3aaa3c9e0a') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:02', '61cbfc5bcdaaa1f835fabc44f54809083e86071c9be494653152a989aefd7c8bf6371c88a1ab93ab5a4ed92437f0cba71dadaf8e868dfc88f7499658b3cabf1f', '2009-09-07 07:29:02', 'subscriber', 'Cyh43EDPpHDPUNEOH12M', '94073a7dafccb7fb03a71d125a191dc1bb726a4015c3f31b5c6c4ea3a0dc4eca73beb277cc278beb0b1d9c69e56ca9ec32e28542657253b61be23b3aaa3c9e0a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:02', '2009-09-07 07:29:02', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:02', NULL, NULL, NULL, '2009-09-07 07:29:02', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:02', "created_at" = '2009-09-07 07:29:02', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:02', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:02) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:02) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:02) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 140ms (View: 133, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:02) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:02', '2009-09-07 07:29:02', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:02', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 113ms (View: 106, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:29:11', 0, '2009-09-07 07:29:11', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:29:11', 1000, '2009-09-07 07:29:11', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:29:11', 30000, '2009-09-07 07:29:11', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6198b4271a69d29f123bb8269dcc912391372745a7203c97781fcf447d39070026caf04bb2b16c1221ca3973f21b243436d3a644df46e29ae1138b7787a07700') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:11', '386f580af9b795d10d80a1b8654b55e5bde58af51dc01a0f0b59d8779d5e26bf149145f80c666362d0736f98f5d7e0807648154f2644f321310808073ccb35d6', '2009-09-07 07:29:11', 'subscriber', '7AeeKd0x21UvpI29Wsad', '6198b4271a69d29f123bb8269dcc912391372745a7203c97781fcf447d39070026caf04bb2b16c1221ca3973f21b243436d3a644df46e29ae1138b7787a07700', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:11', '2009-09-07 07:29:11', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:11', NULL, NULL, NULL, '2009-09-07 07:29:11', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:11', "created_at" = '2009-09-07 07:29:11', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:11', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:11) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:11) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:11) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:11) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:11) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 142ms (View: 135, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:11) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:11', '2009-09-07 07:29:11', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:11', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:11) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 112ms (View: 105, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b4fa140ac776cfc69d0a65000ce88c30124231edd93f5a6f1d4b95fe826c5b8a64ed34aef62c25acf7305f99063a28b8204ecbb440333736c96d74c363dafebc') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:12', '57fb5636f3e603855075f01b2c44d91f19d4cc20de4ab2c0913c7fa8ef11575a5dedf9b783bab3f1d9de9a4b614c186e07666f90bcaca18e0dcc8f2260c79c8f', '2009-09-07 07:29:12', 'subscriber', 'h2bK4aY6r1R93xlmESRV', 'b4fa140ac776cfc69d0a65000ce88c30124231edd93f5a6f1d4b95fe826c5b8a64ed34aef62c25acf7305f99063a28b8204ecbb440333736c96d74c363dafebc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:12', '2009-09-07 07:29:12', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:12', NULL, NULL, NULL, '2009-09-07 07:29:12', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:12', "created_at" = '2009-09-07 07:29:12', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:12', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 6, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:12) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 208ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:12) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '88bbda6fb65454edef721dc0809798e73f0decd5e4db04cf3f89334196774cbd2b7e62743b5a861d8e017ef303c652a24d8882bbc345c63c97b0ffd5c0fb12e0') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:12', '0452e738de6c80eca7a290437bd00c9a1fbb6519be2220f3496955772b0858dfa011d529f22a50577b1b6bf5920234a5eff386322eedcde8b705dce43caf79bc', '2009-09-07 07:29:12', 'subscriber', 'Cdjd6S7Bj9rPxzBh04dt', '88bbda6fb65454edef721dc0809798e73f0decd5e4db04cf3f89334196774cbd2b7e62743b5a861d8e017ef303c652a24d8882bbc345c63c97b0ffd5c0fb12e0', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:12', '2009-09-07 07:29:12', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:12', NULL, NULL, NULL, '2009-09-07 07:29:12', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:12', "created_at" = '2009-09-07 07:29:12', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:12', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 8ms (View: 8, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:12) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.1ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:12) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 11, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:12) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-07 07:29:12', '2009-09-07 07:29:12', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 21ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (1.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f1802db673201b2bc54a5926a64629a4894ab87d758b424eaa5a6fdd7d2829b867ae3143892a59cb3a924375f9bb65fa46916505a625a6586b708cfb397aee00') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:13', '43ce352c4cc5b459624bd8b9c6fe02a20b574de00a2e202cc4af43642dd481fce116e0f516551b9685df2779b45f2e7778e0e3a98cc8ae1a7574ce6bb4390e1f', '2009-09-07 07:29:13', 'subscriber', '05HCjSoH0LSWWCnthP1L', 'f1802db673201b2bc54a5926a64629a4894ab87d758b424eaa5a6fdd7d2829b867ae3143892a59cb3a924375f9bb65fa46916505a625a6586b708cfb397aee00', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:13', '2009-09-07 07:29:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:13', NULL, NULL, NULL, '2009-09-07 07:29:13', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:13', "created_at" = '2009-09-07 07:29:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:13', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:13', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 20ms (View: 10, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.7ms)
Completed in 22ms (View: 15, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:13) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-07 07:29:13', '2009-09-07 07:29:13', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:13', '2009-09-07 07:29:13', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:13', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 22ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.9ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7e1cbcf163d8bbf20b37e933114c6d5c24042f64e897f5a1d8cc24d142345c34ccc2a60ace8090d2811467db037748c09310a3b58aa80d14fe0fe8e5f19ded14') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:13', '6c8ff6f08d5fad2debe60668e08aeff97648002b9e2b496605b10e1bde6f53de7ec46a3415785d2d22299526114fc54c1775fcbd5ba39d548c2bca912bb6df03', '2009-09-07 07:29:13', 'subscriber', 'hrBBpAN28RLwsI_suBv7', '7e1cbcf163d8bbf20b37e933114c6d5c24042f64e897f5a1d8cc24d142345c34ccc2a60ace8090d2811467db037748c09310a3b58aa80d14fe0fe8e5f19ded14', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:13', '2009-09-07 07:29:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:13', NULL, NULL, NULL, '2009-09-07 07:29:13', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:13', "created_at" = '2009-09-07 07:29:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:13', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:13', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 9ms (View: 8, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 7ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 21ms (View: 20, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:13) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 187ms (View: 179, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:14) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:14', '2009-09-07 07:29:14', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:14', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:14', '2009-09-07 07:29:14', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:14', "state" = 'active', "next_renewal_on" = '2009-10-04' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 32ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bc671fe29b20d7ebcefd21e33c1cbad087aad0637c585a0b05f677fe5062720982f74802f4dfba86e2d64de4b3c674e31f2f1b3e9cfd6f570dfc96f5736c363f') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:29:14', '445460cab25df667cb78d54f48f8416cbe048442dd699a910946572d1a12d967c4a1e691d4a44679dd002d01255192d6638099dad34c2f58665de3fbe6cd79d2', '2009-09-07 07:29:14', 'subscriber', 'CPPIRRwfgl89yKhVeruS', 'bc671fe29b20d7ebcefd21e33c1cbad087aad0637c585a0b05f677fe5062720982f74802f4dfba86e2d64de4b3c674e31f2f1b3e9cfd6f570dfc96f5736c363f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:29:14', '2009-09-07 07:29:14', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:29:14', NULL, NULL, NULL, '2009-09-07 07:29:14', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:14', "created_at" = '2009-09-07 07:29:14', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:29:14', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:29:14) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:14) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:14', '2009-09-07 07:29:14', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:14', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-07 03:29:14) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-07 07:29:14', '2009-09-07 07:29:14', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-07 07:29:14', '2009-09-07 07:29:14', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.1ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:29:14', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-07 03:29:14) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;36;1mSubscriptionTransaction Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:33:50', 0, '2009-09-07 07:33:50', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:33:50', 1000, '2009-09-07 07:33:50', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:33:50', 30000, '2009-09-07 07:33:50', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5af5c2722c7d1ecc018b51f175915f22c713178a9b04e2d8339108703ad66acd7d8bbf4ad2ff9fadb97c247a77bdee0763f97a9a368311d9dade1c1726a59182') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:33:50', 'e1827f80cb595fb4776c2a6f8c42c96644026b12aa18a5d3e401d15c5c11e7a520fe505f761fa250a2b372ac93c6b33072186271cc5685b291d312e5deb9a302', '2009-09-07 07:33:50', 'subscriber', '1daFbSMZLsPXNuUXEory', '5af5c2722c7d1ecc018b51f175915f22c713178a9b04e2d8339108703ad66acd7d8bbf4ad2ff9fadb97c247a77bdee0763f97a9a368311d9dade1c1726a59182', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:33:50', '2009-09-07 07:33:50', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:33:50', NULL, NULL, NULL, '2009-09-07 07:33:50', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:50', "created_at" = '2009-09-07 07:33:50', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:33:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:33:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:33:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 13ms (View: 9, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 03:33:50) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:33:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 136ms (View: 125, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f5ccae16abf02976a464446aacba70608aceb5fbb41df725a731ecb668e965c69949b69fd3d70038515137339b3743497ef6b6c360337eadddfaaa9dfb2893bd') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (49.1ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:33:51', '9be17756a236d96be757bfefd128d58550d2eeacb20fdf6f68c9f49eb7063eb53870da497d32a5287443cd3f13bd79f6b676b9d91c74aa32fc697914ec103f6a', '2009-09-07 07:33:51', 'subscriber', 'QWZgGinRZK1sNrV0Dzc-', 'f5ccae16abf02976a464446aacba70608aceb5fbb41df725a731ecb668e965c69949b69fd3d70038515137339b3743497ef6b6c360337eadddfaaa9dfb2893bd', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:33:51', '2009-09-07 07:33:51', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:33:51', NULL, NULL, NULL, '2009-09-07 07:33:51', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.8ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:51', "created_at" = '2009-09-07 07:33:51', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:33:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 7ms (View: 7, DB: 53) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:33:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:33:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 03:33:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.6ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 03:33:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ce09c74c2b63eeb5a3c5d0451005b10a07df6df1c11180d35267488d9cacb38c34793f5c252d9e38d9fe568a7e68f5e674890fc80d4465f7877c51d883f9c94a') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:33:51', '73eb35699fa1d1069c116c16b7110535d89772569c8e1d0b18e53f1876cb0bb51b71cb958c97f61047e2d2dfc2353eb8ea8341422fd1953651b9986e3e0243e9', '2009-09-07 07:33:51', 'subscriber', '-e369ToHnpXljkaSCfWP', 'ce09c74c2b63eeb5a3c5d0451005b10a07df6df1c11180d35267488d9cacb38c34793f5c252d9e38d9fe568a7e68f5e674890fc80d4465f7877c51d883f9c94a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:33:51', '2009-09-07 07:33:51', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:33:51', NULL, NULL, NULL, '2009-09-07 07:33:51', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:51', "created_at" = '2009-09-07 07:33:51', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:51', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:33:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 224ms (View: 223, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:33:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f6d432a2324ab7fdd9c871090822cf4ba728b44d90b4f78b9dfe46f32c665a31f17b517dfa657208920a4e7794dab6b62a67907a62cf6e17178fb6a575f5cfae') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:33:52', '2839462e1ecd327c5365cc4d4c2eab9df602d8fee64acbf690525d0e57253d6d1e070a2330f0110ba31cdb85e94c277354755d161ced5854488afde648ab71ba', '2009-09-07 07:33:52', 'subscriber', 'RaO2Vaj09sDUBHi1CA_F', 'f6d432a2324ab7fdd9c871090822cf4ba728b44d90b4f78b9dfe46f32c665a31f17b517dfa657208920a4e7794dab6b62a67907a62cf6e17178fb6a575f5cfae', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:33:52', '2009-09-07 07:33:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:33:52', NULL, NULL, NULL, '2009-09-07 07:33:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "created_at" = '2009-09-07 07:33:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:33:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (4.0ms)
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '51402fbe63cde947eaf1211f32cbc559e989412853d0b823df182f8f38de82361a30cddf73235e71d652ccbf0bfdb3ea2f2e95e20e58e7d5824afd0307c211e2') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:33:52', '10cf664b4112d4cd171b5f9da8db6222be35d0782b6c2b2770e549683093c22959c7919204864bc7e6b417c9729cff1bc26ad1a6c7418ed2850057b5a2a738f3', '2009-09-07 07:33:52', 'subscriber', '57lHs5syGb7EPXKlNPM0', '51402fbe63cde947eaf1211f32cbc559e989412853d0b823df182f8f38de82361a30cddf73235e71d652ccbf0bfdb3ea2f2e95e20e58e7d5824afd0307c211e2', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:33:52', '2009-09-07 07:33:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:33:52', NULL, NULL, NULL, '2009-09-07 07:33:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "created_at" = '2009-09-07 07:33:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 07:33:52', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:33:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '79ddb79300c39e4e487e3ff6d11457e34ebb87401d3a370f72901d846d8040930c28cec008954dc4f38e8da19de8a676404f95edf3f82f8666242f84996f0d51') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:33:52', '9badf55aff06d7e69a99743d4552a1196cbb9feb7dd9f3b834443907a3d5e0520583951686092823777f5e9141d6f9f048385bb7242031587024a46fa86c12af', '2009-09-07 07:33:52', 'subscriber', 'uaqZGOyggbsOs5Fsjt8k', '79ddb79300c39e4e487e3ff6d11457e34ebb87401d3a370f72901d846d8040930c28cec008954dc4f38e8da19de8a676404f95edf3f82f8666242f84996f0d51', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:33:52', '2009-09-07 07:33:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.2ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:33:52', NULL, NULL, NULL, '2009-09-07 07:33:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "created_at" = '2009-09-07 07:33:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:33:52', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:33:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 5ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:33:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 07:51:26', 0, '2009-09-07 07:51:26', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (65.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 07:51:26', 1000, '2009-09-07 07:51:26', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 07:51:26', 30000, '2009-09-07 07:51:26', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9d001be35c6813e577905ff16297778f9cbfd9cd620c036ca003a91511eaf2bf66edc2c5562b5c8ebf0e0f091085182e46a1d9df5ba69f498632319abd7d37f6') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 07:51:26', '3a95793382c9392dd8e4a2660732e0466d8ea6e6e277d2edd48c21e9e8e9f0ae50387cc33ba478cb4142b514b3409710fa12c81e99fef64756cd7f02a1e906ce', '2009-09-07 07:51:26', 'subscriber', '5WX0gA-Eaov7RXZxBjhv', '9d001be35c6813e577905ff16297778f9cbfd9cd620c036ca003a91511eaf2bf66edc2c5562b5c8ebf0e0f091085182e46a1d9df5ba69f498632319abd7d37f6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 07:51:26', '2009-09-07 07:51:26', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 07:51:26', NULL, NULL, NULL, '2009-09-07 07:51:26', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:51:26', "created_at" = '2009-09-07 07:51:26', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 07:51:26', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 03:51:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 16ms (View: 11, DB: 69) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 03:51:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 6ms (DB: 0) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 03:51:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 08:52:56', 0, '2009-09-07 08:52:56', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 08:52:56', 1000, '2009-09-07 08:52:56', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 08:52:56', 30000, '2009-09-07 08:52:56', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ac4dda7fc47f29fdf3ab43c0887a17faefd33fd6f06d7ab65fa85efdd822e405f3c39f85ad66331117864c8de76c9644ab0d43c929de1cfda77c450e7f0216a1') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 08:52:56', '78b74311d69f9ce412070d3b886c314b3db95c179190909eb71cca66d04d166a6992e32d92947ee1d42d90f5244720a91e81e714457e9d94df99e3852d881573', '2009-09-07 08:52:56', 'subscriber', 'PiLizUSDD7q8KDpChS-h', 'ac4dda7fc47f29fdf3ab43c0887a17faefd33fd6f06d7ab65fa85efdd822e405f3c39f85ad66331117864c8de76c9644ab0d43c929de1cfda77c450e7f0216a1', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 08:52:56', '2009-09-07 08:52:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 08:52:57', NULL, NULL, NULL, '2009-09-07 08:52:57', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:52:57', "created_at" = '2009-09-07 08:52:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:52:57', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 04:52:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 24ms (View: 20, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 04:52:57) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 04:52:57) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 08:55:46', 0, '2009-09-07 08:55:46', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (60.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 08:55:46', 1000, '2009-09-07 08:55:46', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 08:55:46', 30000, '2009-09-07 08:55:46', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e6b6967597c3d462fc617a76567662eb78eb0b90815b8ab6fc3c6f8b000c32590b05c2ec66fae7a9975af3ab51cd031e63f4a474a2315d403e9dd24874968ce2') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 08:55:46', '6a694f4625ba8bfe3254ecc4549eae60094b53b3cf8f058db8cc5bb5f955e288d6eda78bd65c4c2bb344ca5c9ae5622dde457d6ee2291bd5c74ef2991a33a29c', '2009-09-07 08:55:46', 'subscriber', 'okR8EUE5Lstj71CqPWjs', 'e6b6967597c3d462fc617a76567662eb78eb0b90815b8ab6fc3c6f8b000c32590b05c2ec66fae7a9975af3ab51cd031e63f4a474a2315d403e9dd24874968ce2', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 08:55:46', '2009-09-07 08:55:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 08:55:46', NULL, NULL, NULL, '2009-09-07 08:55:46', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:55:46', "created_at" = '2009-09-07 08:55:46', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:55:46', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 04:55:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 65) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 04:55:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 04:55:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 08:56:05', 0, '2009-09-07 08:56:05', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (51.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 08:56:05', 1000, '2009-09-07 08:56:05', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 08:56:05', 30000, '2009-09-07 08:56:05', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '851deea099828ef461e930a8e8f939503131b77a94e029a8eaff85a13998477b1829c1b99a92c763a40c750e6ffb3aff2ad52ab1ae3c86f4f25b7577e83d61ee') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 08:56:05', 'e20e3abb2f5d2e30237761b5b049aa77df5aabe2c755bdad23d06e68c3e8634547cbec292a0189b70f1c7a93621bdea967d1d496568996117f5feaeb36973857', '2009-09-07 08:56:05', 'subscriber', '9KoCp61tk5aCMPjRUrvj', '851deea099828ef461e930a8e8f939503131b77a94e029a8eaff85a13998477b1829c1b99a92c763a40c750e6ffb3aff2ad52ab1ae3c86f4f25b7577e83d61ee', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 08:56:05', '2009-09-07 08:56:05', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 08:56:05', NULL, NULL, NULL, '2009-09-07 08:56:05', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:56:05', "created_at" = '2009-09-07 08:56:05', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:56:05', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 04:56:05) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 15ms (View: 11, DB: 55) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 04:56:05) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 04:56:06) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 08:58:32', 0, '2009-09-07 08:58:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (70.2ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 08:58:33', 1000, '2009-09-07 08:58:33', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 08:58:33', 30000, '2009-09-07 08:58:33', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3e77fd77ef6feb5759a5b5b9823dbc1fa6044799052c204855480f3f9fb5c425f49d0d9560d7d3df9582a7f106edb551ef25e862ab6109ed8c16e0c21aed57ef') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 08:58:33', '2506a337d1778f2c39ac498a66371791c715b1bcc78aea9290fdde46444e8706f67b028b968898a0c87dbf2092203a3aa8a80ec96471e8d23e0927893cf0c0dc', '2009-09-07 08:58:33', 'subscriber', '9rikmmrhaPxeTw-wnzo1', '3e77fd77ef6feb5759a5b5b9823dbc1fa6044799052c204855480f3f9fb5c425f49d0d9560d7d3df9582a7f106edb551ef25e862ab6109ed8c16e0c21aed57ef', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 08:58:33', '2009-09-07 08:58:33', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 08:58:33', NULL, NULL, NULL, '2009-09-07 08:58:33', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:58:33', "created_at" = '2009-09-07 08:58:33', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:58:33', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 04:58:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 15ms (View: 11, DB: 74) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 04:58:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 04:58:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 08:59:31', 0, '2009-09-07 08:59:31', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (63.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 08:59:31', 1000, '2009-09-07 08:59:31', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 08:59:31', 30000, '2009-09-07 08:59:31', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '74c4c98027291417955081df09daa7273fb7afe357f0b4c0ac4b1aad3868ab6354e30715621fd3f841c082a1fa5b27302b41cdcba3a2edd4f5a1561bf9d55aac') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 08:59:31', '8f8b4fce848dc8add2255bc5f0151ce0036c0ee97900d7681e581d89f2b051cd81dc0923fdf295c06212b4639e0e23d018c5f26a03535c9b865ab3d939dca682', '2009-09-07 08:59:31', 'subscriber', '-Q-RVPK4yrnn1hCcgWc1', '74c4c98027291417955081df09daa7273fb7afe357f0b4c0ac4b1aad3868ab6354e30715621fd3f841c082a1fa5b27302b41cdcba3a2edd4f5a1561bf9d55aac', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 08:59:31', '2009-09-07 08:59:31', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 08:59:31', NULL, NULL, NULL, '2009-09-07 08:59:31', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:59:31', "created_at" = '2009-09-07 08:59:31', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 08:59:31', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 04:59:31) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 16ms (View: 11, DB: 68) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 04:59:31) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 04:59:31) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (8.3ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:00:36', 0, '2009-09-07 09:00:36', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:00:36', 1000, '2009-09-07 09:00:36', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:00:36', 30000, '2009-09-07 09:00:36', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e2ca61aef587d759cc4f1315bfe41b267dc8bc7c86c5905a1a5d235493a20d4fd89b7e042ddb3770baeb26a6f0ee742c4551667f9cbddbdc25400ed1bf6abb28') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:00:36', 'cafeaf3c6f7283f6b2d15503d565be65aeb1433be98e4f3d8f279aab04d43aab60dfcf42fd86c506cd14d3488c71f99ecdca0a87a0aa021a0dd0109390fc3981', '2009-09-07 09:00:36', 'subscriber', 'CLv1up6Cr0AmIjyScVCf', 'e2ca61aef587d759cc4f1315bfe41b267dc8bc7c86c5905a1a5d235493a20d4fd89b7e042ddb3770baeb26a6f0ee742c4551667f9cbddbdc25400ed1bf6abb28', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:00:36', '2009-09-07 09:00:36', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:00:36', NULL, NULL, NULL, '2009-09-07 09:00:36', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:00:36', "created_at" = '2009-09-07 09:00:36', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:00:36', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:00:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 33ms (View: 28, DB: 13) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:00:37) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 226ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:00:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (34.3ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:04:16', 0, '2009-09-07 09:04:16', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:04:16', 1000, '2009-09-07 09:04:16', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:04:16', 30000, '2009-09-07 09:04:16', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0f8c0429aca8b60e18262472de1c0f0a31ae5b3406a6fe9c546b26843b9a72e7008cbf89aefe03980d7f6124879f1cda48f60c09e0fd6f9cf48c4e0b17676928') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:04:17', '8998080689c076e9301ed95e216998ea59707c539452a66f1a5cad5c81a66dec4c3fe1af7d642bd80a711c11d6c068b543c097d545ed6443b3e976d3eb5054dc', '2009-09-07 09:04:17', 'subscriber', '5TaxTEvcnVkh8s-kBaC1', '0f8c0429aca8b60e18262472de1c0f0a31ae5b3406a6fe9c546b26843b9a72e7008cbf89aefe03980d7f6124879f1cda48f60c09e0fd6f9cf48c4e0b17676928', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:04:17', '2009-09-07 09:04:17', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:04:17', NULL, NULL, NULL, '2009-09-07 09:04:17', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:04:17', "created_at" = '2009-09-07 09:04:17', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:04:17', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:04:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 35ms (View: 30, DB: 39) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:04:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.7ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 255ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:04:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 16ms (View: 11, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (34.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:07:07', 0, '2009-09-07 09:07:07', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:07:07', 1000, '2009-09-07 09:07:07', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:07:07', 30000, '2009-09-07 09:07:07', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'acf2fbe31666be33cc1279a97defa074ca6b1cacc17196ba7379705e509cb909a7d971901bac39bf5f22c45e08a0ec0d213fa685d6cac396cf16d3dfb0c9fcad') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:07:08', 'be004dcf059f328877317647e50e8408b75182851a086771bd1ffcb7064b80f9ffe7d24945093807d7a708bc7441d87c832dc9022b872aece45ed6f763c92d18', '2009-09-07 09:07:08', 'subscriber', 'zwVndgrtQLu-wih-HlDv', 'acf2fbe31666be33cc1279a97defa074ca6b1cacc17196ba7379705e509cb909a7d971901bac39bf5f22c45e08a0ec0d213fa685d6cac396cf16d3dfb0c9fcad', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:07:08', '2009-09-07 09:07:08', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:07:08', NULL, NULL, NULL, '2009-09-07 09:07:08', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:07:08', "created_at" = '2009-09-07 09:07:08', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:07:08', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:07:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 25ms (View: 20, DB: 39) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:07:08) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 199ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:07:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (1.2ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:07:29', 0, '2009-09-07 09:07:29', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:07:29', 1000, '2009-09-07 09:07:29', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:07:29', 30000, '2009-09-07 09:07:29', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '304d195ea7785e594061845985c12389dc9d3021406714e29050911495203913ad1a2c9bc6372715b194a9372dccd054ae97164ae38c94b2548c60c439852f39') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:07:29', '4166f7b48588b5527372f4d5602f17e44ab9b68c96c46f9c32e1cd7474d7df469be01558dcc87c7550b1936660cfa8c45387fb6dcd07be351597d21529138861', '2009-09-07 09:07:29', 'subscriber', 'lHojThEIwJN0xM339UM0', '304d195ea7785e594061845985c12389dc9d3021406714e29050911495203913ad1a2c9bc6372715b194a9372dccd054ae97164ae38c94b2548c60c439852f39', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:07:29', '2009-09-07 09:07:29', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:07:29', NULL, NULL, NULL, '2009-09-07 09:07:29', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:07:29', "created_at" = '2009-09-07 09:07:29', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:07:29', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:07:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 24ms (View: 19, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:07:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 170ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:07:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:07:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 239ms (View: 224, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:07:51', 0, '2009-09-07 09:07:51', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:07:51', 1000, '2009-09-07 09:07:51', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:07:51', 30000, '2009-09-07 09:07:51', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b7fd49fd3e62c407b7663a82ec47591cf777779c4052c9030660a3a97265366a72c73999f0c27748c1b9fceb01fac339aa106ddad2ce6a45e9e171df1278c250') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:07:51', '578f1a35e33b73d9e57f5f8a35ead09c6b9892f52853692c4d6b54398f4e79b30667585f925a6a9a4658d82687980cb7c6c182eed711b5441a68c2cb7236bfa4', '2009-09-07 09:07:51', 'subscriber', 'n0tZXa1G3u3mh2tDrXgZ', 'b7fd49fd3e62c407b7663a82ec47591cf777779c4052c9030660a3a97265366a72c73999f0c27748c1b9fceb01fac339aa106ddad2ce6a45e9e171df1278c250', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:07:51', '2009-09-07 09:07:51', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:07:51', NULL, NULL, NULL, '2009-09-07 09:07:51', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:07:51', "created_at" = '2009-09-07 09:07:51', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:07:51', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:07:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:07:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:07:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:07:52) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.7ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (3.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 232ms (View: 212, DB: 6) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:08:25', 0, '2009-09-07 09:08:25', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (57.4ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:08:25', 1000, '2009-09-07 09:08:25', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:08:25', 30000, '2009-09-07 09:08:25', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '64a7c15aee5504667bb5fb5ad6932ce3b098f58f1d75cfab91178e123f606ef3af58ba940613c760a6d0204a219b2737e1145684cf322da870306b00f41dc328') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:08:25', 'ba9dab02c5c2b0246561b55c404c1557bb64da722a8d8a8953eac8111ca4849cb4d6ed808a87b1478488010eb1a02d5fbb003a05128727a5480378a18e9b601d', '2009-09-07 09:08:25', 'subscriber', 'TfZF-txIpJUWKtBDOi6z', '64a7c15aee5504667bb5fb5ad6932ce3b098f58f1d75cfab91178e123f606ef3af58ba940613c760a6d0204a219b2737e1145684cf322da870306b00f41dc328', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:08:25', '2009-09-07 09:08:25', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:08:25', NULL, NULL, NULL, '2009-09-07 09:08:25', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:08:25', "created_at" = '2009-09-07 09:08:25', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:08:25', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:08:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 62) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:08:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 112ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:08:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:08:26) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (3.4ms)
Completed in 57ms (View: 41, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:09:06', 0, '2009-09-07 09:09:06', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (66.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:09:06', 1000, '2009-09-07 09:09:06', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:09:06', 30000, '2009-09-07 09:09:06', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bf4b64ba7e4553dfa194118a2e75f71804b1a314a40ba260215e9a7cbdc331115ca4e79525aff4e3dd1ce80e309dbda69b6e79a7325283ea5b2267b7086ad10b') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:09:07', '2f93d0036929f56544ab907b03ef578f29feb83d927fe119b748ae4f784951400deff112429e3ee7f54588f2daf4d63711b658811a293551d2a66972329eb145', '2009-09-07 09:09:07', 'subscriber', 'cdOpdSwIjhvx0A5I0ceC', 'bf4b64ba7e4553dfa194118a2e75f71804b1a314a40ba260215e9a7cbdc331115ca4e79525aff4e3dd1ce80e309dbda69b6e79a7325283ea5b2267b7086ad10b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:09:07', '2009-09-07 09:09:07', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:09:07', NULL, NULL, NULL, '2009-09-07 09:09:07', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:09:07', "created_at" = '2009-09-07 09:09:07', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:09:07', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:09:07) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.0ms)
Completed in 16ms (View: 11, DB: 71) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:09:07) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:09:07) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:09:07) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 233ms (View: 220, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:09:24', 0, '2009-09-07 09:09:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:09:24', 1000, '2009-09-07 09:09:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:09:24', 30000, '2009-09-07 09:09:24', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '52280c4acd36d7e0753f7d7ab8eccf7a523dedf08e87555733e6fe24cc8c21d1ea12823d87eef1d52b39625c797b6359650e2e8bbb6fdd9cc17f2a066b6ac8df') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:09:24', '3b14fe610094667e3e445d75ee759d1d7b37eb691a43eeba356d0ab9826f1fe4cadf698cb0a696782f920bba2441ebe3c9330541bef0089a5425a36313941c39', '2009-09-07 09:09:24', 'subscriber', 'Pybop1R5i4CmnY7UhfX6', '52280c4acd36d7e0753f7d7ab8eccf7a523dedf08e87555733e6fe24cc8c21d1ea12823d87eef1d52b39625c797b6359650e2e8bbb6fdd9cc17f2a066b6ac8df', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:09:24', '2009-09-07 09:09:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:09:24', NULL, NULL, NULL, '2009-09-07 09:09:24', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:09:24', "created_at" = '2009-09-07 09:09:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:09:24', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:09:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 16ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:09:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 113ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:09:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:09:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 241ms (View: 228, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:10:02', 0, '2009-09-07 09:10:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:10:02', 1000, '2009-09-07 09:10:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:10:02', 30000, '2009-09-07 09:10:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a6cc8e393a90653ccaa58e76fb698b827b2febde10086c736df78bc9719a510b44eba2ebfa2a4fe369505681e5658b1d716ac4724059fbbef26230569e59bc76') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:10:03', '67a2018cda83550ee8837e774d2c3ece98286f4bdc38c7ae18d410eb16347cc3207249c00c32c5fde39427071b736add2ed542e7b7d6fb5fa5e19d108f11e753', '2009-09-07 09:10:03', 'subscriber', 'pKPbOM0aUfW_Nu3aaViP', 'a6cc8e393a90653ccaa58e76fb698b827b2febde10086c736df78bc9719a510b44eba2ebfa2a4fe369505681e5658b1d716ac4724059fbbef26230569e59bc76', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:10:03', '2009-09-07 09:10:03', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:10:03', NULL, NULL, NULL, '2009-09-07 09:10:03', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:10:03', "created_at" = '2009-09-07 09:10:03', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:10:03', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 09:10:03', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:10:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.2ms)
Completed in 16ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:10:03) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:10:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:10:03) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 232ms (View: 219, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:10:35', 0, '2009-09-07 09:10:35', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (53.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:10:35', 1000, '2009-09-07 09:10:35', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:10:35', 30000, '2009-09-07 09:10:35', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b9751b905af41c9708c654259672e8d1e4b37d761b5d9d9efdf9540a1e25da369768f4e21da8868f2509d58dd8cb241fb1b9c5d65273ac2475ae7a0700400d78') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:10:35', '42af90aad7303b5b162ae7dbf55a589d70e0d59bdbf59b6805c4396bfe66994a36c61ac02210d4a29b183770072d24988ee422ada3a497ae080c16d60df34859', '2009-09-07 09:10:35', 'subscriber', 'MI4oR4aLnf5C2ZqRntLg', 'b9751b905af41c9708c654259672e8d1e4b37d761b5d9d9efdf9540a1e25da369768f4e21da8868f2509d58dd8cb241fb1b9c5d65273ac2475ae7a0700400d78', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:10:35', '2009-09-07 09:10:35', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:10:35', NULL, NULL, NULL, '2009-09-07 09:10:35', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:10:35', "created_at" = '2009-09-07 09:10:35', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:10:35', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 09:10:35', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:10:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 17ms (View: 13, DB: 58) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:10:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 117ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:10:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:10:35) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 322ms (View: 309, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:11:47', 0, '2009-09-07 09:11:47', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:11:47', 1000, '2009-09-07 09:11:47', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:11:47', 30000, '2009-09-07 09:11:47', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd317594cd624565ce722ef1291d84121fe14c8534f671594c005c08a75dded9721e40ff2d886513d87be7c951a59861c611bf95eb1408e264eeab07dbd309c19') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:11:48', '9dcb817f096857c976bfe1eb4c56d1c2af21a57bff804798fd34546d86755134ea471a6797747536eddedff5afe19b21cb87ba0b7df1cac9be99aa05c19bd110', '2009-09-07 09:11:48', 'subscriber', '7OjpSNdLKRK5BD_V3Zu0', 'd317594cd624565ce722ef1291d84121fe14c8534f671594c005c08a75dded9721e40ff2d886513d87be7c951a59861c611bf95eb1408e264eeab07dbd309c19', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:11:48', '2009-09-07 09:11:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:11:48', NULL, NULL, NULL, '2009-09-07 09:11:48', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:11:48', "created_at" = '2009-09-07 09:11:48', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:11:48', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:11:48', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 09:11:48', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:11:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:11:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:11:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:12:41', 0, '2009-09-07 09:12:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (49.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:12:41', 1000, '2009-09-07 09:12:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:12:41', 30000, '2009-09-07 09:12:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '03db4eba37a891239a5f54516a67d9a77c729e017f3dc1976d1e610243a8bff5d2c1cd343d4453f52c9f2226a6e4ab9623a6c7ea3c36e1b9e0ecdf628369a2d8') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:12:41', '9d718373ca83c3b934eb247996e2d43d2319f77c99753c90358a4642e260c559c8000ed7701d8feb759a581de31db8a919030e19e77c90f2249cee8c90489257', '2009-09-07 09:12:41', 'subscriber', 'xSqF6bNsZCpAsVIH2whm', '03db4eba37a891239a5f54516a67d9a77c729e017f3dc1976d1e610243a8bff5d2c1cd343d4453f52c9f2226a6e4ab9623a6c7ea3c36e1b9e0ecdf628369a2d8', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:12:41', '2009-09-07 09:12:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:12:41', NULL, NULL, NULL, '2009-09-07 09:12:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:12:41', "created_at" = '2009-09-07 09:12:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:12:41', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:12:41', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 09:12:41', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:12:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 54) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:12:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:12:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:15:13', 0, '2009-09-07 09:15:13', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:15:13', 1000, '2009-09-07 09:15:13', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:15:13', 30000, '2009-09-07 09:15:13', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1f0ddc04ce8185fc788af553c79d493fe155e375133acca594758e71e63ded51fe77c1c5b64ded5eb3f35e7cd8e20b1747930882458efd36f16ba58b5c817826') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:15:13', '51c80c2b1ff03896a9e86108d98a9591a5293378a52254b0963f2473bfe6009528ab91861b8f15a9ae838ffb98514e2e54d71bde40cfe6e8839bfbcc281245b8', '2009-09-07 09:15:13', 'subscriber', 'wHDERSOPgZJAvLVTJpIZ', '1f0ddc04ce8185fc788af553c79d493fe155e375133acca594758e71e63ded51fe77c1c5b64ded5eb3f35e7cd8e20b1747930882458efd36f16ba58b5c817826', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:15:13', '2009-09-07 09:15:13', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:15:13', NULL, NULL, NULL, '2009-09-07 09:15:13', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:15:13', "created_at" = '2009-09-07 09:15:13', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:15:13', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:15:13', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 09:15:13', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:15:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:15:13) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:15:13) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 09:15:52', 0, '2009-09-07 09:15:52', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (60.8ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 09:15:52', 1000, '2009-09-07 09:15:52', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 09:15:52', 30000, '2009-09-07 09:15:52', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8bb2bdfb86627994780532fc54ca428e29bba8f05984d95ebde15638fc014232cc8b3823702319032513357597b1ce7b0268798f5d1efb8064eeb40240c7ae3d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 09:15:53', 'd33c12167e1a04d9e030f8ed1247c3587576ee2c5e3fa9df9c0af23cd076699b8b362ded824234344c439889ad5bdda5057ee04f913238a306349fd1d914871a', '2009-09-07 09:15:53', 'subscriber', 'B255iS_NTv7yVtb1Ar1n', '8bb2bdfb86627994780532fc54ca428e29bba8f05984d95ebde15638fc014232cc8b3823702319032513357597b1ce7b0268798f5d1efb8064eeb40240c7ae3d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 09:15:53', '2009-09-07 09:15:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 09:15:53', NULL, NULL, NULL, '2009-09-07 09:15:53', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:15:53', "created_at" = '2009-09-07 09:15:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:15:53', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 09:15:53', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 09:15:53', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 05:15:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 65) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 05:15:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 05:15:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 05:15:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 24ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:00:26', 0, '2009-09-07 10:00:26', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (74.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:00:26', 1000, '2009-09-07 10:00:26', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:00:26', 30000, '2009-09-07 10:00:26', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '76970474e049519d8bf08cd767135e23f60dee6013e9762cdd413a9cf332e6c0806d6c9869b1f7719dad1bd617203133d9a08cbfb919e78baa2288c83931d112') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:00:27', 'ac1b089335ee398f9537029a390d2ae52a6a865b5e1e07089592d534f323c7afe10d43889db89e61f40709ba33a03c23c2cee8885cb1bf9b16fdf3dd594e2b8b', '2009-09-07 10:00:27', 'subscriber', 'A_Wh4UiOA6b6eK4kD-tb', '76970474e049519d8bf08cd767135e23f60dee6013e9762cdd413a9cf332e6c0806d6c9869b1f7719dad1bd617203133d9a08cbfb919e78baa2288c83931d112', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:00:27', '2009-09-07 10:00:27', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:00:27', NULL, NULL, NULL, '2009-09-07 10:00:27', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:27', "created_at" = '2009-09-07 10:00:27', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:00:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 16ms (View: 12, DB: 78) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:00:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 06:00:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c106b5a455416b9a66ea8380572cad95aa69de44d92609314df0bda1ad444b409e7afcfc93c33f0eee1aa7ce987f4b37a47f69ca93b273eb72f2803ccf081ad2') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:00:27', '20e6acf31d663869199805813d433f52665b850ad74476fa52d8368b20edace1ce6c7c0b44d8e7af8bb4e989c1f334967d046aeb9b89e5fb2962eebccea0add4', '2009-09-07 10:00:27', 'subscriber', 'MORn4t2kgtMJ3uhKXp5G', 'c106b5a455416b9a66ea8380572cad95aa69de44d92609314df0bda1ad444b409e7afcfc93c33f0eee1aa7ce987f4b37a47f69ca93b273eb72f2803ccf081ad2', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:00:27', '2009-09-07 10:00:27', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:00:27', NULL, NULL, NULL, '2009-09-07 10:00:27', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:27', "created_at" = '2009-09-07 10:00:27', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:00:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:00:27) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 145ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:00:27) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 06:00:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.5ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:00:27) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '94dbab70896ada02a0c1ee9012e8e153f7a9365aac20ce5e4f239e73e42b18e9e67ff35e61e70e51296b7654e18ead18a05d3796b1972a4ffe21ee2b4861d7d8') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:00:27', '439e245efddf718953ca0bf43cc20ae99456291645a8b41f771f06d9e0bee753cb3544a64e39cc82628b01c865f7de4fc366500980cad8e1200cb53b5b49be42', '2009-09-07 10:00:27', 'subscriber', 'qb3b14Q330r__-9UYIbK', '94dbab70896ada02a0c1ee9012e8e153f7a9365aac20ce5e4f239e73e42b18e9e67ff35e61e70e51296b7654e18ead18a05d3796b1972a4ffe21ee2b4861d7d8', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:00:27', '2009-09-07 10:00:27', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:00:27', NULL, NULL, NULL, '2009-09-07 10:00:27', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:27', "created_at" = '2009-09-07 10:00:27', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:27', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:00:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:00:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:00:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:00:28) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (7.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '18062db323fe26be903d8f3ed690a98073b721e674a38cab1dac6dde6f39e3f83a9e2e5778080db09061760fa6c1307c804b03bac1bc017b2432336eac58d476') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.8ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:00:28', '7d2ea30fa609dd0a3942f05a1d9e7707ba91732942bdf28187150a27a8999454367b0d8bb8fda1b11ee30cd1ea56e27bc97a116f6215adb0b2cacc3ea31d1cb3', '2009-09-07 10:00:28', 'subscriber', 'ZFnUYMdsP1-OcHS0xBGm', '18062db323fe26be903d8f3ed690a98073b721e674a38cab1dac6dde6f39e3f83a9e2e5778080db09061760fa6c1307c804b03bac1bc017b2432336eac58d476', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:00:28', '2009-09-07 10:00:28', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:00:28', NULL, NULL, NULL, '2009-09-07 10:00:28', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:28', "created_at" = '2009-09-07 10:00:28', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:28', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:00:28', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:00:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 5, DB: 11) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:00:28) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.9ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 31ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:00:28) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:00:28) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 37ms (View: 26, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b68d90a59bf5f8cff9510f252e775510c8d502d6ccb8ddb64d7a3cab1e198170f67e64c6843d9bf3b11b743e1369100021fad52ecfbc378592c6c6a4253edc47') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:00:28', '855c24b4eb655de2b0cc0366065c3480e13228b2a983da45765e3a42689bc2df832bf60844d6dafdbc0f4258067912c515e0c92669be3f0e897d2e4589fc1a59', '2009-09-07 10:00:28', 'subscriber', 'XLJTgAUvry7uXPsMEXQn', 'b68d90a59bf5f8cff9510f252e775510c8d502d6ccb8ddb64d7a3cab1e198170f67e64c6843d9bf3b11b743e1369100021fad52ecfbc378592c6c6a4253edc47', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:00:28', '2009-09-07 10:00:28', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:00:28', NULL, NULL, NULL, '2009-09-07 10:00:28', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:28', "created_at" = '2009-09-07 10:00:28', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:28', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:28', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:00:28', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:00:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (227.3ms)
Completed in 232ms (View: 231, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:00:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:00:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:00:29) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7194af4467e12fda9aa40267c1116ecae3f4a9c2f16f38fba20ccaffe82d9ab0fb214180e1449f34b47c3a7824c228df202a5c6974754b937c2c29aa975c2c92') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:00:29', 'af573fb7c3dd857915daea0b4fbe5c07c6e6fe91ece27db41f390d82ddd1922d8ae2371a52e5df210ac89fae5807b7f5fe96d22fe0a152fd84ddc59e406870fd', '2009-09-07 10:00:29', 'subscriber', 'jbENZhQ5-StunVvZMmhL', '7194af4467e12fda9aa40267c1116ecae3f4a9c2f16f38fba20ccaffe82d9ab0fb214180e1449f34b47c3a7824c228df202a5c6974754b937c2c29aa975c2c92', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:00:29', '2009-09-07 10:00:29', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:00:29', NULL, NULL, NULL, '2009-09-07 10:00:29', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:29', "created_at" = '2009-09-07 10:00:29', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:29', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:00:29', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:00:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 5ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:00:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:00:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:04:28', 0, '2009-09-07 10:04:28', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (56.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:04:28', 1000, '2009-09-07 10:04:28', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:04:28', 30000, '2009-09-07 10:04:28', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '14ec9b798cc224c2fe8e6258758c8d80e068125b8ad958980c00d72c0f8ed4aae5518726cc761d33ffcd4f2d12696afd63984ebe5a95cb092aba643883b49f59') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:04:28', '58749b71fbceb14c31e7470e4f09992500d294705de7c4a56ab0b8cda41de5a251699faffab0915437570603f80468cb304df8690314fa4fef2b8dd653b324b8', '2009-09-07 10:04:28', 'subscriber', 'UJ05MTDIwrj9VwX-JrFU', '14ec9b798cc224c2fe8e6258758c8d80e068125b8ad958980c00d72c0f8ed4aae5518726cc761d33ffcd4f2d12696afd63984ebe5a95cb092aba643883b49f59', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:04:28', '2009-09-07 10:04:28', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:04:28', NULL, NULL, NULL, '2009-09-07 10:04:28', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:28', "created_at" = '2009-09-07 10:04:28', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:04:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 61) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:04:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 06:04:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e68cd7e95b3b00f1132cd0e607cc2f8b5971144c717d77e881da6d2281f841ce800adeb56b1df52be7881449532714a5bd242cc47b9ba61abe19faded89ec78c') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:04:29', 'bb41b02af97a4721be6c9a49778390ac9392c6e633d87c695aa82f85e3cd8a7f7a19ad6c15e7788b62d7a5f5c5c4ce68c8bfa8181f3d504a95cf4511e37cdf17', '2009-09-07 10:04:29', 'subscriber', 'bEiSw8Fnm09V6PigHQec', 'e68cd7e95b3b00f1132cd0e607cc2f8b5971144c717d77e881da6d2281f841ce800adeb56b1df52be7881449532714a5bd242cc47b9ba61abe19faded89ec78c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:04:29', '2009-09-07 10:04:29', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:04:29', NULL, NULL, NULL, '2009-09-07 10:04:29', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:29', "created_at" = '2009-09-07 10:04:29', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:04:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:04:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:04:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 06:04:29) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.5ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:04:29) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 23ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a10ebdb66458eecf96371b72d08f69654aad1d1af1751ebe74f57aae25be5f67e44eae8810b461d0a0b0a375e84cc2a4e847e08c66dd333e540d08f5f787a73d') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:04:29', '997fc72045448205e2c081b2cd124aa93e66dc4a2cc79f7fa2bab04b6cf9f537a1b00e656b52a62ed8bf1e9a791e45515bf2669bc718c93b894a399df0e9820a', '2009-09-07 10:04:29', 'subscriber', 'IpY75sFo2H-3mddR8k6n', 'a10ebdb66458eecf96371b72d08f69654aad1d1af1751ebe74f57aae25be5f67e44eae8810b461d0a0b0a375e84cc2a4e847e08c66dd333e540d08f5f787a73d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:04:29', '2009-09-07 10:04:29', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (4.2ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:04:29', NULL, NULL, NULL, '2009-09-07 10:04:29', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:29', "created_at" = '2009-09-07 10:04:29', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:29', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:04:29) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 7ms (View: 6, DB: 8) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:04:29) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:04:29) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bd5a650dd209a32c7f46b34d9ef1a9a8bf67184850ba40e387e0cbdb39011daeaef064e74a19f2fa21a4f01d5831a5527861a0ac69f017850c7284028b2c6650') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:04:30', 'c6410ac5bcbe4294f327d6c30310e889d79c5a39336eacabbacfc01b2628d3557cc38086123e19b383086a732d3469041960663d508c05f7ac244f7712e8fc65', '2009-09-07 10:04:30', 'subscriber', 'z3dhAY9LDiYwsh_2Bts0', 'bd5a650dd209a32c7f46b34d9ef1a9a8bf67184850ba40e387e0cbdb39011daeaef064e74a19f2fa21a4f01d5831a5527861a0ac69f017850c7284028b2c6650', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:04:30', '2009-09-07 10:04:30', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:04:30', NULL, NULL, NULL, '2009-09-07 10:04:30', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "created_at" = '2009-09-07 10:04:30', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:04:30', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:04:30) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 32ms (View: 23, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8b02d52465637c8e7592bf15f63f8c6b0a11e72731b0ddaa807c64db20a9f9b0d76b8780960055f23070d73df0423a9816aac109902ce30c154b8400fc421689') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:04:30', 'b91bc6ea917db1fec30d07ba9bef4184080de85a2341305963943f704b6a06895c9ecfdb12063f65a83ce2839cbfb5bab18abe86565aa1fcbe7a0a9932026c94', '2009-09-07 10:04:30', 'subscriber', '8undh7XZH_I05Sq0EA4N', '8b02d52465637c8e7592bf15f63f8c6b0a11e72731b0ddaa807c64db20a9f9b0d76b8780960055f23070d73df0423a9816aac109902ce30c154b8400fc421689', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:04:30', '2009-09-07 10:04:30', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:04:30', NULL, NULL, NULL, '2009-09-07 10:04:30', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "created_at" = '2009-09-07 10:04:30', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.5ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:04:30', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (233.0ms)
Completed in 238ms (View: 237, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:04:30) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e991786484396ef37004bd7d564c588b884bfa00948defdb9547db26f2ff93652ce13c416d91e9c697f2d337a8054612f32a31fb430da18f28deef1a1afa8f2a') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:04:30', '1000ccd44121c61e9b8ddd67806772563c248bb5c96a182e5f52b6854831923634759a39ae7ee176121cc3d100833e633e7d0cdcea15c19bb41eae0274b70fd2', '2009-09-07 10:04:30', 'subscriber', 'lWo5p9bKIAG3w4DOY2DI', 'e991786484396ef37004bd7d564c588b884bfa00948defdb9547db26f2ff93652ce13c416d91e9c697f2d337a8054612f32a31fb430da18f28deef1a1afa8f2a', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:04:30', '2009-09-07 10:04:30', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:04:30', NULL, NULL, NULL, '2009-09-07 10:04:30', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "created_at" = '2009-09-07 10:04:30', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:04:30', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:04:30) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:04:30) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:10:51', 0, '2009-09-07 10:10:51', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:10:51', 1000, '2009-09-07 10:10:51', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:10:51', 30000, '2009-09-07 10:10:51', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2edd1937ae16e6f0edba701cefde1178415909231930bb476c16cedc2cb8f4f70946a34de42bb26b45991a588d686dc688a3e3b4b99c903c4a8edeb75729324a') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:10:52', 'bbd5b5d402372cdc920048467e44c9ac1547d287c59ffac0ed9fa298a6fc00328ef49e9d251f9ac00f57b9b8847d663f81b48fb58ab71c4c21d0124b6988e599', '2009-09-07 10:10:52', 'subscriber', 'zNiB-aHjYhWTgK7bMCyG', '2edd1937ae16e6f0edba701cefde1178415909231930bb476c16cedc2cb8f4f70946a34de42bb26b45991a588d686dc688a3e3b4b99c903c4a8edeb75729324a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:10:52', '2009-09-07 10:10:52', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:10:52', NULL, NULL, NULL, '2009-09-07 10:10:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:10:52', "created_at" = '2009-09-07 10:10:52', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:10:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:10:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 06:10:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (79.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:11:04', 0, '2009-09-07 10:11:04', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:11:04', 1000, '2009-09-07 10:11:04', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:11:04', 30000, '2009-09-07 10:11:04', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5b13a531f0664f8c22d883fd0a70875c3077c05566da57e6a28a3e3608567d02bb75792cfa7601da7479c22d464c696bcb1d6bc84608cf233934e6a93ca7061f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:11:04', 'a07af6fc6e87da58cbd471050c0187b1753805a272f9392270828b60d502fe512210ea0140560e611ddc7b668ef744ac06901566507043825fe52d407a57d4e8', '2009-09-07 10:11:04', 'subscriber', 'CO9D3qcrGRSuMUa72bKj', '5b13a531f0664f8c22d883fd0a70875c3077c05566da57e6a28a3e3608567d02bb75792cfa7601da7479c22d464c696bcb1d6bc84608cf233934e6a93ca7061f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:11:04', '2009-09-07 10:11:04', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:11:04', NULL, NULL, NULL, '2009-09-07 10:11:04', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:11:04', "created_at" = '2009-09-07 10:11:04', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:11:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 84) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:11:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 06:11:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:14:02', 0, '2009-09-07 10:14:02', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:14:02', 1000, '2009-09-07 10:14:02', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:14:02', 30000, '2009-09-07 10:14:02', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9c7a3b4e3b5dc3ad79afe07da765eac927ee408c79a51ce28fc3ba636a0b930f3b1823051e17f0bf93455e9d077f2644ddc49f2139f9367e570e307d7855b0d4') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:14:02', '59e5c973e36809fbd4ce5f61ea8bec581b2230cf652f156dc5936311f01d8958e8fa3d1af4ea31ac6fa25f796ad94a1f35d7e930f2665b0b34fb8e1bc26f6e8c', '2009-09-07 10:14:02', 'subscriber', 'QarGwGdjFS3XLjT9c_OZ', '9c7a3b4e3b5dc3ad79afe07da765eac927ee408c79a51ce28fc3ba636a0b930f3b1823051e17f0bf93455e9d077f2644ddc49f2139f9367e570e307d7855b0d4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:14:02', '2009-09-07 10:14:02', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:14:02', NULL, NULL, NULL, '2009-09-07 10:14:02', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:02', "created_at" = '2009-09-07 10:14:02', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:14:02) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:14:02) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:14:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 06:14:03) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:14:03) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 23ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:14:23', 0, '2009-09-07 10:14:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:14:23', 1000, '2009-09-07 10:14:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:14:23', 30000, '2009-09-07 10:14:23', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e3755d059f2e5b23069fae4de5635f38014e8a81902b00ab12811527775506702ffd9b374922c2ecd243a44b5884d4ece4d3b0ccdee9b2592ea3c38f3b717d19') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:14:24', '66a0ef9c5733e3c94dffda5faedf6f7568a56fd7ad907b8fb7153800f6cb8c4756d93d6ae942a92140b5e30dd641dbf98d9c33adcd9d9ea266dd36732f8bbca6', '2009-09-07 10:14:24', 'subscriber', 'xKOjjGuItdLSZGn1K0s6', 'e3755d059f2e5b23069fae4de5635f38014e8a81902b00ab12811527775506702ffd9b374922c2ecd243a44b5884d4ece4d3b0ccdee9b2592ea3c38f3b717d19', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:14:24', '2009-09-07 10:14:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:14:24', NULL, NULL, NULL, '2009-09-07 10:14:24', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:24', "created_at" = '2009-09-07 10:14:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:14:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:14:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 127ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:14:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 06:14:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (5.4ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:14:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:14:33', 0, '2009-09-07 10:14:33', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:14:33', 1000, '2009-09-07 10:14:33', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (1.2ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:14:33', 30000, '2009-09-07 10:14:33', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bbe578b042914fa147152285c1ef41e8be88a77ae48dd80c38d502282bf7e528b7244a99ad2edb6883f2c19ced829231ed3ed87b9b18956029c202bc829136b6') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:14:33', '53844aedac07f7e507a29c8d39c6e84697e6cb19b125a9ed4dd45ef3a12628d9bf97c182c8bc183dde64640de99be7bb8353b1b3ec5deb198a335725753d145b', '2009-09-07 10:14:33', 'subscriber', 'DylrCT4hvB3DP06OOBvR', 'bbe578b042914fa147152285c1ef41e8be88a77ae48dd80c38d502282bf7e528b7244a99ad2edb6883f2c19ced829231ed3ed87b9b18956029c202bc829136b6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:14:33', '2009-09-07 10:14:33', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:14:33', NULL, NULL, NULL, '2009-09-07 10:14:33', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:33', "created_at" = '2009-09-07 10:14:33', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:33', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:14:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:14:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 115ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:14:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:14:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 230ms (View: 216, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.9ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:14:43', 0, '2009-09-07 10:14:43', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:14:43', 1000, '2009-09-07 10:14:43', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:14:43', 30000, '2009-09-07 10:14:43', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'daa0e077bc3eb278f506787a7d1022756d88ddd090fedeba7b382776daae462e10201bea3c1460f95bee4238278421b4afad077db385d1b98c5ba0fbb7965aa9') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:14:44', '2bc0a5846e9886c9f2439dd305e95acf3bdaccf946d10d16981aa625a1507350f40e996b5dd050e33b80227e9756c569355f1bb56932b6a567524d1bc1fd89e8', '2009-09-07 10:14:44', 'subscriber', 'xJ5H7gYRQ01f4GZS916U', 'daa0e077bc3eb278f506787a7d1022756d88ddd090fedeba7b382776daae462e10201bea3c1460f95bee4238278421b4afad077db385d1b98c5ba0fbb7965aa9', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:14:44', '2009-09-07 10:14:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:14:44', NULL, NULL, NULL, '2009-09-07 10:14:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:44', "created_at" = '2009-09-07 10:14:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:44', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:14:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:14:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:14:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 115ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:14:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:14:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.9ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (1.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 232ms (View: 217, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:14:54', 0, '2009-09-07 10:14:54', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:14:54', 1000, '2009-09-07 10:14:54', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:14:54', 30000, '2009-09-07 10:14:54', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5e77faacbd9a1c465b77088d225cb7d6b3004e28de78186207ac20e3cd338dbc81c1a279e1d3a74d297a96f99abfa96e791f64c320f4e7e5659467fb050842df') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:14:54', 'd2f196d1311f12bfd4d2be61751be6db4844e209ac49b1d79615513e142b0f773f55b9cc1199cdabff8a7e3c9cdfed52c09046b799371b333d156468fa5c1bd5', '2009-09-07 10:14:54', 'subscriber', 'syXdDIecStJL8HGA4nOU', '5e77faacbd9a1c465b77088d225cb7d6b3004e28de78186207ac20e3cd338dbc81c1a279e1d3a74d297a96f99abfa96e791f64c320f4e7e5659467fb050842df', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:14:54', '2009-09-07 10:14:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:14:54', NULL, NULL, NULL, '2009-09-07 10:14:54', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:54', "created_at" = '2009-09-07 10:14:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:54', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:14:54', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:14:54', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:14:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 16ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:14:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:14:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:14:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 24ms (View: 14, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:15:04', 0, '2009-09-07 10:15:04', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:15:04', 1000, '2009-09-07 10:15:04', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:15:04', 30000, '2009-09-07 10:15:04', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '40a9b614c41e2878ece075868295f6066830e7d20bd0bb5ca69f833c8f18b1b287cce96f0e84c3de4979290b02253ae1bac3b82ea39481f764f622698b06ac2a') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:15:04', '0f7b6b0b286b2454242e506b0c144fa8c0dfc3aea4167526f081ed096ccc388b0d6c7da630c7b2ae8702d8ebfa3144fe8a3235bb88b4f071d5d8fc5c0ceabc8d', '2009-09-07 10:15:04', 'subscriber', 'qYid_F0KKlM9VvIil2sB', '40a9b614c41e2878ece075868295f6066830e7d20bd0bb5ca69f833c8f18b1b287cce96f0e84c3de4979290b02253ae1bac3b82ea39481f764f622698b06ac2a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:15:04', '2009-09-07 10:15:04', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:15:04', NULL, NULL, NULL, '2009-09-07 10:15:04', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:15:04', "created_at" = '2009-09-07 10:15:04', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:15:04', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:15:04', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:15:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:15:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-07 06:15:04) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:16:01', 0, '2009-09-07 10:16:01', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (70.7ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:16:01', 1000, '2009-09-07 10:16:01', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:16:01', 30000, '2009-09-07 10:16:01', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ba91436caba8fd3ed83e4689470c39954377de60bd9933b1db609457798bda4b6b42f794b7e0db8a2b2d389052528aa207d4486b5d3dff6984037e0b31150188') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:16:01', 'e98fc297ea882e4b27356516e4b4f0181a56c77ac42c9050913b6eda3b0b63cae0dbc1487bb00aed3f54d3f9ccb63f60bc95bec66f6f31c579aaec1d4caaeab0', '2009-09-07 10:16:01', 'subscriber', 'CGegAOvRdlP9DCg28Igb', 'ba91436caba8fd3ed83e4689470c39954377de60bd9933b1db609457798bda4b6b42f794b7e0db8a2b2d389052528aa207d4486b5d3dff6984037e0b31150188', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:16:01', '2009-09-07 10:16:01', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:16:01', NULL, NULL, NULL, '2009-09-07 10:16:01', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:16:01', "created_at" = '2009-09-07 10:16:01', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:16:01', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:16:01', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:16:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 75) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:16:01) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 111ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:17:07', 0, '2009-09-07 10:17:07', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (81.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:17:07', 1000, '2009-09-07 10:17:07', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:17:08', 30000, '2009-09-07 10:17:08', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3f5fed23fa478b6b082f6190a0bd1933d40f588d7280b5d4cf122bc9dae7f8dee6b84368acd6c00419b585c673ceac8b463d353e2c9415cf701226b93be77476') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:17:08', '35e1927214428e1a019e8192e1ec2e6e8ca9e7d034a2f6468cae7cce148c5fde46520746eb8d9474cf440160acaac902ec3637c82d068e9ede1445bc60b92a76', '2009-09-07 10:17:08', 'subscriber', '2HILyf4bkCgUGouiywNu', '3f5fed23fa478b6b082f6190a0bd1933d40f588d7280b5d4cf122bc9dae7f8dee6b84368acd6c00419b585c673ceac8b463d353e2c9415cf701226b93be77476', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:17:08', '2009-09-07 10:17:08', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:17:08', NULL, NULL, NULL, '2009-09-07 10:17:08', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:17:08', "created_at" = '2009-09-07 10:17:08', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:17:08', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:17:08', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:17:08) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 86) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:17:08) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 110ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:17:08) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:20:41', 0, '2009-09-07 10:20:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:20:41', 1000, '2009-09-07 10:20:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:20:41', 30000, '2009-09-07 10:20:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4cc396e401894ea0ae257b8ba77cadfd330c80f9d1f05da04d63087c92983f2d7aa5f98aefdfd9e8ce702170ee57aa1f36597ed25fe75dabf7a6b8298e7fa95f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:20:41', '781dd84ad5d598a80a8f55a45a627e63f5509a339edc0d6b53f20c806ae2f5e40a3af06495a3bc735a0b31362847c419d37598356fea4022659459e3e80284c2', '2009-09-07 10:20:41', 'subscriber', '6LmZJJckOY_PP6jj_u8o', '4cc396e401894ea0ae257b8ba77cadfd330c80f9d1f05da04d63087c92983f2d7aa5f98aefdfd9e8ce702170ee57aa1f36597ed25fe75dabf7a6b8298e7fa95f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:20:41', '2009-09-07 10:20:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:20:41', NULL, NULL, NULL, '2009-09-07 10:20:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:20:41', "created_at" = '2009-09-07 10:20:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:20:41', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:20:41', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:20:41', "state" = 'error' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:20:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:20:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 113ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:20:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:20:59', 0, '2009-09-07 10:20:59', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:20:59', 1000, '2009-09-07 10:20:59', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:20:59', 30000, '2009-09-07 10:20:59', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '06ecc65aa361ba034583c0033dcf2ebb15a91baed3860b3c8a5d51d5964a9b64b6d411f7d3324c0908f843370d38905ca426bda9c68cc767959311e7fbd3d923') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:20:59', 'd2f05ec5f5a5ddcbded2bea8d93eb0120d18b532458c21e9c464391008ef9a9c4667bd589c072918e1067a81ef6bf0c156e3ec1afdb096b00919fbe27f0e75e6', '2009-09-07 10:20:59', 'subscriber', '597bEZwezVwAWUepNl7J', '06ecc65aa361ba034583c0033dcf2ebb15a91baed3860b3c8a5d51d5964a9b64b6d411f7d3324c0908f843370d38905ca426bda9c68cc767959311e7fbd3d923', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:20:59', '2009-09-07 10:20:59', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:20:59', NULL, NULL, NULL, '2009-09-07 10:20:59', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:20:59', "created_at" = '2009-09-07 10:20:59', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:20:59', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:20:59', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:20:59', "state" = 'error' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:20:59) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:20:59) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 110ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:20:59) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:21:32', 0, '2009-09-07 10:21:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:21:32', 1000, '2009-09-07 10:21:32', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:21:32', 30000, '2009-09-07 10:21:32', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '73455920d992667889c4581f41c69372999355ee4b8bec9e0be54e104c4d261327846ed7eb025efe637f1e8443ccf676a34a382738f320951b3116d0b59819e6') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:21:32', '8d8290c1a5d4bc834639d052d3e06d90a1cfa3dcaa1330c4708e7a021158e24fa693c4fa9538b780140f46e6296084ffaeb200795c28370e195cb8551af6936e', '2009-09-07 10:21:32', 'subscriber', '-tqphdeS_E94k1MiIG68', '73455920d992667889c4581f41c69372999355ee4b8bec9e0be54e104c4d261327846ed7eb025efe637f1e8443ccf676a34a382738f320951b3116d0b59819e6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:21:32', '2009-09-07 10:21:32', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:21:32', NULL, NULL, NULL, '2009-09-07 10:21:32', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:21:32', "created_at" = '2009-09-07 10:21:32', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:21:32', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:21:32', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:21:32', "state" = 'error' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:21:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:21:32) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 110ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:21:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:21:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#show (for 127.0.0.1 at 2009-09-07 06:21:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:23:58', 0, '2009-09-07 10:23:58', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (64.9ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:23:58', 1000, '2009-09-07 10:23:58', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:23:58', 30000, '2009-09-07 10:23:58', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e224a0c9282c141925b4791be46a66475a8abad8264974e80852a2d01eee8c4a156bd71ab7421e1a4929a9d0c9a1cbe82cefb46a62bf34e9bf37cc56845652fe') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:23:58', '6371759540ff48620859d93af74eec68eed3976f5d257c3e1a6df6cabd4eea13455ba07f11b22c839312cd31f4bc5f2492579eb3e1fea02b567bb9553fbbc37c', '2009-09-07 10:23:58', 'subscriber', 'DIAFAJsm6EerROPKF7X9', 'e224a0c9282c141925b4791be46a66475a8abad8264974e80852a2d01eee8c4a156bd71ab7421e1a4929a9d0c9a1cbe82cefb46a62bf34e9bf37cc56845652fe', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:23:58', '2009-09-07 10:23:58', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:23:58', NULL, NULL, NULL, '2009-09-07 10:23:58', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:23:58', "created_at" = '2009-09-07 10:23:58', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:23:58', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:23:58', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:23:58', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:23:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 69) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:23:58) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 110ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:23:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:23:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (3.2ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 142ms (View: 15, DB: 5) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:35:41', 0, '2009-09-07 10:35:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:35:41', 1000, '2009-09-07 10:35:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:35:41', 30000, '2009-09-07 10:35:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2800e352fef26812c6484e31086fa628d49f51db97b46827ca69483ca9f96837814c3db9202bbb044dc794b03a6bc98bcb0386881a92c2d9bab15e224ca1895d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:35:41', '7b4e9fdf8daae4cde6480fa513775383bd918d4e797180037f16723ef28e48812d8af8eaabd4795a218814eadf8b13898190d38ca80e87cf037a5ed4ebe42708', '2009-09-07 10:35:41', 'subscriber', '5cVShuPcIJiYsZAFIXLA', '2800e352fef26812c6484e31086fa628d49f51db97b46827ca69483ca9f96837814c3db9202bbb044dc794b03a6bc98bcb0386881a92c2d9bab15e224ca1895d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:35:41', '2009-09-07 10:35:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:35:41', NULL, NULL, NULL, '2009-09-07 10:35:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:35:41', "created_at" = '2009-09-07 10:35:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:35:41', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:35:42', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:35:42', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:35:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 16ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:35:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 210ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:35:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:35:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:36:35', 0, '2009-09-07 10:36:35', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:36:35', 1000, '2009-09-07 10:36:35', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:36:35', 30000, '2009-09-07 10:36:35', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8259349d544d9a09de74af6e298f5e3b2e368870b64160bf5907673e3eb83500f9bb8fba9c7affb81c3722cdb72c87fa46ba0198064f84b12044241f2a297483') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:36:35', '5e5375fe0a83a1b48297c4d265e765c950f0f9a00ef24ce20e743f26fac8a7662bec12599385065f6f45816d9cf94e41f17a3228a954207d5631083cadb1271e', '2009-09-07 10:36:35', 'subscriber', 'K0eg3mMZXflDtLqJH-2s', '8259349d544d9a09de74af6e298f5e3b2e368870b64160bf5907673e3eb83500f9bb8fba9c7affb81c3722cdb72c87fa46ba0198064f84b12044241f2a297483', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:36:35', '2009-09-07 10:36:35', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:36:35', NULL, NULL, NULL, '2009-09-07 10:36:35', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:36:35', "created_at" = '2009-09-07 10:36:35', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:36:35', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:36:35', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:36:35', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:36:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:36:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 213ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:36:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:36:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (1.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 26ms (View: 14, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:38:23', 0, '2009-09-07 10:38:23', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (62.1ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:38:23', 1000, '2009-09-07 10:38:23', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:38:23', 30000, '2009-09-07 10:38:23', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '976f647ec36184e7b3cb89b99bf84ade865651c15e53e94dcc5674d16d514590a792f7fbae41d4ff94d99a7eb46586f051e1878e838b3aa6e5779437c5ada715') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:23', '3583492511b03ce7c1c366bd558743d07b3fff23ebbe09455fc46d7d147aa63949cff4b7ac90342f70c3019860e3d8c0873c93e1c63d5ce7a489e3d4fe2583a5', '2009-09-07 10:38:23', 'subscriber', 'FETeH3qNrQLAl8h8Vg4C', '976f647ec36184e7b3cb89b99bf84ade865651c15e53e94dcc5674d16d514590a792f7fbae41d4ff94d99a7eb46586f051e1878e838b3aa6e5779437c5ada715', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:23', '2009-09-07 10:38:23', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:23', NULL, NULL, NULL, '2009-09-07 10:38:23', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:23', "created_at" = '2009-09-07 10:38:23', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:23', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:23', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:38:23', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.6ms)
Completed in 15ms (View: 11, DB: 67) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:23) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 212ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-07 10:38:41', 0, '2009-09-07 10:38:41', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-07 10:38:41', 1000, '2009-09-07 10:38:41', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-07 10:38:41', 30000, '2009-09-07 10:38:41', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8ddb01a30d0aabc03752f72ef5cb5d8c3ae4e5b6c3061942a9ac8166773d77dd8bcc5d37aaec11ecd150ed65241f347513cafa529ecfe50d791102cf066ddaa5') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:41', '7126633c826ce0dc982ef2ff9cb50fc489239c9b3680dc902db1a78e284c54ff9802c6c520382597b2916a5afde18273902a6453a439a1e1050fc5c4bb4db63a', '2009-09-07 10:38:41', 'subscriber', 'E_M_kgHbXTWrr2bj0v8e', '8ddb01a30d0aabc03752f72ef5cb5d8c3ae4e5b6c3061942a9ac8166773d77dd8bcc5d37aaec11ecd150ed65241f347513cafa529ecfe50d791102cf066ddaa5', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:41', '2009-09-07 10:38:41', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:41', NULL, NULL, NULL, '2009-09-07 10:38:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:41', "created_at" = '2009-09-07 10:38:41', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.7ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 06:38:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 24ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7fafed2db08beaa2a58721c5c4104dcef81c6b4674482a3f7e32b8e5a03950d266e9dd36622e3f025f56b7c9c2f6dbfbc1b710cc2fdcc5eebc3743e2fbd355f3') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:42', '553a67655f7389e8ad345d74b792de7d93567a728471ca3b360613b50eed97577063951ff1f2fcee3a8eca1058995fc07707a8d70c29ca595d84b28d4131b039', '2009-09-07 10:38:42', 'subscriber', 'Rs5oLx3X7t0YhqG6tOEq', '7fafed2db08beaa2a58721c5c4104dcef81c6b4674482a3f7e32b8e5a03950d266e9dd36622e3f025f56b7c9c2f6dbfbc1b710cc2fdcc5eebc3743e2fbd355f3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:42', '2009-09-07 10:38:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:42', NULL, NULL, NULL, '2009-09-07 10:38:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:42', "created_at" = '2009-09-07 10:38:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 8ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 169ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-07 06:38:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (3.9ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 26ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a7647365fb1eeb2cbbb461e2562c6fecd1e835d9f0adbe4970ae6476e259073b67aa8dfa0ee0455e4206c972cf831f1b865f016eac3366d5a982a18d8c6a4768') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:42', '3eb4028fc59efce91bf247d7adb5459b224fb616651afb87a080021ee7217d75e81a1f34386af37e986064e083db28964375e99bb7d56e064ea3226362257e3d', '2009-09-07 10:38:42', 'subscriber', 'wrcCg3u7m0JXNcFYhSk5', 'a7647365fb1eeb2cbbb461e2562c6fecd1e835d9f0adbe4970ae6476e259073b67aa8dfa0ee0455e4206c972cf831f1b865f016eac3366d5a982a18d8c6a4768', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:42', '2009-09-07 10:38:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:42', NULL, NULL, NULL, '2009-09-07 10:38:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:42', "created_at" = '2009-09-07 10:38:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:42', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 8ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 17ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c4298a12322eced5c1a537ecf8f6707412f62939232dd4cf43b7da5fd356d7d498b504fa871a6ff46d3dabdbc45ab6006e6494507b7515c9488385d4dd1dbed1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:43', 'd379cc436690679ebf31a9f729bd905ac6b4963984720c462a4e2739be0e8303fe8c1acd261f3a697e2702b42b2b1e1203887c365b160dcf75671aa4d657af14', '2009-09-07 10:38:43', 'subscriber', 'mTV0nZkm4vLHyQQZN87j', 'c4298a12322eced5c1a537ecf8f6707412f62939232dd4cf43b7da5fd356d7d498b504fa871a6ff46d3dabdbc45ab6006e6494507b7515c9488385d4dd1dbed1', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:43', '2009-09-07 10:38:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:43', NULL, NULL, NULL, '2009-09-07 10:38:43', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:43', "created_at" = '2009-09-07 10:38:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:43', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:38:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.9ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.7ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 23ms (View: 11, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3950cbe9048be963812e6665849cebfe8dcb7002df7502e9925da2c5a417a549c12f7a861480e7cfd860b78407c29a561843ab60306ae1d85c1d9b6b4b1f68af') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:43', '2ca66de6845ae63d049ee5538da49b5ca4b17fac75540202909361805b000eabe88d11c6b6900c0d7265d1e4705b2e2730d9f4be9a79245737330afd9a75f9dc', '2009-09-07 10:38:43', 'subscriber', '7_kECweFOuSMEPOBCZb6', '3950cbe9048be963812e6665849cebfe8dcb7002df7502e9925da2c5a417a549c12f7a861480e7cfd860b78407c29a561843ab60306ae1d85c1d9b6b4b1f68af', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:43', '2009-09-07 10:38:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:43', NULL, NULL, NULL, '2009-09-07 10:38:43', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:43', "created_at" = '2009-09-07 10:38:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:43', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:43', "next_renewal_on" = '2009-09-10' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:38:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 218ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e89980550e214685128c88779dafdda18bde2919a5c2f9d21ff066af4b0c71389de21eea8bcbdeed842185167db419040e8680dc2aa79ab767461b6f1f34c83c') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:44', '0e5dacbe73fa5ff0f54ad6aac22fd72da2089d5200a1206589a0563dfe5230801a54ba585e8bbb11d944cb9d75f07c69303e1aebddf241ab7911f0b92ee525f2', '2009-09-07 10:38:44', 'subscriber', 'KRsF-E77aX_bMbpp9l3N', 'e89980550e214685128c88779dafdda18bde2919a5c2f9d21ff066af4b0c71389de21eea8bcbdeed842185167db419040e8680dc2aa79ab767461b6f1f34c83c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:44', '2009-09-07 10:38:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:44', NULL, NULL, NULL, '2009-09-07 10:38:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:44', "created_at" = '2009-09-07 10:38:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:44', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (12.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 31ms (DB: 14) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5e105b3c2b451c847a0faa59fdd87a5af3047bf29e80efce77c43d05706299df6571914f2acd24dce2d52123bfbc10a73d5906f927fa15ba2732e1e688b9d6f6') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-07 10:38:44', '80b8bba90aa1dfcaa5abe28faef08fc9da13cf47785e3489e3d240dd1990ee79e72106b1575ed77547e8c6c14ce8da9204009d8e9c0ce85a14384f87970c2e31', '2009-09-07 10:38:44', 'subscriber', '2Cnpl9LpXz9FpexqSm-Z', '5e105b3c2b451c847a0faa59fdd87a5af3047bf29e80efce77c43d05706299df6571914f2acd24dce2d52123bfbc10a73d5906f927fa15ba2732e1e688b9d6f6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES('2009-09-07 10:38:44', '2009-09-07 10:38:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-07 10:38:44', NULL, NULL, NULL, '2009-09-07 10:38:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:44', "created_at" = '2009-09-07 10:38:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-07', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-07 10:38:44', "next_renewal_on" = '2009-09-04' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.3ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-07 10:38:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-07 06:38:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-07 06:38:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-07 06:38:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-07 06:38:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:25:51', 0, '2009-09-09 05:25:51', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:25:51', 1000, '2009-09-09 05:25:51', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:25:51', 30000, '2009-09-09 05:25:51', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '411fda2582d93d72f2d4fa63f27e461bd67b5050115a5b34d3b5bf00a2c5806557c1f19bab7512c151c923464dae198261a5d24eeba5fc140e3668811389b7e1') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:51', '6651a8592149d80524f5904c6334f93c62ad631fd1f75fb7a1a646f6dfd3b629f8082e1e221694b22223666360270544f0e697b625360c61608a67e63d934e2d', '2009-09-09 05:25:51', 'subscriber', 'Y4bhQ0rYT_zcxR4Gqccg', '411fda2582d93d72f2d4fa63f27e461bd67b5050115a5b34d3b5bf00a2c5806557c1f19bab7512c151c923464dae198261a5d24eeba5fc140e3668811389b7e1', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:51', '2009-09-09 05:25:51', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:51', NULL, NULL, NULL, '2009-09-09 05:25:51', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:51', "created_at" = '2009-09-09 05:25:51', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 24ms (View: 20, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:25:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.3ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:25:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 24ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ce5b91734e3c0b28fdff6b752dbf6bb9b7fe1f09f21748b2498b4343c9fd9c1fb7121ef3ac9d963eb2b0a6a722e14dab9bfda2fc6213ed6555a490221ed330b0') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:52', '5d8315d6e725526963c3769784e5ba88e9f1dd47748acf49acadca42ef2352e57e007c311f40daaa9d10a6dfeed5b4fd35ffbaa3b5805e8b123c5f03a6b6d926', '2009-09-09 05:25:52', 'subscriber', 'cg6ZGTyz1V-1Wa0vsKnM', 'ce5b91734e3c0b28fdff6b752dbf6bb9b7fe1f09f21748b2498b4343c9fd9c1fb7121ef3ac9d963eb2b0a6a722e14dab9bfda2fc6213ed6555a490221ed330b0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.5ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:52', '2009-09-09 05:25:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:52', NULL, NULL, NULL, '2009-09-09 05:25:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:52', "created_at" = '2009-09-09 05:25:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:25:52) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (3.9ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:25:52) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '963ff6cb774749d86ffb9301ca9a829ac0f7e2242149b9701b2990b61ee70caf6aa808479d0d7e591a83030e995afe875a67533bb1228419b29ee672ac85f3ee') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.9ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:52', '5187d278f702875937afecc299d0abe6451c87f3c40a0611cca41549c26605b27075928d4e684b1ffd62296f36075251835c485de201cc95bf352f23aed19191', '2009-09-09 05:25:52', 'subscriber', 'jRI5M0IsvzosOwyyPCXO', '963ff6cb774749d86ffb9301ca9a829ac0f7e2242149b9701b2990b61ee70caf6aa808479d0d7e591a83030e995afe875a67533bb1228419b29ee672ac85f3ee', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:52', '2009-09-09 05:25:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (1.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:52', NULL, NULL, NULL, '2009-09-09 05:25:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:52', "created_at" = '2009-09-09 05:25:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:52', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 16ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:25:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.8ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 17ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4d255944561e0e04f4d814cd2c1fae1b40a2a47687def2e1ec10f47fdd4e0ca09c3511c861d984aac20c3d1d5ab7f7c6ca031d5a87d3752648b7946a602784c3') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:53', 'db1f3e110ace616af714448e185d8bc1c15bdb62acbe04d090d3e82212f04d3d87e009f2d3f0d47f49b0e0dd85f724ab239922a55061fcc0f796079e4cb2d792', '2009-09-09 05:25:53', 'subscriber', 'l3GE2xMX6jeuLePl5x_8', '4d255944561e0e04f4d814cd2c1fae1b40a2a47687def2e1ec10f47fdd4e0ca09c3511c861d984aac20c3d1d5ab7f7c6ca031d5a87d3752648b7946a602784c3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:53', '2009-09-09 05:25:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:53', NULL, NULL, NULL, '2009-09-09 05:25:53', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:53', "created_at" = '2009-09-09 05:25:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:53', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:25:53', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 16ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 10ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:25:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (1.2ms)
Completed in 38ms (View: 27, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.9ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd10233fe8a9838341a26efa692a872ef9ec8c60cb4f694a5d482833b880c0bda369275f0f2b941d47d0097931fc712c9ba087c94f8294698152b2e51a41d5c47') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:53', '9b7b6c2ec70580fa0d088efdc6cdbeb7bbb812dc0471a96216991dfb3dc9d0f7aa3d541e3c6a4c18b0ea68180bef696885be30901179893d8447bb68f05a036f', '2009-09-09 05:25:53', 'subscriber', 'fx5frw5od-foeI7nZ0_Q', 'd10233fe8a9838341a26efa692a872ef9ec8c60cb4f694a5d482833b880c0bda369275f0f2b941d47d0097931fc712c9ba087c94f8294698152b2e51a41d5c47', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:53', '2009-09-09 05:25:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:54', NULL, NULL, NULL, '2009-09-09 05:25:54', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "created_at" = '2009-09-09 05:25:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:25:54', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 25ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 19ms (View: 10, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '54a1f62e930a2706bf393958830f233f252218a7da68ec1a037835fdf884fa763fb48716a1d13c86dd741f99e55e1352ada2f6cac3a28392b0ac66456f856e9e') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:54', 'dd057aa6cd6f7f2b8857a6c8fa44c59024aec95103c6ed09a8c535ce5fcf6145d6557bf7b99f67239bfbd327f35d3ae79019f76ba73b1deb61682c79f6fd0567', '2009-09-09 05:25:54', 'subscriber', 'nUR9s9X_tVaIJWKdfrXV', '54a1f62e930a2706bf393958830f233f252218a7da68ec1a037835fdf884fa763fb48716a1d13c86dd741f99e55e1352ada2f6cac3a28392b0ac66456f856e9e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:54', '2009-09-09 05:25:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:54', NULL, NULL, NULL, '2009-09-09 05:25:54', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "created_at" = '2009-09-09 05:25:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7ecf25c7bca8cfe759a8906fd70bd5de6ef1b0bcb96fc8d48c7d120adcca9c4169f75851d93d95c76f7029c428e4111f4cbbf2f63a7670d5c37ba3635a08d3dc') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:25:54', '4b1ddf148a07f4013a77703a4f8e4e9eaa6fd3a4b55e8f373aa68507482ee4cd48a978e1b04a08ac53d3b418205422178006715d84c015e5eff9ff4dfd7f97ca', '2009-09-09 05:25:54', 'subscriber', '-YS6DALGFuVB98o0nGfi', '7ecf25c7bca8cfe759a8906fd70bd5de6ef1b0bcb96fc8d48c7d120adcca9c4169f75851d93d95c76f7029c428e4111f4cbbf2f63a7670d5c37ba3635a08d3dc', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:25:54', '2009-09-09 05:25:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:25:54', NULL, NULL, NULL, '2009-09-09 05:25:54', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "created_at" = '2009-09-09 05:25:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:25:54', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:25:54', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:25:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:25:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:45:40', 0, '2009-09-09 05:45:40', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:45:40', 1000, '2009-09-09 05:45:40', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:45:40', 30000, '2009-09-09 05:45:40', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7b49871e4103cbdde5af496480ff9d43d97894cfd50e5b10125ab6e753bbe03a7f673caed79bc0c4b6d6d6759fa39e813a2919cc7ede2ee23ffb80a6e0defe60') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:41', 'fe18bdf5d54a8c3e8f95756bff8def53a9c00c2fda9bd63ae231d77264a6059315575c50b4acf69bd3e63e177152b9d53f7e29c71b1825703b0430caac0e3f6a', '2009-09-09 05:45:41', 'subscriber', 'j6hnuTs4tTzqy0cu_y8D', '7b49871e4103cbdde5af496480ff9d43d97894cfd50e5b10125ab6e753bbe03a7f673caed79bc0c4b6d6d6759fa39e813a2919cc7ede2ee23ffb80a6e0defe60', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:41', '2009-09-09 05:45:41', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:41', NULL, NULL, NULL, '2009-09-09 05:45:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:41', "created_at" = '2009-09-09 05:45:41', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:45:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:45:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.3ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:45:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '58ad4b09d785e7c4edd7901264bdcde0d55cc5aec9773683dbfa8883f739864a8674719fde5e13b4c6b4b7598e286dc7f36d6cb44b17989cecdbb712ec409edc') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:41', '997c11998145498e21a669e38a8938e79408d727a8f49f651564396944c89ddb22fe261af18849163062eec79e173af85d3e89b57f55202062051995b71b9be1', '2009-09-09 05:45:41', 'subscriber', 'moyxVqxLzw-ZyzT3WduH', '58ad4b09d785e7c4edd7901264bdcde0d55cc5aec9773683dbfa8883f739864a8674719fde5e13b4c6b4b7598e286dc7f36d6cb44b17989cecdbb712ec409edc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:41', '2009-09-09 05:45:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:41', NULL, NULL, NULL, '2009-09-09 05:45:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:41', "created_at" = '2009-09-09 05:45:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:45:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:45:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (3.4ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:45:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (1.3ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e99692dda98b9adeb685d9c52a687790eaa4ace008bd24296b2b2b10e0fd0e7c09c0a62d9755452fa654a15467be4f968710dae24f932152bf5ef8c96eb9f490') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:42', '697daa4e298f3f6442d476730ba39bb5140e456a8b1bc4764138fd9b7e5f654a0866b5e61aae2a688907b6cb00e4c1f2421aac9cb54ac72cb176e3e29e9920d2', '2009-09-09 05:45:42', 'subscriber', 'tNzJCq1M7WA39_bHzK27', 'e99692dda98b9adeb685d9c52a687790eaa4ace008bd24296b2b2b10e0fd0e7c09c0a62d9755452fa654a15467be4f968710dae24f932152bf5ef8c96eb9f490', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:42', '2009-09-09 05:45:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:42', NULL, NULL, NULL, '2009-09-09 05:45:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:42', "created_at" = '2009-09-09 05:45:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:42', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 8ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:45:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b63b0240f0e54611e6deeba32c0616485b15ee5de4174df09fd6321bf9c0a94b3f01a28c2c185738b36b899895f3bb089aba50d4372b8f6b4a094fccd437c796') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (1.0ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:43', '1febe1fcc0c5623567a7cb8accf548d50a51b7f65e47c1c94ebcab31a020e8dfe6c4f92c0103000e42d63aad9b1643a8d3bddca5c7df19ffe863c198cfa14d9b', '2009-09-09 05:45:43', 'subscriber', 'Q3Uago-G6wd3iL6_cXF2', 'b63b0240f0e54611e6deeba32c0616485b15ee5de4174df09fd6321bf9c0a94b3f01a28c2c185738b36b899895f3bb089aba50d4372b8f6b4a094fccd437c796', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:43', '2009-09-09 05:45:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:43', NULL, NULL, NULL, '2009-09-09 05:45:43', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (1.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:43', "created_at" = '2009-09-09 05:45:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:45:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (1.0ms)
Completed in 35ms (View: 24, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '411456220c46de98bd10efd04786604f1a9e0db0a0f48e8b65d6db6d478eb737f026db7ecf07841e11125aec2e1386eb14ec016d2479ef9810c649ca493117e6') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:43', '3e195bd67528379f5b5694173de24ff64abf58bab235850579685badadc1ce2469ca82318f441d6f9443c2383d888a20fdb0fefe5282817d9ad85f3ca12aa471', '2009-09-09 05:45:43', 'subscriber', '5v4aCP1kc5Xj8lveTDdQ', '411456220c46de98bd10efd04786604f1a9e0db0a0f48e8b65d6db6d478eb737f026db7ecf07841e11125aec2e1386eb14ec016d2479ef9810c649ca493117e6', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:43', '2009-09-09 05:45:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:43', NULL, NULL, NULL, '2009-09-09 05:45:43', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:43', "created_at" = '2009-09-09 05:45:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:43', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:45:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 8ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (16.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 29ms (DB: 17) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 21, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:45:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (1.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a2af774bd5bee196db3d483e5face98c1769f3c2f624bef14f26e846cf076772c1fe80d21220ae728c9eba81d4f04570410841f8508d41b02be5bc1e130dc376') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:43', '47d7e55ca6945925acc44ac4eae92810ff9a58b4cfe0fdba90af923226edae2a072032d9e002845b1e4c2845098158dd41c10f31721dc84ef8acd4027b1504a9', '2009-09-09 05:45:43', 'subscriber', 'o-w4x1jar8SPzaKsbWXJ', 'a2af774bd5bee196db3d483e5face98c1769f3c2f624bef14f26e846cf076772c1fe80d21220ae728c9eba81d4f04570410841f8508d41b02be5bc1e130dc376', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:44', '2009-09-09 05:45:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:44', NULL, NULL, NULL, '2009-09-09 05:45:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:44', "created_at" = '2009-09-09 05:45:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:44', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-09 01:45:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8ca62f38ba150101cdfd51a4a7e030fe14f3e2e9d2ed43b6bfeb64f25a8c235beaec0eab7a0bd597fc49a01a2f84561c9e89c31fe247c500df546f691c268657') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:45:44', 'db2b899adfcd93249fd70585d1fb377d5f8cd9c9e957e6c408fb71473015c1db4db57cb7dd91edc18325a81ea5b246a37d5393c833eae4fe83607bbfb6aae01c', '2009-09-09 05:45:44', 'subscriber', 'DrX1NT-EJTeq-rBQgdEn', '8ca62f38ba150101cdfd51a4a7e030fe14f3e2e9d2ed43b6bfeb64f25a8c235beaec0eab7a0bd597fc49a01a2f84561c9e89c31fe247c500df546f691c268657', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:45:44', '2009-09-09 05:45:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:45:44', NULL, NULL, NULL, '2009-09-09 05:45:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:44', "created_at" = '2009-09-09 05:45:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:45:44', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:45:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:45:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:45:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m


Processing ApplicationController#create (for 127.0.0.1 at 2009-09-09 01:45:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:46:15', 0, '2009-09-09 05:46:15', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:46:15', 1000, '2009-09-09 05:46:15', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:46:15', 30000, '2009-09-09 05:46:15', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '443ce9e4602c18bc8a206594931cf5f009febfb2d9df134157d5cd85c2e674a4eeecf148abf440c07b5ea56edadb658c7af64faf3855cf08d8b432e5a2cd60be') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:15', '37a9839211e44c1e7523281b4ccab640153e1a64384028069a1ad40c1d4fdf6989350874c58ac297e7346c75fae689fee84a3c1c726e924c071589cd77cb577b', '2009-09-09 05:46:15', 'subscriber', 'eJHgZTAhDcbsm68a9e_h', '443ce9e4602c18bc8a206594931cf5f009febfb2d9df134157d5cd85c2e674a4eeecf148abf440c07b5ea56edadb658c7af64faf3855cf08d8b432e5a2cd60be', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:15', '2009-09-09 05:46:15', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:15', NULL, NULL, NULL, '2009-09-09 05:46:15', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:15', "created_at" = '2009-09-09 05:46:15', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:15) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:15) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:15) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:46:15) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.3ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:16) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 27ms (View: 17, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1bfdbcf84526fb6fa9ac6c55dc9e1e57600f98f49d461c8ac2f0841509730d6f5376364e991af834cd2b3a0af3087130bad96c6a51e1869f8644cc1802749af7') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:16', 'de94a2cdab98d2e0b35092da636e6137e10484d7273bbd12153313e4bc4c0e39d0ad36aa926ffee5c423f16d87b86557415e7c56c50b9d09c9a99c1300ab824a', '2009-09-09 05:46:16', 'subscriber', '0FH4bdsqfVRjo6eYhYMq', '1bfdbcf84526fb6fa9ac6c55dc9e1e57600f98f49d461c8ac2f0841509730d6f5376364e991af834cd2b3a0af3087130bad96c6a51e1869f8644cc1802749af7', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.4ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:16', '2009-09-09 05:46:16', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:16', NULL, NULL, NULL, '2009-09-09 05:46:16', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:16', "created_at" = '2009-09-09 05:46:16', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:16) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (13.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 25ms (DB: 14) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 11, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:46:16) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (3.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 6, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:16) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2c59912a8b1154ad071a9004a885f7440c237233ccd01f7da831e9c4a715ec0a7ce396c5a3095dd8202c5c2eaae96e68f8581c6b91bdb24262c93fda940df0d4') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.8ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:16', '30bc46f6c1a46b00513c72bc247015688e76a7054cc48567b7b46bd98063b31b211578c6b23852cc7d68858e5b15e666cbdc37a1f55e6b77b9020342be1b5aed', '2009-09-09 05:46:16', 'subscriber', 'Gj3s7bON6-mLU2xfme1f', '2c59912a8b1154ad071a9004a885f7440c237233ccd01f7da831e9c4a715ec0a7ce396c5a3095dd8202c5c2eaae96e68f8581c6b91bdb24262c93fda940df0d4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:16', '2009-09-09 05:46:16', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:16', NULL, NULL, NULL, '2009-09-09 05:46:16', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:16', "created_at" = '2009-09-09 05:46:16', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:16', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fff726372c8810608616b04d326d8d8bfeff40be92adfa4e9c27497253a8a58650610e8ed8bfb01b02f469ed5bdbf77599c16e8551acc884ca0438455ce0b945') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:17', '5816f4fdba0699cf1abef0c6c76527aad3449e8f7ce68688886f2379666d33f4cfa8e4b69f55289864987c5d024561606e3d7ed374e89729478b75d0e3cc4432', '2009-09-09 05:46:17', 'subscriber', 'xYzDY7k0GNdL21W65CNq', 'fff726372c8810608616b04d326d8d8bfeff40be92adfa4e9c27497253a8a58650610e8ed8bfb01b02f469ed5bdbf77599c16e8551acc884ca0438455ce0b945', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:17', '2009-09-09 05:46:17', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:17', NULL, NULL, NULL, '2009-09-09 05:46:17', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:17', "created_at" = '2009-09-09 05:46:17', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:17', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:17', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (4.3ms)
Completed in 10ms (View: 10, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (1.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 40ms (View: 29, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ac5e9b39683d9b500a9f6e0d9a3585cd6ef2db8e38c15cbda0f6a248eb815ad9b14b95c5a1565217c390b1df0670cb726e32a393810d7ed54be9e4738c348530') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.8ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:18', '4624ed158c34f6f2abe71087e36bdf5bef0bcf1be1eda5c885cd82547cc39aaf14fb24ae2ecbed5377601f149667a3f111d9c107bf06e6591c6ed41eeb59e6ca', '2009-09-09 05:46:18', 'subscriber', 'xaZbeR_ctcJt449kFMOH', 'ac5e9b39683d9b500a9f6e0d9a3585cd6ef2db8e38c15cbda0f6a248eb815ad9b14b95c5a1565217c390b1df0670cb726e32a393810d7ed54be9e4738c348530', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:18', '2009-09-09 05:46:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:18', NULL, NULL, NULL, '2009-09-09 05:46:18', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "created_at" = '2009-09-09 05:46:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:18', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 9ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 24ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0e06ccb7c3da52ff87809e46d999bbe0eca3bd9f05edde0fa9ec3e26cfe2ff0c470d05aad8c22f48b83fd7eefcad26acbe33d9a6c891931c787bb349d2eeb4ab') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:18', 'bae0741fbf7f2d82cde6168eb72ffebeb6ba28a85987830c80cd58cba4f1d1eb8bfb9c84c17e5303c7a9ec56e152e87bdfad78be9178b4b0e339b99cb2565196', '2009-09-09 05:46:18', 'subscriber', 'fXv7gi-zEo70JkgXUVB0', '0e06ccb7c3da52ff87809e46d999bbe0eca3bd9f05edde0fa9ec3e26cfe2ff0c470d05aad8c22f48b83fd7eefcad26acbe33d9a6c891931c787bb349d2eeb4ab', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:18', '2009-09-09 05:46:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:18', NULL, NULL, NULL, '2009-09-09 05:46:18', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "created_at" = '2009-09-09 05:46:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 9ms (View: 9, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e9f513cdc7ce032002111b921826f8c5bf6639abea00cbbcff31e89f946afbdedc5ece5728373d2e163b16bc80de1e757fb3eea4bd54afb628e10ef5eec3a819') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:18', 'ae3461d9e7c1c7ff47d0a0d524b990d72a9a5dc8f9ab79fdb78ebeec8b03cce257d558976b1e9552ae15d3cb7014eb5164c331f3e79cd30ca3d12e08499c431b', '2009-09-09 05:46:18', 'subscriber', 'EVA2dfzktlAUogtEzEva', 'e9f513cdc7ce032002111b921826f8c5bf6639abea00cbbcff31e89f946afbdedc5ece5728373d2e163b16bc80de1e757fb3eea4bd54afb628e10ef5eec3a819', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:18', '2009-09-09 05:46:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:18', NULL, NULL, NULL, '2009-09-09 05:46:18', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "created_at" = '2009-09-09 05:46:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:18', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:18', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:46:42', 0, '2009-09-09 05:46:42', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:46:42', 1000, '2009-09-09 05:46:42', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:46:42', 30000, '2009-09-09 05:46:42', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4481ab52c7d9a2435493c6dfb13bc8e7b5bb7beeec45a3aa03a69427e4c52aba6e885c25ff56d8372be5c41463553756704e659f2acfe74828e420fc0d7960d4') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:42', '37076a15d0d4bce298442fa46b9a5a09bc96e32900c2658edf4b280fd526d246e6536c9f5b79a631d2638196296a1b6ceea0a8e9d3557aa72dd3dc38db63de41', '2009-09-09 05:46:42', 'subscriber', 'AjK5_biV-7UtA2Bvnm1h', '4481ab52c7d9a2435493c6dfb13bc8e7b5bb7beeec45a3aa03a69427e4c52aba6e885c25ff56d8372be5c41463553756704e659f2acfe74828e420fc0d7960d4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:42', '2009-09-09 05:46:42', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:42', NULL, NULL, NULL, '2009-09-09 05:46:42', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:42', "created_at" = '2009-09-09 05:46:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1d9f9e97f8672bed919c988678f0e2ed9e807f7fe7bfa963f8c336b157be54be942e4817f66cdd3fbe426cf58a799180b26da86b8f84f4166e19a5bec31e1201') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:42', 'bffb50cd50770dc6f10eae9e91e57a441c8847f642c6b457b05feacd4eb71ae02bbca8097fdfe9b8a039409b5dbef490129a523f983297ecdeebd33293f292ad', '2009-09-09 05:46:42', 'subscriber', 'tOXOXm20ISOHsSdNzu8U', '1d9f9e97f8672bed919c988678f0e2ed9e807f7fe7bfa963f8c336b157be54be942e4817f66cdd3fbe426cf58a799180b26da86b8f84f4166e19a5bec31e1201', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:42', '2009-09-09 05:46:42', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:42', NULL, NULL, NULL, '2009-09-09 05:46:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:42', "created_at" = '2009-09-09 05:46:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd63b0a543222458160e54b7b3efde6ad6140c30c4479e27b2898ecb09c444c7496a0a3805799024fc8eafcedecf261c12659cf2932711c57c445cb284acce121') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:42', 'eeb719b77f97af4564284cd59ac739fb2d52512710a9b4c6c272aea2b8f718689f47dbe9b27a7a9c3d76e2ed88c918e70bb537a0b0a41ef656f84add6b153b70', '2009-09-09 05:46:42', 'subscriber', '5scPw_3Be-PvmGztQDiu', 'd63b0a543222458160e54b7b3efde6ad6140c30c4479e27b2898ecb09c444c7496a0a3805799024fc8eafcedecf261c12659cf2932711c57c445cb284acce121', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:42', '2009-09-09 05:46:42', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:42', NULL, NULL, NULL, '2009-09-09 05:46:42', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:43', "created_at" = '2009-09-09 05:46:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4e7ae664bb3e2ee63e8bf23ca5ec69ec6b02330f1d6a67ee44a772824ad04e93bdbe039091b1972fc5de4fd949e2f3bca41ffdc1f940209745412a616906691b') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:43', '9bf359a4b207329da0189cffa8274aed166ac18da8b2924f21322963f4ae833aa9507cd6df566ee28e10bc3eab8a051132e34960f83f71ca53b3f5bd15593561', '2009-09-09 05:46:43', 'subscriber', 'FFjzbEn3HUS9yYrsJFaT', '4e7ae664bb3e2ee63e8bf23ca5ec69ec6b02330f1d6a67ee44a772824ad04e93bdbe039091b1972fc5de4fd949e2f3bca41ffdc1f940209745412a616906691b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:43', '2009-09-09 05:46:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:43', NULL, NULL, NULL, '2009-09-09 05:46:43', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:43', "created_at" = '2009-09-09 05:46:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:43) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:46:43', '2009-09-09 05:46:43', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 17, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.8ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (5.6ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5e4be1f95d9cfd85569c5a0d97ddc5d8e08c13569049d2bba697b751b212066ed04373e1db1d3147c36d70069de08f1e6d955d4693872748bc3c36447cd95cd8') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:43', '62d69ce0730199da67b41861288edd9be34680648cc6f3b31591361f80700e684e2b79c08e1ef3b2c6d462fafa31afba96e81bc01920baa6fcbef2d07bfc2c29', '2009-09-09 05:46:43', 'subscriber', 'lJ3z15OCDmkNV6YtX-TT', '5e4be1f95d9cfd85569c5a0d97ddc5d8e08c13569049d2bba697b751b212066ed04373e1db1d3147c36d70069de08f1e6d955d4693872748bc3c36447cd95cd8', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:43', '2009-09-09 05:46:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:43', NULL, NULL, NULL, '2009-09-09 05:46:43', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:43', "created_at" = '2009-09-09 05:46:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 11) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 12, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.7ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 17ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 30ms (View: 22, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:44) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 182ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bc009a454c15414212f206902a97e00bbe2fcb03fc9879afae1717696e7f136955f139f0c442daa0a6a2cb83e8eb552817ceaf8ee8e4b197864a6ac975958e96') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:44', '78bf9021b082580d17c8a28e9fc8f29f0f73f5b5d11c39626df9ed703feafc7017bd8c024b57a9b174bf9d6481343d9b1cd5a71d791984b047f9f26495a3474e', '2009-09-09 05:46:44', 'subscriber', 'hbyXNKegKQ31TjNUUjfC', 'bc009a454c15414212f206902a97e00bbe2fcb03fc9879afae1717696e7f136955f139f0c442daa0a6a2cb83e8eb552817ceaf8ee8e4b197864a6ac975958e96', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:44', '2009-09-09 05:46:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:44', NULL, NULL, NULL, '2009-09-09 05:46:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:44', "created_at" = '2009-09-09 05:46:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:44', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (19.6ms)
Completed in 26ms (View: 24, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:44) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (4.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 37ms (View: 25, DB: 6) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:44) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 05:46:44', '2009-09-09 05:46:44', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 47ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2d78d7477c21a55744f42ca194403dc7966acd9601617c1a068682f79fea602a9e8e3435a798f7525d292a15a061fa4daf710026b0995c9a5ed12a9e3a2f9254') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (13.1ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:45', 'aacc6b4da305bbfce9fd345310a22c2fb39d3b149763c38cfe272da2a605496c713e2599b791fbf79d41381a2fdf1af2b155b0a44bd940f89c2a063e937c235c', '2009-09-09 05:46:45', 'subscriber', '86J2P1-TvXbSe3T1smV1', '2d78d7477c21a55744f42ca194403dc7966acd9601617c1a068682f79fea602a9e8e3435a798f7525d292a15a061fa4daf710026b0995c9a5ed12a9e3a2f9254', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:45', '2009-09-09 05:46:45', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:45', NULL, NULL, NULL, '2009-09-09 05:46:45', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:45', "created_at" = '2009-09-09 05:46:45', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:45', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:45', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 7, DB: 17) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 16ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 212ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:45) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (1.8ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (1.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.6ms)
Completed in 41ms (View: 28, DB: 4) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:45) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 05:46:45', '2009-09-09 05:46:45', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:46:45', '2009-09-09 05:46:45', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:45', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 26ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7dceae53dfb6df07a5bdaeab902529b82155a88e453c612bf7ed8accfa28aa3e5d773526414c102cfa5207eece916049e8d13e93dc24a7f482bb1c9aaed42a8c') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:45', 'a31132c91e37e50715bc42adec3c7be79e1e3946a49b70357825bc90dccf5df59adfd27ea7b4a6abdcd66e13af7b6c2acd6cdf54465b684323c680febab63816', '2009-09-09 05:46:45', 'subscriber', 'Gpwp16va224BcCv8DFEs', '7dceae53dfb6df07a5bdaeab902529b82155a88e453c612bf7ed8accfa28aa3e5d773526414c102cfa5207eece916049e8d13e93dc24a7f482bb1c9aaed42a8c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:45', '2009-09-09 05:46:45', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:45', NULL, NULL, NULL, '2009-09-09 05:46:45', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:45', "created_at" = '2009-09-09 05:46:45', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:45', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.6ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:45', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 5, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (17.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 33ms (DB: 19) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (4.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 34ms (View: 11, DB: 5) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:46) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:46:46', '2009-09-09 05:46:46', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:46', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:46:46', '2009-09-09 05:46:46', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:46', "state" = 'authorized' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:46', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 202ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e1f3f4861451f228e4f216d687cc0dad4c37eef8501186e3df435ed22aedaca848c5eb3a6f7d52d9fe84abec83b22f992a3e3cbb6a1af8d9d1fbcef1bd85a678') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:46', '0ece8f7548cbbeb180381b9ce2da2808d816666b9d6560895b6e79aa905ffb55bdc20d914f7cdc7efbbf03b8db2965b71c56d03e2039f9270ab44a47f9430640', '2009-09-09 05:46:46', 'subscriber', '7JNNLwK1wytGcEah9O4b', 'e1f3f4861451f228e4f216d687cc0dad4c37eef8501186e3df435ed22aedaca848c5eb3a6f7d52d9fe84abec83b22f992a3e3cbb6a1af8d9d1fbcef1bd85a678', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:46', '2009-09-09 05:46:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:46', NULL, NULL, NULL, '2009-09-09 05:46:46', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:46', "created_at" = '2009-09-09 05:46:46', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:46', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 5ms (View: 5, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:46) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:46:46', '2009-09-09 05:46:46', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:46', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:46:46) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 05:46:46', '2009-09-09 05:46:46', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:46:46', '2009-09-09 05:46:46', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:46', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-09 01:46:46) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;36;1mSubscriptionTransaction Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;35;1mSubscriptionPlan Load (2.2ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.4ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '95fb4b9dd37664b19e68d84f68693a534624bf615be6203ed572a9d78d21c2480ad225e6b64924590241f8aee6bc7464d8821d16fc61091f9570553fb9057c03') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:47', '5856fce99f4a67d1846a65dd6ef8d11a000d21063d4d58dba00ead83319a73fa41034e8cea2f01cac84daa08182385a1536bff86f0ed8989213769d02ca77e23', '2009-09-09 05:46:47', 'subscriber', 'ekroXC-bI4rauV2pfoej', '95fb4b9dd37664b19e68d84f68693a534624bf615be6203ed572a9d78d21c2480ad225e6b64924590241f8aee6bc7464d8821d16fc61091f9570553fb9057c03', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.4ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:47', '2009-09-09 05:46:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:47', NULL, NULL, NULL, '2009-09-09 05:46:47', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "created_at" = '2009-09-09 05:46:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1e0a8596ef5fed70915a1da5a532c8cab4004bc6aef743d63f89fe86289297e94371b471fce4da4328c5fe4651ae9cc37c2ae4dc0bd6b70da8ee220a7e169b12') LIMIT 1[0m
  [4;35;1mUser Load (12.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '95fb4b9dd37664b19e68d84f68693a534624bf615be6203ed572a9d78d21c2480ad225e6b64924590241f8aee6bc7464d8821d16fc61091f9570553fb9057c03') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:47', 'fa87d04759cf7fc1689611ce83956835bd1aab49018cccdc94d57e97a9ab9ed8e92e766f665e62d4e084a4b4bb2000f56c9fde3c5fa0dca442446088fd2acbc5', '2009-09-09 05:46:47', 'subscriber', 'Sdf5swoJlIdu35PozndM', '1e0a8596ef5fed70915a1da5a532c8cab4004bc6aef743d63f89fe86289297e94371b471fce4da4328c5fe4651ae9cc37c2ae4dc0bd6b70da8ee220a7e169b12', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (3.9ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:47', '2009-09-09 05:46:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:47', NULL, NULL, NULL, '2009-09-09 05:46:47', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "created_at" = '2009-09-09 05:46:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '428c3f3e335c9abf3f689a6c69bfe286a473284d54d066ee4246dee80bf69031b751d505686b2fff57d5438cd0128f76cb4452c9275b34d39d11295532e10cc2') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '1e0a8596ef5fed70915a1da5a532c8cab4004bc6aef743d63f89fe86289297e94371b471fce4da4328c5fe4651ae9cc37c2ae4dc0bd6b70da8ee220a7e169b12') LIMIT 1[0m
  [4;36;1mUser Create (0.9ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:47', 'a45ed45cc966f15c9a5a4f67d8c523fd300f7ad9bce1885f4d965026d238f39d24bb98181e2579a979a97a583ca6dc2a009374e064b96ba332c5c4cd7f86dbd1', '2009-09-09 05:46:47', 'subscriber', 'XgcaCOM0iV7FPkIRAvxC', '428c3f3e335c9abf3f689a6c69bfe286a473284d54d066ee4246dee80bf69031b751d505686b2fff57d5438cd0128f76cb4452c9275b34d39d11295532e10cc2', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:47', '2009-09-09 05:46:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:47', NULL, NULL, NULL, '2009-09-09 05:46:47', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "created_at" = '2009-09-09 05:46:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0abdec429dc8c35279264fa79f4d30d3bb8a79bb40abf2422fe605901f1ba05f026903ba554ea09b17cbccac479cc386a8dfaba9c4d4e333eafcce96046d5b16') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '428c3f3e335c9abf3f689a6c69bfe286a473284d54d066ee4246dee80bf69031b751d505686b2fff57d5438cd0128f76cb4452c9275b34d39d11295532e10cc2') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:47', '6dc6dd96c36211cae4e6496b2c79ab99e104469fbea3bbb230e33e814f8334bb2f835e785ec71e863155c5006b1a9ce3cc294037839851a0e03a224b094f0143', '2009-09-09 05:46:47', 'subscriber', 'le--m5xL0tC7gGq9iTmg', '0abdec429dc8c35279264fa79f4d30d3bb8a79bb40abf2422fe605901f1ba05f026903ba554ea09b17cbccac479cc386a8dfaba9c4d4e333eafcce96046d5b16', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:47', '2009-09-09 05:46:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:47', NULL, NULL, NULL, '2009-09-09 05:46:47', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "created_at" = '2009-09-09 05:46:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 32) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:46:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 19ms (View: 11, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:46:47) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b13d7e4846fbd4d96bf26b041c77c2581f517d4ec8f61fa0e9274a2bd83a88b6b29fb3fe5cda75c360d2711ef4b886a1f7b886fe61addc20755c65f7cfdb3c3e') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:47', '8359567f4b4d2baa5e24c5dc164df071b315c26fb917e4c12247d4942ae7bba46a2c8f4c8c1eeb137353592d5ebe626ff82b9ced89821b7a3379e4102b049826', '2009-09-09 05:46:47', 'subscriber', 'WE7xfCqs_nbAjo6xIpBa', 'b13d7e4846fbd4d96bf26b041c77c2581f517d4ec8f61fa0e9274a2bd83a88b6b29fb3fe5cda75c360d2711ef4b886a1f7b886fe61addc20755c65f7cfdb3c3e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:47', '2009-09-09 05:46:47', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:47', NULL, NULL, NULL, '2009-09-09 05:46:47', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:47', "created_at" = '2009-09-09 05:46:47', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b13d7e4846fbd4d96bf26b041c77c2581f517d4ec8f61fa0e9274a2bd83a88b6b29fb3fe5cda75c360d2711ef4b886a1f7b886fe61addc20755c65f7cfdb3c3e') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:46:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 12ms (View: 8, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:46:47) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '73583a516eac77943d4b29f010e68b83e437110ecd04e35cf9eabd217e047cf663de7909fb24fd1173fc4ba194f95272d8046dde54d04c9fc74651b160eb8aad') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:47', '617a2dfc0c75d0b21911e4ab5cacb469f1055e158da000864b5c3d2bcac6005dd4e8a258a374322db6a3d8f36954c595c63d36c4da49a1079373a03e0a5240d8', '2009-09-09 05:46:47', 'subscriber', 'OJAD_tBUcOoaNg75EZ89', '73583a516eac77943d4b29f010e68b83e437110ecd04e35cf9eabd217e047cf663de7909fb24fd1173fc4ba194f95272d8046dde54d04c9fc74651b160eb8aad', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:47', '2009-09-09 05:46:47', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:48', NULL, NULL, NULL, '2009-09-09 05:46:48', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:48', "created_at" = '2009-09-09 05:46:47', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '73583a516eac77943d4b29f010e68b83e437110ecd04e35cf9eabd217e047cf663de7909fb24fd1173fc4ba194f95272d8046dde54d04c9fc74651b160eb8aad') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 12ms (View: 8, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:46:48) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd5f144ae7eba55035a186baed98e9dcb56e5cf3cf60be63d93f60b6dccca43da0803c24b83827230061ba7fc8c21257233cb931017f3fa5e9bb361286afba123') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:48', '10114a3baaf8610fa4912339da89cc7b72153c4fcf29a702d91a9971559c52bf27c1f75fc2dacff90df2267c0e06980e6c1e68e7415187ab1d42b6e4b1130a8a', '2009-09-09 05:46:48', 'subscriber', 'Af8iRSCfD-NWocRjUgNK', 'd5f144ae7eba55035a186baed98e9dcb56e5cf3cf60be63d93f60b6dccca43da0803c24b83827230061ba7fc8c21257233cb931017f3fa5e9bb361286afba123', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:48', '2009-09-09 05:46:48', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:48', NULL, NULL, NULL, '2009-09-09 05:46:48', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:48', "created_at" = '2009-09-09 05:46:48', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 148ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'd5f144ae7eba55035a186baed98e9dcb56e5cf3cf60be63d93f60b6dccca43da0803c24b83827230061ba7fc8c21257233cb931017f3fa5e9bb361286afba123') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '229fa25bc918df0fee7da85186de5727a2ccf913a282f403e2bc00cdf9c82ea2160959a691139f3af8961579c83105754c53cf8750d9ae333a6eaf06227fedb5') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'd5f144ae7eba55035a186baed98e9dcb56e5cf3cf60be63d93f60b6dccca43da0803c24b83827230061ba7fc8c21257233cb931017f3fa5e9bb361286afba123') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:48', 'a6841bf5096ad785e640ec5e50ba58c4bad5c785bfc18ab9a0c322cf3ae9471a5e3cfab80905cd73976f3e918b881a353355d223be9088b7e06c1497cec7732d', '2009-09-09 05:46:48', 'subscriber', 'CYOGc3odYSuYsI0NUNDU', '229fa25bc918df0fee7da85186de5727a2ccf913a282f403e2bc00cdf9c82ea2160959a691139f3af8961579c83105754c53cf8750d9ae333a6eaf06227fedb5', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:48', '2009-09-09 05:46:48', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:48', NULL, NULL, NULL, '2009-09-09 05:46:48', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:48', "created_at" = '2009-09-09 05:46:48', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (3.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 5) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.1ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b4ac04d717ea53483daf0a9daff75c32be6672175c1d0bfa2f032cc2c9929475e0f7696d5ad664262e98cceed391ac65b8ec3f65f06e4a8aa3ed75e7a0e18d45') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:48', '8b66c0d06058d7e32b0e9909ebbe45c98f347b54a85caca6e641ad0380499097d5f806258d52cdec0fb42bd7f8e298e9a127ed1f8ac1f02f3b04156e82751189', '2009-09-09 05:46:48', 'subscriber', 'CeSvlcghqAm7xPiVTLMP', 'b4ac04d717ea53483daf0a9daff75c32be6672175c1d0bfa2f032cc2c9929475e0f7696d5ad664262e98cceed391ac65b8ec3f65f06e4a8aa3ed75e7a0e18d45', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:48', '2009-09-09 05:46:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (1.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:48', NULL, NULL, NULL, '2009-09-09 05:46:48', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:48', "created_at" = '2009-09-09 05:46:48', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 8ms (View: 7, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (4.1ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 6) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.8ms)
Completed in 10ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.8ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 20ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c73626960d43dc585a2515801cbe4e7cab71211a001dbb9e9724924c08077c4764337d504231beed7fce97644b1cc8bfaab3eac6151130f4c6007c4c40ef7b1d') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:49', 'c6b1bec7695cefb4ea081bc3119a86fef67996f72c43c69b46c4d16066803303600f1c75742ecb86d3473cc64f5ae6a2f96c921a8e2c9cb24b20eb4d8bffae2e', '2009-09-09 05:46:49', 'subscriber', 'mf4QmJxzvMccxsnvtzAC', 'c73626960d43dc585a2515801cbe4e7cab71211a001dbb9e9724924c08077c4764337d504231beed7fce97644b1cc8bfaab3eac6151130f4c6007c4c40ef7b1d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:49', '2009-09-09 05:46:49', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:49', NULL, NULL, NULL, '2009-09-09 05:46:49', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:49', "created_at" = '2009-09-09 05:46:49', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:49', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:49) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:49) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3f21fb2987051a459e752635307a02f70d753c2829469dbae55a98b2cea8f478cea2c2d4a3fbc28c6e0d054966bc69db8d56b0bf191bb10df8b55c7c31e52f5a') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:49', '0e5cde9d585437519f5a4005cdcc426775d3cb88179c7e922bee408edb7299fdbd21279e47e33d45c74b4a2ac2d957c96c23144e090da0d42a04f3684d21fe9e', '2009-09-09 05:46:49', 'subscriber', '5_pfg8aSHD3JkP6ZMvuy', '3f21fb2987051a459e752635307a02f70d753c2829469dbae55a98b2cea8f478cea2c2d4a3fbc28c6e0d054966bc69db8d56b0bf191bb10df8b55c7c31e52f5a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:49', '2009-09-09 05:46:49', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:49', NULL, NULL, NULL, '2009-09-09 05:46:49', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:49', "created_at" = '2009-09-09 05:46:49', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:49', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:49', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 7ms (View: 7, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:49) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (14.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (1.0ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.8ms)
Completed in 47ms (View: 15, DB: 18) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd0a51ab5fbca31a892cd80f4b342f1e7f2463dea261568010146bd5bb01a14cff6ef62bdbe636a364ce739caafc3ed4218d4a282627e60b26c7e84204fa52cc3') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:50', '9dbeee4e9890b3c98ec76d2fa6fa3ee666cc241eb1c3af5f3f31e7f3e175a754136ea4abce352c892ac4b22a649b2ec19118a116ac4a8f03014d605e8ce962b4', '2009-09-09 05:46:50', 'subscriber', 'FdtIynkZ-4LEmsa4H0OF', 'd0a51ab5fbca31a892cd80f4b342f1e7f2463dea261568010146bd5bb01a14cff6ef62bdbe636a364ce739caafc3ed4218d4a282627e60b26c7e84204fa52cc3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:50', '2009-09-09 05:46:50', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:50', NULL, NULL, NULL, '2009-09-09 05:46:50', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:50', "created_at" = '2009-09-09 05:46:50', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:50', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:50', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:50', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '23ffaeb7e6572bfb514b39d4d93ab6d653e8552d539eceddc080bc90428e15a5a82ad5a5bbf1bee058bf1b145cde00c01c437d0cbf7437fb9d81a4418eb02224') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:50', '491dc1041bb024b4b53775b90aae586861048c38d25206df012c90d4a43d4a5be4097bd13c071c953577735cd6e7931398178142f39240f889ec1fcd69d83033', '2009-09-09 05:46:50', 'subscriber', 'ncpYzCzHkGqUUqk-iDrv', '23ffaeb7e6572bfb514b39d4d93ab6d653e8552d539eceddc080bc90428e15a5a82ad5a5bbf1bee058bf1b145cde00c01c437d0cbf7437fb9d81a4418eb02224', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:50', '2009-09-09 05:46:50', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:50', NULL, NULL, NULL, '2009-09-09 05:46:50', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:50', "created_at" = '2009-09-09 05:46:50', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:50', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:50', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 30ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:50) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (5.2ms)
Completed in 19ms (View: 11, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd34cf1c35b875f5102fed7ab0af13fd1c3a052756aef9beef9722293edd57ef21d578fe39b19cf92091668bd0f6aa3b6f3dba2ceef3d4b1208bbb704e1ffdde7') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:51', 'f53ed1a8acf984be7b6f6cd293c0a42cce984e9112a9f4252da7d344db1e984b4521d1f2d82a27a9e0568a1cfe23b0fcfba81aea5b1d85aac7d48d3812ec2dad', '2009-09-09 05:46:51', 'subscriber', 'i8V-SlKhfFw7VUASNmHI', 'd34cf1c35b875f5102fed7ab0af13fd1c3a052756aef9beef9722293edd57ef21d578fe39b19cf92091668bd0f6aa3b6f3dba2ceef3d4b1208bbb704e1ffdde7', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:51', '2009-09-09 05:46:51', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:51', NULL, NULL, NULL, '2009-09-09 05:46:51', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:51', "created_at" = '2009-09-09 05:46:51', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:51', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:51', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:46:51', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (1.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:46:51) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'da2634b47548249513c3f0c7a2ea36c32b55ace012b973b79a1d6ea62d4e27722181065c592293f7d82c995016421699fb9c62befcdd3396c3b10615b5754811') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:51', '8c69ca793e0cef831955c7e4444ec5a091db7cde497ebc69d4a4ff3f0e8fa9b21c7e2fa076e3f5d55d571727533468d50e27ea82d63927c7be4a09f999faf65e', '2009-09-09 05:46:51', 'subscriber', 'IARHj9EVyKAa1yAn3fUv', 'da2634b47548249513c3f0c7a2ea36c32b55ace012b973b79a1d6ea62d4e27722181065c592293f7d82c995016421699fb9c62befcdd3396c3b10615b5754811', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:51', '2009-09-09 05:46:51', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:51', NULL, NULL, NULL, '2009-09-09 05:46:51', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:51', "created_at" = '2009-09-09 05:46:51', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'da2634b47548249513c3f0c7a2ea36c32b55ace012b973b79a1d6ea62d4e27722181065c592293f7d82c995016421699fb9c62befcdd3396c3b10615b5754811') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 135ms (View: 134, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '596960a4924df62472de69871dfade084d1c4b985259ee4a210efa1376f91eb11a9c5bfdaa12c00632feb7c8423502d979e00fe55abe7426aee3bcb6912f1e21') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:51', '105930c168c0d4f2005bc568b242c88162a7d0cf67d9b0b429712e5c6f619ad4d1ab5b893966379e30ae9b74a15db8ac2f038982ec1cef0fe9c84d2111496328', '2009-09-09 05:46:51', 'subscriber', 'K8E0_HU3RLeSikoys58b', '596960a4924df62472de69871dfade084d1c4b985259ee4a210efa1376f91eb11a9c5bfdaa12c00632feb7c8423502d979e00fe55abe7426aee3bcb6912f1e21', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:51', '2009-09-09 05:46:51', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:51', NULL, NULL, NULL, '2009-09-09 05:46:51', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:51', "created_at" = '2009-09-09 05:46:51', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 134ms (View: 134, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a817cbdc8bb9a323737fcb707667c8aa9c1a4eb34b6857daf1c425508eada9b3326b49a3e982129923d3e34f2741760c75a70621283ea7f3f0311f978a9d9593') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:46:51', 'd3ccf75156a297d49ba33d96839ae50950f69f08c878fa411f60901155bb0a66e9980dfbf369eeddb9874509600f8b1f21c84d0a3839e4707562e5abb6d0ef06', '2009-09-09 05:46:51', 'subscriber', '7WuMgR3ukwrk5AWnGhM3', 'a817cbdc8bb9a323737fcb707667c8aa9c1a4eb34b6857daf1c425508eada9b3326b49a3e982129923d3e34f2741760c75a70621283ea7f3f0311f978a9d9593', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:46:51', '2009-09-09 05:46:51', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:46:51', NULL, NULL, NULL, '2009-09-09 05:46:51', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:46:51', "created_at" = '2009-09-09 05:46:51', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:46:51) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:46:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:49:24', 0, '2009-09-09 05:49:24', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:49:24', 1000, '2009-09-09 05:49:24', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:49:24', 30000, '2009-09-09 05:49:24', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 11ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '82d5013a03079d866bd307ba923a74b8b30ffb0553053c3dc91422de6fc8ab59478e583be3656a595763a86f59568b29691ca9b11d6f23490392da823dfc7527') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:24', '683798d060f194fba11e2b79a7297b66a1759edbd19af1fedf94538e0175827444e4d239fdce380c4a465ff1da7f94ddabadf83abb67f6a86135ff485bff2f4b', '2009-09-09 05:49:24', 'subscriber', 'BjL_D6cO7Ne-EzxVh4ke', '82d5013a03079d866bd307ba923a74b8b30ffb0553053c3dc91422de6fc8ab59478e583be3656a595763a86f59568b29691ca9b11d6f23490392da823dfc7527', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:24', '2009-09-09 05:49:24', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:24', NULL, NULL, NULL, '2009-09-09 05:49:24', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:24', "created_at" = '2009-09-09 05:49:24', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c48c11319abf793285db8cea81dcef6682c7c3bc792a5f572c01b71024c4d67d6fc47ab1712f4cc1f808acf9f98b3e253847a88c4067a980c7f7f83b6ed8ada8') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:24', '913bdde2572706c3e6bc9813032f81015afd311e1732c6afb001c55ed85adc379a1de2fa0e51f9254ce8d4f6b390a78066d16a5a0caaa09b27ffbd2d989c05ac', '2009-09-09 05:49:24', 'subscriber', 'N8DmLVJBfJvb3lTsAivw', 'c48c11319abf793285db8cea81dcef6682c7c3bc792a5f572c01b71024c4d67d6fc47ab1712f4cc1f808acf9f98b3e253847a88c4067a980c7f7f83b6ed8ada8', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:24', '2009-09-09 05:49:24', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:24', NULL, NULL, NULL, '2009-09-09 05:49:24', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:24', "created_at" = '2009-09-09 05:49:24', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-09 01:49:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 137ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-09 01:49:25) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:25', 'title 1', 'body 1', '2009-09-09 05:49:25')[0m
Redirected to http://www.example.com/infos/1
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-09 01:49:25) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 6, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5d26585089b8cbc1269e61ab55c360210baf74a75f3a10f2d65a8f925f398db8262f6097d0b33fa094bd2e65445f061b2741a855f37f0745af5129b96788112f') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:25', '7312f1628d87d16b80a521a1ead60c99c7021fd7bdc788c408c52c19796b05ea1c84116fe3167cd8260275ca7f6ee5834a54a90364c264edafa6500f8e2c4229', '2009-09-09 05:49:25', 'subscriber', 'q9SnguUfKPYHPYww5bEQ', '5d26585089b8cbc1269e61ab55c360210baf74a75f3a10f2d65a8f925f398db8262f6097d0b33fa094bd2e65445f061b2741a855f37f0745af5129b96788112f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:25', '2009-09-09 05:49:25', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:25', NULL, NULL, NULL, '2009-09-09 05:49:25', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:25', "created_at" = '2009-09-09 05:49:25', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:25', 'title 1', 'body 1', '2009-09-09 05:49:25')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:25', 'title 2', 'body 2', '2009-09-09 05:49:25')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:25', 'title 3', 'body 3', '2009-09-09 05:49:25')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:25', 'title 4', 'body 4', '2009-09-09 05:49:25')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:49:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.6ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-09 01:49:25) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:49:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:49:38', 0, '2009-09-09 05:49:38', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:49:38', 1000, '2009-09-09 05:49:38', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:49:38', 30000, '2009-09-09 05:49:38', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:49:38) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '517ac4274f9bc6b51afea1965723ff5635808e38c104c38e588ce13605336b82ff2b04212881b447383ba469eaea1ec4e6eac77c4e4978e46280a0ae3588e1a9') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:39', '21716c1358567325c90fc2c3afc4cadca9509418925c72ccda2e061724c0f61226baed7ff36dc6de05a9625fc0f277448605c7cd4137c89d0b38c1afe6102301', '2009-09-09 05:49:39', 'subscriber', 'eZUgGwhDpCrzrkzmvJKU', '517ac4274f9bc6b51afea1965723ff5635808e38c104c38e588ce13605336b82ff2b04212881b447383ba469eaea1ec4e6eac77c4e4978e46280a0ae3588e1a9', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:39', '2009-09-09 05:49:39', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:39', NULL, NULL, NULL, '2009-09-09 05:49:39', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:39', "created_at" = '2009-09-09 05:49:39', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f5fac6ad9c615678196b2c006eee3ccd58a01f04647c0b8f1e37eb6766d9c2d246c8514404a60eccdc33872a05791a3f560fa16ecdd46827d8bd4d4b7229c099') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (3.0ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:39', '6bc5c8cb7bb804d75d3396ca0a8944777c4611d2aa7e94c9da483b25c4fc2bf236ef82ae172d21cec28c750a33c73670a4ba37064786d93ac47f80d3b0a81a89', '2009-09-09 05:49:39', 'subscriber', 'H8viOg7qw5cm3x8AHmrp', 'f5fac6ad9c615678196b2c006eee3ccd58a01f04647c0b8f1e37eb6766d9c2d246c8514404a60eccdc33872a05791a3f560fa16ecdd46827d8bd4d4b7229c099', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (1.1ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:39', '2009-09-09 05:49:39', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:39', NULL, NULL, NULL, '2009-09-09 05:49:39', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:39', "created_at" = '2009-09-09 05:49:39', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-09 01:49:39) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.3ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:39', 'title 1', 'body 1', '2009-09-09 05:49:39')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ca7646a5c0ff01461cfa2ef0cb3806a1fc30ebffc3a622a4ba8fc8d8b63107194fcc4e3cf7bbd29eaac33abd7ceb5b14e614e94cfe42fbf9df9726c1cee5ec8d') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:39', '437babaa8789a38b18228947ab772ea0fd916637cdbf3de8ca376d31891061188ea99f3b0516b26bd854600a78b57b514a80c283404f632af168d9827ded9067', '2009-09-09 05:49:39', 'subscriber', 'Rv0tPESzNmUP1_mw8Kaz', 'ca7646a5c0ff01461cfa2ef0cb3806a1fc30ebffc3a622a4ba8fc8d8b63107194fcc4e3cf7bbd29eaac33abd7ceb5b14e614e94cfe42fbf9df9726c1cee5ec8d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:39', '2009-09-09 05:49:39', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:39', NULL, NULL, NULL, '2009-09-09 05:49:39', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:39', "created_at" = '2009-09-09 05:49:39', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:39', 'title 1', 'body 1', '2009-09-09 05:49:39')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:39', 'title 2', 'body 2', '2009-09-09 05:49:39')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:39', 'title 3', 'body 3', '2009-09-09 05:49:39')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 05:49:39', 'title 4', 'body 4', '2009-09-09 05:49:39')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-09 01:49:39) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.1ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 01:49:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd8e7cde33dfaa46086cec09412860408b651e4ab54419d55388a63883f03b266d048bfcd5d51e9f67deee643cf6dce0786bfb4d37c3aa9dda906ef68b84571e4') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:40', '7c47028a7ee8afc8ab0a37f02fc7d90fcf1da1fab4467181bff4b1a7748505c5708b2ea7a2fa3ac1e4c090a9b606799a9dad7ba60209ba78009774a1401ac5eb', '2009-09-09 05:49:40', 'subscriber', 'qE4Ufd7ffm064vLQPg0A', 'd8e7cde33dfaa46086cec09412860408b651e4ab54419d55388a63883f03b266d048bfcd5d51e9f67deee643cf6dce0786bfb4d37c3aa9dda906ef68b84571e4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:40', '2009-09-09 05:49:40', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:40', NULL, NULL, NULL, '2009-09-09 05:49:40', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:40', "created_at" = '2009-09-09 05:49:40', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:40', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:40) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:49:40', '2009-09-09 05:49:40', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:40', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 24ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (3.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bad14f6962dadd23d2f251deb0d2fde62ab084203c4ac985d634d139852611ebc6d2ef25d17da524c61f40d30125b09a64f749ee6f05d31e8fc682836c0bc16f') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (16.2ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:40', '5fe8f9a47bef2b55213907a773393781dd9e235543b9b59ef13ab20bc979b5b4f7d317e2b5d6f1733177e391d79698cbbab0323eb76f5b2a181a5f74671b842b', '2009-09-09 05:49:40', 'subscriber', 'BJxSXTiNMzUg8qjVpe5E', 'bad14f6962dadd23d2f251deb0d2fde62ab084203c4ac985d634d139852611ebc6d2ef25d17da524c61f40d30125b09a64f749ee6f05d31e8fc682836c0bc16f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:40', '2009-09-09 05:49:40', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:40', NULL, NULL, NULL, '2009-09-09 05:49:40', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:40', "created_at" = '2009-09-09 05:49:40', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:40', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 9, DB: 24) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.6ms)
Completed in 48ms (View: 28, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:41) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 173ms (View: 163, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (1.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4eefa384b9d2ae0707ae80fe92b931ad186382274bf3d26862ba717dad24578ed207de3a9071e157e8dbe2b35ba38f0ad2ad485eae017aed58cd6a85bff82878') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:41', '55db0bbbbd4d55cecaf9cbb843f7a887569fc54e1251b4d7a2d6631eb42abe7edd1ee5673ea358f41a03b0331e72ff0c1e46a4a5a81165c3b46eeda36f42397a', '2009-09-09 05:49:41', 'subscriber', 'ApgNyri_IUL2dLBfRmWE', '4eefa384b9d2ae0707ae80fe92b931ad186382274bf3d26862ba717dad24578ed207de3a9071e157e8dbe2b35ba38f0ad2ad485eae017aed58cd6a85bff82878', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:41', '2009-09-09 05:49:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:41', NULL, NULL, NULL, '2009-09-09 05:49:41', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (1.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:41', "created_at" = '2009-09-09 05:49:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:41', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 8ms (View: 7, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 12ms (View: 11, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:41) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:41) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (13.9ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 05:49:41', '2009-09-09 05:49:41', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 40ms (View: 9, DB: 16) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ababed5b693c7afb07f9995d26e928b14d424ea301e50c9da9a69b0a898954878ab079f2ee6320706637c972403aa59e41e9b5506f0dc030716b46fb76f64a5b') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:42', 'a5376e19107d04e17fed7f7938235d9823296eb8077fdb6f5ddf46af8d358e19625f545ae05acb03d6ab46c99ac82840d0089002b81b0a2eb05743309b14b13a', '2009-09-09 05:49:42', 'subscriber', 'p1ElDd0-PPPXhuse6SoC', 'ababed5b693c7afb07f9995d26e928b14d424ea301e50c9da9a69b0a898954878ab079f2ee6320706637c972403aa59e41e9b5506f0dc030716b46fb76f64a5b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:42', '2009-09-09 05:49:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:42', NULL, NULL, NULL, '2009-09-09 05:49:42', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:42', "created_at" = '2009-09-09 05:49:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:42', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.5ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:42', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 7ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (1.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:42) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:42) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 05:49:42', '2009-09-09 05:49:42', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:49:42', '2009-09-09 05:49:42', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.9ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:42', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 38ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3361afeee28a1a7af0fcc3bc8b1f450faa03ec971dff6b1a38acf899b8e112d45df130b80ea04b889acf2aff793d1d8bdc81d4df561b785c5d045564155d244c') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:42', '6cb600ace451755da24ab7182aa5cb9e8d873b420d0af7bfcef1f24a0eb9cceac313c380e35d71b03c473dc9b241da648aa90bb58e4c7a52de208e837f021bf5', '2009-09-09 05:49:42', 'subscriber', 'c5la9FrKj7MtfLCl9MrS', '3361afeee28a1a7af0fcc3bc8b1f450faa03ec971dff6b1a38acf899b8e112d45df130b80ea04b889acf2aff793d1d8bdc81d4df561b785c5d045564155d244c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:42', '2009-09-09 05:49:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:42', NULL, NULL, NULL, '2009-09-09 05:49:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:42', "created_at" = '2009-09-09 05:49:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:42', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:42', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 10ms (View: 9, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 19ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.6ms)
Completed in 22ms (View: 15, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:43) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:49:43', '2009-09-09 05:49:43', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:49:43', '2009-09-09 05:49:43', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:43', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:43', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 193ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (4.4ms)
Completed in 19ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd145087dca3399bdf40534fb4b1b7f6784e544baf33d0388c6c36f992652011927698a45eb80192da1a541802d1af6ef30b4495531a428063e9d34206b281bee') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:43', 'c606b1a46ffac04b69498a0f7d25d366331a79d1f4ff953cc84665945177305f67de1b579f1732b3b50950e8c6c8983d08a03563c745db543d5a3a78728e9ffc', '2009-09-09 05:49:43', 'subscriber', '-edimESngDBycCq_3y0w', 'd145087dca3399bdf40534fb4b1b7f6784e544baf33d0388c6c36f992652011927698a45eb80192da1a541802d1af6ef30b4495531a428063e9d34206b281bee', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:43', '2009-09-09 05:49:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:43', NULL, NULL, NULL, '2009-09-09 05:49:43', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:43', "created_at" = '2009-09-09 05:49:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:43) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:49:43', '2009-09-09 05:49:43', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:49:43) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.9ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 05:49:43', '2009-09-09 05:49:43', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:49:43', '2009-09-09 05:49:43', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:43', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 24ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-09 01:49:43) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;35;1mSubscriptionTransaction Load (0.8ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.5ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f05644eabccf60ff8ee46da600dd2baa13449a1618d0fdbc4daf50cde1fa333a50c62dba89a632fad011574dcf6a3a8af9c83856ab1e74de8a96318745bff622') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (1.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:44', 'eed85fff75435e70c7e34607cfbeaa0cb9e7959959c863cc2b51ee24f8b4535b418bcfcefb107cc998065170e9c462b564a6e150746760b0364fddc06495525e', '2009-09-09 05:49:44', 'subscriber', 'QGNDihhLrrOf5sZDlDWf', 'f05644eabccf60ff8ee46da600dd2baa13449a1618d0fdbc4daf50cde1fa333a50c62dba89a632fad011574dcf6a3a8af9c83856ab1e74de8a96318745bff622', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:44', '2009-09-09 05:49:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:44', NULL, NULL, NULL, '2009-09-09 05:49:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "created_at" = '2009-09-09 05:49:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e25dede799dfccf7c3bc40b6023e9f3d02ee9f1c674b25ce74b510c59f8701c45dc2b8fad3994a80c4d5dc892021f860f2280c5f614dde2a59f0698fa4acb11f') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'f05644eabccf60ff8ee46da600dd2baa13449a1618d0fdbc4daf50cde1fa333a50c62dba89a632fad011574dcf6a3a8af9c83856ab1e74de8a96318745bff622') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:44', '4968de1ee58434ea6694d325d96987a11bbfcdb9d9c45c698a00f9176cbfa59c10ce1ce8f7ea93e3a063c0da6813b84ef754085f2d6677fc1fb901f71d0bc5d3', '2009-09-09 05:49:44', 'subscriber', 'ejjRdDvEWLcpbuAuRl5y', 'e25dede799dfccf7c3bc40b6023e9f3d02ee9f1c674b25ce74b510c59f8701c45dc2b8fad3994a80c4d5dc892021f860f2280c5f614dde2a59f0698fa4acb11f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:44', '2009-09-09 05:49:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:44', NULL, NULL, NULL, '2009-09-09 05:49:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "created_at" = '2009-09-09 05:49:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '769a29e0e22d04ec0119f6a7498f7652fc4d8271e648a6fa33645c2666d0f45e0d8799c21da4fc66917dade3b0c2c5da1b301bee7661d649df57c8bdb151b642') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'e25dede799dfccf7c3bc40b6023e9f3d02ee9f1c674b25ce74b510c59f8701c45dc2b8fad3994a80c4d5dc892021f860f2280c5f614dde2a59f0698fa4acb11f') LIMIT 1[0m
  [4;35;1mUser Create (5.3ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:44', '8b6e3cf00c737eb18f33c4996410a48163dd6c9c797898d450c33f9159876102065493c2eb5f41d4b6ebb42be3767b6e8b862d101b2c4dbd08a85e9578c9a039', '2009-09-09 05:49:44', 'subscriber', '0bxtfPQCTUF0ARM5mIkO', '769a29e0e22d04ec0119f6a7498f7652fc4d8271e648a6fa33645c2666d0f45e0d8799c21da4fc66917dade3b0c2c5da1b301bee7661d649df57c8bdb151b642', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:44', '2009-09-09 05:49:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:44', NULL, NULL, NULL, '2009-09-09 05:49:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "created_at" = '2009-09-09 05:49:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5e9e236f9f9687f2774856238c17bdd8b70719e8296e2fbcc9d14285611fdd722a3edf3d3772f6a075ee3cdefba60984fe41487882cfb5e5c6a02dadc0a4d402') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '769a29e0e22d04ec0119f6a7498f7652fc4d8271e648a6fa33645c2666d0f45e0d8799c21da4fc66917dade3b0c2c5da1b301bee7661d649df57c8bdb151b642') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:44', '04c11cf4ac8244c3472914850f5fd519ae664996b20616e882ed0b0fc2c7ff51d69e1546063502b6f69c4efaaba2d92f4f2b3fd97ed2163ee28f6686365a11fd', '2009-09-09 05:49:44', 'subscriber', 'I2wkPRlWSiclGlDIfMrH', '5e9e236f9f9687f2774856238c17bdd8b70719e8296e2fbcc9d14285611fdd722a3edf3d3772f6a075ee3cdefba60984fe41487882cfb5e5c6a02dadc0a4d402', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.4ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:44', '2009-09-09 05:49:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:44', NULL, NULL, NULL, '2009-09-09 05:49:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "created_at" = '2009-09-09 05:49:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 21) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (2.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 19ms (View: 11, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:49:44) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '03ff15e143e5d0d484ff5d79cb0f16a298defc2ceab818abf03af45a97cb9f1db358ce7247276a1efe2205d9a70efa27f2289ace08b7fb71daf9cc345d0b076d') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:44', '77e8815561114f0751cd52de210658a64b029cb5b7815be956328d4110dcc4451ddf297101f5551f312d3fa50b2f154bda3436fac6fbaac83e50ed439aeaa9f6', '2009-09-09 05:49:44', 'subscriber', 'GV4fTtY41LZAyXFOiRQC', '03ff15e143e5d0d484ff5d79cb0f16a298defc2ceab818abf03af45a97cb9f1db358ce7247276a1efe2205d9a70efa27f2289ace08b7fb71daf9cc345d0b076d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:44', '2009-09-09 05:49:44', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:44', NULL, NULL, NULL, '2009-09-09 05:49:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "created_at" = '2009-09-09 05:49:44', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '03ff15e143e5d0d484ff5d79cb0f16a298defc2ceab818abf03af45a97cb9f1db358ce7247276a1efe2205d9a70efa27f2289ace08b7fb71daf9cc345d0b076d') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 13ms (View: 9, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:49:44) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'acf6c9ed9c84b9885a07d6538079172fd1a632f1ed1d067ff7384ae4a0cb8bef1ac93098b91b049ad3e1b78d6076ec50f9d75733b8c95c940789214a39239ac1') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:44', '50d6ac95a47c11c9183aad33312bb48edc418a185d5fae8466fc5b60200de7084c7e25d62572bd6df4a6b17865fcb24c7fd05ba3ee52ba1e5f40e3195b923296', '2009-09-09 05:49:44', 'subscriber', '-bN06wjWP_Ccf5YB6txy', 'acf6c9ed9c84b9885a07d6538079172fd1a632f1ed1d067ff7384ae4a0cb8bef1ac93098b91b049ad3e1b78d6076ec50f9d75733b8c95c940789214a39239ac1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:44', '2009-09-09 05:49:44', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:44', NULL, NULL, NULL, '2009-09-09 05:49:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:44', "created_at" = '2009-09-09 05:49:44', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'acf6c9ed9c84b9885a07d6538079172fd1a632f1ed1d067ff7384ae4a0cb8bef1ac93098b91b049ad3e1b78d6076ec50f9d75733b8c95c940789214a39239ac1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:49:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (2.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 13ms (View: 9, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:49:45) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '675deae021b5b7bb3727e4ce78eafdd7fb66161bcf3ace0e95571e13291910ee0926cf73802edabf70d10a674f691570ea58630625aefc624f65712a94a8433a') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:45', '01ad245c571d5411210097b0387a7b3bb655e4e6e2342f5606ba41b4f645c09293c96b324359e43b34cf22c48e55944ea70fc69350b99a6bf5023bffd92fd488', '2009-09-09 05:49:45', 'subscriber', 'v481m3jp73mLnDXYk8rL', '675deae021b5b7bb3727e4ce78eafdd7fb66161bcf3ace0e95571e13291910ee0926cf73802edabf70d10a674f691570ea58630625aefc624f65712a94a8433a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:45', '2009-09-09 05:49:45', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:45', NULL, NULL, NULL, '2009-09-09 05:49:45', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:45', "created_at" = '2009-09-09 05:49:45', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 149ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '675deae021b5b7bb3727e4ce78eafdd7fb66161bcf3ace0e95571e13291910ee0926cf73802edabf70d10a674f691570ea58630625aefc624f65712a94a8433a') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '7e8b277d6eeff05a53518b7cd2b7aa87dc6fb322c4dbdd7b0c069eb71939012af990f0e47a99466d19d89ed0c96939710d027cdf726d7d3acef88014b2a1b808') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '675deae021b5b7bb3727e4ce78eafdd7fb66161bcf3ace0e95571e13291910ee0926cf73802edabf70d10a674f691570ea58630625aefc624f65712a94a8433a') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:45', '01054cfc5e5d7f93617cc97cdcc4d42b7fb5021da39938e44735fcaa378c9f6f326b470260ffe017edc4e82201fb8f661974eb426090e4875b63c201e6834a0b', '2009-09-09 05:49:45', 'subscriber', 'gpygMioP3NDbpLH_aaa4', '7e8b277d6eeff05a53518b7cd2b7aa87dc6fb322c4dbdd7b0c069eb71939012af990f0e47a99466d19d89ed0c96939710d027cdf726d7d3acef88014b2a1b808', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:45', '2009-09-09 05:49:45', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:45', NULL, NULL, NULL, '2009-09-09 05:49:45', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:45', "created_at" = '2009-09-09 05:49:45', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.0ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 144ms (View: 138, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '87f1400d9b2580e8e1b525b469b3f462b39799eeb2a64516925588cc6b01d31d37ded4769f250ae40fdabf0907fb78135e380e0fad2fa1d7e82552c0241a48dd') LIMIT 1[0m
  [4;35;1mUser Load (3.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:45', '6c1ac66d7ad3bf5567dacfd859a01ae4f917240f534ac5569fc24d5a5ef1890da302c9bc5ef11c56fbf018afbf48b7c7494c726742747e2863478af425cb1260', '2009-09-09 05:49:45', 'subscriber', 'wY_VlZX-jktim3koxiA0', '87f1400d9b2580e8e1b525b469b3f462b39799eeb2a64516925588cc6b01d31d37ded4769f250ae40fdabf0907fb78135e380e0fad2fa1d7e82552c0241a48dd', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:45', '2009-09-09 05:49:45', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:45', NULL, NULL, NULL, '2009-09-09 05:49:45', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:45', "created_at" = '2009-09-09 05:49:45', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 7ms (View: 7, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (4.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 18ms (DB: 6) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (5.4ms)
Rendered layouts/_user_nav (0.8ms)
Completed in 17ms (View: 9, DB: 2) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 20ms (View: 11, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (4.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bd7b1e3ce5975cc1bf866a52fdba11cc9554a45237183190d370576877bddab204afcb35048fb8a5ddc78c2ef7282e9c7849f940b8144dd194db1f5a2ac7890e') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:46', '4bf35fad19e7727e9497b76be45a79771d1e8be2a4a652e167063cd8c2154199a28c4266b5555f7ecbb56524bab786543a24c673b69415d836b1e6d62d3fd0e6', '2009-09-09 05:49:46', 'subscriber', 'f13HzLOadrQOA09_WJEr', 'bd7b1e3ce5975cc1bf866a52fdba11cc9554a45237183190d370576877bddab204afcb35048fb8a5ddc78c2ef7282e9c7849f940b8144dd194db1f5a2ac7890e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:46', '2009-09-09 05:49:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:46', NULL, NULL, NULL, '2009-09-09 05:49:46', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:46', "created_at" = '2009-09-09 05:49:46', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:46', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 8) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 31ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:46) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:46) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 22ms (View: 12, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9b35d7d12e2be9f3c6f34d61e20d924027dfa66232755ca2ee15c27575cf14585cc2e58d420013301a4ba17221e73e0b9cc0ed528b451adde778bcdf4ddd41b4') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:46', '963c091ce1b969406012476b12d6a4a03f5955f037e874133f195c0ebb93ac14a959fd760e0a605bda68c966814b82b45752c20675a668052f212714e9a8eec5', '2009-09-09 05:49:46', 'subscriber', 'ezFayU6DcRiUrzo2jfyW', '9b35d7d12e2be9f3c6f34d61e20d924027dfa66232755ca2ee15c27575cf14585cc2e58d420013301a4ba17221e73e0b9cc0ed528b451adde778bcdf4ddd41b4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:46', '2009-09-09 05:49:46', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:46', NULL, NULL, NULL, '2009-09-09 05:49:46', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:46', "created_at" = '2009-09-09 05:49:46', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:46', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:46', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:46) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:46) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 16ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.7ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (1.5ms)
Completed in 45ms (View: 32, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2938e957dd5854e5322988dfa0998d32347c73c6d0109eddd16833d421020d0ecd0918ecd9600297494a51cac80944647d2c79e57c87bd69016479fb36e5b743') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.9ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:47', '65fb7195269265eeb090a685bbf68f89fbb3bd29cf61554d80737e919a9ea24b33acbe1e8d2d4c91a79ba5321886263cf4b0ce5cc684d18b760cc6d9b1958a79', '2009-09-09 05:49:47', 'subscriber', 'AoPXsT-3RDN3S3catLWB', '2938e957dd5854e5322988dfa0998d32347c73c6d0109eddd16833d421020d0ecd0918ecd9600297494a51cac80944647d2c79e57c87bd69016479fb36e5b743', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:47', '2009-09-09 05:49:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:47', NULL, NULL, NULL, '2009-09-09 05:49:47', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "created_at" = '2009-09-09 05:49:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 31ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ec454ad37bb3f50dfea059e60a5c4d41aec71022bce1168f04f26f0b3049b0966c5677d0e9bcd0a8a6f7ccfa35c2b84addc645e801e6a439b4ccbc21ea5988f0') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:47', '5bf640cd946491a41f197961ceafd964030ea75640bedacd2ede56303f41f382b6e09ba74da59e649805dc55c30034c134b05c1d47e8901a44fb0c04fa85fb14', '2009-09-09 05:49:47', 'subscriber', 'BKpUgvxo-AYq8uRQAlG8', 'ec454ad37bb3f50dfea059e60a5c4d41aec71022bce1168f04f26f0b3049b0966c5677d0e9bcd0a8a6f7ccfa35c2b84addc645e801e6a439b4ccbc21ea5988f0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:47', '2009-09-09 05:49:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:47', NULL, NULL, NULL, '2009-09-09 05:49:47', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "created_at" = '2009-09-09 05:49:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:47) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 12ms (View: 12, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0edceee2f0b855a9ca9d4d2ed7f82c58681c4e81d5b1cd442e4e79c071dfd7b6d877750b740b942cda5a17a5fa469187ae340a532a8c54f26f1643351941ff26') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:47', 'b5cd9d2ab6abbe15fe001e6d30431e6f081fa45670c957d63ada53b13bc036b066c8caf853b8577363714f65d51bf310942afe6aef4c5bed021d4dd85bcfbbd2', '2009-09-09 05:49:47', 'subscriber', 'sLfpaZVMhT-4kmxY5ySw', '0edceee2f0b855a9ca9d4d2ed7f82c58681c4e81d5b1cd442e4e79c071dfd7b6d877750b740b942cda5a17a5fa469187ae340a532a8c54f26f1643351941ff26', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:47', '2009-09-09 05:49:47', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:47', NULL, NULL, NULL, '2009-09-09 05:49:47', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "created_at" = '2009-09-09 05:49:47', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:47', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:49:47', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 14ms (View: 9, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 01:49:48) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '68904236111f22ff0268fcf2a36dc052e9be3359d1a4db6ca312077991ca7c3b9002b6a4620df33d83532a67402c60404ebaf6a2d9a7416bb97f3923504b1647') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:48', 'bf6f6067c6142ab3453a56a5913d15a6ec3f6dc7018a5494f56b4fbccc687a15d5adb74a8ac4655e5908a28ab813fea8fb07a729587fb49bcd8060ff0bb26c51', '2009-09-09 05:49:48', 'subscriber', 'hzr3x0pMyO3hSH46GXGx', '68904236111f22ff0268fcf2a36dc052e9be3359d1a4db6ca312077991ca7c3b9002b6a4620df33d83532a67402c60404ebaf6a2d9a7416bb97f3923504b1647', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:48', '2009-09-09 05:49:48', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:48', NULL, NULL, NULL, '2009-09-09 05:49:48', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:48', "created_at" = '2009-09-09 05:49:48', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '68904236111f22ff0268fcf2a36dc052e9be3359d1a4db6ca312077991ca7c3b9002b6a4620df33d83532a67402c60404ebaf6a2d9a7416bb97f3923504b1647') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 11ms (View: 6, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '26aa494e095cc44ac8b32a547b86c646ffc3d4a18a0b1393c73bfcc4dc4aad134542acbb3ed7bbbd1d1cc03f67be7a66a25496a15221cdb7d5f9445f262516a7') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:48', '3051c309d9f3c94efe494ec6418bf1e324ecc4633377c87251dffc20d53775406d041a6f6cbee9303452eed1d4ace84882494c390fc520036f2471742baca66c', '2009-09-09 05:49:48', 'subscriber', 'UC60BmoCFqw_oSB3c0MQ', '26aa494e095cc44ac8b32a547b86c646ffc3d4a18a0b1393c73bfcc4dc4aad134542acbb3ed7bbbd1d1cc03f67be7a66a25496a15221cdb7d5f9445f262516a7', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:48', '2009-09-09 05:49:48', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:48', NULL, NULL, NULL, '2009-09-09 05:49:48', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:48', "created_at" = '2009-09-09 05:49:48', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 138ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'bb07eb0ce973f0ef193b2c1a03edaff3104762420e0c06a6e990ac6fd0f808c0ac69690d13a4e7364b261787f7b7b36642a71dab3440f52090b49fd0158593c4') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:49:48', 'bd1e2ceaef55ab6c705809a4d5a01ecf05f9eb5b8911bc6483ccb856fb6f8743ba570386ea5e26373d8f5f6b49fd0ce7585964075e2b897b7400b23f7e50d3be', '2009-09-09 05:49:48', 'subscriber', 'S5Sb1oSo1ES-0_ZiLiPj', 'bb07eb0ce973f0ef193b2c1a03edaff3104762420e0c06a6e990ac6fd0f808c0ac69690d13a4e7364b261787f7b7b36642a71dab3440f52090b49fd0158593c4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:49:48', '2009-09-09 05:49:48', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:49:48', NULL, NULL, NULL, '2009-09-09 05:49:48', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:49:48', "created_at" = '2009-09-09 05:49:48', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:49:48) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-09 01:49:48) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Update (0.1ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-09 05:49:48', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:49:48) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 05:52:50', 0, '2009-09-09 05:52:50', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 05:52:50', 1000, '2009-09-09 05:52:50', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 05:52:50', 30000, '2009-09-09 05:52:50', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fa2a3f439b4c7ac9cbf405a62782e3b725d6532e701adc213ad37beadc0b989423201f871a2410fee4f02ffbf646ca314de46a12e2c11df11fb295f32492033e') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 05:52:50', '567b97c6e5c631d97cf65f471aeac063cabb4b3d82e7c1909dff6ae24403978ed2e9a8964d250dc1bd711252891ad94f8a0b32a0b5971da8056e56140d2a1c59', '2009-09-09 05:52:50', 'subscriber', 'ktyPnlUbQf_IEwJ5ygf1', 'fa2a3f439b4c7ac9cbf405a62782e3b725d6532e701adc213ad37beadc0b989423201f871a2410fee4f02ffbf646ca314de46a12e2c11df11fb295f32492033e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 05:52:50', '2009-09-09 05:52:50', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 05:52:50', NULL, NULL, NULL, '2009-09-09 05:52:50', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:52:50', "created_at" = '2009-09-09 05:52:50', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:52:50', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:52:50', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 01:52:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 15ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 01:52:50) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 01:52:50) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 01:52:50) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 01:52:50) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 01:52:50) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:52:50', '2009-09-09 05:52:50', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:52:50', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 05:53:17', '2009-09-09 05:53:17', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 05:53:17', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 05:53:31', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 430260ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:00:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 36ms (View: 26, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:12:22', 0, '2009-09-09 06:12:22', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:12:22', 1000, '2009-09-09 06:12:22', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:12:22', 30000, '2009-09-09 06:12:22', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '65f78ca3b1a3fbefe9427aea74bf6b15bd8014a1a7391ea8549572e123e6d2e02149a496aa8858d551a45e754e6f20960a0a92c45040761c885cc3692035c347') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:23', 'd5daafbe8db1ca5e55302435f07491b8a11870bd10de0f2bed703afa46a46b0805025a959d09ba58e5da1281510d8e1f188597d47be273b1b54c6a5c66a33cfd', '2009-09-09 06:12:23', 'subscriber', '3RYFpQnr_LBaRdJvmBWe', '65f78ca3b1a3fbefe9427aea74bf6b15bd8014a1a7391ea8549572e123e6d2e02149a496aa8858d551a45e754e6f20960a0a92c45040761c885cc3692035c347', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:23', '2009-09-09 06:12:23', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:23', NULL, NULL, NULL, '2009-09-09 06:12:23', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:23', "created_at" = '2009-09-09 06:12:23', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:23', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.1ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:23', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 30ms (View: 26, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:23) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:23) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:23) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:23', '2009-09-09 06:12:23', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:23', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:23', '2009-09-09 06:12:23', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:23', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:23', "state" = 'active', "next_renewal_on" = '2009-10-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 170ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 23ms (View: 17, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:12:31', 0, '2009-09-09 06:12:31', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:12:31', 1000, '2009-09-09 06:12:31', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:12:31', 30000, '2009-09-09 06:12:31', 12, 't')[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9a0c99b50481aa57938c371585505c72c6d76e59e1f57e1c51b081f15dfae76e7019d0e649c3d3a9fd95cbd7c7e26a4cbf96b1c6bdd84b86ccaab4bca1e77d9d') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:32', 'df4fffe5bbe9fa119efbb984d94b6e88129e847538c3db43b94b3489b1c8ac0b9232963474f953daa2aab5e90f78c62f9ed19ddbe1015de25bca100d1d56494c', '2009-09-09 06:12:32', 'subscriber', 'Pvc-uBiiGrbGxo-M-aMa', '9a0c99b50481aa57938c371585505c72c6d76e59e1f57e1c51b081f15dfae76e7019d0e649c3d3a9fd95cbd7c7e26a4cbf96b1c6bdd84b86ccaab4bca1e77d9d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:32', '2009-09-09 06:12:32', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:32', NULL, NULL, NULL, '2009-09-09 06:12:32', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:32', "created_at" = '2009-09-09 06:12:32', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:32', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.8ms)
Completed in 17ms (View: 12, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:32) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:32) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:32) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:32) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:32', '2009-09-09 06:12:32', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:32', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:32) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 146ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (1.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.9ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd7a4ee9e1ad36b2a045f711813ef739c87c53d8004035e605d212e118999597e03b428b9ea7a074fa38f90e46fc732f8f74f6b5a61d29e458c88a2dc8b3095e1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:32', 'fcebe4d6d25e50c6af3eeca60ee45d86372473b5488c0d7375d5cef1c50c77080263253711e2328e64535c88edd4580ca6c90ce5a227205e7047fcae214e286a', '2009-09-09 06:12:32', 'subscriber', 'XYlPG3HcPAmMHXldab1y', 'd7a4ee9e1ad36b2a045f711813ef739c87c53d8004035e605d212e118999597e03b428b9ea7a074fa38f90e46fc732f8f74f6b5a61d29e458c88a2dc8b3095e1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:32', '2009-09-09 06:12:32', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:32', NULL, NULL, NULL, '2009-09-09 06:12:32', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:32', "created_at" = '2009-09-09 06:12:32', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:32', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (7.2ms)
Completed in 13ms (View: 12, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:32) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 13, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.8ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 32ms (View: 25, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:33) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.6ms)
Completed in 34ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b4eaa3cb609b422a74c46e978c56f8210cb89b6fe77ddff104c4a1f2412a4f26bcf068ea4e02dcd1293c7b0c90ed8047e95d85af6f4e8c1121d6a622ae3b91a7') LIMIT 1[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:33', 'f05e12b371f0f7ed534869953929371d4a7e2811647e3009cea7e397757a063ca8fa59d1bea8f2ef9ea1856c7e140e2cf54317d36f8209c34dacafd92deddc6a', '2009-09-09 06:12:33', 'subscriber', 'pI4QnDyhXT_MDMONfEZZ', 'b4eaa3cb609b422a74c46e978c56f8210cb89b6fe77ddff104c4a1f2412a4f26bcf068ea4e02dcd1293c7b0c90ed8047e95d85af6f4e8c1121d6a622ae3b91a7', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:33', '2009-09-09 06:12:33', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:33', NULL, NULL, NULL, '2009-09-09 06:12:33', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:33', "created_at" = '2009-09-09 06:12:33', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:33', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 7ms (View: 7, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 10, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:33) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:34) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:12:34', '2009-09-09 06:12:34', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 33ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (1.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a143b8d53549a6f5a4183d7cf7f23ed19268892137628159ce2d2a23d19f8dcef9719a66057fb816c6f74d340a94a64d74a0f427150c19d32ccd10dfaf0ebc13') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:34', 'f203d13d0b0652a8ad86042f7af889ed3d2f530ec2377f9a019e84e963265a9ebe95d556cd0718cd6db57559a249048b06fb58f6d524be44df48b120ad1f1246', '2009-09-09 06:12:34', 'subscriber', 'YCO__f6y4lqLgG6O_xlk', 'a143b8d53549a6f5a4183d7cf7f23ed19268892137628159ce2d2a23d19f8dcef9719a66057fb816c6f74d340a94a64d74a0f427150c19d32ccd10dfaf0ebc13', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:34', '2009-09-09 06:12:34', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:34', NULL, NULL, NULL, '2009-09-09 06:12:34', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:34', "created_at" = '2009-09-09 06:12:34', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:34', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:34', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:34) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:34) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 214ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:34) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 10, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:34) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.6ms)
Completed in 33ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:34) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:12:34', '2009-09-09 06:12:34', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:34', '2009-09-09 06:12:34', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:34', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 39ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 9, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.7ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (13.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b2d11058649fae2268d7e9b8cc496fd8f34ea042bbe77dd3273b4f3d7414c5ab503d35c869f5ad471efcc496e78c07a309a1b186f13aa4ca0eed853d5622e8c7') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:35', 'e06f568704f7330131326216e1d8366eb5a65d7b4e1778d5ba8e0981b258a45d04f82227a8f9c3007a1931ff35967b8e53c8c323d2626346d420e54ff1e2f308', '2009-09-09 06:12:35', 'subscriber', 'IKMP53Ej4a6cjd4J04yz', 'b2d11058649fae2268d7e9b8cc496fd8f34ea042bbe77dd3273b4f3d7414c5ab503d35c869f5ad471efcc496e78c07a309a1b186f13aa4ca0eed853d5622e8c7', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:35', '2009-09-09 06:12:35', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:35', NULL, NULL, NULL, '2009-09-09 06:12:35', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:35', "created_at" = '2009-09-09 06:12:35', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:35', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:35', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 8ms (View: 7, DB: 19) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 30ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.9ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 38ms (View: 18, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:35) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:35', '2009-09-09 06:12:35', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:35', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:35', '2009-09-09 06:12:35', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:35', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:35', "state" = 'active', "next_renewal_on" = '2009-10-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 54ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8aacbe5be33065c948486190a469694f30b14b5665f4ba3cf7b439cb636adba3e824dd51aa48e551b6b6b84a039e0c1d0e6b02b60d44ba838bd0c0936e12d567') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:12:35', '875f1118f5384c306227197a85c4744144e57668b27aff52b02617410b8289b1e40d4b6613b9dc108dd8d9650c7199e6e254ad5e165162c92716a68d41fa92c2', '2009-09-09 06:12:35', 'subscriber', '0R48Y85sMVgYCcolQl7D', '8aacbe5be33065c948486190a469694f30b14b5665f4ba3cf7b439cb636adba3e824dd51aa48e551b6b6b84a039e0c1d0e6b02b60d44ba838bd0c0936e12d567', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:12:35', '2009-09-09 06:12:35', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:12:35', NULL, NULL, NULL, '2009-09-09 06:12:35', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:35', "created_at" = '2009-09-09 06:12:35', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:12:35', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 5, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:12:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (13.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 15) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:35) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:35', '2009-09-09 06:12:35', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:35', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:12:35) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:12:36) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:12:36', '2009-09-09 06:12:36', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:12:36', '2009-09-09 06:12:36', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:12:36', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 22ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:12:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-09 02:12:36) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;35;1mSubscriptionTransaction Load (0.8ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:15:51', 0, '2009-09-09 06:15:51', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:15:51', 1000, '2009-09-09 06:15:51', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:15:51', 30000, '2009-09-09 06:15:51', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:51) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:15:51) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:51) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd39443723f4fbc403b9cc2d02b0764bba17e00d75dc9a1cd941869fbb3c932d623278071d67f33d98a33143ead895c075aca11f0ddd668f185f5aa3b61975cde') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:52', '3cd6aa2334d9b731bc1f58e88d50352785dad4e1a6c74f60b295ce3e5f803c919c1e0c2e2f617532192de0f7a9ceed8df036b2623962762fad39a42c715d65fe', '2009-09-09 06:15:52', 'subscriber', 'dZzdT4trGv5ZSDfzx2ML', 'd39443723f4fbc403b9cc2d02b0764bba17e00d75dc9a1cd941869fbb3c932d623278071d67f33d98a33143ead895c075aca11f0ddd668f185f5aa3b61975cde', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:52', '2009-09-09 06:15:52', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:52', NULL, NULL, NULL, '2009-09-09 06:15:52', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:52', "created_at" = '2009-09-09 06:15:52', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1c39db679ac30ad6d876a2f9374b82b246956f5b1cb2e5b0672ccc5ed2fd3266ae0e5bfec360598b46cf976736cfc19c0f44f3c26257edf0a98582e28b00f9d1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:52', '1f171c29a64ad55e3757a34e35efba4633612fb2d5bd9b522e702b2b08353c26d96c2de5a72c7f5912e04e40c3ce50f317cbea43e8ac60ca501b39a2a30615d7', '2009-09-09 06:15:52', 'subscriber', '3z3y64bV-Hsa9oMMSOjp', '1c39db679ac30ad6d876a2f9374b82b246956f5b1cb2e5b0672ccc5ed2fd3266ae0e5bfec360598b46cf976736cfc19c0f44f3c26257edf0a98582e28b00f9d1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:52', '2009-09-09 06:15:52', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:52', NULL, NULL, NULL, '2009-09-09 06:15:52', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:52', "created_at" = '2009-09-09 06:15:52', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-09 02:15:52) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.3ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:15:52', 'title 1', 'body 1', '2009-09-09 06:15:52')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.3ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4972b18dcdde01a8f91d07b018ace864eb10d0c27916ef4bc08e87cea362c2ab104c3f7e2d7a63b79318a85253de08f998cdde363a9e837ddfabaa75924efb64') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:52', 'f38f8dd1da426df88b76b3960d782ea8b84409941ebcb9206a8dbd66460d813f271fafaaf890991aa4ad53f942c55ebfbae004ce978187d5db8c170394031e7c', '2009-09-09 06:15:52', 'subscriber', 'oBy-dZdBAE0xTzF7zCqC', '4972b18dcdde01a8f91d07b018ace864eb10d0c27916ef4bc08e87cea362c2ab104c3f7e2d7a63b79318a85253de08f998cdde363a9e837ddfabaa75924efb64', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:52', '2009-09-09 06:15:52', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:52', NULL, NULL, NULL, '2009-09-09 06:15:52', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:52', "created_at" = '2009-09-09 06:15:52', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:52) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:15:52', 'title 1', 'body 1', '2009-09-09 06:15:52')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:15:52', 'title 2', 'body 2', '2009-09-09 06:15:52')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:15:52', 'title 3', 'body 3', '2009-09-09 06:15:52')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:15:52', 'title 4', 'body 4', '2009-09-09 06:15:52')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-09 02:15:52) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:15:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9ce995362cb1b11376293c6649cc72742f322b36c223491650950170fa93c7c693b8b77b913d13b0ff625703956b6c753c77321ec08afb75661d383c50b55bde') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:52', '2b77b7322731c579794ec2a38c4cdf7c91856b6bf25bdf1089474871357367793aff1a66bbdfe7191510cae2e0cf0cc3e97ab7fc1f20d23a244354476367e594', '2009-09-09 06:15:52', 'subscriber', 'diMVhc-f8XKQ1iTroV9u', '9ce995362cb1b11376293c6649cc72742f322b36c223491650950170fa93c7c693b8b77b913d13b0ff625703956b6c753c77321ec08afb75661d383c50b55bde', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:52', '2009-09-09 06:15:52', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:52', NULL, NULL, NULL, '2009-09-09 06:15:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:53', "created_at" = '2009-09-09 06:15:52', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:53', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:53) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:15:53', '2009-09-09 06:15:53', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:53', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 25ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '586e51496994a31af4c5d4e88fefbadea8e30e5c6a8c5dcf587ccdb73eb78f31710e762cf0a73b9c18cee949eececb1c941b62fcf389f095bba43597fb9321e0') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:53', 'cd94e6b7e5c7aaa071723f8b211dfce552b8a8467d398e77454481c6b2283d251ae99eb0f12a60fd50bb90fff0cd839ea628499714fc5ed6151fd47e325a9721', '2009-09-09 06:15:53', 'subscriber', 'qQQE1HDev8uxlSk102TI', '586e51496994a31af4c5d4e88fefbadea8e30e5c6a8c5dcf587ccdb73eb78f31710e762cf0a73b9c18cee949eececb1c941b62fcf389f095bba43597fb9321e0', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:53', '2009-09-09 06:15:53', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:53', NULL, NULL, NULL, '2009-09-09 06:15:53', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:53', "created_at" = '2009-09-09 06:15:53', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:53', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:53) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 21ms (View: 20, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:53) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 33ms (View: 20, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:53) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 174ms (View: 165, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fb46961f092216eef072c05634cc6d494681bc10f751ce3d045c31700f50cc533b7afefefd9ed066fb925fc92611c0a1652a0e3a52ed86b7b10c1f8ec0b5b2d9') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:54', '9556862490673feda06c5e9b0ebd9fffff2e7761c1fb1794033d1183a9617276441324a2d6e0f506859dc970e6ed1b85ce8e1a7bffa96c4247006953433a817c', '2009-09-09 06:15:54', 'subscriber', '6qYwbHgW5DvKrKm5-uu-', 'fb46961f092216eef072c05634cc6d494681bc10f751ce3d045c31700f50cc533b7afefefd9ed066fb925fc92611c0a1652a0e3a52ed86b7b10c1f8ec0b5b2d9', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:54', '2009-09-09 06:15:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:54', NULL, NULL, NULL, '2009-09-09 06:15:54', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:54', "created_at" = '2009-09-09 06:15:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:54', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.4ms)
Completed in 10ms (View: 10, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:54) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:54) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (4.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 13ms (View: 8, DB: 4) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:54) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.7ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:54) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 24ms (View: 16, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:54) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:15:54', '2009-09-09 06:15:54', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 40ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9a16aca32037d10e7ac9917690d329d6674579490b69960e404ff7b59c4b5695fbb24c3613a0ceaa313b2296cdccb4b92707206db8efc993703ede102ea70573') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.9ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:54', '36047894274f75719111c207deb6ba1452c611cff57fb54c3062d8ef5c7b9fa5b22be329d136d828f2f7b51db3b95f500e088951cbf8aeca3012fdedd6302c1d', '2009-09-09 06:15:54', 'subscriber', '_aeAZCxjXXtcyhNL6Z6-', '9a16aca32037d10e7ac9917690d329d6674579490b69960e404ff7b59c4b5695fbb24c3613a0ceaa313b2296cdccb4b92707206db8efc993703ede102ea70573', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.4ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:54', '2009-09-09 06:15:54', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:54', NULL, NULL, NULL, '2009-09-09 06:15:54', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:54', "created_at" = '2009-09-09 06:15:54', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:54', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.3ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:54', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:55) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 10, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.9ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 19ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:55) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.4ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:15:55', '2009-09-09 06:15:55', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:15:55', '2009-09-09 06:15:55', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:55', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 38ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.5ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'be132082551a1cd18ccdc67d8f92ed6ef586467e6d2e648dbba2a996bf2767fb4568baaacfef242f0d0ff92327865b95bb14c437016fdc38f6080800ca49de8a') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:55', '0410cd2bfff261934987362590ee7c53041a85d62bdce9dc60eb7aa341ae977d7d5585664e122ee409b15b90c15e40f3c477d1e83cd1e16f739e63aaefb401d0', '2009-09-09 06:15:55', 'subscriber', 'JdkXB9GH5O6jW2qi4ZE4', 'be132082551a1cd18ccdc67d8f92ed6ef586467e6d2e648dbba2a996bf2767fb4568baaacfef242f0d0ff92327865b95bb14c437016fdc38f6080800ca49de8a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:55', '2009-09-09 06:15:55', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:55', NULL, NULL, NULL, '2009-09-09 06:15:55', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:55', "created_at" = '2009-09-09 06:15:55', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:55', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:55', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 215ms (View: 214, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:55) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:55) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 34ms (View: 15, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:56) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:15:56', '2009-09-09 06:15:56', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:56', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:15:56', '2009-09-09 06:15:56', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:56', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:56', "state" = 'active', "next_renewal_on" = '2009-10-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 201ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 19ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b0107efd4375d606dc8f87f6f3165c6e79cc6dcc5f965821dc5ae380566d68108038176db702ffc6c4d262bddc98a449ae84ccd865a637478fb6c17e932a20cf') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:56', '884ecf35bc22181089bf4cd5fad93fab62a9d362628b0c02416cc1106ea8d06101f0562bde8057535e9cdace04c9f77f7fd16f91b18261b64b0f00eed2f48962', '2009-09-09 06:15:56', 'subscriber', 's0I1wSHSBt9HryyJzDnj', 'b0107efd4375d606dc8f87f6f3165c6e79cc6dcc5f965821dc5ae380566d68108038176db702ffc6c4d262bddc98a449ae84ccd865a637478fb6c17e932a20cf', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:56', '2009-09-09 06:15:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:56', NULL, NULL, NULL, '2009-09-09 06:15:56', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:56', "created_at" = '2009-09-09 06:15:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:56', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:56) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:56) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:15:56', '2009-09-09 06:15:56', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:56', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:15:56) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:15:56', '2009-09-09 06:15:56', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:15:56', '2009-09-09 06:15:56', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.1ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:56', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-09 02:15:56) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;35;1mSubscriptionTransaction Load (0.8ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Load (1.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9c824e23c3b0f7a4ba8caa35d32b6e36ffa664f49653283d257f14c9ce604cecc504558e42c9ae7a8675beb14c4043ca5eab2c0f5683c4dce8ac95cb91e225f0') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:57', 'b21e578bb31eb150b1c73c976c2782ca337b9279e88834e87bb6cc7106738e87090128b48522d2b8d0cba54540ac494f8e05300d562a8d95bf17c7ffa70ffaf4', '2009-09-09 06:15:57', 'subscriber', 'l5fFz8_j4wo_zkLhSnt0', '9c824e23c3b0f7a4ba8caa35d32b6e36ffa664f49653283d257f14c9ce604cecc504558e42c9ae7a8675beb14c4043ca5eab2c0f5683c4dce8ac95cb91e225f0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:57', '2009-09-09 06:15:57', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:57', NULL, NULL, NULL, '2009-09-09 06:15:57', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "created_at" = '2009-09-09 06:15:57', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.5ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd4340f7704fccada2ae3c984cfef0dbb9b033c7279594f272f834d7cfb1e2880b969e90c3f46c65d44f2abc9dcbe33536f5b843af6d472c9f3b74b5e484205df') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9c824e23c3b0f7a4ba8caa35d32b6e36ffa664f49653283d257f14c9ce604cecc504558e42c9ae7a8675beb14c4043ca5eab2c0f5683c4dce8ac95cb91e225f0') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:57', '7d941fa22c755aae2ee6dbad154a2f88a9e65dba306bf246c7840d611bd0c9ce05f3b54f9944f3b8a99f104dc71a187e8d14177654eb63251afdcc6016e3a676', '2009-09-09 06:15:57', 'subscriber', 'neXEQhgpp5TSznKGZmA1', 'd4340f7704fccada2ae3c984cfef0dbb9b033c7279594f272f834d7cfb1e2880b969e90c3f46c65d44f2abc9dcbe33536f5b843af6d472c9f3b74b5e484205df', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:57', '2009-09-09 06:15:57', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:57', NULL, NULL, NULL, '2009-09-09 06:15:57', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "created_at" = '2009-09-09 06:15:57', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:57', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (16.8ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fc3f83296cbe358e0e6e677683fed650027867a4754ce83ed694db00d83ecb84aa5d4f86f1d0805a791b821a08afec6e49e83c481c83b26a4452e7b2a3b105b2') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'd4340f7704fccada2ae3c984cfef0dbb9b033c7279594f272f834d7cfb1e2880b969e90c3f46c65d44f2abc9dcbe33536f5b843af6d472c9f3b74b5e484205df') LIMIT 1[0m
  [4;35;1mUser Create (269.8ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:57', '06b08d732da38c63d9f18bc0768db586d4ac3b31d14bcd7ebd92396f00bc9ccc14b05c00f1bb919b0919dc2959117b7470b527ec9b8ba5cb61b27a4bfe84ad52', '2009-09-09 06:15:57', 'subscriber', 'p34z4Y9OH1L9aipDoosX', 'fc3f83296cbe358e0e6e677683fed650027867a4754ce83ed694db00d83ecb84aa5d4f86f1d0805a791b821a08afec6e49e83c481c83b26a4452e7b2a3b105b2', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.4ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:57', '2009-09-09 06:15:57', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:57', NULL, NULL, NULL, '2009-09-09 06:15:57', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "created_at" = '2009-09-09 06:15:57', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '589f6f3984619cebabee9574f56221edbc297c8ac0d1a434f5556acc94c3829425c18b77ec3786adab31e8c0029c2f842da7cc28b3a768568a7631f74af8bc99') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'fc3f83296cbe358e0e6e677683fed650027867a4754ce83ed694db00d83ecb84aa5d4f86f1d0805a791b821a08afec6e49e83c481c83b26a4452e7b2a3b105b2') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:57', '623a5160069408bc796ab4e88deced8fb225327e2e161609a0f61bd18b69716d5fcb1d15f94f4bac25eb255285c058729a36379a9bc10d5b9109fd9a7c5e796c', '2009-09-09 06:15:57', 'subscriber', '123UThUAoB83oTs5HBtv', '589f6f3984619cebabee9574f56221edbc297c8ac0d1a434f5556acc94c3829425c18b77ec3786adab31e8c0029c2f842da7cc28b3a768568a7631f74af8bc99', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:57', '2009-09-09 06:15:57', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:57', NULL, NULL, NULL, '2009-09-09 06:15:57', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "created_at" = '2009-09-09 06:15:57', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:57', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 301) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:15:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 22ms (View: 12, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:15:57) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '37abe4ded6938f7fc7b32dbaf3c84a11ce3aac1deb6c3258d65a217877cecff501ebd9bcb07c450365cf00ac84717b3350da38c476edcaaef9267a1694fc112b') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:57', '208e659b99074afae0b48933cdb94b5c0615590d9c91f2b8c7fdeb47daeac89db7e7a2697deb97c35af352232f0ffb364da491cdab5bd02a8d38986eb7026c60', '2009-09-09 06:15:57', 'subscriber', '__fhKWjJ0V1bfg2PWO46', '37abe4ded6938f7fc7b32dbaf3c84a11ce3aac1deb6c3258d65a217877cecff501ebd9bcb07c450365cf00ac84717b3350da38c476edcaaef9267a1694fc112b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:57', '2009-09-09 06:15:57', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:57', NULL, NULL, NULL, '2009-09-09 06:15:57', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:57', "created_at" = '2009-09-09 06:15:57', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '37abe4ded6938f7fc7b32dbaf3c84a11ce3aac1deb6c3258d65a217877cecff501ebd9bcb07c450365cf00ac84717b3350da38c476edcaaef9267a1694fc112b') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:57) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:15:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 16ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:15:58) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '62571dbc1ff02b498945d2eea4b23fa23a65d2175fd95c7ee3b5b12cbeaca65c23b395b54c8c8e9af200522e9ea80660c168e2cdcff38352a7849a8a9ef95598') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:58', '55bedc4e784fe3b16a6c25c86400d75c9dd509e00f85348a2f8783cab249061d52bf8f69fda2f25cd14aefe83b7476eb3bac6437582777e2ae33af55be66f85a', '2009-09-09 06:15:58', 'subscriber', '_nnyu1we5oS9GgnYwWzX', '62571dbc1ff02b498945d2eea4b23fa23a65d2175fd95c7ee3b5b12cbeaca65c23b395b54c8c8e9af200522e9ea80660c168e2cdcff38352a7849a8a9ef95598', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:58', '2009-09-09 06:15:58', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:58', NULL, NULL, NULL, '2009-09-09 06:15:58', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:58', "created_at" = '2009-09-09 06:15:58', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '62571dbc1ff02b498945d2eea4b23fa23a65d2175fd95c7ee3b5b12cbeaca65c23b395b54c8c8e9af200522e9ea80660c168e2cdcff38352a7849a8a9ef95598') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 17ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:15:58) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'efad12e6b4323e18b59c3d8e6bc35a63e437631363bc0d481e552a7755a230e1dbf6da493317deab221730e47c70d34bca776de460d711fb75be638412059dd6') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:58', '76f5cc6411d58c0ae6eca69a35709336bb81bb98a1d06b14f4a0112f65009ef5e8e0d4f24d34f037411a7f95a356b38769cfe5b7fdedf9881b664b0385fea449', '2009-09-09 06:15:58', 'subscriber', '2PS7XO85MzSIjIhxI--_', 'efad12e6b4323e18b59c3d8e6bc35a63e437631363bc0d481e552a7755a230e1dbf6da493317deab221730e47c70d34bca776de460d711fb75be638412059dd6', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:58', '2009-09-09 06:15:58', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:58', NULL, NULL, NULL, '2009-09-09 06:15:58', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:58', "created_at" = '2009-09-09 06:15:58', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 26ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'efad12e6b4323e18b59c3d8e6bc35a63e437631363bc0d481e552a7755a230e1dbf6da493317deab221730e47c70d34bca776de460d711fb75be638412059dd6') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0804644e448820134308a7cec2e2690909c44a3f63baec1ab4703a9c14c200c93029845973be61f8756fd98dc3df9dbf47423984ff217e2d2559d3f6ef6cf533') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'efad12e6b4323e18b59c3d8e6bc35a63e437631363bc0d481e552a7755a230e1dbf6da493317deab221730e47c70d34bca776de460d711fb75be638412059dd6') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:58', '74c7a4e51846c018b3aa6c76ca58ce5cbe36ea0bf0efb45760779d837aa89825cb1895939b5a85345c9ec186b29c32a06174df78ae9506989b140a399b84db6e', '2009-09-09 06:15:58', 'subscriber', 'RGEMCYUSybWLqlgT43zp', '0804644e448820134308a7cec2e2690909c44a3f63baec1ab4703a9c14c200c93029845973be61f8756fd98dc3df9dbf47423984ff217e2d2559d3f6ef6cf533', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:58', '2009-09-09 06:15:58', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:58', NULL, NULL, NULL, '2009-09-09 06:15:58', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:58', "created_at" = '2009-09-09 06:15:58', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:58) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.1ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '532969e5a9024747ba538309f2a0abee074152ecd9ac71adf194dc2eac52ded37de3dd891ef8abc5da2bcdb92598002e6d42fbae06a58e123dbf38ec69a8371b') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:58', '3cff778c18a0c2ecdb4c4dbb6f67615886adb438e1c71f144a3448642ac143e2892ca051cb13cab2aa7eab688f9f705930382cff6f25d484e82704e27dbfabdf', '2009-09-09 06:15:58', 'subscriber', 'neDN9DqFixhpgeBpNI87', '532969e5a9024747ba538309f2a0abee074152ecd9ac71adf194dc2eac52ded37de3dd891ef8abc5da2bcdb92598002e6d42fbae06a58e123dbf38ec69a8371b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:58', '2009-09-09 06:15:58', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:58', NULL, NULL, NULL, '2009-09-09 06:15:58', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:58', "created_at" = '2009-09-09 06:15:58', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 8ms (View: 8, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:58) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.9ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 8, DB: 2) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:58) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (5.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2ee74a0beab7554323c0a57f4266129bb6386b10e30cfae954b518f64a7f7b04d83b717478ebdd66b8443fd9b2bc5a3e6a728ac40142242a3b4b4eed7d8e52e7') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:59', 'd36f5c1f959519952243ceef778df39677562e00227e91b8dee13921ec25161fac876531b0e8cde97e518b699dadb944a2b2b27794f2f2d5419dceb7aadecf35', '2009-09-09 06:15:59', 'subscriber', '-m1s_xb9IJxSAdFcP4DX', '2ee74a0beab7554323c0a57f4266129bb6386b10e30cfae954b518f64a7f7b04d83b717478ebdd66b8443fd9b2bc5a3e6a728ac40142242a3b4b4eed7d8e52e7', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:59', '2009-09-09 06:15:59', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:59', NULL, NULL, NULL, '2009-09-09 06:15:59', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:59', "created_at" = '2009-09-09 06:15:59', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:59', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:59) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 6ms (View: 6, DB: 9) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:15:59) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 31ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:15:59) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:15:59) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd9da250bc8b55ae4fcf8f0c7fecac95acb51a1831fe468d1b44704aaf566958030b29d4aeff56f062ac36c81120e439e150f33ea504917d5bd1c6f6efca079b3') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:15:59', 'ddd42d822ca5258e0cde34949e7100adee883c39b5051154f3b6929ea1f2eaff22c0958d6a907672d186ebe171f03c85e62792ebc86cf33aed75b4c8c01ed15a', '2009-09-09 06:15:59', 'subscriber', 'MYxxTZKbQ8kexHcOj_Xo', 'd9da250bc8b55ae4fcf8f0c7fecac95acb51a1831fe468d1b44704aaf566958030b29d4aeff56f062ac36c81120e439e150f33ea504917d5bd1c6f6efca079b3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:15:59', '2009-09-09 06:15:59', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:15:59', NULL, NULL, NULL, '2009-09-09 06:15:59', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:59', "created_at" = '2009-09-09 06:15:59', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:15:59', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:15:59', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:15:59) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.9ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 38ms (View: 11, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'cb7157f1598fb6d4090c405ef45671c21cc710b0690fa17c2308b454ecbdf27db2538bc4bdef197f51354d2f38da82f9d06f40a04123ca696922ce31bff1a58e') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:16:00', '35cda83285bd8aa1f43c5bd87f245c97baefb5c7bf12a6c3d2b8a8332d622d382113befcab90bb3d86723615c7ccba9fbe1ac290d66ed1fc33cbb1f56bc5a504', '2009-09-09 06:16:00', 'subscriber', '_VPyKpTVfp5gcQk3LChI', 'cb7157f1598fb6d4090c405ef45671c21cc710b0690fa17c2308b454ecbdf27db2538bc4bdef197f51354d2f38da82f9d06f40a04123ca696922ce31bff1a58e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:16:00', '2009-09-09 06:16:00', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:16:00', NULL, NULL, NULL, '2009-09-09 06:16:00', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:00', "created_at" = '2009-09-09 06:16:00', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (1.1ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:00', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:00', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.8ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:16:00', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.8ms)
Completed in 12ms (View: 11, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 30ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 18ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a48d5b7c901f031b823aa9a069d065490a8c7f903ff9453abe48f095f2fc1a578f73e6737f8450b1238932bbe82a0d6ab43d1f22a505b2f645696754c0c8b10d') LIMIT 1[0m
  [4;36;1mUser Load (26.0ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:16:00', '332d18c609ead95024322e93a085ca18c2a7217d9439ed9748f7dae9e2dfe55d5c6166c01593cca249fe0fc39e10cf4689762a94b3a358f0de93cdbd5051e76c', '2009-09-09 06:16:00', 'subscriber', 'AgP8lpyMsDMtFjvKnbdb', 'a48d5b7c901f031b823aa9a069d065490a8c7f903ff9453abe48f095f2fc1a578f73e6737f8450b1238932bbe82a0d6ab43d1f22a505b2f645696754c0c8b10d', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:16:00', '2009-09-09 06:16:00', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:16:00', NULL, NULL, NULL, '2009-09-09 06:16:00', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:00', "created_at" = '2009-09-09 06:16:00', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:00', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:00', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 30) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:00) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (1.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 32ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 12, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.8ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd6015be7b81657f10e3b7396e94d282f298402180667511eb6500fb6020982a6b5a9745eb11764a14cc7cdd72adbd77fabca800421baad6fa235b2b0ff3b9d79') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:16:01', 'c9af7c3e94d36ea000a9ee38b50398abc41cdf9d5447e007fc42c100e9750d0b5cc8a8f8c2afc3d134ec2854c579f4200c326c7e7b3983212897c9ff21aa61a9', '2009-09-09 06:16:01', 'subscriber', 'iumRlXeBmZ1NRm5Mfff6', 'd6015be7b81657f10e3b7396e94d282f298402180667511eb6500fb6020982a6b5a9745eb11764a14cc7cdd72adbd77fabca800421baad6fa235b2b0ff3b9d79', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:16:01', '2009-09-09 06:16:01', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:16:01', NULL, NULL, NULL, '2009-09-09 06:16:01', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:01', "created_at" = '2009-09-09 06:16:01', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:01', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:01', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:16:01', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:01) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 18ms (View: 10, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:16:01) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.5ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '40cc4a4476a9dc5c7854ab7db2c0e09e62d5754e5bafa3fdc4eff8e5b444e19459644e6169c13a204ac9a991770e9d2c25d3d8f5ff15164d327e8a4c9c483813') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:16:01', '28942df0d904eaafd952ab06e70e1b7a965ff453b8095c78b47bbedfff680b199c3878d747fc93b1402c8f404a6490249af2aaec0e8cfbe4143c568a3ff750ae', '2009-09-09 06:16:01', 'subscriber', 'TwqKo5FyQKIYk4R1-zIl', '40cc4a4476a9dc5c7854ab7db2c0e09e62d5754e5bafa3fdc4eff8e5b444e19459644e6169c13a204ac9a991770e9d2c25d3d8f5ff15164d327e8a4c9c483813', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:16:01', '2009-09-09 06:16:01', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:16:01', NULL, NULL, NULL, '2009-09-09 06:16:01', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:01', "created_at" = '2009-09-09 06:16:01', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 157ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '40cc4a4476a9dc5c7854ab7db2c0e09e62d5754e5bafa3fdc4eff8e5b444e19459644e6169c13a204ac9a991770e9d2c25d3d8f5ff15164d327e8a4c9c483813') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:01) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 11ms (View: 7, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9eab4006efc33a28396b47232aa4e7b33e777a7cbe13bb4f011c8ce0b31d1c991c9191f9168eab787544b5771056a231086744c5d418e87584a8bd14c07c4b84') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:16:01', '94975ba8bede4a520c9b31c31d075ce2849c05214d98847116c2db8df711674735ec518bbb5656682f1cfee09a56bb002ec11fb21e658786714ad9705b27f708', '2009-09-09 06:16:01', 'subscriber', 'mh-8dF-cgN0XZ0p94oKZ', '9eab4006efc33a28396b47232aa4e7b33e777a7cbe13bb4f011c8ce0b31d1c991c9191f9168eab787544b5771056a231086744c5d418e87584a8bd14c07c4b84', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:16:01', '2009-09-09 06:16:01', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:16:01', NULL, NULL, NULL, '2009-09-09 06:16:01', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:01', "created_at" = '2009-09-09 06:16:01', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:01) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 141ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4a3add9af1c589ff79b713b3a47b9593d4c749b1543a79a68de8de474a78426f02dff43f5cee1000a88f3df9fc9e4a063007343e2c62a4b0af536183bda2ecfb') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:16:02', '5cc68ad99df96a6f119db62d1db2a102501b23d005685ba2d0dcdde25ffcf1dde55fccbd90732ca5b6a860ea82c9e32b7ae665cac6640e618bf75e736aa95748', '2009-09-09 06:16:02', 'subscriber', '-hUBBPlV5BY9r0zKLGfe', '4a3add9af1c589ff79b713b3a47b9593d4c749b1543a79a68de8de474a78426f02dff43f5cee1000a88f3df9fc9e4a063007343e2c62a4b0af536183bda2ecfb', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:16:02', '2009-09-09 06:16:02', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:16:02', NULL, NULL, NULL, '2009-09-09 06:16:02', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:16:02', "created_at" = '2009-09-09 06:16:02', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:16:02) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (6.4ms)
Completed in 11ms (View: 10, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:16:02) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:16:02) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-09 02:16:02) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 144ms (View: 139, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-09 02:16:02) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-09 06:16:02', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:16:02) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:19:00', 0, '2009-09-09 06:19:00', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:19:00', 1000, '2009-09-09 06:19:00', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:19:00', 30000, '2009-09-09 06:19:00', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:19:00) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:19:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 157ms (View: 144, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:19:00) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '52598117c0ffc7432ac886b7a99c6c77f72a9b2eca74f55fee5c2ec1e80fffd9afb9d8c5ef38ce44fbbd7ff9500a19d62052c307d89edd68cb80d6343e880dbd') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:19:00', '34ab4dbae828df0d3ab49c30e89caba7b3c4cdd32b49ba9040654159981806234a73bf393f361d1330910936ea774f0fcf1de841edefe999aead5724b65adf05', '2009-09-09 06:19:00', 'subscriber', 'uI3wUWuTDA4gHvTAc0f2', '52598117c0ffc7432ac886b7a99c6c77f72a9b2eca74f55fee5c2ec1e80fffd9afb9d8c5ef38ce44fbbd7ff9500a19d62052c307d89edd68cb80d6343e880dbd', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:19:01', '2009-09-09 06:19:01', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:19:01', NULL, NULL, NULL, '2009-09-09 06:19:01', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:19:01', "created_at" = '2009-09-09 06:19:01', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 272ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '52598117c0ffc7432ac886b7a99c6c77f72a9b2eca74f55fee5c2ec1e80fffd9afb9d8c5ef38ce44fbbd7ff9500a19d62052c307d89edd68cb80d6343e880dbd') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (3.8ms)
Completed in 21ms (View: 13, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:19:01) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'eacd0cae974f7d3e232f2cd11e26ebb51275000647ed6780983c2a96b789f4252df3b62c9203011b68fb16f3a67d66195e85a8a664c3db7683b25493daf5c0d5') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:19:01', '47f6d721f0862dde8aac38f55e1c6ae11cb88d7a3e049b791bd01c360ed71d0ef4be4943c307b1e9781c86d192ea3871f5b7b3f34d39ba613296239573375a3c', '2009-09-09 06:19:01', 'subscriber', 'YbTz9dSsdioobMSyofmD', 'eacd0cae974f7d3e232f2cd11e26ebb51275000647ed6780983c2a96b789f4252df3b62c9203011b68fb16f3a67d66195e85a8a664c3db7683b25493daf5c0d5', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:19:01', '2009-09-09 06:19:01', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:19:01', NULL, NULL, NULL, '2009-09-09 06:19:01', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:19:01', "created_at" = '2009-09-09 06:19:01', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'eacd0cae974f7d3e232f2cd11e26ebb51275000647ed6780983c2a96b789f4252df3b62c9203011b68fb16f3a67d66195e85a8a664c3db7683b25493daf5c0d5') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 18ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:19:01) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c2e3f9e88bd091138373a0359c5b46c34db099bdaac12a6b42548e5f8a3aa591fc9d018d33909856474f78978d8fc0c2622cd1b78b9de0c9cee80951c0042df4') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:19:01', '492cbcb59c1adef8750aca39efa4485dcbf397573de76622301afbbcc2692b783f639d75122f6479c1a84801f0475bf3b2148293792f1cb1bf88c5016f781abb', '2009-09-09 06:19:01', 'subscriber', 'dO0tBxoMLIIvdVeQi87w', 'c2e3f9e88bd091138373a0359c5b46c34db099bdaac12a6b42548e5f8a3aa591fc9d018d33909856474f78978d8fc0c2622cd1b78b9de0c9cee80951c0042df4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:19:01', '2009-09-09 06:19:01', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:19:01', NULL, NULL, NULL, '2009-09-09 06:19:01', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.4ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:19:01', "created_at" = '2009-09-09 06:19:01', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 153ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:19:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'c2e3f9e88bd091138373a0359c5b46c34db099bdaac12a6b42548e5f8a3aa591fc9d018d33909856474f78978d8fc0c2622cd1b78b9de0c9cee80951c0042df4') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:22:01', 0, '2009-09-09 06:22:01', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:22:01', 1000, '2009-09-09 06:22:01', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:22:01', 30000, '2009-09-09 06:22:01', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:22:01) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:22:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (7.5ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 157ms (View: 143, DB: 8) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:22:01) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '102f2518bd9c56a9b7c6262b32100a1f63cae1c5c33d371a3f176adc0f6c9386a50d004267ed2278d43a409ea024556bf28014f830799dcda22504426008022e') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:22:01', 'a9e834f5cf6f949c02fd95b390202b8858e6be0e8cd0da77f5f56280553bde3780a9f986fab90fba9873306cd7bafb71d9518a1958dbab818d0a2aa977e7e37c', '2009-09-09 06:22:01', 'subscriber', 'ac7jL_vR8XiCyi19x8Rx', '102f2518bd9c56a9b7c6262b32100a1f63cae1c5c33d371a3f176adc0f6c9386a50d004267ed2278d43a409ea024556bf28014f830799dcda22504426008022e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:22:01', '2009-09-09 06:22:01', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:22:32', NULL, NULL, NULL, '2009-09-09 06:22:32', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:22:32', "created_at" = '2009-09-09 06:22:01', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 31366ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:22:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '102f2518bd9c56a9b7c6262b32100a1f63cae1c5c33d371a3f176adc0f6c9386a50d004267ed2278d43a409ea024556bf28014f830799dcda22504426008022e') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (1.0ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:23:03', 0, '2009-09-09 06:23:03', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.6ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:23:03', 1000, '2009-09-09 06:23:03', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:23:03', 30000, '2009-09-09 06:23:03', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:23:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:23:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (5.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 158ms (View: 146, DB: 6) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:23:03) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a92ca4c5f0e81d7a24849b8d6c73ca47cb4cef107fbc7f0ceee2c63fb371d3e3d18ddfb683acdb3f72f51e584c4941c9daad7861a099f6be8677b8ec799e8d1a') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:23:03', 'b099f21b98bbb06d669e924d9e15f9ef171ecbba00cf12d5d94eef97051d6218edc9ae87a09c226a0b33bec7d497b00c59b0349f912d5c34f54813c1adb59a09', '2009-09-09 06:23:03', 'subscriber', 'I6uA5UP-wIFzJZxwgr_i', 'a92ca4c5f0e81d7a24849b8d6c73ca47cb4cef107fbc7f0ceee2c63fb371d3e3d18ddfb683acdb3f72f51e584c4941c9daad7861a099f6be8677b8ec799e8d1a', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:23:03', '2009-09-09 06:23:03', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionPlan Load (4.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:23:39', 0, '2009-09-09 06:23:39', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:23:39', 1000, '2009-09-09 06:23:39', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:23:39', 30000, '2009-09-09 06:23:39', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:23:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.7ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:23:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.3ms)
Completed in 149ms (View: 143, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:23:40) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ffe453f5bbca6c2957443231bbd0a68a716f2a48e64dc40181961fabd06a4a68a6467cdd75a2a655d52f537aaba0772a5ee34ebfb834bfb128ebd4d23e74b0c3') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:23:40', 'e4e1ee287c780ec9eccfe4d28c5f7da050c4ea732ad75d5f37863dd7f8af4de4f6086cac2f122f56777232bf2e8125725fee7d2804073c4a9e7867ff3730fc64', '2009-09-09 06:23:40', 'subscriber', 'tycp47qetSe0ML6rjR40', 'ffe453f5bbca6c2957443231bbd0a68a716f2a48e64dc40181961fabd06a4a68a6467cdd75a2a655d52f537aaba0772a5ee34ebfb834bfb128ebd4d23e74b0c3', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:23:40', '2009-09-09 06:23:40', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:23:42', NULL, NULL, NULL, '2009-09-09 06:23:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:23:42', "created_at" = '2009-09-09 06:23:40', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 2273ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:23:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'ffe453f5bbca6c2957443231bbd0a68a716f2a48e64dc40181961fabd06a4a68a6467cdd75a2a655d52f537aaba0772a5ee34ebfb834bfb128ebd4d23e74b0c3') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:23:49', 0, '2009-09-09 06:23:49', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:23:49', 1000, '2009-09-09 06:23:49', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:23:49', 30000, '2009-09-09 06:23:49', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:23:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:23:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 154ms (View: 148, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:23:49) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b4dce2f6841c566633483faea1704bc8297850f503d7c39628d9896ada7607f52b9addbb3f64b6d9c69810ff97ddd8827eb025323659c438ea0db7a7304bba12') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:23:50', 'abdd9c593f2adf1bb45b71a855a362ceeb27dcd0c8228f506eafc23aa78c25918cd53956527c592249c20f5cd0597e1539698030ec7ff39af126875c37f92231', '2009-09-09 06:23:50', 'subscriber', 'NioyiFXEa4HSRAIW9o0I', 'b4dce2f6841c566633483faea1704bc8297850f503d7c39628d9896ada7607f52b9addbb3f64b6d9c69810ff97ddd8827eb025323659c438ea0db7a7304bba12', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:23:50', '2009-09-09 06:23:50', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:24:52', NULL, NULL, NULL, '2009-09-09 06:24:52', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:24:52', "created_at" = '2009-09-09 06:23:50', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 62222ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:24:52) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'b4dce2f6841c566633483faea1704bc8297850f503d7c39628d9896ada7607f52b9addbb3f64b6d9c69810ff97ddd8827eb025323659c438ea0db7a7304bba12') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:24:57', 0, '2009-09-09 06:24:57', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:24:57', 1000, '2009-09-09 06:24:57', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:24:57', 30000, '2009-09-09 06:24:57', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:24:58) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:24:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 151ms (View: 142, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:24:58) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '657725c61be0e787696661dcc7321c4fc45693a3d376a51ad3880e1b628c5232ac26cf651b467ecf8f348fa903bc6a19f00b0968f21f5e6bd33aa224fe569b4e') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:26:29', '62f9c8f9953c4f7fdc18c600139a577312cb136d27b0d065fdf2659f65fd0510c47a8ce589a22823a0af14412b16d3fa46535f149a39e399715d28ed1d0f4ef5', '2009-09-09 06:26:29', 'subscriber', '9KnncKCmiuraYUrgTRE_', '657725c61be0e787696661dcc7321c4fc45693a3d376a51ad3880e1b628c5232ac26cf651b467ecf8f348fa903bc6a19f00b0968f21f5e6bd33aa224fe569b4e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:26:29', '2009-09-09 06:26:29', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:26:49', NULL, NULL, NULL, '2009-09-09 06:26:49', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:26:49', "created_at" = '2009-09-09 06:26:29', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 111540ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:26:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '657725c61be0e787696661dcc7321c4fc45693a3d376a51ad3880e1b628c5232ac26cf651b467ecf8f348fa903bc6a19f00b0968f21f5e6bd33aa224fe569b4e') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:26:55', 0, '2009-09-09 06:26:55', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:26:55', 1000, '2009-09-09 06:26:55', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:26:55', 30000, '2009-09-09 06:26:55', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:26:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:26:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (1.9ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 149ms (View: 141, DB: 2) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:26:55) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'cf1e53cd7bf2d266c2847010fcdcdbb5e9d9a6340582ed232410a8fa2eb77308c83dedf2a019ca5a3aaab9d26000db02dc9e1bb77806bb1bfee176acf775afaa') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:26:59', '3817d3fbd41b6e0c819eba38b529a86025f231a8d7f1760cb02632c09393f923e095b6a8bbf05399c058396220ddd1bd433831850050cb1dbf612a081e3aa2b9', '2009-09-09 06:26:59', 'subscriber', 'W7DKH6TSaIqz2GB6kpue', 'cf1e53cd7bf2d266c2847010fcdcdbb5e9d9a6340582ed232410a8fa2eb77308c83dedf2a019ca5a3aaab9d26000db02dc9e1bb77806bb1bfee176acf775afaa', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:26:59', '2009-09-09 06:26:59', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:28:12', NULL, NULL, NULL, '2009-09-09 06:28:12', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:28:12', "created_at" = '2009-09-09 06:26:59', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 76693ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:28:12) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'cf1e53cd7bf2d266c2847010fcdcdbb5e9d9a6340582ed232410a8fa2eb77308c83dedf2a019ca5a3aaab9d26000db02dc9e1bb77806bb1bfee176acf775afaa') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:28:18', 0, '2009-09-09 06:28:18', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:28:18', 1000, '2009-09-09 06:28:18', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:28:18', 30000, '2009-09-09 06:28:18', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:28:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:28:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.2ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 155ms (View: 147, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:28:18) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6881e0a6ba3f72ce676fb2758ec037340cfa3b27b955c5213adc79806676c370af77a31d14f97f1c5b0e1dfeffcfd5403072fe5db3b0ed57a43a78106d27e07f') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:29:37', 'c2490ffd9636d150d414ad30c5b69e20e1f2970af3bcca5988946adf2bb250af4516cea24fb53bde047779d94fe97c227ff2e9f5b99768b64d09cae7f5f83334', '2009-09-09 06:29:37', 'subscriber', 'a9lU1hj_HS20T7Tu6i54', '6881e0a6ba3f72ce676fb2758ec037340cfa3b27b955c5213adc79806676c370af77a31d14f97f1c5b0e1dfeffcfd5403072fe5db3b0ed57a43a78106d27e07f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:29:37', '2009-09-09 06:29:37', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:31:00', "created_at" = '2009-09-09 06:29:37', "plan_id" = 1, "state" = 'pending', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:33:49', NULL, NULL, NULL, '2009-09-09 06:33:49', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:33:49', "state" = 'free' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 331284ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:33:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '6881e0a6ba3f72ce676fb2758ec037340cfa3b27b955c5213adc79806676c370af77a31d14f97f1c5b0e1dfeffcfd5403072fe5db3b0ed57a43a78106d27e07f') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:33:56', 0, '2009-09-09 06:33:56', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:33:56', 1000, '2009-09-09 06:33:56', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:33:56', 30000, '2009-09-09 06:33:56', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:33:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:33:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (2.6ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 187ms (View: 179, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:33:56) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3d9b9280c819ee52b7be21f4af93579c5306344cc05a059992f1a02600179c2ec47b89c3e9690517401b9326eb9ef9cca7711265d6510f1cca9ae2e77f4dee34') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:33:59', '323e49b1ff9348c9fbbcbfde94d9c6e3bd288bfaf5acc450e2d0872aec03870f743549909dd9974729b34f89edd34dea19387f5acf0d781c1b9c7b9eb2a0740f', '2009-09-09 06:33:59', 'subscriber', 'khlKC6_YSnNHzenInA0Z', '3d9b9280c819ee52b7be21f4af93579c5306344cc05a059992f1a02600179c2ec47b89c3e9690517401b9326eb9ef9cca7711265d6510f1cca9ae2e77f4dee34', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:33:59', '2009-09-09 06:33:59', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:33:59', NULL, NULL, NULL, '2009-09-09 06:33:59', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:33:59', "created_at" = '2009-09-09 06:33:59', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 3285ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:33:59) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '3d9b9280c819ee52b7be21f4af93579c5306344cc05a059992f1a02600179c2ec47b89c3e9690517401b9326eb9ef9cca7711265d6510f1cca9ae2e77f4dee34') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:34:38', 0, '2009-09-09 06:34:38', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:34:38', 1000, '2009-09-09 06:34:38', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:34:38', 30000, '2009-09-09 06:34:38', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:34:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.3ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:34:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 151ms (View: 142, DB: 3) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:34:39) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f4ba5693e5513faaa783164d878e5b07660e1e259da33e51347c24d78b28942d91c5c89e54521d930b09d82b6171eb88268007d501f69402c559ba12e22540ac') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:34:48', '74ffcc6d89dbea35ed0ccf4859571768d4fb60f64a272de72407788fb79cddad0cbbe5fac882379031f13447a0e630853b59816cc579a31453ead7cb5b0c0715', '2009-09-09 06:34:48', 'subscriber', 'qfyDoCf0k_jnHxhJSQeJ', 'f4ba5693e5513faaa783164d878e5b07660e1e259da33e51347c24d78b28942d91c5c89e54521d930b09d82b6171eb88268007d501f69402c559ba12e22540ac', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:34:48', '2009-09-09 06:34:48', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:34:48', NULL, NULL, NULL, '2009-09-09 06:34:48', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:34:49', "created_at" = '2009-09-09 06:34:48', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 9858ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:34:49) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'f4ba5693e5513faaa783164d878e5b07660e1e259da33e51347c24d78b28942d91c5c89e54521d930b09d82b6171eb88268007d501f69402c559ba12e22540ac') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:34:55', 0, '2009-09-09 06:34:55', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:34:55', 1000, '2009-09-09 06:34:55', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:34:55', 30000, '2009-09-09 06:34:55', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:34:55) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:34:55) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.3ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.1ms)
Completed in 151ms (View: 142, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:34:55) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '23b6ab4a7b0f7af8b2a38b9dd2e2842222211b36928124771d9b3152d94eee8b9fc346bbb5717ac1be90a8e10cdcfa93c375cdef6e71e4cbb5be9ed84f67dd7a') LIMIT 1[0m
  [4;35;1mUser Create (0.8ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:34:56', '75b0da66eefd0c266151da4e04066e4d78ec5ee210e510dbb1dfd201f1d1f9523f1629a875455004c8899bec7f8e36acbc67027c99c5b84c99a99162bd2f1cec', '2009-09-09 06:34:56', 'subscriber', 'WH_zTZ-NFJo17kQ8gyRU', '23b6ab4a7b0f7af8b2a38b9dd2e2842222211b36928124771d9b3152d94eee8b9fc346bbb5717ac1be90a8e10cdcfa93c375cdef6e71e4cbb5be9ed84f67dd7a', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:34:56', '2009-09-09 06:34:56', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:34:56', NULL, NULL, NULL, '2009-09-09 06:34:56', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:34:56', "created_at" = '2009-09-09 06:34:56', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 475ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:34:56) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '23b6ab4a7b0f7af8b2a38b9dd2e2842222211b36928124771d9b3152d94eee8b9fc346bbb5717ac1be90a8e10cdcfa93c375cdef6e71e4cbb5be9ed84f67dd7a') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:35:03', 0, '2009-09-09 06:35:03', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:35:03', 1000, '2009-09-09 06:35:03', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:35:03', 30000, '2009-09-09 06:35:03', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.1ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (3.7ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
Rendered layouts/_user_nav (2.2ms)
Completed in 153ms (View: 144, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:03) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '970926cf5a3d7e176371aac44a63609bb72f3c11caa8aa43dcb68dadd4d306454433b0cedd7a1aeb25cdab2df7bc839aea698cef1769cd1928fad37039ee80d5') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:03', 'deee049d069db48db4bd6ca4450de6cf6bea18d832f5ae63b4604430cd486e54fbc6493a89ce5785a71a2451a44f7fbc5b4d1b1bc57e5beb3d363673218569af', '2009-09-09 06:35:03', 'subscriber', 't5WnjH5d_SAtoZkBxk3s', '970926cf5a3d7e176371aac44a63609bb72f3c11caa8aa43dcb68dadd4d306454433b0cedd7a1aeb25cdab2df7bc839aea698cef1769cd1928fad37039ee80d5', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:03', '2009-09-09 06:35:03', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:03', NULL, NULL, NULL, '2009-09-09 06:35:03', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:03', "created_at" = '2009-09-09 06:35:03', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 266ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '970926cf5a3d7e176371aac44a63609bb72f3c11caa8aa43dcb68dadd4d306454433b0cedd7a1aeb25cdab2df7bc839aea698cef1769cd1928fad37039ee80d5') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:03) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (3.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 17ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:03) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f9653e07ae071f03ed4ef7edbf5e77c79b4f89ea442a949785ecb5278cdc26ad43bf6a9832b75de47a7f583947efe88dfc7b193974733a9b49e8c7f50ffae425') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:03', '9bd9177ba848253a2cb81c092e58797f99242967bf37c4fbfbacbb4b60db1b12fa3c620f57bfa34fa06ae67a7501356facdf81d430447ecf465e88c278595895', '2009-09-09 06:35:03', 'subscriber', 'Wq8i0WL-wlYZpDGNb2pl', 'f9653e07ae071f03ed4ef7edbf5e77c79b4f89ea442a949785ecb5278cdc26ad43bf6a9832b75de47a7f583947efe88dfc7b193974733a9b49e8c7f50ffae425', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:03', '2009-09-09 06:35:03', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:03', NULL, NULL, NULL, '2009-09-09 06:35:03', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:03', "created_at" = '2009-09-09 06:35:03', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 125ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:03) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'f9653e07ae071f03ed4ef7edbf5e77c79b4f89ea442a949785ecb5278cdc26ad43bf6a9832b75de47a7f583947efe88dfc7b193974733a9b49e8c7f50ffae425') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 3ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:04) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (3.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 16ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:04) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '098abe746380c3c055a7256e9a2d0c88a5591461023716e9427ee5c7bfd80d6f33eb990a10f0058c86eab187f204cac88ad4f634cfa7bdd0645e354851de2104') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:04', '72c851ddb8e6c6a8412b6a1f0323d3cf0ff7456d66f519ffe74d364df2216ba40574696371b366652c2542203bc8d03f536e2198753892486cee5715080ef361', '2009-09-09 06:35:04', 'subscriber', '_Ro8oil6na1SjgnDY1oy', '098abe746380c3c055a7256e9a2d0c88a5591461023716e9427ee5c7bfd80d6f33eb990a10f0058c86eab187f204cac88ad4f634cfa7bdd0645e354851de2104', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:04', '2009-09-09 06:35:04', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:04', NULL, NULL, NULL, '2009-09-09 06:35:04', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:04', "created_at" = '2009-09-09 06:35:04', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 145ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:04) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '098abe746380c3c055a7256e9a2d0c88a5591461023716e9427ee5c7bfd80d6f33eb990a10f0058c86eab187f204cac88ad4f634cfa7bdd0645e354851de2104') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Create (0.7ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:35:16', 0, '2009-09-09 06:35:16', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:35:16', 1000, '2009-09-09 06:35:16', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:35:16', 30000, '2009-09-09 06:35:16', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:16) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:35:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:16) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8d760b74e0371a7a32e07b48c114b087f0effa572f99741c37b77fdbadb51f29d7f0a6ee538ff7c5d29201773c0e94182bc3a6733ba72553121d133041ccba09') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:16', 'fef424193c8f53e422625a966a39a037ff6562e5180187653f777136e214e60eb35afb28094ca0e82c8e3a92095df17dd7baffd2eb3bdd656e6340065656f9c3', '2009-09-09 06:35:16', 'subscriber', 'j9LTIHXYtg61TcDgxZNg', '8d760b74e0371a7a32e07b48c114b087f0effa572f99741c37b77fdbadb51f29d7f0a6ee538ff7c5d29201773c0e94182bc3a6733ba72553121d133041ccba09', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:16', '2009-09-09 06:35:16', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:17', NULL, NULL, NULL, '2009-09-09 06:35:17', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:17', "created_at" = '2009-09-09 06:35:16', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4a2f80c0640e1eaab27d377aba491a8e780022bc49a6a317801ef3d9a580a051534cc149ad2fb934acdaae3563c159a602f5f5cac3925763e70e8a560c82d364') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:17', '1168335b6ccb52c8c80e46562f0e7ed7099404c8a64b185db237bef74b4aea31ee70a6ba5f52763226ffb6d90670919ec03129ceda39f4b62f970f136a62f379', '2009-09-09 06:35:17', 'subscriber', 'nMLuK72bGubyDA0AKBml', '4a2f80c0640e1eaab27d377aba491a8e780022bc49a6a317801ef3d9a580a051534cc149ad2fb934acdaae3563c159a602f5f5cac3925763e70e8a560c82d364', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:17', '2009-09-09 06:35:17', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:17', NULL, NULL, NULL, '2009-09-09 06:35:17', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:17', "created_at" = '2009-09-09 06:35:17', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1e671e2491faca5056baf7fe188ced66bcf17fd5c083be3edcf76ebe867a0529d07a08fa027efa6af52aa2bfb7324709d933ff9f23f0e5cf6ab2ac18104c3847') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:17', '30049850d8b1722f97008ebb6e12c951e8c23bc70c77d0f8380f91a4de2631bacc766497943156864502a3757814332e434c59957e009c2a4b0a454cc9dd0f16', '2009-09-09 06:35:17', 'subscriber', 'wnqjgmMG4AK96UE5G6tw', '1e671e2491faca5056baf7fe188ced66bcf17fd5c083be3edcf76ebe867a0529d07a08fa027efa6af52aa2bfb7324709d933ff9f23f0e5cf6ab2ac18104c3847', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:17', '2009-09-09 06:35:17', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:17', NULL, NULL, NULL, '2009-09-09 06:35:17', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:17', "created_at" = '2009-09-09 06:35:17', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2e8e9650336844e02a3b075d57350d99856dc0bb45462ea6fb89a511b7f376be88acc2771103ad05fa08c0f7809a6e856f676c5e871000a10995f93aceeb726c') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:17', '92fc6e701f67985e852a94f49ba0951cfab7ae1353abc151625db59c842730743535b7a73f1800fc479070e8633cde6a1316c700c41f63debe913df2d351244a', '2009-09-09 06:35:17', 'subscriber', 'tyHvuJN6pNMpJpmoD08v', '2e8e9650336844e02a3b075d57350d99856dc0bb45462ea6fb89a511b7f376be88acc2771103ad05fa08c0f7809a6e856f676c5e871000a10995f93aceeb726c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:17', '2009-09-09 06:35:17', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:17', NULL, NULL, NULL, '2009-09-09 06:35:17', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:17', "created_at" = '2009-09-09 06:35:17', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:17', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:17) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 21ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:17) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:35:17', '2009-09-09 06:35:17', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.3ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:17', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 25ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:17) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 20ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.8ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6ae8810e746bf13e03e11f9a5381f0397a7cd987569c3c7f464344fbb577d8a6bb48e4b0f8f1f693b73732d7273cff9d9fdbc05544f9d7345dc7f0dfd4400f78') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:18', '1390c66d24c2b106644947c6476bb11800468efc3069c4d403e3522e7f0374a3fbeb9babe19eba3864c4fc42eabb68e7c3e6d9214c4db0f69518b9d2c5677ffe', '2009-09-09 06:35:18', 'subscriber', 'K7WVbNhBGX_bThPntApj', '6ae8810e746bf13e03e11f9a5381f0397a7cd987569c3c7f464344fbb577d8a6bb48e4b0f8f1f693b73732d7273cff9d9fdbc05544f9d7345dc7f0dfd4400f78', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:18', '2009-09-09 06:35:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:18', NULL, NULL, NULL, '2009-09-09 06:35:18', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:18', "created_at" = '2009-09-09 06:35:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:18', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:18) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:18) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:18) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 23ms (View: 15, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:18) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 29ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:18) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 172ms (View: 8, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '019f946c62505236e9df90a587ce3fd0b8ee316b5cdacd1d1c0ad11ad86710986b89c455900f9c03fd9751e03fe7ef9a87a8b8e21bd72bea40b0c68390ec7329') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:18', '7ad26cb66fbfcb15b7d344357b8f92a5f7b1dc8f5671412f46877807156c05abcc3ce6644219b71eb2f44f69e0d5dacd8820d3f18a7842c177af98bc31677c19', '2009-09-09 06:35:18', 'subscriber', '5rbPytVJJP_Fs8TAggqR', '019f946c62505236e9df90a587ce3fd0b8ee316b5cdacd1d1c0ad11ad86710986b89c455900f9c03fd9751e03fe7ef9a87a8b8e21bd72bea40b0c68390ec7329', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:18', '2009-09-09 06:35:18', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:18', NULL, NULL, NULL, '2009-09-09 06:35:18', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:18', "created_at" = '2009-09-09 06:35:18', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:18', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (11.1ms)
Completed in 23ms (View: 22, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:19) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 29ms (View: 16, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:19) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:35:19', '2009-09-09 06:35:19', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 43ms (View: 11, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.5ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c05404381ebae1babd7c51957bfaa86c84af88d1dbe06623ec50fb8cbd204d730b32ec5a11bb625366dba9e7c98db302212bf6264dd6734efcaddab1bd4e42c0') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:19', '922845bf3405e2bd8526c57c0a6419146b4e3dd8531d878df87b0acc3c77cfee6dda9fa0c62740956018806c1c3c4b4cf6e016d6a1ca0400784c7c660ee805c4', '2009-09-09 06:35:19', 'subscriber', 'wjjhHkTIoFDgha2qVsxt', 'c05404381ebae1babd7c51957bfaa86c84af88d1dbe06623ec50fb8cbd204d730b32ec5a11bb625366dba9e7c98db302212bf6264dd6734efcaddab1bd4e42c0', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:19', '2009-09-09 06:35:19', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:19', NULL, NULL, NULL, '2009-09-09 06:35:19', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:19', "created_at" = '2009-09-09 06:35:19', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:19', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:19', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.2ms)
Completed in 7ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:19) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 17ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 12ms (View: 11, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 226ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:19) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:20) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:35:20', '2009-09-09 06:35:20', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:35:20', '2009-09-09 06:35:20', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:20', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 30ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.6ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 9, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (13.5ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8b5579d1965a00a56e43f848f9317d449d17ae21b1c076d84a3c9df33b459b73825f74c3dc8ab4e8628c6182edbc70236bda1a87fcffe486134533f58edfdc87') LIMIT 1[0m
  [4;35;1mUser Load (3.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:20', 'cac2f71d4115d98fc2e81ad029266083eeccad74a075816c71cb40a3fe15a26b8deee217c60c47feb98cbf92feb3fb4ba1372a8817a3f02c2147bd525e20aa52', '2009-09-09 06:35:20', 'subscriber', 'uNYdAOyUAi4BVzJXlJHn', '8b5579d1965a00a56e43f848f9317d449d17ae21b1c076d84a3c9df33b459b73825f74c3dc8ab4e8628c6182edbc70236bda1a87fcffe486134533f58edfdc87', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:20', '2009-09-09 06:35:20', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:20', NULL, NULL, NULL, '2009-09-09 06:35:20', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:20', "created_at" = '2009-09-09 06:35:20', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:20', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:20', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:20) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 22) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:20) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 32ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:20) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:20) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 19ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:20) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:35:20', '2009-09-09 06:35:20', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:20', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:35:20', '2009-09-09 06:35:20', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:20', "state" = 'authorized' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:20', "state" = 'active', "next_renewal_on" = '2009-10-06' WHERE "id" = 1[0m
  [4;35;1mSubscriptionTransaction Load (0.7ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 190ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:20) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 10, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionPlan Load (1.2ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'abdaf67d830face6661a9350173989f59785055dc5fdef43c79d00e7cc9acd0a06ee6504a015d9420e45204cfb40c564f4c9f0cc017b28d688410ddf68f4a256') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:21', 'abcb72be3faf945dfe6130d95ef025c066f4f498cd923e49423003089d798c12d9b8ca332e1067f00cab329940c546c4939ca9988402decff0d476d40f9cdb16', '2009-09-09 06:35:21', 'subscriber', 'hrf235p6LxR3E59fVvfM', 'abdaf67d830face6661a9350173989f59785055dc5fdef43c79d00e7cc9acd0a06ee6504a015d9420e45204cfb40c564f4c9f0cc017b28d688410ddf68f4a256', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:21', '2009-09-09 06:35:21', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:21', NULL, NULL, NULL, '2009-09-09 06:35:21', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:21', "created_at" = '2009-09-09 06:35:21', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:21', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:21) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:21) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:35:21', '2009-09-09 06:35:21', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:21', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 19ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:35:21) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:35:21', '2009-09-09 06:35:21', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:35:21', '2009-09-09 06:35:21', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:21', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 29ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-09 02:35:21) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;36;1mSubscriptionTransaction Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0e999efeddb3e3bd4d5554e14f70732e49476233b79f55301bc4ef987fa8dc6b4f8bfc8e5c75d9a988e163927134ccf9c304b87858aa720d6c56a284bf8e18f1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:21', 'a76f5ecb6eb6e600c99d32c3e1ffd1f8baceddf51e4cbe27e84064139a874f08ca4ccecc3e36a87a3384f9a1364d01477093d211fe3baa6f97f6aea7bdcccb38', '2009-09-09 06:35:21', 'subscriber', 'j_WVH0dxnYZ59UvpBhQ-', '0e999efeddb3e3bd4d5554e14f70732e49476233b79f55301bc4ef987fa8dc6b4f8bfc8e5c75d9a988e163927134ccf9c304b87858aa720d6c56a284bf8e18f1', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.6ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:21', '2009-09-09 06:35:21', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:21', NULL, NULL, NULL, '2009-09-09 06:35:21', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:21', "created_at" = '2009-09-09 06:35:21', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:21', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ff115bbd0532d344f084f94c1eb997e6c8b5cabdcf6f972a80ea10f8ae757acba46cb151b8df7fd64da03629744cf440f5fbfac4e1a4c4a2ee60dcaaa12f424e') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '0e999efeddb3e3bd4d5554e14f70732e49476233b79f55301bc4ef987fa8dc6b4f8bfc8e5c75d9a988e163927134ccf9c304b87858aa720d6c56a284bf8e18f1') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:21', '2444d09ffec50a5f7114c9d08781d7558ad5248a7704c72b3580bf67b1dbfe1f69c6aa23f3de503cc544112c5e433999e74db2e581c97f5aa6b7341814f4af41', '2009-09-09 06:35:21', 'subscriber', 'Q-7q6FW_mboz1sQVSMsj', 'ff115bbd0532d344f084f94c1eb997e6c8b5cabdcf6f972a80ea10f8ae757acba46cb151b8df7fd64da03629744cf440f5fbfac4e1a4c4a2ee60dcaaa12f424e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:21', '2009-09-09 06:35:21', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:21', NULL, NULL, NULL, '2009-09-09 06:35:21', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:21', "created_at" = '2009-09-09 06:35:21', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:21', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:21', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fb510eeb96bc2ee737f184562993a067284a84093b4831702334a54a6fa200d33d7d9349ba73b2c88f7e519aa0ccd58d6c2188df81bdee198a4034ac8b22cda5') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'ff115bbd0532d344f084f94c1eb997e6c8b5cabdcf6f972a80ea10f8ae757acba46cb151b8df7fd64da03629744cf440f5fbfac4e1a4c4a2ee60dcaaa12f424e') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:22', '89a0e03115374990ed65cc20d7feeabdc45ab914fe3cccd2452618a2aaafb47750c2a7534a83e43d299ef37646794106cf9e9175b574fc582dce7368aad36cd3', '2009-09-09 06:35:22', 'subscriber', 'D4og98w6naYmJXmgEhy4', 'fb510eeb96bc2ee737f184562993a067284a84093b4831702334a54a6fa200d33d7d9349ba73b2c88f7e519aa0ccd58d6c2188df81bdee198a4034ac8b22cda5', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:22', '2009-09-09 06:35:22', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:22', NULL, NULL, NULL, '2009-09-09 06:35:22', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:22', "created_at" = '2009-09-09 06:35:22', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a32511fc7bddfdf273a257f178e7d510742f62eb48444e5097075aa8ad1ebccb8e1289a1f09ae2dba797e07fc02f017460eb3d179d2f4e6bc4c3a102899d143d') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'fb510eeb96bc2ee737f184562993a067284a84093b4831702334a54a6fa200d33d7d9349ba73b2c88f7e519aa0ccd58d6c2188df81bdee198a4034ac8b22cda5') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:22', '118a89c05269a3bdfe0859d8ad76d96c8282ab55f5fcf080b6bfcd18a3afcf4e20206ba071d519825702b29a5ff11d09ed98060decdca3ba60fc9830c00b0cc9', '2009-09-09 06:35:22', 'subscriber', '_bRwVF9KPoii7YHsL7JR', 'a32511fc7bddfdf273a257f178e7d510742f62eb48444e5097075aa8ad1ebccb8e1289a1f09ae2dba797e07fc02f017460eb3d179d2f4e6bc4c3a102899d143d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:22', '2009-09-09 06:35:22', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:22', NULL, NULL, NULL, '2009-09-09 06:35:22', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:22', "created_at" = '2009-09-09 06:35:22', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:22', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 15) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.5ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 27ms (View: 13, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:22) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5f641cadd90640989fefdea6498be4f6818fcb02c63adca48dda67cb231f12c4424fd2f8cc4443772afbe7861259a69f62759211d8325a41135a10484fd9dbbc') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:22', 'dca9fe4e47b9f149449c3c1595cb5c4e49e32958741617ef4698f07422c76db140931f0bbb7848a4368ed0e7b7f203dee78dc59ba8baa7c451629eef6dcaf0f6', '2009-09-09 06:35:22', 'subscriber', '4VvD0HjgMtG1E81FfL7N', '5f641cadd90640989fefdea6498be4f6818fcb02c63adca48dda67cb231f12c4424fd2f8cc4443772afbe7861259a69f62759211d8325a41135a10484fd9dbbc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:22', '2009-09-09 06:35:22', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:22', NULL, NULL, NULL, '2009-09-09 06:35:22', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:22', "created_at" = '2009-09-09 06:35:22', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '5f641cadd90640989fefdea6498be4f6818fcb02c63adca48dda67cb231f12c4424fd2f8cc4443772afbe7861259a69f62759211d8325a41135a10484fd9dbbc') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.3ms)
Completed in 4ms (View: 4, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.0ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (130.1ms)
Completed in 145ms (View: 138, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:22) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '110034a550c9c53742fea286f3751bc6a7278853e19575d30b8a3e7d376089c6eaa85471864b14e93d9be5098c554feb7b59e743b1253bf0a2a18282654b56fc') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:22', '987085ae9f87f6a58c58de51d4e664fe257760e9e04ea7c047d95adc1f7deea9b67ee8b7332e6655edc76c723c9428305f4bed8b3cdd8c050fc29013b7ef200e', '2009-09-09 06:35:22', 'subscriber', 'E34pTXwSQAUxBPY4MSxx', '110034a550c9c53742fea286f3751bc6a7278853e19575d30b8a3e7d376089c6eaa85471864b14e93d9be5098c554feb7b59e743b1253bf0a2a18282654b56fc', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:22', '2009-09-09 06:35:22', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:22', NULL, NULL, NULL, '2009-09-09 06:35:22', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:22', "created_at" = '2009-09-09 06:35:22', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 29ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '110034a550c9c53742fea286f3751bc6a7278853e19575d30b8a3e7d376089c6eaa85471864b14e93d9be5098c554feb7b59e743b1253bf0a2a18282654b56fc') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 16ms (View: 9, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:22) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e456c81fda8cb52a9d5cc1ea04a058b7201b782683ede01005a41651980f2e093ee05f7592f4053494095263b2358418808b9dad4bc812240b1002b5b376123b') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:22', 'cdf20a1e7924ebbd961ae97f0c28486858a546a923a3b4ba92d686aa407e8c12366e624345b963611b757ee052da08b4cca8b9f93de6f8ba274f78e895270fea', '2009-09-09 06:35:22', 'subscriber', 'SsWUmpZSZiMPgrLI94GD', 'e456c81fda8cb52a9d5cc1ea04a058b7201b782683ede01005a41651980f2e093ee05f7592f4053494095263b2358418808b9dad4bc812240b1002b5b376123b', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:22', '2009-09-09 06:35:22', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:22', NULL, NULL, NULL, '2009-09-09 06:35:22', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:22', "created_at" = '2009-09-09 06:35:22', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 29ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:22) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'e456c81fda8cb52a9d5cc1ea04a058b7201b782683ede01005a41651980f2e093ee05f7592f4053494095263b2358418808b9dad4bc812240b1002b5b376123b') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.5ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '938bbe088517f46746db42b1b4385c3b6f7c062d33d5a2ebb728f586a00bcaeb2423bca36124c24abaaa277a95415731d4dbd26398353e8ad67045dbfa605684') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'e456c81fda8cb52a9d5cc1ea04a058b7201b782683ede01005a41651980f2e093ee05f7592f4053494095263b2358418808b9dad4bc812240b1002b5b376123b') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:23', 'a8d6b29d7f16eba1cb8808295cbd90f9167f5a24f57ce886ef46a6fb7f4333fb76a43fe58cd2b8eb0d3a52794dd74e27b14b6b8ac8ae7692d5c45a516d8fc32c', '2009-09-09 06:35:23', 'subscriber', 'ZwcKHyf7BIYnuTk2EhjG', '938bbe088517f46746db42b1b4385c3b6f7c062d33d5a2ebb728f586a00bcaeb2423bca36124c24abaaa277a95415731d4dbd26398353e8ad67045dbfa605684', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:23', '2009-09-09 06:35:23', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:23', NULL, NULL, NULL, '2009-09-09 06:35:23', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:23', "created_at" = '2009-09-09 06:35:23', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:23) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.0ms)
Rendered layouts/_user_nav (130.4ms)
Completed in 142ms (View: 137, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.9ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'fd339bc73cef552381e560a6be83ff776f874aec0c821ad4e8d5c2dfb20644ff285f5d6832a9893c6a81cb4008dfe7a371945da56b3774a1809e680b25690d8c') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:23', '09b7d7add24b5d2dce6efb6d9cd5673f238fe029e744b2a3d18fc5af10c6302375657c1c4ad39043f06efa4e9ddc1476738e3465e57f27bc32b9ee8d7e0dd44c', '2009-09-09 06:35:23', 'subscriber', 'xUfbi8KXTxKTeZIpVyxO', 'fd339bc73cef552381e560a6be83ff776f874aec0c821ad4e8d5c2dfb20644ff285f5d6832a9893c6a81cb4008dfe7a371945da56b3774a1809e680b25690d8c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:23', '2009-09-09 06:35:23', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:23', NULL, NULL, NULL, '2009-09-09 06:35:23', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:23', "created_at" = '2009-09-09 06:35:23', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.3ms)
Completed in 8ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:23) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 17ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 23ms (View: 22, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.4ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 9, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:23) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a46751be0671100ded6102920060aefde7f613b558a52f631062fa3551500972fbd2623240d95e997c428c4c3dd296e27207eda9872b845b33f226e0c50d0301') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:24', 'a8f53ed50ba6e6a355a696f49b7e339a3deb528df14594e14182b034a5f10d52ea33dbfbc1f6ad11f494211b90284c846b86fe4c903c4977dd26ddcf96913145', '2009-09-09 06:35:24', 'subscriber', 'atMB7887EpYMtrcLWsTf', 'a46751be0671100ded6102920060aefde7f613b558a52f631062fa3551500972fbd2623240d95e997c428c4c3dd296e27207eda9872b845b33f226e0c50d0301', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:24', '2009-09-09 06:35:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:24', NULL, NULL, NULL, '2009-09-09 06:35:24', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:24', "created_at" = '2009-09-09 06:35:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.6ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:24', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.4ms)
Completed in 10ms (View: 7, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 17ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a33f2edd6d831b6cd856283f0e155054d702cd2d5af55cd74b5b2d71b48d11d98255f9c6d7ed294107e93ea0905c3e4078961e7de2b4475159b28466231b2a22') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:24', 'a4098cf92f68dc35effa9b79a1b39d8583480ceed31f2cacf355d05a5eb65363af08d743dc41fdfd3e5bff1886ab18b138b78b79fed5e52f4572a304089b8922', '2009-09-09 06:35:24', 'subscriber', 'fB5dskvVXSGOdPpUnh1O', 'a33f2edd6d831b6cd856283f0e155054d702cd2d5af55cd74b5b2d71b48d11d98255f9c6d7ed294107e93ea0905c3e4078961e7de2b4475159b28466231b2a22', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:24', '2009-09-09 06:35:24', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:24', NULL, NULL, NULL, '2009-09-09 06:35:24', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:24', "created_at" = '2009-09-09 06:35:24', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:24', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.3ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:24', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:24) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (16.0ms)
Completed in 20ms (View: 20, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:24) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:24) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 7, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:24) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (1.0ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 44ms (View: 31, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'f46e54f2b689179d9a10e515ff46a29943b05e20e68766e184606b4975a1cd913caef74ac1d34a075291289ac0e9e9ef1afe7fdb9af2a92310f83bc72a2ee122') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:24', '4547cc3077ab1d13549aef8cbb019b85ca95fec63ba38e65980e8e7eee5014bda3f4e4354bce8ef487d6dc44447bd04e522e8c37505d222fc87e71a4e63f02f3', '2009-09-09 06:35:24', 'subscriber', 'fkSJ68hF6hHl_6orp_Na', 'f46e54f2b689179d9a10e515ff46a29943b05e20e68766e184606b4975a1cd913caef74ac1d34a075291289ac0e9e9ef1afe7fdb9af2a92310f83bc72a2ee122', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:25', '2009-09-09 06:35:25', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:25', NULL, NULL, NULL, '2009-09-09 06:35:25', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "created_at" = '2009-09-09 06:35:25', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "state" = 'active' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.7ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:25', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 30ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 18ms (View: 11, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b3c14db5b42d36d0fc35d6252d31943057a462fd5d2411f2c12b252c5fc879a5d927e66b1477d505c63034c8f7c3bec24df568caed7c7b43c260cbb64b5785d7') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:25', '8ea226b5817aa556d276618aaa1501feb1d03e1e205af13291968b7f3cbf45fad776ade094b346bbc1c9d2782b061194de0c9a2709dbd35446ee018658d582a1', '2009-09-09 06:35:25', 'subscriber', 'N5T7srroVfxvkRSDOJtd', 'b3c14db5b42d36d0fc35d6252d31943057a462fd5d2411f2c12b252c5fc879a5d927e66b1477d505c63034c8f7c3bec24df568caed7c7b43c260cbb64b5785d7', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:25', '2009-09-09 06:35:25', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (11.9ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:25', NULL, NULL, NULL, '2009-09-09 06:35:25', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "created_at" = '2009-09-09 06:35:25', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 15) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 30ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.7ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9ae4dfb53f7ea820d66ffe686b80247f20208d17a84b72f6ee34a399211ae48280efad688ae7fecc188d39dfeb2d19cfb8c88a3f0d8f5e1de53eae756e3d9cb3') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:25', '2ac3a72c9c5431f2153972b74ff2876d478e9e4cb302b39394e99c733f260eec79800c0c270d84f6806174f1cd5332fdd9262db5c559fab4dbd21fd01fd0c619', '2009-09-09 06:35:25', 'subscriber', 'PLDoAJ7xLMVlkvqM6X7z', '9ae4dfb53f7ea820d66ffe686b80247f20208d17a84b72f6ee34a399211ae48280efad688ae7fecc188d39dfeb2d19cfb8c88a3f0d8f5e1de53eae756e3d9cb3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:25', '2009-09-09 06:35:25', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:25', NULL, NULL, NULL, '2009-09-09 06:35:25', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "created_at" = '2009-09-09 06:35:25', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:25', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:35:25', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:25) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 32ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:35:25) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;35;1mSubscriptionPlan Load (4.1ms)[0m   [0mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.9ms)
Completed in 17ms (View: 11, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:35:25) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'eb0d591a294b93b0ac04e97bb9d92493c48eb25c763ad35064e6f185154d86f922d22d3171b09b83a59e2e3506b389847b7b3fabf4c1a95c3c17dbb8a0163905') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:26', 'b11f9dc4e1414ac493aa32c9cfdaf960914a5027d895638c81df109dd29f3d8c5fd3927111b6c96822615251122aaf87160b72c429ae249caea0b5f37f325561', '2009-09-09 06:35:26', 'subscriber', 'QKIxJ44_cFP5poYB8QPU', 'eb0d591a294b93b0ac04e97bb9d92493c48eb25c763ad35064e6f185154d86f922d22d3171b09b83a59e2e3506b389847b7b3fabf4c1a95c3c17dbb8a0163905', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:26', '2009-09-09 06:35:26', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:26', NULL, NULL, NULL, '2009-09-09 06:35:26', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:26', "created_at" = '2009-09-09 06:35:26', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 162ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'eb0d591a294b93b0ac04e97bb9d92493c48eb25c763ad35064e6f185154d86f922d22d3171b09b83a59e2e3506b389847b7b3fabf4c1a95c3c17dbb8a0163905') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:26) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '388ccfbb02cead966c90f33170a84ce605f44ba09be8c8a3c4b30d33cda474f831f4389ade70d95e107233059170c261afe3c1f3a90fa60e7338d5b323bde28b') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:26', 'd7b7dee905a89bfe973693fb1aae28bd63ac70db720aaeb6384d680759f68097546923a5a08d1add3029e889f2eb3d38cfd47d6a6709bf0032c7d0fb1315bfcb', '2009-09-09 06:35:26', 'subscriber', '7FPgxNWZh9BNKT6vcwPC', '388ccfbb02cead966c90f33170a84ce605f44ba09be8c8a3c4b30d33cda474f831f4389ade70d95e107233059170c261afe3c1f3a90fa60e7338d5b323bde28b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:26', '2009-09-09 06:35:26', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:26', NULL, NULL, NULL, '2009-09-09 06:35:26', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:26', "created_at" = '2009-09-09 06:35:26', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:26) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '112a397cdd78937448bf9f2ccf6b5a93e8fd9424d93d9ebf650c26c978a6245a99b5840312d6cb93f86015ca4a07a7af447475c37920e057176e9fc1d13d1a04') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (120.8ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:35:26', '3fc5e77a6b57e83debc0f31f0c923c9b357fca400c1bdfeb1f3140906d5820d3dd11016779ea7f52cba6bc986eeb79177219e8771c6eadce40acb61db45b0e4d', '2009-09-09 06:35:26', 'subscriber', 'GKzBuXX7HNQ_7Tf3EWj8', '112a397cdd78937448bf9f2ccf6b5a93e8fd9424d93d9ebf650c26c978a6245a99b5840312d6cb93f86015ca4a07a7af447475c37920e057176e9fc1d13d1a04', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:35:26', '2009-09-09 06:35:26', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (84.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:35:26', NULL, NULL, NULL, '2009-09-09 06:35:26', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:35:26', "created_at" = '2009-09-09 06:35:26', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 207) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:35:26) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:35:26) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-09 06:36:35', 0, '2009-09-09 06:36:35', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-09 06:36:35', 1000, '2009-09-09 06:36:35', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-09 06:36:35', 30000, '2009-09-09 06:36:35', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 12ms (View: 9, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:36:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 2ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 10ms (View: 7, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ad24fb5c31b38487c4effb5f2502b1f6c06ee606154dfc190ca066db61e45d7856fa71085b3618e1d06e7fede2e2cd4a937014afef50e985622fbadf66489339') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:36', '6ab059847a44bb54e20bc11a1447771f83e44f20e9b5fb2e58c8404a7f177e844eab89ab3ac33d685cb14ef5e87943a6db1b05a4161f415027488b33219993e5', '2009-09-09 06:36:36', 'subscriber', 'Dwdu1SRSU7x1K19zsMwr', 'ad24fb5c31b38487c4effb5f2502b1f6c06ee606154dfc190ca066db61e45d7856fa71085b3618e1d06e7fede2e2cd4a937014afef50e985622fbadf66489339', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:36', '2009-09-09 06:36:36', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:36', NULL, NULL, NULL, '2009-09-09 06:36:36', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:36', "created_at" = '2009-09-09 06:36:36', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a1ae7b5573eecb533011cfc4c3f3187ec238d2422f9856c3de49795554f64f719284ad0a18cf3e3cfbfa52b4536479ae55e6b7a4a3e1418f62f06f1dc8ef589f') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:36', '4ba1bb8a8819781b0d3d90e2419d6a265be47f07bd37c8abfd64d01a1c478936a8bd2383f349148c7322d23cde3919bb3630400c2a678482c1e6dd2534c468bb', '2009-09-09 06:36:36', 'subscriber', 'x9kkVQF1IE4WVjMy9E41', 'a1ae7b5573eecb533011cfc4c3f3187ec238d2422f9856c3de49795554f64f719284ad0a18cf3e3cfbfa52b4536479ae55e6b7a4a3e1418f62f06f1dc8ef589f', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:36', '2009-09-09 06:36:36', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:36', NULL, NULL, NULL, '2009-09-09 06:36:36', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:36', "created_at" = '2009-09-09 06:36:36', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-09 02:36:36) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.3ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:36:36', 'title 1', 'body 1', '2009-09-09 06:36:36')[0m
Redirected to http://www.example.com/infos/1
Completed in 8ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.4ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd799086a04bbfcc4bbf4372c52a77de28c44b080a3517e896adff729aad72b9e1c5a0c9309420e1229e483b12abfc4b31c30580ba0065b2ab7429f1a193627b4') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:36', '030644facb0688ecb925afb26b7e9aa39923a3152bb75ef01d73b83b76fe8edf572df1efd48e07807b3c6bc185ae1248ac4e57e773801e3c52ff703f2c25fcdf', '2009-09-09 06:36:36', 'subscriber', 'uWG3if_vUqkjgid94BDr', 'd799086a04bbfcc4bbf4372c52a77de28c44b080a3517e896adff729aad72b9e1c5a0c9309420e1229e483b12abfc4b31c30580ba0065b2ab7429f1a193627b4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:36', '2009-09-09 06:36:36', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:36', NULL, NULL, NULL, '2009-09-09 06:36:36', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:36', "created_at" = '2009-09-09 06:36:36', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:36:36', 'title 1', 'body 1', '2009-09-09 06:36:36')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:36:36', 'title 2', 'body 2', '2009-09-09 06:36:36')[0m
  [4;35;1mInfo Create (0.1ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:36:36', 'title 3', 'body 3', '2009-09-09 06:36:36')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-09 06:36:36', 'title 4', 'body 4', '2009-09-09 06:36:36')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.6ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-09 02:36:36) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0bab62429c60f196c027582a3525f0d9dd060b0771e032ec43ac5e1909234f69e80d3e0d3c9ab93b8537ecffd1eaf066db589370285d04d6cc794648b1eed2f8') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:36', '0a5fe788b9840748e2ecd89942439f51bca0206adb78be16d036dc4b91de63a76284ddf453de53de547548f29307722cf2b79429e0b6ec383896b100fc294dbb', '2009-09-09 06:36:36', 'subscriber', '-kO7VGVCYPkaYywugN-N', '0bab62429c60f196c027582a3525f0d9dd060b0771e032ec43ac5e1909234f69e80d3e0d3c9ab93b8537ecffd1eaf066db589370285d04d6cc794648b1eed2f8', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:36', '2009-09-09 06:36:36', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:36', NULL, NULL, NULL, '2009-09-09 06:36:36', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:36', "created_at" = '2009-09-09 06:36:36', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:36', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (3.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 16ms (DB: 4) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 14, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:37) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:36:37', '2009-09-09 06:36:37', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:37', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 25ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 19ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.8ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (5.7ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2489013d57e4330101d1eb76bb1e64e5f704521d34b26d2897c3b91b67fa04d6466ccb4b28fea9fa2966f399958971c0a8fdffd5ae82bbb90accc71b1f37c4e3') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (16.2ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:37', '52f8352f4d378546a97393edecbaba8bf9ae5b3571f4191a28038a0815801a9d6880e8a402be5c9ca0a88621a7e997165cf9b905978a7b11174c8358f2141d35', '2009-09-09 06:36:37', 'subscriber', 'gNd8wtqzE2k0Lwd_Aa_C', '2489013d57e4330101d1eb76bb1e64e5f704521d34b26d2897c3b91b67fa04d6466ccb4b28fea9fa2966f399958971c0a8fdffd5ae82bbb90accc71b1f37c4e3', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:37', '2009-09-09 06:36:37', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:37', NULL, NULL, NULL, '2009-09-09 06:36:37', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:37', "created_at" = '2009-09-09 06:36:37', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:37', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 27) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:37) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 25ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.9ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 47ms (View: 39, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:37) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 11, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:37) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 179ms (View: 170, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (1.2ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'e24b31688210303df80c089eeb2aa706ced984d0ff44dc99bdfc82943d76860dac5319a349ebfc7479994b6bbed25b8ea94fdb09747c0485c09b9f66b8cb2b84') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:38', '6ce3bda42d43e8a6136330449892e7646930c5a9161543350e0e3e40d215ef1ab56cf636ee392efdd78c0a7eaf3fcb7e040592b8ad170794262d60d130cb5d1b', '2009-09-09 06:36:38', 'subscriber', 'UeN4MBYTewa2hX91Uhs8', 'e24b31688210303df80c089eeb2aa706ced984d0ff44dc99bdfc82943d76860dac5319a349ebfc7479994b6bbed25b8ea94fdb09747c0485c09b9f66b8cb2b84', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:38', '2009-09-09 06:36:38', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:38', NULL, NULL, NULL, '2009-09-09 06:36:38', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:38', "created_at" = '2009-09-09 06:36:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:38', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 9ms (View: 8, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 17ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 19ms (View: 11, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:38) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (2.0ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:36:38', '2009-09-09 06:36:38', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 45ms (View: 7, DB: 4) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.8ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'ec8cc8e26e43b9dc6831fd617686eea453bbcf66f2f929f49cd46d40b7f518ac32ac2895b02cea0dc34fa4127448dd1d89ce862546ba99289fd33bc4cb5bbbe8') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:38', 'b4e7794fed4e01cd7e2065b9665079c36b88ec9fecd76b10ba2699feda7032a57be1b692819fe3b2a852cc8baf663ef7b9fadca8bab51db378ce2fd2473557dc', '2009-09-09 06:36:38', 'subscriber', 'ZqgoCw1uUnlnUsbbryC2', 'ec8cc8e26e43b9dc6831fd617686eea453bbcf66f2f929f49cd46d40b7f518ac32ac2895b02cea0dc34fa4127448dd1d89ce862546ba99289fd33bc4cb5bbbe8', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:38', '2009-09-09 06:36:38', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:38', NULL, NULL, NULL, '2009-09-09 06:36:38', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:38', "created_at" = '2009-09-09 06:36:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:38', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:38', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 6ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:38) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 21ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 10, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:38) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:39) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.6ms)
Completed in 19ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:39) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:36:39', '2009-09-09 06:36:39', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:36:39', '2009-09-09 06:36:39', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:39', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 39ms (DB: 3) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:39) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (1.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'c0dd0aedcde2591e8dc9e07f8759ae9e414ec54c5d563d1b8d51d784d1ecec3d073bfa4d44b9e566cd56f1ab3e2ded20fd0a6f2c179abd3895d692f00445f4cf') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:39', '50ce1ccb7ab77adbbf12f357edf373c1f0384a6f740aa0b303998f35dca8e5cbffc766ff1947667479e7b76ec4d7134eafe2c558087ec031674ab67da7c43f46', '2009-09-09 06:36:39', 'subscriber', 'BqOnTNVB3w7PL91r3H1V', 'c0dd0aedcde2591e8dc9e07f8759ae9e414ec54c5d563d1b8d51d784d1ecec3d073bfa4d44b9e566cd56f1ab3e2ded20fd0a6f2c179abd3895d692f00445f4cf', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:39', '2009-09-09 06:36:39', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:39', NULL, NULL, NULL, '2009-09-09 06:36:39', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:39', "created_at" = '2009-09-09 06:36:39', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:39', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.3ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:39', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 307ms (View: 307, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:39) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:39) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 38ms (View: 30, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:40) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:36:40', '2009-09-09 06:36:40', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:40', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:36:40', '2009-09-09 06:36:40', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:40', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:40', "state" = 'active', "next_renewal_on" = '2009-10-06' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 197ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '22861731ef186fb698f3d95f353bcd4d451bd7968bdb13457b8837cf975a1aa5a36e8d601b268fd8dff40f5883f535e07383442158b60465ffdb6d858b3de14b') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:40', '6fd4d8eaed1059aca9a30b3157ccf46d3d818bf3eb07c2efad31593cc6bebcb8e2c3aa79fb05f4d320188fde90432b8d61426c92cf2f511d143044ad43ae2cfa', '2009-09-09 06:36:40', 'subscriber', 'iDOzL6L3zcxHPBXCUAv8', '22861731ef186fb698f3d95f353bcd4d451bd7968bdb13457b8837cf975a1aa5a36e8d601b268fd8dff40f5883f535e07383442158b60465ffdb6d858b3de14b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:40', '2009-09-09 06:36:40', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:40', NULL, NULL, NULL, '2009-09-09 06:36:40', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:40', "created_at" = '2009-09-09 06:36:40', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:40', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:40) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:36:40', '2009-09-09 06:36:40', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:40', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.9ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-09 02:36:40) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-09 06:36:40', '2009-09-09 06:36:40', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-09 06:36:40', '2009-09-09 06:36:40', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:40', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 23ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-09 02:36:40) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;35;1mSubscriptionTransaction Load (0.8ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 11ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd38176474f7cee14c5b8e122e3a25baef07fff9e61dfcbe444cfa94ac0ab981512235f406328d202d3a06af080afbe326a003cd5952da3cbd107a697812df4f4') LIMIT 1[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:40', '8ca03d593c409b55921a9ac5589246edfa5e94c9349a6e19230ff81aaba688a9e558d4ea50bb06b93babfadb112f9c876a7f6a01784483599f4a5a8b4c924254', '2009-09-09 06:36:40', 'subscriber', 'mX9-gCqcgu6hHeBULgdH', 'd38176474f7cee14c5b8e122e3a25baef07fff9e61dfcbe444cfa94ac0ab981512235f406328d202d3a06af080afbe326a003cd5952da3cbd107a697812df4f4', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:41', '2009-09-09 06:36:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:41', NULL, NULL, NULL, '2009-09-09 06:36:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "created_at" = '2009-09-09 06:36:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9d40d4fc1925cc14b29242ad5a23f2dc38e4e98e73787eef81aa2f4660d226e3462d7b65c13888a00c11b15408de87aaa112038dab1c81491b63def9f55b3d4f') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'd38176474f7cee14c5b8e122e3a25baef07fff9e61dfcbe444cfa94ac0ab981512235f406328d202d3a06af080afbe326a003cd5952da3cbd107a697812df4f4') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:41', 'e6039e34056e95f11aa2f06641e9535dc005c3f5ace2182f130a79e4a0ec8c83ff9dd6959adb6860125b4d966acb5315ea6b87fcca16c3605cadb739cf0bacf2', '2009-09-09 06:36:41', 'subscriber', '-TqivXWNmWNWWU3TGia4', '9d40d4fc1925cc14b29242ad5a23f2dc38e4e98e73787eef81aa2f4660d226e3462d7b65c13888a00c11b15408de87aaa112038dab1c81491b63def9f55b3d4f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:41', '2009-09-09 06:36:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:41', NULL, NULL, NULL, '2009-09-09 06:36:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "created_at" = '2009-09-09 06:36:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:41', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1a73f1137c3714abd95b606fd939895ea0687129b7ed7207c28717cf81359cd8b588d5c7cc42eb86bda5c02b8d32db6f101553ed7d66729428586367c7225e83') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9d40d4fc1925cc14b29242ad5a23f2dc38e4e98e73787eef81aa2f4660d226e3462d7b65c13888a00c11b15408de87aaa112038dab1c81491b63def9f55b3d4f') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:41', '1384548e8bbeb14e8dfd4bb8efdcdf3df0c7f996a329275166126d2c7e69846976a717dfa5874ed4c5a351a718e5d82f89a2822bd7aed89000c999f467e642dc', '2009-09-09 06:36:41', 'subscriber', 'OPQ-IQnPSFvOJci8q1im', '1a73f1137c3714abd95b606fd939895ea0687129b7ed7207c28717cf81359cd8b588d5c7cc42eb86bda5c02b8d32db6f101553ed7d66729428586367c7225e83', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:41', '2009-09-09 06:36:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:41', NULL, NULL, NULL, '2009-09-09 06:36:41', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "created_at" = '2009-09-09 06:36:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8dd5bcff06f7df8346083a0eaaafa34010a9607d537efcf5b4ba81376bf12d8a3fc2e865d901722436b5b5147abbab3a46b6d8f1385f51528ba094a95b64c63e') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '1a73f1137c3714abd95b606fd939895ea0687129b7ed7207c28717cf81359cd8b588d5c7cc42eb86bda5c02b8d32db6f101553ed7d66729428586367c7225e83') LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:41', 'c8cf8962cf8d123db9ad6f0aad539f003551e05d3d44522aa98e79187cf4d239b7c5bdb0c293b790e00a4f61d7d5d60f7f5682c425d64417ddc151a06841dd7f', '2009-09-09 06:36:41', 'subscriber', 'jTUkkSZ3N1EpfVZACNQS', '8dd5bcff06f7df8346083a0eaaafa34010a9607d537efcf5b4ba81376bf12d8a3fc2e865d901722436b5b5147abbab3a46b6d8f1385f51528ba094a95b64c63e', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:41', '2009-09-09 06:36:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:41', NULL, NULL, NULL, '2009-09-09 06:36:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "created_at" = '2009-09-09 06:36:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:41', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 16) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 22ms (View: 12, DB: 5) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:36:41) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6874e4212898343749cf43a4c6b47aa16c73526d88f79389833f9ffb2ffebc9485fdb07e0d94ea436b94d5826011375bc99993c6a6d9a31bc6aea3765ea70943') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:41', 'd675290b68eedf41b30844c6bcdc4f52f0c31001c6163a35fb55a68eae0a4038fb85eee5b2ce321abce34c7f1e664035d2f120c5025e84c1b76d5699990ec968', '2009-09-09 06:36:41', 'subscriber', 'daiLbxO-fKBZ8CJTgwTW', '6874e4212898343749cf43a4c6b47aa16c73526d88f79389833f9ffb2ffebc9485fdb07e0d94ea436b94d5826011375bc99993c6a6d9a31bc6aea3765ea70943', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:41', '2009-09-09 06:36:41', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:41', NULL, NULL, NULL, '2009-09-09 06:36:41', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "created_at" = '2009-09-09 06:36:41', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '6874e4212898343749cf43a4c6b47aa16c73526d88f79389833f9ffb2ffebc9485fdb07e0d94ea436b94d5826011375bc99993c6a6d9a31bc6aea3765ea70943') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 17ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:36:41) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '0c636065f2c1bee859e214c3392a58a35bf88db87e27a8a162a8bf5082bad5123666c52435fb5e9a05546842fc1348f065dc77572a0a7807a2a1a5b515afeabf') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:41', '4d2f391fdfe88a854e78e49ac5f9d13000f66c747f3da89322f352a0d0fa53499f4d2f5a28b38ffb4078a9f496bc5d0270b0e8e220e3debe21465cbca43e80c4', '2009-09-09 06:36:41', 'subscriber', 'FQk9-xRJazd-9onQ85zb', '0c636065f2c1bee859e214c3392a58a35bf88db87e27a8a162a8bf5082bad5123666c52435fb5e9a05546842fc1348f065dc77572a0a7807a2a1a5b515afeabf', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:41', '2009-09-09 06:36:41', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:41', NULL, NULL, NULL, '2009-09-09 06:36:41', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:41', "created_at" = '2009-09-09 06:36:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 29ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '0c636065f2c1bee859e214c3392a58a35bf88db87e27a8a162a8bf5082bad5123666c52435fb5e9a05546842fc1348f065dc77572a0a7807a2a1a5b515afeabf') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.3ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:36:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 17ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:36:42) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2b4306672b1aa50fbbdf963988899ba5c1c14b255c05023d7209b18eea422f7d128330e4f506fc04d60d3770212392d9fd8f3cbc95faa72784657b7e21842bec') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:42', '2df4fb02743465e529a58f6406dcbf909cfda486b9649f3fd6256fe806e77af8cc7e7366d3478b5a09c6e467a6ed104d87f5e74c3ef934386a6af3d7e9065ba1', '2009-09-09 06:36:42', 'subscriber', 'oKzUleNPpYhCd1QCvezz', '2b4306672b1aa50fbbdf963988899ba5c1c14b255c05023d7209b18eea422f7d128330e4f506fc04d60d3770212392d9fd8f3cbc95faa72784657b7e21842bec', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:42', '2009-09-09 06:36:42', 1, 'User', NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:42', NULL, NULL, NULL, '2009-09-09 06:36:42', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:42', "created_at" = '2009-09-09 06:36:42', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 28ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '2b4306672b1aa50fbbdf963988899ba5c1c14b255c05023d7209b18eea422f7d128330e4f506fc04d60d3770212392d9fd8f3cbc95faa72784657b7e21842bec') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5b1cd603f23081e39443164c8be8a3bbbfb236bd1b90fb2b1f6e8f25da643d6a59ad549006a4f4663ea25210090310ba37befb3feb6924c0c8dd72d94e7e1562') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '2b4306672b1aa50fbbdf963988899ba5c1c14b255c05023d7209b18eea422f7d128330e4f506fc04d60d3770212392d9fd8f3cbc95faa72784657b7e21842bec') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:42', 'dae1e1ce2ddaeb9e44191f4d6410723475f916aaf8f5ec4fffd9a354ea30a99d914edddb8278a934a12b2766bedf3693113fb4a7133947d28e5955b2e2efeaeb', '2009-09-09 06:36:42', 'subscriber', '5Lbo3QAC_wvObOzCmAqK', '5b1cd603f23081e39443164c8be8a3bbbfb236bd1b90fb2b1f6e8f25da643d6a59ad549006a4f4663ea25210090310ba37befb3feb6924c0c8dd72d94e7e1562', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:42', '2009-09-09 06:36:42', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:42', NULL, NULL, NULL, '2009-09-09 06:36:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:42', "created_at" = '2009-09-09 06:36:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.0ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.1ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 12ms (View: 5, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.0ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3eca69afc7134c5f02e4e56066273b595c46f03acb6e32dad74415fcef78d65396a94af4d8f3842bfe5da54ba60aa44a6292c47c4b24c041af3dd423e6c3a323') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:42', 'e4bc086daae1b9cc08f6d826541f94037db0b01dcbcc3639eeaf5e6f1a2f0897537134d84a3177f242357bd8796663f2f466bd8e77ba1bc192229d27205f92cd', '2009-09-09 06:36:42', 'subscriber', 'ClBENiw1X02mldfxDMtS', '3eca69afc7134c5f02e4e56066273b595c46f03acb6e32dad74415fcef78d65396a94af4d8f3842bfe5da54ba60aa44a6292c47c4b24c041af3dd423e6c3a323', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:42', '2009-09-09 06:36:42', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:42', NULL, NULL, NULL, '2009-09-09 06:36:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:42', "created_at" = '2009-09-09 06:36:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.4ms)
Completed in 8ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (8.4ms)
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 11, DB: 2) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '74a4ad839c94f6ad8d63c24927dfdde2979cc834d1c36f44d5a72cf82b9b423e7bb7ea8fa6909393270a06ae180ceb877d2981a9c9e9082754028c14bc3331ec') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:43', '28f5887c143a322299b1db5eee2419489fb04240ceb3c4641436d0ee07e3c8d8666c726f098f396fd019186ec22bfd4dac764cf142d545cc8ad66bea0a1726fd', '2009-09-09 06:36:43', 'subscriber', 'mu7DPtIDS3h5nJy64_9Z', '74a4ad839c94f6ad8d63c24927dfdde2979cc834d1c36f44d5a72cf82b9b423e7bb7ea8fa6909393270a06ae180ceb877d2981a9c9e9082754028c14bc3331ec', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:43', '2009-09-09 06:36:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:43', NULL, NULL, NULL, '2009-09-09 06:36:43', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:43', "created_at" = '2009-09-09 06:36:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 17ms (View: 8, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '4d914801896f15136d3c876b159ab972885be97cde138114e1150ba49b1614b802684b1b37b90559416196ba3682b1c1cb0672cd7b6054ae2dc3c2513a5421ce') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:43', 'ada391853bfab9d5a8ac75df0c1aedbbf9d3f9cbda9d7409050bbeee3fd04896db361f6df41a69006e791d6830bfdabba0e82659768cfe9400702d5d3923e4e3', '2009-09-09 06:36:43', 'subscriber', 'NeqhgF4RN_2bHAxadiYQ', '4d914801896f15136d3c876b159ab972885be97cde138114e1150ba49b1614b802684b1b37b90559416196ba3682b1c1cb0672cd7b6054ae2dc3c2513a5421ce', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:43', '2009-09-09 06:36:43', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (12.8ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:43', NULL, NULL, NULL, '2009-09-09 06:36:43', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.5ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:43', "created_at" = '2009-09-09 06:36:43', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:43', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:43', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.1ms)
Completed in 6ms (View: 6, DB: 16) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 13ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (15.2ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.9ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 47ms (View: 19, DB: 18) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '232ce87600d94d0b528a99e2f92d21e2a44f9a3dc26e5000cd622697a8a53585e886f60633d047c7a78ef8c4730c5bd0c42a7df05d90784627b7eac952515389') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.9ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:44', '622c40f5e1543f82b3a3689db85e161c5c048be137d7ebba21994eeccaf0f8e87ea0886ba8e5ef497667025d6f0e04cecd3343c8a1476e074653c3ff43068ce6', '2009-09-09 06:36:44', 'subscriber', '7o893_CICFx9tF2Piav1', '232ce87600d94d0b528a99e2f92d21e2a44f9a3dc26e5000cd622697a8a53585e886f60633d047c7a78ef8c4730c5bd0c42a7df05d90784627b7eac952515389', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:44', '2009-09-09 06:36:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:44', NULL, NULL, NULL, '2009-09-09 06:36:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "created_at" = '2009-09-09 06:36:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "next_renewal_on" = '2009-09-12' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.5ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (4.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 31ms (DB: 6) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.6ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.6ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 227ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3fe3eeaf323eb2089a65d604faa4dd298f93f14c71a1458185a260c2d6f2d9aa1530fff268e5ce7d5ec71ec8a63ec16fe3f86b0e5a45b2fe8888812a8988bf07') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:44', '2e772de971a4c6e342898ff33254f2fbe50bc8f8a1b128fb7a32025b2a8633c05a65df48e0bb62f53380bc1a436dd7e833b224cb86709a551a260205f5c55436', '2009-09-09 06:36:44', 'subscriber', 'ul-QpzeNYnenXOYW7_ux', '3fe3eeaf323eb2089a65d604faa4dd298f93f14c71a1458185a260c2d6f2d9aa1530fff268e5ce7d5ec71ec8a63ec16fe3f86b0e5a45b2fe8888812a8988bf07', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:44', '2009-09-09 06:36:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:44', NULL, NULL, NULL, '2009-09-09 06:36:44', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.5ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "created_at" = '2009-09-09 06:36:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:44) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '857f92397d8e31a00d045a84212201011cabbf8bd169812c920dc70b5ea7151d5402014c06af94ac2afe55bf56f6840b96711564b3691e955c8716e7dddd6e37') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:44', '73f6482cb52d7ac186b6081e083107eae8770ce252f61d219541f1862e9d19ade0c516d30a71f4fd5c755139b381aa61f76a93cea7b5954c567b12515781874b', '2009-09-09 06:36:44', 'subscriber', 'KoXeG0tgD2jgjKlMjJWm', '857f92397d8e31a00d045a84212201011cabbf8bd169812c920dc70b5ea7151d5402014c06af94ac2afe55bf56f6840b96711564b3691e955c8716e7dddd6e37', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:44', '2009-09-09 06:36:44', 1, 'User', NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:44', NULL, NULL, NULL, '2009-09-09 06:36:44', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "created_at" = '2009-09-09 06:36:44', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-09', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:44', "next_renewal_on" = '2009-09-06' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-09 06:36:44', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (4.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.7ms)
Completed in 17ms (View: 10, DB: 4) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-09 02:36:45) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '1dbae6c4c48c485b8a54957e31cf51bd1b2c9656e40aa431a97e0bf66242a7c0cf5d1c0a88b39a0a259fa456a702ac3bbd1581967914928d66e5e3c9f73763db') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:45', 'e313da56b2a657e6f4209ddac71002414bfb281e932dca4991a5224cfb7acdc6df21fe863439a726b518ea14391ab32ab4e3938ccaebec82fdd14cca86957bb4', '2009-09-09 06:36:45', 'subscriber', 'C89UivWJlIknzyaj97H5', '1dbae6c4c48c485b8a54957e31cf51bd1b2c9656e40aa431a97e0bf66242a7c0cf5d1c0a88b39a0a259fa456a702ac3bbd1581967914928d66e5e3c9f73763db', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:45', '2009-09-09 06:36:45', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:45', NULL, NULL, NULL, '2009-09-09 06:36:45', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:45', "created_at" = '2009-09-09 06:36:45', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 156ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '1dbae6c4c48c485b8a54957e31cf51bd1b2c9656e40aa431a97e0bf66242a7c0cf5d1c0a88b39a0a259fa456a702ac3bbd1581967914928d66e5e3c9f73763db') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 10ms (View: 6, DB: 1) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '903c051bf529b9b03251b0dc89aee72ce3b56e7fbf4ceb4f5369c256dc74849c51b7ae1acef463823fb9b1602b167ec4d578af4a039bdc69e6f9c11c5ab77254') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:45', '596837216c93d76cfa04e76a32b79d426bdf26ce59276fe5be3ceacc5a82833e206d2aeb36ccdfae5e99bdbbaea1c369e1a0d6762ecd929bb91fbbeec2eb571a', '2009-09-09 06:36:45', 'subscriber', 'EVXGS89UBUqqPU4Z_gDo', '903c051bf529b9b03251b0dc89aee72ce3b56e7fbf4ceb4f5369c256dc74849c51b7ae1acef463823fb9b1602b167ec4d578af4a039bdc69e6f9c11c5ab77254', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:45', '2009-09-09 06:36:45', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:45', NULL, NULL, NULL, '2009-09-09 06:36:45', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:45', "created_at" = '2009-09-09 06:36:45', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '624927f67d612cb323038b793d338b83f3957b39d3d98c65f39ee6f33a7b518ff0076d962d893281d7ce3ba39d921dc7b56c974650e728b9228684d463abb614') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-09 06:36:45', '6ed74f9e76a8d8b1a76cfd3e3d98c578c092f3e8efbe33961d83321d6e78b0256f33f88dc1115af64b77882acd7188f193381d22cf9eef3fd117d877c4187e3d', '2009-09-09 06:36:45', 'subscriber', 'CSUeGinv2BZGH23QCjPY', '624927f67d612cb323038b793d338b83f3957b39d3d98c65f39ee6f33a7b518ff0076d962d893281d7ce3ba39d921dc7b56c974650e728b9228684d463abb614', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-09 06:36:45', '2009-09-09 06:36:45', 1, 'User', NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-09 06:36:45', NULL, NULL, NULL, '2009-09-09 06:36:45', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-09 06:36:45', "created_at" = '2009-09-09 06:36:45', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 4, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-09 02:36:45) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.2ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-09 02:36:45) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-09 06:36:45', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 1) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-09 02:36:45) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mSubscriptionPlan Create (0.8ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('free', '2009-09-10 22:33:32', 0, '2009-09-10 22:33:32', 1, NULL)[0m
  [4;35;1mSubscriptionPlan Create (0.5ms)[0m   [0mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('basic', '2009-09-10 22:33:32', 1000, '2009-09-10 22:33:32', 1, 'f')[0m
  [4;36;1mSubscriptionPlan Create (0.5ms)[0m   [0;1mINSERT INTO "subscription_plans" ("name", "created_at", "rate_cents", "updated_at", "interval", "info_create_edit") VALUES('pro', '2009-09-10 22:33:32', 30000, '2009-09-10 22:33:32', 12, 't')[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (1.0ms)
Completed in 13ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:32) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-10 18:33:32) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
Redirected to http://www.example.com/login
Filter chain halted as [:login_required] rendered_or_redirected.
Completed in 3ms (DB: 0) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/login with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 11ms (View: 8, DB: 0) | 200 OK [http://www.example.com/login]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b44880883127f818c2cd0b55b2ffa0f60b3da9deb945b70a9549c6905204cebdee449f997a351194752fd5c4854c555864cceb8fe6c04ae5257d4897554f43e6') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:32', 'bd62412b307a5d60cc75880d605173ce290e90a2853b72b4150647a48fdc417b830a5d72e2ffa631db2b47a2e34ee16c648acdb97941a08791cab66e2fbcc49f', '2009-09-10 22:33:32', 'subscriber', 'qYoUSdDHQlQNaEfRegxa', 'b44880883127f818c2cd0b55b2ffa0f60b3da9deb945b70a9549c6905204cebdee449f997a351194752fd5c4854c555864cceb8fe6c04ae5257d4897554f43e6', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:32', '2009-09-10 22:33:32', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:32', NULL, NULL, NULL, '2009-09-10 22:33:32', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:32', "created_at" = '2009-09-10 22:33:32', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:32) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (3.1ms)
Completed in 7ms (View: 6, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:32) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '346adf92f4c941106afd52abd68278cb2bcf5ad053f62065588639dd83bdbd5859976d3d56959553cdf1bbd539d74c8ee744b116a10628ee9529a4a8a9715995') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:33', 'e9b09b1eb9b213efd460786c7fce32f9da950c8d760e27eb90c5e0ff1769c7019b732371480d5192718084985fb302145d2f8bedfc6515bf84e8c842deb3a73d', '2009-09-10 22:33:33', 'subscriber', 'RbmDok9lM4TMvXl2r9c6', '346adf92f4c941106afd52abd68278cb2bcf5ad053f62065588639dd83bdbd5859976d3d56959553cdf1bbd539d74c8ee744b116a10628ee9529a4a8a9715995', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:33', '2009-09-10 22:33:33', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:33', NULL, NULL, NULL, '2009-09-10 22:33:33', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:33', "created_at" = '2009-09-10 22:33:33', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /infos/new with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#new (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"infos"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering infos/new
Rendered infos/_form (3.9ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 8, DB: 0) | 200 OK [http://www.example.com/infos/new]
REQUESTING PAGE: POST /infos with {"commit"=>"Submit", "info"=>{"body"=>"body 1", "title"=>"title 1"}} and HTTP headers {"HTTP_REFERER"=>"/infos/new"}


Processing InfosController#create (for 127.0.0.1 at 2009-09-10 18:33:33) [POST]
  Parameters: {"commit"=>"Submit", "action"=>"create", "info"=>{"title"=>"title 1", "body"=>"body 1"}, "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-10 22:33:33', 'title 1', 'body 1', '2009-09-10 22:33:33')[0m
Redirected to http://www.example.com/infos/1
Completed in 7ms (DB: 1) | 302 Found [http://www.example.com/infos]
REQUESTING PAGE: GET http://www.example.com/infos/1 with {} and HTTP headers {"HTTP_REFERER"=>"/infos"}


Processing InfosController#show (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"infos"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.3ms)[0m   [0mSELECT * FROM "infos" WHERE ("infos"."id" = 1) [0m
Rendering template within layouts/application
Rendering infos/show
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 4, DB: 1) | 200 OK [http://www.example.com/infos/1]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3547f58fbbc2b75ce779a13b6c70a8182b8cbd6c2c955e7b1f375db7c1ba4272319543731bd0b247f44de3ce0d676b804791dd64a0d4a152e754d3e7e276b1a4') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:33', 'aa6de9dc427b96e82ca56c55f6b462661f418e209c0d7c008fe868bb04bcaa41c0a434d33173e2063bc9ed157f2c6e5fbb9b9df350abc8cbfc5949cb3050aa6c', '2009-09-10 22:33:33', 'subscriber', 'uTmUIOitF1Fe7q1zp6vl', '3547f58fbbc2b75ce779a13b6c70a8182b8cbd6c2c955e7b1f375db7c1ba4272319543731bd0b247f44de3ce0d676b804791dd64a0d4a152e754d3e7e276b1a4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:33', '2009-09-10 22:33:33', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:33', NULL, NULL, NULL, '2009-09-10 22:33:33', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:33', "created_at" = '2009-09-10 22:33:33', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 11ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 6ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-10 22:33:33', 'title 1', 'body 1', '2009-09-10 22:33:33')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-10 22:33:33', 'title 2', 'body 2', '2009-09-10 22:33:33')[0m
  [4;35;1mInfo Create (0.2ms)[0m   [0mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-10 22:33:33', 'title 3', 'body 3', '2009-09-10 22:33:33')[0m
  [4;36;1mInfo Create (0.1ms)[0m   [0;1mINSERT INTO "infos" ("created_at", "title", "body", "updated_at") VALUES('2009-09-10 22:33:33', 'title 4', 'body 4', '2009-09-10 22:33:33')[0m
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.5ms)[0m   [0;1mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 2) | 200 OK [http://www.example.com/infos]
REQUESTING PAGE: DELETE /infos/3 with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/infos"}


Processing InfosController#destroy (for 127.0.0.1 at 2009-09-10 18:33:33) [DELETE]
  Parameters: {"action"=>"destroy", "id"=>"3", "controller"=>"infos"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mInfo Load (0.3ms)[0m   [0;1mSELECT * FROM "infos" WHERE ("infos"."id" = 3) [0m
  [4;35;1mInfo Destroy (0.2ms)[0m   [0mDELETE FROM "infos" WHERE "id" = 3[0m
Redirected to http://www.example.com/infos
Completed in 6ms (DB: 1) | 302 Found [http://www.example.com/infos/3]
REQUESTING PAGE: GET http://www.example.com/infos with {} and HTTP headers {"HTTP_REFERER"=>"/infos/3"}


Processing InfosController#index (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"index", "controller"=>"infos"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mInfo Load (0.5ms)[0m   [0mSELECT * FROM "infos" [0m
Rendering template within layouts/application
Rendering infos/index
Rendered layouts/_user_nav (0.4ms)
Completed in 10ms (View: 5, DB: 1) | 200 OK [http://www.example.com/infos]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '58568780b5186ee496f8ef2898213714fccd08ef6ce59e66d3cca1be852e9452d193886779eceb22dd9f3f87f31a6ebc8663993398ed023783837f6f01a3285f') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:33', '99615385578fb8fcbf1ea447a889f0659c5f915632070da2f9cdab3794a44b2693975bda8dcf2074ca19fad5e72e774874c832514497505ec4b67f9a314cdc24', '2009-09-10 22:33:33', 'subscriber', '-aMRy6iy4LCN8aUKotYI', '58568780b5186ee496f8ef2898213714fccd08ef6ce59e66d3cca1be852e9452d193886779eceb22dd9f3f87f31a6ebc8663993398ed023783837f6f01a3285f', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:33', '2009-09-10 22:33:33', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.1ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:33', NULL, NULL, NULL, '2009-09-10 22:33:33', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:33', "created_at" = '2009-09-10 22:33:33', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:33', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 3) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:33) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 22ms (View: 12, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:33) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 20ms (View: 13, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:34) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-10 22:33:34', '2009-09-10 22:33:34', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:34', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 24ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 32ms (View: 25, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'd26aeafa281581f39a78d5352ae5602c4208a4e630a9c7e6d8d30d6f0e2464ae16911863a2d3e8dc4b6377e15fdee16c0b03723954b0d7ef29c0793eb2f9a63a') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (61.4ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:34', 'fb076bf021e9a65c5f0b5456204f4b356c1b0110634dcaa0e362e7f39e38251c9d0b2fd38145c359eb8efbaa6903eff3c362201eefad2327f9b41a27f7a5b34d', '2009-09-10 22:33:34', 'subscriber', '1rTKL2i8Obzi8uBZI98Z', 'd26aeafa281581f39a78d5352ae5602c4208a4e630a9c7e6d8d30d6f0e2464ae16911863a2d3e8dc4b6377e15fdee16c0b03723954b0d7ef29c0793eb2f9a63a', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:34', '2009-09-10 22:33:34', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:34', NULL, NULL, NULL, '2009-09-10 22:33:34', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:34', "created_at" = '2009-09-10 22:33:34', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:34', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:34) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 66) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:34) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:34) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:34) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:34) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>""}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:34) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.8ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 182ms (View: 168, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (1.0ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.4ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '6c36639ab478fd809f474a7b723554c76e4d50513758959966f021cd59d02daa686aeec94c8b5e239d7d0282c20a26d525d11636695fef02d56b36cc5f27f403') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (74.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:35', '295078ea9d3c3bb190e76f51738f787b9556af91f8735f5b2b727004f5c5a99cc747dc9c453b2d2ecdc71db9972e2dca371903dbb07376f140781ef133110083', '2009-09-10 22:33:35', 'subscriber', 'TyKgJVvE-_OSxGFFw4gI', '6c36639ab478fd809f474a7b723554c76e4d50513758959966f021cd59d02daa686aeec94c8b5e239d7d0282c20a26d525d11636695fef02d56b36cc5f27f403', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:35', '2009-09-10 22:33:35', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.6ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:35', NULL, NULL, NULL, '2009-09-10 22:33:35', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:35', "created_at" = '2009-09-10 22:33:35', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:35', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:35) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.5ms)
Completed in 10ms (View: 9, DB: 79) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:35) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 33ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:35) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 8ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:35) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:35) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 34ms (View: 25, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"2", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:35) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-10 22:33:35', '2009-09-10 22:33:35', NULL, 'store', 1, 'f', '--- 
billingid: 
error: "Bogus Gateway: Forced failure"
', 'Bogus Gateway: Forced failure', 't')[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 36ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/store_credit_card]
  [4;35;1mSubscriptionPlan Load (0.7ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '378e2a3298083fe97a5c6f79cbfcb1aaa36f1aa1cf8d8f2b6de938a31625a34b5e21822c1fb8ba5d1d71c5e351eba43c0abb3679369b49df3d38e3663026d2b7') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:36', 'ea22fcec8e9de090f966638b18996359e439511f65ee6a87bdaa281d93af0e96625b33a6a5bebb4a9a076d97b2303edf1ba22cadb17fbbcb9bdf0a8a38273ffc', '2009-09-10 22:33:36', 'subscriber', 'v8rYGTDHR2Wmp0xw6q2a', '378e2a3298083fe97a5c6f79cbfcb1aaa36f1aa1cf8d8f2b6de938a31625a34b5e21822c1fb8ba5d1d71c5e351eba43c0abb3679369b49df3d38e3663026d2b7', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:36', '2009-09-10 22:33:36', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.3ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:36', NULL, NULL, NULL, '2009-09-10 22:33:36', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:36', "created_at" = '2009-09-10 22:33:36', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:36', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.3ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:36', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (4.5ms)
Completed in 21ms (View: 20, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (1.1ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 17ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (1.4ms)
Completed in 12ms (View: 10, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.8ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 18ms (View: 9, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:36) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (1.8ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.3ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-10 22:33:36', '2009-09-10 22:33:36', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-10 22:33:36', '2009-09-10 22:33:36', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:36', "card_expires_on" = '2012-11-30', "profile_key" = '53433' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 31ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 10, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'dfe46367d791e5ae097b618f1cb0aafacde9b450e8f4b80f747a013d0a0448ef4abae5ecc6707a825ed5d54793456d416552192d9a1c8b86fd89f1820ebe4683') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:36', '3ac59dc1a7eb2ef6e176efba54cd9ca6299188d45ded9ed4f7af2c41d61bf0b3eaf2d9b9a916a76a9b351bc3e887c5231876e84ca8c4df18cd7f88f4706a6fbd', '2009-09-10 22:33:36', 'subscriber', 'kKGc3h_cSC5ouMKzTALQ', 'dfe46367d791e5ae097b618f1cb0aafacde9b450e8f4b80f747a013d0a0448ef4abae5ecc6707a825ed5d54793456d416552192d9a1c8b86fd89f1820ebe4683', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:36', '2009-09-10 22:33:36', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:36', NULL, NULL, NULL, '2009-09-10 22:33:36', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (1.0ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:36', "created_at" = '2009-09-10 22:33:36', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:36', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:36', "next_renewal_on" = '2009-09-07' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 6) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:36) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:36) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 53ms (View: 13, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:37) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;36;1mSubscriptionTransaction Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-10 22:33:37', '2009-09-10 22:33:37', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:37', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-10 22:33:37', '2009-09-10 22:33:37', 1000, 'charge', 1, 't', '--- 
authorized_amount: "10.00"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:37', "state" = 'authorized' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:37', "state" = 'active', "next_renewal_on" = '2009-10-07' WHERE "id" = 1[0m
  [4;36;1mSubscriptionTransaction Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 401ms (DB: 4) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (2.3ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.5ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 18ms (View: 9, DB: 4) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.7ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.6ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9b6c1237d0da2b8a81089050a95786b45dc5a4e51088ab161d6eeebc6f17f99c302d55958a94b3ecbdce8e55c51eb1512887d494c47897182f36c81642e9084e') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:37', '1194d62237b69060336d269659f668e1331752c25b3581ec55026e768628b99fa54a4029a430ea32db5eafbe32ae69d0d1086a32f31026651f09f198233b93a1', '2009-09-10 22:33:37', 'subscriber', '0BT4np_n3vh0Ff6FyBhy', '9b6c1237d0da2b8a81089050a95786b45dc5a4e51088ab161d6eeebc6f17f99c302d55958a94b3ecbdce8e55c51eb1512887d494c47897182f36c81642e9084e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:37', '2009-09-10 22:33:37', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:37', NULL, NULL, NULL, '2009-09-10 22:33:37', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:37', "created_at" = '2009-09-10 22:33:37', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:37', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.5ms)
Completed in 5ms (View: 4, DB: 7) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:37) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (1.1ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 19ms (DB: 3) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.5ms)
Completed in 18ms (View: 12, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"10", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:37) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-10 22:33:37', '2009-09-10 22:33:37', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:37', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = '53433', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.4ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/credit_card with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#credit_card (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/credit_card
Rendered layouts/_user_nav (0.4ms)
Completed in 17ms (View: 10, DB: 1) | 200 OK [http://www.example.com/subscriptions/current/credit_card]
REQUESTING PAGE: POST /subscriptions/current/store_credit_card with {"commit"=>"Submit", "profile"=>{"credit_card"=>{"number"=>"1", "month"=>"11", "type"=>"bogus", "year"=>"2012", "last_name"=>"Last Name", "verification_value"=>"999", "first_name"=>"First Name"}}} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/credit_card"}


Processing SubscriptionsController#store_credit_card (for 127.0.0.1 at 2009-09-10 18:33:37) [POST]
  Parameters: {"commit"=>"Submit", "profile"=>{"credit_card"=>"[FILTERED]"}, "action"=>"store_credit_card", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions"."id" = 1) [0m
  [4;35;1mSubscriptionTransaction Create (0.2ms)[0m   [0mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES(NULL, '2009-09-10 22:33:37', '2009-09-10 22:33:37', NULL, 'unstore', 1, 'f', '--- {}

', 'Bogus Gateway: Use trans_id 1 for success, 2 for exception and anything else for error', 't')[0m
  [4;36;1mSubscriptionTransaction Create (0.2ms)[0m   [0;1mINSERT INTO "subscription_transactions" ("reference", "created_at", "updated_at", "amount_cents", "action", "subscription_id", "success", "params", "message", "test") VALUES('53433', '2009-09-10 22:33:37', '2009-09-10 22:33:37', NULL, 'store', 1, 't', '--- 
billingid: "1"
', 'Bogus Gateway: Forced success', 't')[0m
  [4;35;1mSubscriptionProfile Update (5.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:37', "card_expires_on" = '2012-11-30' WHERE "id" = 1[0m
Redirected to http://www.example.com/subscriptions/current
Completed in 36ms (DB: 8) | 302 Found [http://www.example.com/subscriptions/current/store_credit_card]
REQUESTING PAGE: GET http://www.example.com/subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/subscriptions/current/store_credit_card"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:37) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 155ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET /subscriptions/current/history with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/subscriptions/current"}


Processing SubscriptionsController#history (for 127.0.0.1 at 2009-09-10 18:33:38) [GET]
  Parameters: {"action"=>"history", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/history
  [4;35;1mSubscriptionTransaction Load (0.8ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 6, DB: 2) | 200 OK [http://www.example.com/subscriptions/current/history]
  [4;36;1mSubscriptionPlan Load (1.1ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '21b9fa417dd8b52146bfbbfae8826f9240cc3334bbc344534f677755afbaf867d33924bc68529696e642e2755920667eeef680760bd5b453b72e8e403c21607c') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:38', '1ea5c1027f57847af8745bc278788c7848e7361d3603ad741162f342ed5a54c4abbec7bad47550604361026652461daefa73ad47296adfc778f3c86dde5a44f1', '2009-09-10 22:33:38', 'subscriber', 'yog_GKryaCYrig7VbN4C', '21b9fa417dd8b52146bfbbfae8826f9240cc3334bbc344534f677755afbaf867d33924bc68529696e642e2755920667eeef680760bd5b453b72e8e403c21607c', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:38', '2009-09-10 22:33:38', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.5ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:38', NULL, NULL, NULL, '2009-09-10 22:33:38', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "created_at" = '2009-09-10 22:33:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '494757acf1e3af4ef507a68c7ea9ccd91966f983b75f804aac53b0c65059419f5cbe9635b1757dd776a29b67ed9ff882472f84c3262c64beb5b2b1c9fb7353bf') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '21b9fa417dd8b52146bfbbfae8826f9240cc3334bbc344534f677755afbaf867d33924bc68529696e642e2755920667eeef680760bd5b453b72e8e403c21607c') LIMIT 1[0m
  [4;36;1mUser Create (11.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:38', 'd03f7179eb0a461cc7a33d982dd3285fd380f472a44da8b764f9b331757dec35be668dfe7aac743d7f6963438960255177e88b7a0ea8f68d93104cc5fdb1a188', '2009-09-10 22:33:38', 'subscriber', 'wDGPzTx6_RJZRMCXFW5b', '494757acf1e3af4ef507a68c7ea9ccd91966f983b75f804aac53b0c65059419f5cbe9635b1757dd776a29b67ed9ff882472f84c3262c64beb5b2b1c9fb7353bf', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:38', '2009-09-10 22:33:38', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:38', NULL, NULL, NULL, '2009-09-10 22:33:38', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "created_at" = '2009-09-10 22:33:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:38', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '45562fef9da921ecb132fc3b3f42527b63be2f2d529557772c1c4c045134efe7bad231506126d09bcd09b32091e366c91208cac6e1e96864469da7972b5d694d') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '494757acf1e3af4ef507a68c7ea9ccd91966f983b75f804aac53b0c65059419f5cbe9635b1757dd776a29b67ed9ff882472f84c3262c64beb5b2b1c9fb7353bf') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:38', '9fc220c2d739e6b725884bedc53905b243ae996f0162275d3b572fc590b4e548298b5df9856348ee6b78e6d6c54429577ae3021dc7822bd2cfb4a3c5473864da', '2009-09-10 22:33:38', 'subscriber', 'SAD7juE2F2k51WTlEZI4', '45562fef9da921ecb132fc3b3f42527b63be2f2d529557772c1c4c045134efe7bad231506126d09bcd09b32091e366c91208cac6e1e96864469da7972b5d694d', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:38', '2009-09-10 22:33:38', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:38', NULL, NULL, NULL, '2009-09-10 22:33:38', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "created_at" = '2009-09-10 22:33:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscriptionPlan Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '01316c6921029eaca0c0612e4631bf77e7c8a2654ef854f35608862aad2ba837845e110741f72c001e0443133a9799f82ebee337f3528c70859925532fa36ae5') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."persistence_token" = '45562fef9da921ecb132fc3b3f42527b63be2f2d529557772c1c4c045134efe7bad231506126d09bcd09b32091e366c91208cac6e1e96864469da7972b5d694d') LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:38', '0fc209c4203c087326f18f96cdf5d702593722e22ac1a03e36c529c833f3b5ced314771d1533976bf68372967924c2d15364d0c1a204c8ca4d884d8083f0d202', '2009-09-10 22:33:38', 'subscriber', 'hqA9hZNa_0vwCjJwseZQ', '01316c6921029eaca0c0612e4631bf77e7c8a2654ef854f35608862aad2ba837845e110741f72c001e0443133a9799f82ebee337f3528c70859925532fa36ae5', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:38', '2009-09-10 22:33:38', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:38', NULL, NULL, NULL, '2009-09-10 22:33:38', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "created_at" = '2009-09-10 22:33:38', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:38', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.3ms)
Completed in 4ms (View: 4, DB: 26) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-10 18:33:38) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.3ms)
Completed in 16ms (View: 10, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-10 18:33:38) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'caa5e769a092f8aab057f57b58fc7ed76376ba05a2aea7ced99302f02ff8a9cd2a510eb98d7caef5d8d8ac4bfaf664be42fd890aafd3b827f8930e3d36bdd4e4') LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:38', '5c6e94fb09fc35526e3d5402a7bdd92fd7b1551129d8c6c4b8a601a93cca8683413ea117cc6ead6939d6cb9628d8cdbb400c9f061331525405aa5d115d549088', '2009-09-10 22:33:38', 'subscriber', 'uNkti8U0Gmuwj62A5SFT', 'caa5e769a092f8aab057f57b58fc7ed76376ba05a2aea7ced99302f02ff8a9cd2a510eb98d7caef5d8d8ac4bfaf664be42fd890aafd3b827f8930e3d36bdd4e4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:38', '2009-09-10 22:33:38', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:38', NULL, NULL, NULL, '2009-09-10 22:33:38', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.3ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:38', "created_at" = '2009-09-10 22:33:38', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 33ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:38) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'caa5e769a092f8aab057f57b58fc7ed76376ba05a2aea7ced99302f02ff8a9cd2a510eb98d7caef5d8d8ac4bfaf664be42fd890aafd3b827f8930e3d36bdd4e4') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 11ms (View: 10, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 4, DB: 3) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.1ms)
Completed in 12ms (View: 10, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"2", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-10 18:33:39) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"2", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '9a8c01e675e11916b35101bb0603785a8f5e078e2473fe036b658bbc8a92eb1690523eb702b8e81d0912df1e65ef0e236fc163a284f1045824f0f604425f0456') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:39', 'ef3de8ca802ddb8e19dad3f87514ccbb48654fe1a381e66ab19caeca7215e0ce3ee6cf925677f0f46d7d47beb86ece2925d9396051e40e665ba0aff360dc1c60', '2009-09-10 22:33:39', 'subscriber', 'uf25tuL7Y50c9TdiOs1-', '9a8c01e675e11916b35101bb0603785a8f5e078e2473fe036b658bbc8a92eb1690523eb702b8e81d0912df1e65ef0e236fc163a284f1045824f0f604425f0456', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:39', '2009-09-10 22:33:39', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:39', NULL, NULL, NULL, '2009-09-10 22:33:39', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:39', "created_at" = '2009-09-10 22:33:39', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 34ms (DB: 3) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '9a8c01e675e11916b35101bb0603785a8f5e078e2473fe036b658bbc8a92eb1690523eb702b8e81d0912df1e65ef0e236fc163a284f1045824f0f604425f0456') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.8ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 4) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (2.2ms)
Completed in 9ms (View: 7, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"3", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-10 18:33:39) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"3", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '78859007d651eca91b3d3c014aeb56ad69c2087e11162a2fdf0aecdea97f35062eb2793a2d54e973b98b22ef49077b28a8b5172b37396c22e0fed66662ac6cee') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:39', 'cba616adee1092b5e205e51e66062a85a0751c4f089b38f0cc73f221a171639d5059dab9b26d37540c57508ee628e63db72db3a44c545bb33589292e72d2da67', '2009-09-10 22:33:39', 'subscriber', 'aNQX-BwHL1ul8W_dPr64', '78859007d651eca91b3d3c014aeb56ad69c2087e11162a2fdf0aecdea97f35062eb2793a2d54e973b98b22ef49077b28a8b5172b37396c22e0fed66662ac6cee', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:39', '2009-09-10 22:33:39', 1, 'User', 0, NULL, NULL, 3, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:39', NULL, NULL, NULL, '2009-09-10 22:33:39', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:39', "created_at" = '2009-09-10 22:33:39', "plan_id" = 3, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 27ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '78859007d651eca91b3d3c014aeb56ad69c2087e11162a2fdf0aecdea97f35062eb2793a2d54e973b98b22ef49077b28a8b5172b37396c22e0fed66662ac6cee') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 138ms (View: 137, DB: 0) | 200 OK [http://www.example.com/]
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.3ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 3) [0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'free') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '5be3bedc5a6395eb013155c862692e47b2d1c138266995c4663b3653e325fc0b99d9caf41034efcc0161c7c80b919d30a10a44dabed2dacb1f234941ad290ca1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = '78859007d651eca91b3d3c014aeb56ad69c2087e11162a2fdf0aecdea97f35062eb2793a2d54e973b98b22ef49077b28a8b5172b37396c22e0fed66662ac6cee') LIMIT 1[0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (5.9ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:39', 'e5f701f37fa722a9daa8105cdc539260da28b681a172ca47703d677bb31cdf9b9abf797dc49f9b4b95e7bc1d684551c903307e4e3664ef4c833432a092879355', '2009-09-10 22:33:39', 'subscriber', 'wq6zSdJOmJ5eXQx5k1PU', '5be3bedc5a6395eb013155c862692e47b2d1c138266995c4663b3653e325fc0b99d9caf41034efcc0161c7c80b919d30a10a44dabed2dacb1f234941ad290ca1', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:39', '2009-09-10 22:33:39', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:39', NULL, NULL, NULL, '2009-09-10 22:33:39', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:39', "created_at" = '2009-09-10 22:33:39', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 5ms (View: 5, DB: 11) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:39) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (4.7ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 8, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:39) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.4ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.8ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.9ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'de2e3a2b444efc751a18487ed64a3a7546c1bfd87c7cc4e5677cbebfeb35c1f1d87d08417380282fa42180c0ce3c83bf2484e103ed1a77ada8e3fe84b9040cb5') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:39', 'fe9f3df02fc471c0ea42ee93bb8e205c5aff5e4693d110df8979aa2f4c76df0a0240dc196d717ca814d65460a292b065533570ae1fa943c05a00d520fa3ea3d1', '2009-09-10 22:33:39', 'subscriber', 'FUi7UrWXG8zJ_nec9_Gs', 'de2e3a2b444efc751a18487ed64a3a7546c1bfd87c7cc4e5677cbebfeb35c1f1d87d08417380282fa42180c0ce3c83bf2484e103ed1a77ada8e3fe84b9040cb5', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:39', '2009-09-10 22:33:39', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (1.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:39', NULL, NULL, NULL, '2009-09-10 22:33:39', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:39', "created_at" = '2009-09-10 22:33:39', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 6ms (View: 5, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 16ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
Rendered users/_sidebar (4.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 13ms (View: 7, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.9ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.7ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '3a2edd43aa9dfdafd21fa26935d8caabaf89e165ae0c022187e556aa77e3b9f475f8593c83c9be8d8009b7a2ec0a222540e3d006af182d523787a3ad3aaf2985') LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:40', 'eb588085b5c9e945e8283c4f697380a73beeadf1734ca3be41a198c08ca2f3bb751ae6ecd61db57e2bf11040c614b00332236197d53fd6cdb9c056f4ccb58cd4', '2009-09-10 22:33:40', 'subscriber', 'lOisvQ3eI1j329hNT_vv', '3a2edd43aa9dfdafd21fa26935d8caabaf89e165ae0c022187e556aa77e3b9f475f8593c83c9be8d8009b7a2ec0a222540e3d006af182d523787a3ad3aaf2985', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:40', '2009-09-10 22:33:40', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.3ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:40', NULL, NULL, NULL, '2009-09-10 22:33:40', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:40', "created_at" = '2009-09-10 22:33:40', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:40', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 8ms (View: 7, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:40) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.6ms)
Completed in 7ms (View: 6, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:40) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.6ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.6ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.3ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 31ms (View: 21, DB: 3) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (1.6ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '714754b8124eb657c3066da11a58d264444248df3b270f60e593e17fbb5a605e9b85b9e50beea2abcc0a1a943950594708eab621e5936fdf326cc1259eb31f27') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.6ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:41', '92f474328f0eb1a7691fdc7ab7965fc3edb04896633dd7797dd033c1c9686459666f4f7926f85bf969e254949efb1b6dbacf784de0301b9671f65133f75e123b', '2009-09-10 22:33:41', 'subscriber', '4IQEALDgwTzv4PbkP4mg', '714754b8124eb657c3066da11a58d264444248df3b270f60e593e17fbb5a605e9b85b9e50beea2abcc0a1a943950594708eab621e5936fdf326cc1259eb31f27', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:41', '2009-09-10 22:33:41', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:41', NULL, NULL, NULL, '2009-09-10 22:33:41', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "created_at" = '2009-09-10 22:33:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.2ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:41', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.0ms)
Completed in 7ms (View: 6, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 18ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 10ms (View: 9, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 29ms (View: 21, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (1.5ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'b7519303d46e65945e66a57a41e645ee67a374c9df1ae0fcb7edf1909436c065b3128c8a28798017434973f02a7b04afa08c27576f35faefb54c136750a1e7d4') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:41', '5a68fe232c1457f976e5b1d9d9e7a06e22ba21fd8fec5ba53bb6487bbe9442d4a3c6643e64546a749daed9c392fe04eec0459881c1456acd976c10a043b31b15', '2009-09-10 22:33:41', 'subscriber', 'ATQTsbYsDdKh-7CKVcZT', 'b7519303d46e65945e66a57a41e645ee67a374c9df1ae0fcb7edf1909436c065b3128c8a28798017434973f02a7b04afa08c27576f35faefb54c136750a1e7d4', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:41', '2009-09-10 22:33:41', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.4ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:41', NULL, NULL, NULL, '2009-09-10 22:33:41', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.4ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "created_at" = '2009-09-10 22:33:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "state" = 'active' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "next_renewal_on" = '2009-09-13' WHERE "id" = 1[0m
  [4;36;1mSubscriptionProfile Update (0.3ms)[0m   [0;1mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:41', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'authorized', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.4ms)
Completed in 6ms (View: 6, DB: 5) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:41) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (10.8ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 23ms (DB: 12) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionTransaction Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 16ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;35;1mSubscriptionPlan Load (0.6ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '372e5d2605e4f4bf7e5f02cd78b032328400cde10a874ca3a7695a00bf3a19e44bcca957f81439cee35b1252fb0f2b9f4f8e44b1631861293f95f73fb413e07e') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (10.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:41', 'e8a981d741a1ce36310b008a514feace7d2c4824cbc7bc025890e9d2e0c4e65a7d6dd1a9c7a2a17dc6e2605118802f97f55a46eec2bcdd21ae6b4199e7abb689', '2009-09-10 22:33:41', 'subscriber', 'j213Fj388QRe37bTQDPg', '372e5d2605e4f4bf7e5f02cd78b032328400cde10a874ca3a7695a00bf3a19e44bcca957f81439cee35b1252fb0f2b9f4f8e44b1631861293f95f73fb413e07e', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.3ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:41', '2009-09-10 22:33:41', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:41', NULL, NULL, NULL, '2009-09-10 22:33:41', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "created_at" = '2009-09-10 22:33:41', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "state" = 'past_due' WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:41', "next_renewal_on" = '2009-09-07' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:41) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (2.9ms)
Completed in 12ms (View: 8, DB: 14) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 20ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 1) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 15ms (View: 8, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
  [4;36;1mSubscriptionPlan Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."name" = 'basic') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '76fb0cdd33b7ba31c2c4a46499c1f2fd2cb4c855a48c04651cbf5d843e9f846740908e24de30fbfcc6f2b2f31101419acf806081eb8f81026bc57b1938fdd522') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mUser Create (0.7ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:42', '410433190a2f066baf5b3b073be5563789e16ae4a20fe9ad84e05eae59f1b0fd541645234128ab3f3631b428712291448d8e9a4e71affedc99b5208ae54ccc71', '2009-09-10 22:33:42', 'subscriber', 'BUs6bWt2oD59d49oycOA', '76fb0cdd33b7ba31c2c4a46499c1f2fd2cb4c855a48c04651cbf5d843e9f846740908e24de30fbfcc6f2b2f31101419acf806081eb8f81026bc57b1938fdd522', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.3ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:42', '2009-09-10 22:33:42', 1, 'User', 0, NULL, NULL, 2, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.4ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:42', NULL, NULL, NULL, '2009-09-10 22:33:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:42', "created_at" = '2009-09-10 22:33:42', "plan_id" = 2, "state" = 'trial', "subscriber_type" = 'User', "next_renewal_on" = '2009-10-10', "subscriber_id" = 1 WHERE "id" = 1[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:42', "state" = 'past_due' WHERE "id" = 1[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:42', "next_renewal_on" = '2009-09-07' WHERE "id" = 1[0m
  [4;35;1mSubscriptionProfile Update (0.2ms)[0m   [0mUPDATE "subscription_profiles" SET "updated_at" = '2009-09-10 22:33:42', "card_expires_on" = '2012-10-31', "card_last_name" = 'Last Name', "card_type" = 'bogus', "profile_key" = 'some key', "state" = 'error', "card_display_number" = 'XXXX-XXXX-XXXX-1', "card_first_name" = 'First Name' WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 4) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.5ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 30ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /subscriptions/current with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing SubscriptionsController#show (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"subscriptions"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
Rendering template within layouts/application
Rendering subscriptions/show
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 2) [0m
  [4;36;1mSubscriptionProfile Load (0.5ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionTransaction Load (0.2ms)[0m   [0mSELECT * FROM "subscription_transactions" WHERE ("subscription_transactions".subscription_id = 1) ORDER BY id DESC LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 7, DB: 2) | 200 OK [http://www.example.com/subscriptions/current]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 4ms (View: 3, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /signup with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#new (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSubscriptionPlan Load (0.8ms)[0m   [0;1mSELECT * FROM "subscription_plans" ORDER BY rate_cents[0m
Rendering template within layouts/application
Rendering users/new
Rendered layouts/_user_nav (1.8ms)
Completed in 21ms (View: 19, DB: 1) | 200 OK [http://www.example.com/signup]
REQUESTING PAGE: POST /users with {"commit"=>"Sign up", "user"=>{"password_confirmation"=>"secret", "subscription_plan"=>"1", "username"=>"subscriber", "password"=>"secret", "email"=>"subscriber@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/signup"}


Processing UsersController#create (for 127.0.0.1 at 2009-09-10 18:33:42) [POST]
  Parameters: {"commit"=>"Sign up", "action"=>"create", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "username"=>"subscriber", "subscription_plan"=>"1", "password"=>"[FILTERED]", "email"=>"subscriber@example.com"}}
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = 'a685e151bbf3db7ed0ad5e80aba469fe12f72956fad054e59db5f26da20edc8d79e1ca29d65c470968fe2c822a29aedf06c478cb3f7695ab1f4f3eeb0d60bb9c') LIMIT 1[0m
  [4;35;1mUser Create (0.5ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:42', '4de484fc4795c5b6687235f6b81d58f440b91db6fbbb725b956cbecbb182fd3d422cca23b94126ec7494da0ca67825b8ba10dadef41fe77a0b256a5f14341313', '2009-09-10 22:33:42', 'subscriber', 'viQf1gX7CWLCzxXgBC4r', 'a685e151bbf3db7ed0ad5e80aba469fe12f72956fad054e59db5f26da20edc8d79e1ca29d65c470968fe2c822a29aedf06c478cb3f7695ab1f4f3eeb0d60bb9c', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:42', '2009-09-10 22:33:42', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:42', NULL, NULL, NULL, '2009-09-10 22:33:42', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:42', "created_at" = '2009-09-10 22:33:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 43ms (DB: 2) | 302 Found [http://www.example.com/users]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."persistence_token" = 'a685e151bbf3db7ed0ad5e80aba469fe12f72956fad054e59db5f26da20edc8d79e1ca29d65c470968fe2c822a29aedf06c478cb3f7695ab1f4f3eeb0d60bb9c') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 5ms (View: 4, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.9ms)
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"wrong"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"noone", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'noone') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'noone') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.8ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/user_sessions]
  [4;35;1mUser Exists (0.3ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '8d111f62d91cca8391cd0fe15c5237abee5daecb3b81bdbcc3200fd0a365107635c30400df7c94c227aec2a76c1d22fc0e9134407261876c07671c8dcfd271ca') LIMIT 1[0m
  [4;36;1mUser Create (0.5ms)[0m   [0;1mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:42', 'a61a481eef12decc137e425e8cd233bb5bd527f350aadecbdff799b6d3d1f1bff6a59982e88d77c013a180489acc6674316b605cd1431604b36f90d7dc855432', '2009-09-10 22:33:42', 'subscriber', 'veGcK3TXnMxGtjqNdjkS', '8d111f62d91cca8391cd0fe15c5237abee5daecb3b81bdbcc3200fd0a365107635c30400df7c94c227aec2a76c1d22fc0e9134407261876c07671c8dcfd271ca', 'subscriber@example.com')[0m
  [4;35;1mSubscription Create (0.2ms)[0m   [0mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:42', '2009-09-10 22:33:42', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;36;1mSubscriptionProfile Load (0.2ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;35;1mSubscriptionProfile Create (0.3ms)[0m   [0mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:42', NULL, NULL, NULL, '2009-09-10 22:33:42', 1, NULL, NULL, 'no_info')[0m
  [4;36;1mSubscription Update (0.2ms)[0m   [0;1mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:42', "created_at" = '2009-09-10 22:33:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET / with {} and HTTP headers {}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
Rendered layouts/_user_nav (0.2ms)
Completed in 6ms (View: 6, DB: 2) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /login with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.7ms)
Completed in 5ms (View: 5, DB: 0) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:42) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;35;1mUser Load (2.3ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mSubscription Load (0.4ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionProfile Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 14ms (DB: 4) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 7, DB: 0) | 200 OK [http://www.example.com/]
  [4;36;1mUser Exists (0.3ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'subscriber@example.com') LIMIT 1[0m
  [4;35;1mUser Exists (0.1ms)[0m   [0mSELECT "users".id FROM "users" WHERE (LOWER("users"."username") = 'subscriber') LIMIT 1[0m
  [4;36;1mUser Exists (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."persistence_token" = '2ccad1080335ccc1b79e3d35591fdf82a6c931d86276b6fd6f61060b93bf86a1373452dde7d185bf68d532b5a1cf9546d26a8f45157c96e26ad9e41f79214f1b') LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;35;1mUser Create (0.6ms)[0m   [0mINSERT INTO "users" ("created_at", "crypted_password", "updated_at", "username", "password_salt", "persistence_token", "email") VALUES('2009-09-10 22:33:42', '41bd0a3de82e0af43d2be210b5714ef92de764d13bafa0fc263ab31a4578302fd0c03b2fdb5da28f04d518aac3cb9d20c5978de8af26b2961e7dad80794bad6c', '2009-09-10 22:33:42', 'subscriber', 'PMS-mqZgn3_1QS7ar2De', '2ccad1080335ccc1b79e3d35591fdf82a6c931d86276b6fd6f61060b93bf86a1373452dde7d185bf68d532b5a1cf9546d26a8f45157c96e26ad9e41f79214f1b', 'subscriber@example.com')[0m
  [4;36;1mSubscription Create (0.2ms)[0m   [0;1mINSERT INTO "subscriptions" ("warning_level", "created_at", "updated_at", "subscriber_id", "subscriber_type", "balance_cents", "info_create_edit", "next_renewal_on", "plan_id", "state") VALUES(NULL, '2009-09-10 22:33:42', '2009-09-10 22:33:42', 1, 'User', 0, NULL, NULL, 1, 'pending')[0m
  [4;35;1mSubscriptionProfile Load (0.2ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
  [4;36;1mSubscriptionProfile Create (0.3ms)[0m   [0;1mINSERT INTO "subscription_profiles" ("card_first_name", "created_at", "profile_key", "card_type", "card_display_number", "updated_at", "subscription_id", "card_expires_on", "card_last_name", "state") VALUES(NULL, '2009-09-10 22:33:42', NULL, NULL, NULL, '2009-09-10 22:33:42', 1, NULL, NULL, 'no_info')[0m
  [4;35;1mSubscription Update (0.2ms)[0m   [0mUPDATE "subscriptions" SET "updated_at" = '2009-09-10 22:33:42', "created_at" = '2009-09-10 22:33:42', "plan_id" = 1, "state" = 'free', "subscriber_type" = 'User', "subscriber_id" = 1 WHERE "id" = 1[0m
REQUESTING PAGE: GET /login with {} and HTTP headers {}


Processing UserSessionsController#new (for 127.0.0.1 at 2009-09-10 18:33:42) [GET]
  Parameters: {"action"=>"new", "controller"=>"user_sessions"}
Rendering template within layouts/application
Rendering user_sessions/new
Rendered layouts/_user_nav (1.6ms)
Completed in 7ms (View: 7, DB: 2) | 200 OK [http://www.example.com/login]
REQUESTING PAGE: POST /user_sessions with {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"secret"}} and HTTP headers {"HTTP_REFERER"=>"/login"}


Processing UserSessionsController#create (for 127.0.0.1 at 2009-09-10 18:33:43) [POST]
  Parameters: {"commit"=>"Log in", "user_session"=>{"username"=>"subscriber", "password"=>"[FILTERED]"}, "action"=>"create", "controller"=>"user_sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."username" = 'subscriber') LIMIT 1[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) LIMIT 1[0m
  [4;36;1mSubscription Load (0.5ms)[0m   [0;1mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;35;1mSubscriptionProfile Load (0.4ms)[0m   [0mSELECT * FROM "subscription_profiles" WHERE ("subscription_profiles".subscription_id = 1) LIMIT 1[0m
Redirected to http://www.example.com/
Completed in 12ms (DB: 2) | 302 Found [http://www.example.com/user_sessions]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/user_sessions"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.5ms)
Completed in 7ms (View: 6, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET / with {} and HTTP headers {"HTTP_REFERER"=>"http://www.example.com/"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.4ms)
Completed in 9ms (View: 8, DB: 0) | 200 OK [http://www.example.com/]
REQUESTING PAGE: GET /users/current with {} and HTTP headers {"HTTP_REFERER"=>"/"}


Processing UsersController#show (for 127.0.0.1 at 2009-09-10 18:33:43) [GET]
  Parameters: {"action"=>"show", "id"=>"current", "controller"=>"users"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/show
  [4;35;1mSubscription Load (0.5ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mSubscriptionPlan Load (0.4ms)[0m   [0;1mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
Rendered users/_sidebar (3.6ms)
Rendered layouts/_user_nav (0.4ms)
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://www.example.com/users/current]
REQUESTING PAGE: GET /users/1/edit with {} and HTTP headers {"HTTP_REFERER"=>"/users/current"}


Processing UsersController#edit (for 127.0.0.1 at 2009-09-10 18:33:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering users/edit
Rendered layouts/_user_nav (0.7ms)
Completed in 10ms (View: 6, DB: 0) | 200 OK [http://www.example.com/users/1/edit]
REQUESTING PAGE: POST /users/1 with {"commit"=>"Submit", "_method"=>"put", "user"=>{"password_confirmation"=>"", "password"=>"", "email"=>"changed@example.com"}} and HTTP headers {"HTTP_REFERER"=>"/users/1/edit"}


Processing UsersController#update (for 127.0.0.1 at 2009-09-10 18:33:43) [PUT]
  Parameters: {"commit"=>"Submit", "action"=>"update", "_method"=>"put", "id"=>"1", "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "password"=>"[FILTERED]", "email"=>"changed@example.com"}}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
  [4;35;1mSubscription Load (0.6ms)[0m   [0mSELECT * FROM "subscriptions" WHERE ("subscriptions".subscriber_id = 1 AND "subscriptions".subscriber_type = 'User') LIMIT 1[0m
  [4;36;1mUser Exists (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE (LOWER("users"."email") = 'changed@example.com' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mSubscriptionPlan Load (0.4ms)[0m   [0mSELECT * FROM "subscription_plans" WHERE ("subscription_plans"."id" = 1) [0m
  [4;36;1mUser Update (0.2ms)[0m   [0;1mUPDATE "users" SET "updated_at" = '2009-09-10 22:33:43', "email" = 'changed@example.com' WHERE "id" = 1[0m
Redirected to http://www.example.com/
Completed in 15ms (DB: 2) | 302 Found [http://www.example.com/users/1]
REQUESTING PAGE: GET http://www.example.com/ with {} and HTTP headers {"HTTP_REFERER"=>"/users/1"}


Processing InfosController#welcome (for 127.0.0.1 at 2009-09-10 18:33:43) [GET]
  Parameters: {"action"=>"welcome", "controller"=>"infos"}
Rendering template within layouts/application
Rendering infos/welcome
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = '1') LIMIT 1[0m
Rendered layouts/_user_nav (0.7ms)
Completed in 8ms (View: 7, DB: 1) | 200 OK [http://www.example.com/]
